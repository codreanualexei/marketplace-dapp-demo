{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useWallet}from'../contexts/WalletContext';import'./NetworkChecker.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AMOY_CHAIN_ID=80002;const AMOY_CHAIN_ID_HEX='0x13882';const NetworkChecker=()=>{const{chainId,account}=useWallet();const[showBanner,setShowBanner]=useState(false);useEffect(()=>{if(account&&chainId&&chainId!==AMOY_CHAIN_ID){setShowBanner(true);}else{setShowBanner(false);}},[chainId,account]);const switchToAmoy=async()=>{if(typeof window.ethereum==='undefined'){alert('Please install MetaMask');return;}try{// Try to switch to Amoy\nawait window.ethereum.request({method:'wallet_switchEthereumChain',params:[{chainId:AMOY_CHAIN_ID_HEX}]});}catch(switchError){// This error code indicates that the chain has not been added to MetaMask\nif(switchError.code===4902){try{await window.ethereum.request({method:'wallet_addEthereumChain',params:[{chainId:AMOY_CHAIN_ID_HEX,chainName:'Polygon Amoy Testnet',nativeCurrency:{name:'MATIC',symbol:'MATIC',decimals:18},rpcUrls:['https://rpc-amoy.polygon.technology'],blockExplorerUrls:['https://amoy.polygonscan.com/']}]});}catch(addError){console.error('Error adding network:',addError);alert('Failed to add Polygon Amoy network. Please add it manually.');}}else{console.error('Error switching network:',switchError);alert('Failed to switch network. Please switch manually in MetaMask.');}}};if(!showBanner){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"network-banner\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"network-banner-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"warning-icon\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"banner-text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Wrong Network!\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"You're on \",chainId?\"Chain ID \".concat(chainId):'wrong network',\". This marketplace requires \",/*#__PURE__*/_jsx(\"strong\",{children:\"Polygon Amoy (Chain ID: 80002)\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"switch-button\",onClick:switchToAmoy,children:\"Switch to Amoy\"})]})});};export default NetworkChecker;","map":{"version":3,"names":["React","useEffect","useState","useWallet","jsx","_jsx","jsxs","_jsxs","AMOY_CHAIN_ID","AMOY_CHAIN_ID_HEX","NetworkChecker","chainId","account","showBanner","setShowBanner","switchToAmoy","window","ethereum","alert","request","method","params","switchError","code","chainName","nativeCurrency","name","symbol","decimals","rpcUrls","blockExplorerUrls","addError","console","error","className","children","concat","onClick"],"sources":["/Users/alex.codreanu/Desktop/marketplace-dapp/src/Components/NetworkChecker.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useWallet } from '../contexts/WalletContext';\nimport './NetworkChecker.css';\n\nconst AMOY_CHAIN_ID = 80002;\nconst AMOY_CHAIN_ID_HEX = '0x13882';\n\nconst NetworkChecker: React.FC = () => {\n  const { chainId, account } = useWallet();\n  const [showBanner, setShowBanner] = useState(false);\n\n  useEffect(() => {\n    if (account && chainId && chainId !== AMOY_CHAIN_ID) {\n      setShowBanner(true);\n    } else {\n      setShowBanner(false);\n    }\n  }, [chainId, account]);\n\n  const switchToAmoy = async () => {\n    if (typeof window.ethereum === 'undefined') {\n      alert('Please install MetaMask');\n      return;\n    }\n\n    try {\n      // Try to switch to Amoy\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{ chainId: AMOY_CHAIN_ID_HEX }],\n      });\n    } catch (switchError: any) {\n      // This error code indicates that the chain has not been added to MetaMask\n      if (switchError.code === 4902) {\n        try {\n          await window.ethereum.request({\n            method: 'wallet_addEthereumChain',\n            params: [\n              {\n                chainId: AMOY_CHAIN_ID_HEX,\n                chainName: 'Polygon Amoy Testnet',\n                nativeCurrency: {\n                  name: 'MATIC',\n                  symbol: 'MATIC',\n                  decimals: 18,\n                },\n                rpcUrls: ['https://rpc-amoy.polygon.technology'],\n                blockExplorerUrls: ['https://amoy.polygonscan.com/'],\n              },\n            ],\n          });\n        } catch (addError) {\n          console.error('Error adding network:', addError);\n          alert('Failed to add Polygon Amoy network. Please add it manually.');\n        }\n      } else {\n        console.error('Error switching network:', switchError);\n        alert('Failed to switch network. Please switch manually in MetaMask.');\n      }\n    }\n  };\n\n  if (!showBanner) {\n    return null;\n  }\n\n  return (\n    <div className=\"network-banner\">\n      <div className=\"network-banner-content\">\n        <span className=\"warning-icon\">⚠️</span>\n        <div className=\"banner-text\">\n          <strong>Wrong Network!</strong>\n          <p>\n            You're on {chainId ? `Chain ID ${chainId}` : 'wrong network'}. \n            This marketplace requires <strong>Polygon Amoy (Chain ID: 80002)</strong>\n          </p>\n        </div>\n        <button className=\"switch-button\" onClick={switchToAmoy}>\n          Switch to Amoy\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default NetworkChecker;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}