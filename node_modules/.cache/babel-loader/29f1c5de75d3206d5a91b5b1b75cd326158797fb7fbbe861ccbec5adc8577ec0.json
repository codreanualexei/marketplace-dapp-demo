{"ast":null,"code":"import _wrapRegExp from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/wrapRegExp.js\";\nimport { ConstantsUtil as CommonConstantsUtil } from '@reown/appkit-common';\nimport { StorageUtil } from '@reown/appkit-controllers';\nimport { ConstantsUtil } from './ConstantsUtil.js';\nexport const SemVerUtils = {\n  extractVersion(version) {\n    var _match$groups;\n    if (!version || typeof version !== 'string') {\n      return null;\n    }\n    /*\n     * Match semantic version patterns with optional pre-release suffixes and version range operators\n     * Examples: 1.7.1, 1.7.1-canary.3, 1.7.1-beta.1, 1.7, 1, ^1.8.3, >=1.x.x, <=1.x.x, etc.\n     */\n    const versionRegex = /*#__PURE__*/_wrapRegExp(/(?:[<->\\^~]+[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]*)?([0-9]+(?:\\.[0-9]+){0,2})(?:-[A-Za-z]+\\.[0-9]+)?/, {\n      version: 1\n    });\n    const match = version.match(versionRegex);\n    return (match === null || match === void 0 || (_match$groups = match.groups) === null || _match$groups === void 0 ? void 0 : _match$groups['version']) || null;\n  },\n  checkSDKVersion(version) {\n    const packageVersion = this.extractVersion(version);\n    const isDevelopment = CommonConstantsUtil.IS_DEVELOPMENT;\n    if (!packageVersion || !isDevelopment) {\n      return;\n    }\n    const appKitVersionStorage = StorageUtil.getLatestAppKitVersion();\n    if (this.isValidVersion(appKitVersionStorage)) {\n      if (this.isOlder(packageVersion, appKitVersionStorage)) {\n        console.warn(ConstantsUtil.getSDKVersionWarningMessage(packageVersion, appKitVersionStorage));\n        return;\n      }\n    }\n    try {\n      fetch('https://registry.npmjs.org/@reown/appkit/latest').then(response => response.json()).then(data => {\n        const latestVersion = data.version;\n        if (this.isOlder(packageVersion, latestVersion)) {\n          StorageUtil.updateLatestAppKitVersion({\n            timestamp: Date.now(),\n            version: latestVersion\n          });\n          console.warn(ConstantsUtil.getSDKVersionWarningMessage(packageVersion, latestVersion));\n        }\n      });\n    } catch (error) {\n      // Ignore error\n    }\n  },\n  isValidVersion(version) {\n    return typeof version === 'string' && /^[0-9]+\\.[0-9]+\\.[0-9]+$/.test(version);\n  },\n  isOlder(currentVersion, latestVersion) {\n    const currentVersionNumber = this.extractVersion(currentVersion);\n    const latestVersionNumber = this.extractVersion(latestVersion);\n    if (!currentVersionNumber || !latestVersionNumber) {\n      return false;\n    }\n    // Normalize versions to ensure they have at least 3 parts\n    function normalizeVersion(version) {\n      const parts = version.split('.').map(Number);\n      while (parts.length < 3) {\n        parts.push(0);\n      }\n      return parts;\n    }\n    const current = normalizeVersion(currentVersionNumber);\n    const latest = normalizeVersion(latestVersionNumber);\n    for (let i = 0; i < Math.max(current.length, latest.length); i += 1) {\n      const currentPart = current[i] || 0;\n      const latestPart = latest[i] || 0;\n      if (currentPart < latestPart) {\n        return true;\n      } else if (currentPart > latestPart) {\n        return false;\n      }\n    }\n    return false;\n  }\n};","map":{"version":3,"names":["ConstantsUtil","CommonConstantsUtil","StorageUtil","SemVerUtils","extractVersion","version","_match$groups","versionRegex","_wrapRegExp","match","groups","checkSDKVersion","packageVersion","isDevelopment","IS_DEVELOPMENT","appKitVersionStorage","getLatestAppKitVersion","isValidVersion","isOlder","console","warn","getSDKVersionWarningMessage","fetch","then","response","json","data","latestVersion","updateLatestAppKitVersion","timestamp","Date","now","error","test","currentVersion","currentVersionNumber","latestVersionNumber","normalizeVersion","parts","split","map","Number","length","push","current","latest","i","Math","max","currentPart","latestPart"],"sources":["../../../src/SemVerUtils.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}