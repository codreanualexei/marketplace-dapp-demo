{"ast":null,"code":"import { DateUtil } from '@reown/appkit-common';\nimport { UiHelperUtil } from './UiHelperUtil.js';\nconst FLOAT_FIXED_VALUE = 3;\nconst GAS_FEE_THRESHOLD = 0.1;\nconst plusTypes = ['receive', 'deposit', 'borrow', 'claim'];\nconst minusTypes = ['withdraw', 'repay', 'burn'];\nexport const TransactionUtil = {\n  getTransactionGroupTitle(year, month) {\n    const currentYear = DateUtil.getYear();\n    const monthName = DateUtil.getMonthNameByIndex(month);\n    const isCurrentYear = year === currentYear;\n    const groupTitle = isCurrentYear ? monthName : \"\".concat(monthName, \" \").concat(year);\n    return groupTitle;\n  },\n  getTransactionImages(transfers) {\n    const [transfer] = transfers;\n    const hasMultipleTransfers = (transfers === null || transfers === void 0 ? void 0 : transfers.length) > 1;\n    if (hasMultipleTransfers) {\n      return transfers.map(item => this.getTransactionImage(item));\n    }\n    return [this.getTransactionImage(transfer)];\n  },\n  getTransactionImage(transfer) {\n    return {\n      type: TransactionUtil.getTransactionTransferTokenType(transfer),\n      url: TransactionUtil.getTransactionImageURL(transfer)\n    };\n  },\n  getTransactionImageURL(transfer) {\n    let imageURL = undefined;\n    const isNFT = Boolean(transfer === null || transfer === void 0 ? void 0 : transfer.nft_info);\n    const isFungible = Boolean(transfer === null || transfer === void 0 ? void 0 : transfer.fungible_info);\n    if (transfer && isNFT) {\n      var _transfer$nft_info;\n      imageURL = transfer === null || transfer === void 0 || (_transfer$nft_info = transfer.nft_info) === null || _transfer$nft_info === void 0 || (_transfer$nft_info = _transfer$nft_info.content) === null || _transfer$nft_info === void 0 || (_transfer$nft_info = _transfer$nft_info.preview) === null || _transfer$nft_info === void 0 ? void 0 : _transfer$nft_info.url;\n    } else if (transfer && isFungible) {\n      var _transfer$fungible_in;\n      imageURL = transfer === null || transfer === void 0 || (_transfer$fungible_in = transfer.fungible_info) === null || _transfer$fungible_in === void 0 || (_transfer$fungible_in = _transfer$fungible_in.icon) === null || _transfer$fungible_in === void 0 ? void 0 : _transfer$fungible_in.url;\n    }\n    return imageURL;\n  },\n  getTransactionTransferTokenType(transfer) {\n    if (transfer !== null && transfer !== void 0 && transfer.fungible_info) {\n      return 'FUNGIBLE';\n    } else if (transfer !== null && transfer !== void 0 && transfer.nft_info) {\n      return 'NFT';\n    }\n    return undefined;\n  },\n  getTransactionDescriptions(transaction, mergedTransfers) {\n    var _transaction$metadata;\n    const type = transaction === null || transaction === void 0 || (_transaction$metadata = transaction.metadata) === null || _transaction$metadata === void 0 ? void 0 : _transaction$metadata.operationType;\n    const transfers = mergedTransfers || (transaction === null || transaction === void 0 ? void 0 : transaction.transfers);\n    const hasTransfer = (transfers === null || transfers === void 0 ? void 0 : transfers.length) > 0;\n    const hasMultipleTransfers = (transfers === null || transfers === void 0 ? void 0 : transfers.length) > 1;\n    const isFungible = hasTransfer && (transfers === null || transfers === void 0 ? void 0 : transfers.every(transfer => Boolean(transfer === null || transfer === void 0 ? void 0 : transfer.fungible_info)));\n    const [firstTransfer, secondTransfer] = transfers;\n    let firstDescription = this.getTransferDescription(firstTransfer);\n    let secondDescription = this.getTransferDescription(secondTransfer);\n    if (!hasTransfer) {\n      const isSendOrReceive = type === 'send' || type === 'receive';\n      if (isSendOrReceive && isFungible) {\n        firstDescription = UiHelperUtil.getTruncateString({\n          string: transaction === null || transaction === void 0 ? void 0 : transaction.metadata.sentFrom,\n          charsStart: 4,\n          charsEnd: 6,\n          truncate: 'middle'\n        });\n        secondDescription = UiHelperUtil.getTruncateString({\n          string: transaction === null || transaction === void 0 ? void 0 : transaction.metadata.sentTo,\n          charsStart: 4,\n          charsEnd: 6,\n          truncate: 'middle'\n        });\n        return [firstDescription, secondDescription];\n      }\n      return [transaction.metadata.status];\n    }\n    if (hasMultipleTransfers) {\n      return transfers.map(item => this.getTransferDescription(item));\n    }\n    let prefix = '';\n    if (plusTypes.includes(type)) {\n      prefix = '+';\n    } else if (minusTypes.includes(type)) {\n      prefix = '-';\n    }\n    firstDescription = prefix.concat(firstDescription);\n    return [firstDescription];\n  },\n  getTransferDescription(transfer) {\n    let description = '';\n    if (!transfer) {\n      return description;\n    }\n    if (transfer !== null && transfer !== void 0 && transfer.nft_info) {\n      var _transfer$nft_info2;\n      description = (transfer === null || transfer === void 0 || (_transfer$nft_info2 = transfer.nft_info) === null || _transfer$nft_info2 === void 0 ? void 0 : _transfer$nft_info2.name) || '-';\n    } else if (transfer !== null && transfer !== void 0 && transfer.fungible_info) {\n      description = this.getFungibleTransferDescription(transfer) || '-';\n    }\n    return description;\n  },\n  getFungibleTransferDescription(transfer) {\n    var _transfer$fungible_in2;\n    if (!transfer) {\n      return null;\n    }\n    const quantity = this.getQuantityFixedValue(transfer === null || transfer === void 0 ? void 0 : transfer.quantity.numeric);\n    const description = [quantity, transfer === null || transfer === void 0 || (_transfer$fungible_in2 = transfer.fungible_info) === null || _transfer$fungible_in2 === void 0 ? void 0 : _transfer$fungible_in2.symbol].join(' ').trim();\n    return description;\n  },\n  mergeTransfers(transfers) {\n    if ((transfers === null || transfers === void 0 ? void 0 : transfers.length) <= 1) {\n      return transfers;\n    }\n    const filteredTransfers = this.filterGasFeeTransfers(transfers);\n    const mergedTransfers = filteredTransfers.reduce((acc, t) => {\n      var _t$fungible_info;\n      const name = t === null || t === void 0 || (_t$fungible_info = t.fungible_info) === null || _t$fungible_info === void 0 ? void 0 : _t$fungible_info.name;\n      const existingTransfer = acc.find(_ref => {\n        let {\n          fungible_info,\n          direction\n        } = _ref;\n        return name && name === (fungible_info === null || fungible_info === void 0 ? void 0 : fungible_info.name) && direction === t.direction;\n      });\n      if (existingTransfer) {\n        const quantity = Number(existingTransfer.quantity.numeric) + Number(t.quantity.numeric);\n        existingTransfer.quantity.numeric = quantity.toString();\n        existingTransfer.value = (existingTransfer.value || 0) + (t.value || 0);\n      } else {\n        acc.push(t);\n      }\n      return acc;\n    }, []);\n    let finalTransfers = mergedTransfers;\n    if (mergedTransfers.length > 2) {\n      finalTransfers = mergedTransfers.sort((a, b) => (b.value || 0) - (a.value || 0)).slice(0, 2);\n    }\n    finalTransfers = finalTransfers.sort((a, b) => {\n      if (a.direction === 'out' && b.direction === 'in') {\n        return -1;\n      }\n      if (a.direction === 'in' && b.direction === 'out') {\n        return 1;\n      }\n      return 0;\n    });\n    return finalTransfers;\n  },\n  filterGasFeeTransfers(transfers) {\n    const tokenGroups = transfers.reduce((groups, transfer) => {\n      var _transfer$fungible_in3;\n      const tokenName = transfer === null || transfer === void 0 || (_transfer$fungible_in3 = transfer.fungible_info) === null || _transfer$fungible_in3 === void 0 ? void 0 : _transfer$fungible_in3.name;\n      if (tokenName) {\n        if (!groups[tokenName]) {\n          groups[tokenName] = [];\n        }\n        groups[tokenName].push(transfer);\n      }\n      return groups;\n    }, {});\n    const filteredTransfers = [];\n    Object.values(tokenGroups).forEach(tokenTransfers => {\n      if (tokenTransfers.length === 1) {\n        const firstTransfer = tokenTransfers[0];\n        if (firstTransfer) {\n          filteredTransfers.push(firstTransfer);\n        }\n      } else {\n        const inTransfers = tokenTransfers.filter(t => t.direction === 'in');\n        const outTransfers = tokenTransfers.filter(t => t.direction === 'out');\n        if (inTransfers.length === 1 && outTransfers.length === 1) {\n          const inTransfer = inTransfers[0];\n          const outTransfer = outTransfers[0];\n          let didApplyGasFeeFilter = false;\n          if (inTransfer && outTransfer) {\n            const inAmount = Number(inTransfer.quantity.numeric);\n            const outAmount = Number(outTransfer.quantity.numeric);\n            if (outAmount < inAmount * GAS_FEE_THRESHOLD) {\n              filteredTransfers.push(inTransfer);\n              didApplyGasFeeFilter = true;\n            } else if (inAmount < outAmount * GAS_FEE_THRESHOLD) {\n              filteredTransfers.push(outTransfer);\n              didApplyGasFeeFilter = true;\n            }\n          }\n          if (!didApplyGasFeeFilter) {\n            filteredTransfers.push(...tokenTransfers);\n          }\n        } else {\n          const significantTransfers = this.filterGasFeesFromTokenGroup(tokenTransfers);\n          filteredTransfers.push(...significantTransfers);\n        }\n      }\n    });\n    transfers.forEach(transfer => {\n      var _transfer$fungible_in4;\n      if (!(transfer !== null && transfer !== void 0 && (_transfer$fungible_in4 = transfer.fungible_info) !== null && _transfer$fungible_in4 !== void 0 && _transfer$fungible_in4.name)) {\n        filteredTransfers.push(transfer);\n      }\n    });\n    return filteredTransfers;\n  },\n  filterGasFeesFromTokenGroup(tokenTransfers) {\n    if (tokenTransfers.length <= 1) {\n      return tokenTransfers;\n    }\n    const amounts = tokenTransfers.map(t => Number(t.quantity.numeric));\n    const maxAmount = Math.max(...amounts);\n    const minAmount = Math.min(...amounts);\n    const extremeGasThreshold = 0.01;\n    if (minAmount < maxAmount * extremeGasThreshold) {\n      const filtered = tokenTransfers.filter(t => {\n        const amount = Number(t.quantity.numeric);\n        return amount >= maxAmount * extremeGasThreshold;\n      });\n      return filtered;\n    }\n    const inTransfers = tokenTransfers.filter(t => t.direction === 'in');\n    const outTransfers = tokenTransfers.filter(t => t.direction === 'out');\n    if (inTransfers.length === 1 && outTransfers.length === 1) {\n      const inTransfer = inTransfers[0];\n      const outTransfer = outTransfers[0];\n      if (inTransfer && outTransfer) {\n        const inAmount = Number(inTransfer.quantity.numeric);\n        const outAmount = Number(outTransfer.quantity.numeric);\n        if (outAmount < inAmount * GAS_FEE_THRESHOLD) {\n          return [inTransfer];\n        } else if (inAmount < outAmount * GAS_FEE_THRESHOLD) {\n          return [outTransfer];\n        }\n      }\n    }\n    return tokenTransfers;\n  },\n  getQuantityFixedValue(value) {\n    if (!value) {\n      return null;\n    }\n    const parsedValue = parseFloat(value);\n    return parsedValue.toFixed(FLOAT_FIXED_VALUE);\n  }\n};","map":{"version":3,"names":["DateUtil","UiHelperUtil","FLOAT_FIXED_VALUE","GAS_FEE_THRESHOLD","plusTypes","minusTypes","TransactionUtil","getTransactionGroupTitle","year","month","currentYear","getYear","monthName","getMonthNameByIndex","isCurrentYear","groupTitle","concat","getTransactionImages","transfers","transfer","hasMultipleTransfers","length","map","item","getTransactionImage","type","getTransactionTransferTokenType","url","getTransactionImageURL","imageURL","undefined","isNFT","Boolean","nft_info","isFungible","fungible_info","_transfer$nft_info","content","preview","_transfer$fungible_in","icon","getTransactionDescriptions","transaction","mergedTransfers","_transaction$metadata","metadata","operationType","hasTransfer","every","firstTransfer","secondTransfer","firstDescription","getTransferDescription","secondDescription","isSendOrReceive","getTruncateString","string","sentFrom","charsStart","charsEnd","truncate","sentTo","status","prefix","includes","description","_transfer$nft_info2","name","getFungibleTransferDescription","_transfer$fungible_in2","quantity","getQuantityFixedValue","numeric","symbol","join","trim","mergeTransfers","filteredTransfers","filterGasFeeTransfers","reduce","acc","t","_t$fungible_info","existingTransfer","find","_ref","direction","Number","toString","value","push","finalTransfers","sort","a","b","slice","tokenGroups","groups","_transfer$fungible_in3","tokenName","Object","values","forEach","tokenTransfers","inTransfers","filter","outTransfers","inTransfer","outTransfer","didApplyGasFeeFilter","inAmount","outAmount","significantTransfers","filterGasFeesFromTokenGroup","_transfer$fungible_in4","amounts","maxAmount","Math","max","minAmount","min","extremeGasThreshold","filtered","amount","parsedValue","parseFloat","toFixed"],"sources":["../../../../src/utils/TransactionUtil.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}