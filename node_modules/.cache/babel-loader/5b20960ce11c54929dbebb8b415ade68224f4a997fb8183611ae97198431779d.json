{"ast":null,"code":"import { utf8Count, utf8Encode } from \"./utils/utf8.mjs\";\nimport { ExtensionCodec } from \"./ExtensionCodec.mjs\";\nimport { setInt64, setUint64 } from \"./utils/int.mjs\";\nimport { ensureUint8Array } from \"./utils/typedArrays.mjs\";\nexport const DEFAULT_MAX_DEPTH = 100;\nexport const DEFAULT_INITIAL_BUFFER_SIZE = 2048;\nexport class Encoder {\n  constructor(options) {\n    var _options$extensionCod, _options$useBigInt, _options$maxDepth, _options$initialBuffe, _options$sortKeys, _options$forceFloat, _options$ignoreUndefi, _options$forceInteger;\n    this.entered = false;\n    this.extensionCodec = (_options$extensionCod = options === null || options === void 0 ? void 0 : options.extensionCodec) !== null && _options$extensionCod !== void 0 ? _options$extensionCod : ExtensionCodec.defaultCodec;\n    this.context = options === null || options === void 0 ? void 0 : options.context; // needs a type assertion because EncoderOptions has no context property when ContextType is undefined\n    this.useBigInt64 = (_options$useBigInt = options === null || options === void 0 ? void 0 : options.useBigInt64) !== null && _options$useBigInt !== void 0 ? _options$useBigInt : false;\n    this.maxDepth = (_options$maxDepth = options === null || options === void 0 ? void 0 : options.maxDepth) !== null && _options$maxDepth !== void 0 ? _options$maxDepth : DEFAULT_MAX_DEPTH;\n    this.initialBufferSize = (_options$initialBuffe = options === null || options === void 0 ? void 0 : options.initialBufferSize) !== null && _options$initialBuffe !== void 0 ? _options$initialBuffe : DEFAULT_INITIAL_BUFFER_SIZE;\n    this.sortKeys = (_options$sortKeys = options === null || options === void 0 ? void 0 : options.sortKeys) !== null && _options$sortKeys !== void 0 ? _options$sortKeys : false;\n    this.forceFloat32 = (_options$forceFloat = options === null || options === void 0 ? void 0 : options.forceFloat32) !== null && _options$forceFloat !== void 0 ? _options$forceFloat : false;\n    this.ignoreUndefined = (_options$ignoreUndefi = options === null || options === void 0 ? void 0 : options.ignoreUndefined) !== null && _options$ignoreUndefi !== void 0 ? _options$ignoreUndefi : false;\n    this.forceIntegerToFloat = (_options$forceInteger = options === null || options === void 0 ? void 0 : options.forceIntegerToFloat) !== null && _options$forceInteger !== void 0 ? _options$forceInteger : false;\n    this.pos = 0;\n    this.view = new DataView(new ArrayBuffer(this.initialBufferSize));\n    this.bytes = new Uint8Array(this.view.buffer);\n  }\n  clone() {\n    // Because of slightly special argument `context`,\n    // type assertion is needed.\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    return new Encoder({\n      extensionCodec: this.extensionCodec,\n      context: this.context,\n      useBigInt64: this.useBigInt64,\n      maxDepth: this.maxDepth,\n      initialBufferSize: this.initialBufferSize,\n      sortKeys: this.sortKeys,\n      forceFloat32: this.forceFloat32,\n      ignoreUndefined: this.ignoreUndefined,\n      forceIntegerToFloat: this.forceIntegerToFloat\n    });\n  }\n  reinitializeState() {\n    this.pos = 0;\n  }\n  /**\n   * This is almost equivalent to {@link Encoder#encode}, but it returns an reference of the encoder's internal buffer and thus much faster than {@link Encoder#encode}.\n   *\n   * @returns Encodes the object and returns a shared reference the encoder's internal buffer.\n   */\n  encodeSharedRef(object) {\n    if (this.entered) {\n      const instance = this.clone();\n      return instance.encodeSharedRef(object);\n    }\n    try {\n      this.entered = true;\n      this.reinitializeState();\n      this.doEncode(object, 1);\n      return this.bytes.subarray(0, this.pos);\n    } finally {\n      this.entered = false;\n    }\n  }\n  /**\n   * @returns Encodes the object and returns a copy of the encoder's internal buffer.\n   */\n  encode(object) {\n    if (this.entered) {\n      const instance = this.clone();\n      return instance.encode(object);\n    }\n    try {\n      this.entered = true;\n      this.reinitializeState();\n      this.doEncode(object, 1);\n      return this.bytes.slice(0, this.pos);\n    } finally {\n      this.entered = false;\n    }\n  }\n  doEncode(object, depth) {\n    if (depth > this.maxDepth) {\n      throw new Error(\"Too deep objects in depth \".concat(depth));\n    }\n    if (object == null) {\n      this.encodeNil();\n    } else if (typeof object === \"boolean\") {\n      this.encodeBoolean(object);\n    } else if (typeof object === \"number\") {\n      if (!this.forceIntegerToFloat) {\n        this.encodeNumber(object);\n      } else {\n        this.encodeNumberAsFloat(object);\n      }\n    } else if (typeof object === \"string\") {\n      this.encodeString(object);\n    } else if (this.useBigInt64 && typeof object === \"bigint\") {\n      this.encodeBigInt64(object);\n    } else {\n      this.encodeObject(object, depth);\n    }\n  }\n  ensureBufferSizeToWrite(sizeToWrite) {\n    const requiredSize = this.pos + sizeToWrite;\n    if (this.view.byteLength < requiredSize) {\n      this.resizeBuffer(requiredSize * 2);\n    }\n  }\n  resizeBuffer(newSize) {\n    const newBuffer = new ArrayBuffer(newSize);\n    const newBytes = new Uint8Array(newBuffer);\n    const newView = new DataView(newBuffer);\n    newBytes.set(this.bytes);\n    this.view = newView;\n    this.bytes = newBytes;\n  }\n  encodeNil() {\n    this.writeU8(0xc0);\n  }\n  encodeBoolean(object) {\n    if (object === false) {\n      this.writeU8(0xc2);\n    } else {\n      this.writeU8(0xc3);\n    }\n  }\n  encodeNumber(object) {\n    if (!this.forceIntegerToFloat && Number.isSafeInteger(object)) {\n      if (object >= 0) {\n        if (object < 0x80) {\n          // positive fixint\n          this.writeU8(object);\n        } else if (object < 0x100) {\n          // uint 8\n          this.writeU8(0xcc);\n          this.writeU8(object);\n        } else if (object < 0x10000) {\n          // uint 16\n          this.writeU8(0xcd);\n          this.writeU16(object);\n        } else if (object < 0x100000000) {\n          // uint 32\n          this.writeU8(0xce);\n          this.writeU32(object);\n        } else if (!this.useBigInt64) {\n          // uint 64\n          this.writeU8(0xcf);\n          this.writeU64(object);\n        } else {\n          this.encodeNumberAsFloat(object);\n        }\n      } else {\n        if (object >= -0x20) {\n          // negative fixint\n          this.writeU8(0xe0 | object + 0x20);\n        } else if (object >= -0x80) {\n          // int 8\n          this.writeU8(0xd0);\n          this.writeI8(object);\n        } else if (object >= -0x8000) {\n          // int 16\n          this.writeU8(0xd1);\n          this.writeI16(object);\n        } else if (object >= -0x80000000) {\n          // int 32\n          this.writeU8(0xd2);\n          this.writeI32(object);\n        } else if (!this.useBigInt64) {\n          // int 64\n          this.writeU8(0xd3);\n          this.writeI64(object);\n        } else {\n          this.encodeNumberAsFloat(object);\n        }\n      }\n    } else {\n      this.encodeNumberAsFloat(object);\n    }\n  }\n  encodeNumberAsFloat(object) {\n    if (this.forceFloat32) {\n      // float 32\n      this.writeU8(0xca);\n      this.writeF32(object);\n    } else {\n      // float 64\n      this.writeU8(0xcb);\n      this.writeF64(object);\n    }\n  }\n  encodeBigInt64(object) {\n    if (object >= BigInt(0)) {\n      // uint 64\n      this.writeU8(0xcf);\n      this.writeBigUint64(object);\n    } else {\n      // int 64\n      this.writeU8(0xd3);\n      this.writeBigInt64(object);\n    }\n  }\n  writeStringHeader(byteLength) {\n    if (byteLength < 32) {\n      // fixstr\n      this.writeU8(0xa0 + byteLength);\n    } else if (byteLength < 0x100) {\n      // str 8\n      this.writeU8(0xd9);\n      this.writeU8(byteLength);\n    } else if (byteLength < 0x10000) {\n      // str 16\n      this.writeU8(0xda);\n      this.writeU16(byteLength);\n    } else if (byteLength < 0x100000000) {\n      // str 32\n      this.writeU8(0xdb);\n      this.writeU32(byteLength);\n    } else {\n      throw new Error(\"Too long string: \".concat(byteLength, \" bytes in UTF-8\"));\n    }\n  }\n  encodeString(object) {\n    const maxHeaderSize = 1 + 4;\n    const byteLength = utf8Count(object);\n    this.ensureBufferSizeToWrite(maxHeaderSize + byteLength);\n    this.writeStringHeader(byteLength);\n    utf8Encode(object, this.bytes, this.pos);\n    this.pos += byteLength;\n  }\n  encodeObject(object, depth) {\n    // try to encode objects with custom codec first of non-primitives\n    const ext = this.extensionCodec.tryToEncode(object, this.context);\n    if (ext != null) {\n      this.encodeExtension(ext);\n    } else if (Array.isArray(object)) {\n      this.encodeArray(object, depth);\n    } else if (ArrayBuffer.isView(object)) {\n      this.encodeBinary(object);\n    } else if (typeof object === \"object\") {\n      this.encodeMap(object, depth);\n    } else {\n      // symbol, function and other special object come here unless extensionCodec handles them.\n      throw new Error(\"Unrecognized object: \".concat(Object.prototype.toString.apply(object)));\n    }\n  }\n  encodeBinary(object) {\n    const size = object.byteLength;\n    if (size < 0x100) {\n      // bin 8\n      this.writeU8(0xc4);\n      this.writeU8(size);\n    } else if (size < 0x10000) {\n      // bin 16\n      this.writeU8(0xc5);\n      this.writeU16(size);\n    } else if (size < 0x100000000) {\n      // bin 32\n      this.writeU8(0xc6);\n      this.writeU32(size);\n    } else {\n      throw new Error(\"Too large binary: \".concat(size));\n    }\n    const bytes = ensureUint8Array(object);\n    this.writeU8a(bytes);\n  }\n  encodeArray(object, depth) {\n    const size = object.length;\n    if (size < 16) {\n      // fixarray\n      this.writeU8(0x90 + size);\n    } else if (size < 0x10000) {\n      // array 16\n      this.writeU8(0xdc);\n      this.writeU16(size);\n    } else if (size < 0x100000000) {\n      // array 32\n      this.writeU8(0xdd);\n      this.writeU32(size);\n    } else {\n      throw new Error(\"Too large array: \".concat(size));\n    }\n    for (const item of object) {\n      this.doEncode(item, depth + 1);\n    }\n  }\n  countWithoutUndefined(object, keys) {\n    let count = 0;\n    for (const key of keys) {\n      if (object[key] !== undefined) {\n        count++;\n      }\n    }\n    return count;\n  }\n  encodeMap(object, depth) {\n    const keys = Object.keys(object);\n    if (this.sortKeys) {\n      keys.sort();\n    }\n    const size = this.ignoreUndefined ? this.countWithoutUndefined(object, keys) : keys.length;\n    if (size < 16) {\n      // fixmap\n      this.writeU8(0x80 + size);\n    } else if (size < 0x10000) {\n      // map 16\n      this.writeU8(0xde);\n      this.writeU16(size);\n    } else if (size < 0x100000000) {\n      // map 32\n      this.writeU8(0xdf);\n      this.writeU32(size);\n    } else {\n      throw new Error(\"Too large map object: \".concat(size));\n    }\n    for (const key of keys) {\n      const value = object[key];\n      if (!(this.ignoreUndefined && value === undefined)) {\n        this.encodeString(key);\n        this.doEncode(value, depth + 1);\n      }\n    }\n  }\n  encodeExtension(ext) {\n    if (typeof ext.data === \"function\") {\n      const data = ext.data(this.pos + 6);\n      const size = data.length;\n      if (size >= 0x100000000) {\n        throw new Error(\"Too large extension object: \".concat(size));\n      }\n      this.writeU8(0xc9);\n      this.writeU32(size);\n      this.writeI8(ext.type);\n      this.writeU8a(data);\n      return;\n    }\n    const size = ext.data.length;\n    if (size === 1) {\n      // fixext 1\n      this.writeU8(0xd4);\n    } else if (size === 2) {\n      // fixext 2\n      this.writeU8(0xd5);\n    } else if (size === 4) {\n      // fixext 4\n      this.writeU8(0xd6);\n    } else if (size === 8) {\n      // fixext 8\n      this.writeU8(0xd7);\n    } else if (size === 16) {\n      // fixext 16\n      this.writeU8(0xd8);\n    } else if (size < 0x100) {\n      // ext 8\n      this.writeU8(0xc7);\n      this.writeU8(size);\n    } else if (size < 0x10000) {\n      // ext 16\n      this.writeU8(0xc8);\n      this.writeU16(size);\n    } else if (size < 0x100000000) {\n      // ext 32\n      this.writeU8(0xc9);\n      this.writeU32(size);\n    } else {\n      throw new Error(\"Too large extension object: \".concat(size));\n    }\n    this.writeI8(ext.type);\n    this.writeU8a(ext.data);\n  }\n  writeU8(value) {\n    this.ensureBufferSizeToWrite(1);\n    this.view.setUint8(this.pos, value);\n    this.pos++;\n  }\n  writeU8a(values) {\n    const size = values.length;\n    this.ensureBufferSizeToWrite(size);\n    this.bytes.set(values, this.pos);\n    this.pos += size;\n  }\n  writeI8(value) {\n    this.ensureBufferSizeToWrite(1);\n    this.view.setInt8(this.pos, value);\n    this.pos++;\n  }\n  writeU16(value) {\n    this.ensureBufferSizeToWrite(2);\n    this.view.setUint16(this.pos, value);\n    this.pos += 2;\n  }\n  writeI16(value) {\n    this.ensureBufferSizeToWrite(2);\n    this.view.setInt16(this.pos, value);\n    this.pos += 2;\n  }\n  writeU32(value) {\n    this.ensureBufferSizeToWrite(4);\n    this.view.setUint32(this.pos, value);\n    this.pos += 4;\n  }\n  writeI32(value) {\n    this.ensureBufferSizeToWrite(4);\n    this.view.setInt32(this.pos, value);\n    this.pos += 4;\n  }\n  writeF32(value) {\n    this.ensureBufferSizeToWrite(4);\n    this.view.setFloat32(this.pos, value);\n    this.pos += 4;\n  }\n  writeF64(value) {\n    this.ensureBufferSizeToWrite(8);\n    this.view.setFloat64(this.pos, value);\n    this.pos += 8;\n  }\n  writeU64(value) {\n    this.ensureBufferSizeToWrite(8);\n    setUint64(this.view, this.pos, value);\n    this.pos += 8;\n  }\n  writeI64(value) {\n    this.ensureBufferSizeToWrite(8);\n    setInt64(this.view, this.pos, value);\n    this.pos += 8;\n  }\n  writeBigUint64(value) {\n    this.ensureBufferSizeToWrite(8);\n    this.view.setBigUint64(this.pos, value);\n    this.pos += 8;\n  }\n  writeBigInt64(value) {\n    this.ensureBufferSizeToWrite(8);\n    this.view.setBigInt64(this.pos, value);\n    this.pos += 8;\n  }\n}","map":{"version":3,"names":["utf8Count","utf8Encode","ExtensionCodec","setInt64","setUint64","ensureUint8Array","DEFAULT_MAX_DEPTH","DEFAULT_INITIAL_BUFFER_SIZE","Encoder","constructor","options","_options$extensionCod","_options$useBigInt","_options$maxDepth","_options$initialBuffe","_options$sortKeys","_options$forceFloat","_options$ignoreUndefi","_options$forceInteger","entered","extensionCodec","defaultCodec","context","useBigInt64","maxDepth","initialBufferSize","sortKeys","forceFloat32","ignoreUndefined","forceIntegerToFloat","pos","view","DataView","ArrayBuffer","bytes","Uint8Array","buffer","clone","reinitializeState","encodeSharedRef","object","instance","doEncode","subarray","encode","slice","depth","Error","concat","encodeNil","encodeBoolean","encodeNumber","encodeNumberAsFloat","encodeString","encodeBigInt64","encodeObject","ensureBufferSizeToWrite","sizeToWrite","requiredSize","byteLength","resizeBuffer","newSize","newBuffer","newBytes","newView","set","writeU8","Number","isSafeInteger","writeU16","writeU32","writeU64","writeI8","writeI16","writeI32","writeI64","writeF32","writeF64","BigInt","writeBigUint64","writeBigInt64","writeStringHeader","maxHeaderSize","ext","tryToEncode","encodeExtension","Array","isArray","encodeArray","isView","encodeBinary","encodeMap","Object","prototype","toString","apply","size","writeU8a","length","item","countWithoutUndefined","keys","count","key","undefined","sort","value","data","type","setUint8","values","setInt8","setUint16","setInt16","setUint32","setInt32","setFloat32","setFloat64","setBigUint64","setBigInt64"],"sources":["/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@msgpack/msgpack/src/Encoder.ts"],"sourcesContent":["import { utf8Count, utf8Encode } from \"./utils/utf8.ts\";\nimport { ExtensionCodec } from \"./ExtensionCodec.ts\";\nimport { setInt64, setUint64 } from \"./utils/int.ts\";\nimport { ensureUint8Array } from \"./utils/typedArrays.ts\";\nimport type { ExtData } from \"./ExtData.ts\";\nimport type { ContextOf } from \"./context.ts\";\nimport type { ExtensionCodecType } from \"./ExtensionCodec.ts\";\n\nexport const DEFAULT_MAX_DEPTH = 100;\nexport const DEFAULT_INITIAL_BUFFER_SIZE = 2048;\n\nexport type EncoderOptions<ContextType = undefined> = Partial<\n  Readonly<{\n    extensionCodec: ExtensionCodecType<ContextType>;\n\n    /**\n     * Encodes bigint as Int64 or Uint64 if it's set to true.\n     * {@link forceIntegerToFloat} does not affect bigint.\n     * Depends on ES2020's {@link DataView#setBigInt64} and\n     * {@link DataView#setBigUint64}.\n     *\n     * Defaults to false.\n     */\n    useBigInt64: boolean;\n\n    /**\n     * The maximum depth in nested objects and arrays.\n     *\n     * Defaults to 100.\n     */\n    maxDepth: number;\n\n    /**\n     * The initial size of the internal buffer.\n     *\n     * Defaults to 2048.\n     */\n    initialBufferSize: number;\n\n    /**\n     * If `true`, the keys of an object is sorted. In other words, the encoded\n     * binary is canonical and thus comparable to another encoded binary.\n     *\n     * Defaults to `false`. If enabled, it spends more time in encoding objects.\n     */\n    sortKeys: boolean;\n    /**\n     * If `true`, non-integer numbers are encoded in float32, not in float64 (the default).\n     *\n     * Only use it if precisions don't matter.\n     *\n     * Defaults to `false`.\n     */\n    forceFloat32: boolean;\n\n    /**\n     * If `true`, an object property with `undefined` value are ignored.\n     * e.g. `{ foo: undefined }` will be encoded as `{}`, as `JSON.stringify()` does.\n     *\n     * Defaults to `false`. If enabled, it spends more time in encoding objects.\n     */\n    ignoreUndefined: boolean;\n\n    /**\n     * If `true`, integer numbers are encoded as floating point numbers,\n     * with the `forceFloat32` option taken into account.\n     *\n     * Defaults to `false`.\n     */\n    forceIntegerToFloat: boolean;\n  }>\n> &\n  ContextOf<ContextType>;\n\nexport class Encoder<ContextType = undefined> {\n  private readonly extensionCodec: ExtensionCodecType<ContextType>;\n  private readonly context: ContextType;\n  private readonly useBigInt64: boolean;\n  private readonly maxDepth: number;\n  private readonly initialBufferSize: number;\n  private readonly sortKeys: boolean;\n  private readonly forceFloat32: boolean;\n  private readonly ignoreUndefined: boolean;\n  private readonly forceIntegerToFloat: boolean;\n\n  private pos: number;\n  private view: DataView;\n  private bytes: Uint8Array;\n\n  private entered = false;\n\n  public constructor(options?: EncoderOptions<ContextType>) {\n    this.extensionCodec = options?.extensionCodec ?? (ExtensionCodec.defaultCodec as ExtensionCodecType<ContextType>);\n    this.context = (options as { context: ContextType } | undefined)?.context as ContextType; // needs a type assertion because EncoderOptions has no context property when ContextType is undefined\n\n    this.useBigInt64 = options?.useBigInt64 ?? false;\n    this.maxDepth = options?.maxDepth ?? DEFAULT_MAX_DEPTH;\n    this.initialBufferSize = options?.initialBufferSize ?? DEFAULT_INITIAL_BUFFER_SIZE;\n    this.sortKeys = options?.sortKeys ?? false;\n    this.forceFloat32 = options?.forceFloat32 ?? false;\n    this.ignoreUndefined = options?.ignoreUndefined ?? false;\n    this.forceIntegerToFloat = options?.forceIntegerToFloat ?? false;\n\n    this.pos = 0;\n    this.view = new DataView(new ArrayBuffer(this.initialBufferSize));\n    this.bytes = new Uint8Array(this.view.buffer);\n  }\n\n  private clone() {\n    // Because of slightly special argument `context`,\n    // type assertion is needed.\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    return new Encoder<ContextType>({\n      extensionCodec: this.extensionCodec,\n      context: this.context,\n      useBigInt64: this.useBigInt64,\n      maxDepth: this.maxDepth,\n      initialBufferSize: this.initialBufferSize,\n      sortKeys: this.sortKeys,\n      forceFloat32: this.forceFloat32,\n      ignoreUndefined: this.ignoreUndefined,\n      forceIntegerToFloat: this.forceIntegerToFloat,\n    } as any);\n  }\n\n  private reinitializeState() {\n    this.pos = 0;\n  }\n\n  /**\n   * This is almost equivalent to {@link Encoder#encode}, but it returns an reference of the encoder's internal buffer and thus much faster than {@link Encoder#encode}.\n   *\n   * @returns Encodes the object and returns a shared reference the encoder's internal buffer.\n   */\n  public encodeSharedRef(object: unknown): Uint8Array {\n    if (this.entered) {\n      const instance = this.clone();\n      return instance.encodeSharedRef(object);\n    }\n\n    try {\n      this.entered = true;\n\n      this.reinitializeState();\n      this.doEncode(object, 1);\n      return this.bytes.subarray(0, this.pos);\n    } finally {\n      this.entered = false;\n    }\n  }\n\n  /**\n   * @returns Encodes the object and returns a copy of the encoder's internal buffer.\n   */\n  public encode(object: unknown): Uint8Array {\n    if (this.entered) {\n      const instance = this.clone();\n      return instance.encode(object);\n    }\n\n    try {\n      this.entered = true;\n\n      this.reinitializeState();\n      this.doEncode(object, 1);\n      return this.bytes.slice(0, this.pos);\n    } finally {\n      this.entered = false;\n    }\n  }\n\n  private doEncode(object: unknown, depth: number): void {\n    if (depth > this.maxDepth) {\n      throw new Error(`Too deep objects in depth ${depth}`);\n    }\n\n    if (object == null) {\n      this.encodeNil();\n    } else if (typeof object === \"boolean\") {\n      this.encodeBoolean(object);\n    } else if (typeof object === \"number\") {\n      if (!this.forceIntegerToFloat) {\n        this.encodeNumber(object);\n      } else {\n        this.encodeNumberAsFloat(object);\n      }\n    } else if (typeof object === \"string\") {\n      this.encodeString(object);\n    } else if (this.useBigInt64 && typeof object === \"bigint\") {\n      this.encodeBigInt64(object);\n    } else {\n      this.encodeObject(object, depth);\n    }\n  }\n\n  private ensureBufferSizeToWrite(sizeToWrite: number) {\n    const requiredSize = this.pos + sizeToWrite;\n\n    if (this.view.byteLength < requiredSize) {\n      this.resizeBuffer(requiredSize * 2);\n    }\n  }\n\n  private resizeBuffer(newSize: number) {\n    const newBuffer = new ArrayBuffer(newSize);\n    const newBytes = new Uint8Array(newBuffer);\n    const newView = new DataView(newBuffer);\n\n    newBytes.set(this.bytes);\n\n    this.view = newView;\n    this.bytes = newBytes;\n  }\n\n  private encodeNil() {\n    this.writeU8(0xc0);\n  }\n\n  private encodeBoolean(object: boolean) {\n    if (object === false) {\n      this.writeU8(0xc2);\n    } else {\n      this.writeU8(0xc3);\n    }\n  }\n\n  private encodeNumber(object: number): void {\n    if (!this.forceIntegerToFloat && Number.isSafeInteger(object)) {\n      if (object >= 0) {\n        if (object < 0x80) {\n          // positive fixint\n          this.writeU8(object);\n        } else if (object < 0x100) {\n          // uint 8\n          this.writeU8(0xcc);\n          this.writeU8(object);\n        } else if (object < 0x10000) {\n          // uint 16\n          this.writeU8(0xcd);\n          this.writeU16(object);\n        } else if (object < 0x100000000) {\n          // uint 32\n          this.writeU8(0xce);\n          this.writeU32(object);\n        } else if (!this.useBigInt64) {\n          // uint 64\n          this.writeU8(0xcf);\n          this.writeU64(object);\n        } else {\n          this.encodeNumberAsFloat(object);\n        }\n      } else {\n        if (object >= -0x20) {\n          // negative fixint\n          this.writeU8(0xe0 | (object + 0x20));\n        } else if (object >= -0x80) {\n          // int 8\n          this.writeU8(0xd0);\n          this.writeI8(object);\n        } else if (object >= -0x8000) {\n          // int 16\n          this.writeU8(0xd1);\n          this.writeI16(object);\n        } else if (object >= -0x80000000) {\n          // int 32\n          this.writeU8(0xd2);\n          this.writeI32(object);\n        } else if (!this.useBigInt64) {\n          // int 64\n          this.writeU8(0xd3);\n          this.writeI64(object);\n        } else {\n          this.encodeNumberAsFloat(object);\n        }\n      }\n    } else {\n      this.encodeNumberAsFloat(object);\n    }\n  }\n\n  private encodeNumberAsFloat(object: number): void {\n    if (this.forceFloat32) {\n      // float 32\n      this.writeU8(0xca);\n      this.writeF32(object);\n    } else {\n      // float 64\n      this.writeU8(0xcb);\n      this.writeF64(object);\n    }\n  }\n\n  private encodeBigInt64(object: bigint): void {\n    if (object >= BigInt(0)) {\n      // uint 64\n      this.writeU8(0xcf);\n      this.writeBigUint64(object);\n    } else {\n      // int 64\n      this.writeU8(0xd3);\n      this.writeBigInt64(object);\n    }\n  }\n\n  private writeStringHeader(byteLength: number) {\n    if (byteLength < 32) {\n      // fixstr\n      this.writeU8(0xa0 + byteLength);\n    } else if (byteLength < 0x100) {\n      // str 8\n      this.writeU8(0xd9);\n      this.writeU8(byteLength);\n    } else if (byteLength < 0x10000) {\n      // str 16\n      this.writeU8(0xda);\n      this.writeU16(byteLength);\n    } else if (byteLength < 0x100000000) {\n      // str 32\n      this.writeU8(0xdb);\n      this.writeU32(byteLength);\n    } else {\n      throw new Error(`Too long string: ${byteLength} bytes in UTF-8`);\n    }\n  }\n\n  private encodeString(object: string) {\n    const maxHeaderSize = 1 + 4;\n\n    const byteLength = utf8Count(object);\n    this.ensureBufferSizeToWrite(maxHeaderSize + byteLength);\n    this.writeStringHeader(byteLength);\n    utf8Encode(object, this.bytes, this.pos);\n    this.pos += byteLength;\n  }\n\n  private encodeObject(object: unknown, depth: number) {\n    // try to encode objects with custom codec first of non-primitives\n    const ext = this.extensionCodec.tryToEncode(object, this.context);\n    if (ext != null) {\n      this.encodeExtension(ext);\n    } else if (Array.isArray(object)) {\n      this.encodeArray(object, depth);\n    } else if (ArrayBuffer.isView(object)) {\n      this.encodeBinary(object);\n    } else if (typeof object === \"object\") {\n      this.encodeMap(object as Record<string, unknown>, depth);\n    } else {\n      // symbol, function and other special object come here unless extensionCodec handles them.\n      throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(object)}`);\n    }\n  }\n\n  private encodeBinary(object: ArrayBufferView) {\n    const size = object.byteLength;\n    if (size < 0x100) {\n      // bin 8\n      this.writeU8(0xc4);\n      this.writeU8(size);\n    } else if (size < 0x10000) {\n      // bin 16\n      this.writeU8(0xc5);\n      this.writeU16(size);\n    } else if (size < 0x100000000) {\n      // bin 32\n      this.writeU8(0xc6);\n      this.writeU32(size);\n    } else {\n      throw new Error(`Too large binary: ${size}`);\n    }\n    const bytes = ensureUint8Array(object);\n    this.writeU8a(bytes);\n  }\n\n  private encodeArray(object: Array<unknown>, depth: number) {\n    const size = object.length;\n    if (size < 16) {\n      // fixarray\n      this.writeU8(0x90 + size);\n    } else if (size < 0x10000) {\n      // array 16\n      this.writeU8(0xdc);\n      this.writeU16(size);\n    } else if (size < 0x100000000) {\n      // array 32\n      this.writeU8(0xdd);\n      this.writeU32(size);\n    } else {\n      throw new Error(`Too large array: ${size}`);\n    }\n    for (const item of object) {\n      this.doEncode(item, depth + 1);\n    }\n  }\n\n  private countWithoutUndefined(object: Record<string, unknown>, keys: ReadonlyArray<string>): number {\n    let count = 0;\n\n    for (const key of keys) {\n      if (object[key] !== undefined) {\n        count++;\n      }\n    }\n\n    return count;\n  }\n\n  private encodeMap(object: Record<string, unknown>, depth: number) {\n    const keys = Object.keys(object);\n    if (this.sortKeys) {\n      keys.sort();\n    }\n\n    const size = this.ignoreUndefined ? this.countWithoutUndefined(object, keys) : keys.length;\n\n    if (size < 16) {\n      // fixmap\n      this.writeU8(0x80 + size);\n    } else if (size < 0x10000) {\n      // map 16\n      this.writeU8(0xde);\n      this.writeU16(size);\n    } else if (size < 0x100000000) {\n      // map 32\n      this.writeU8(0xdf);\n      this.writeU32(size);\n    } else {\n      throw new Error(`Too large map object: ${size}`);\n    }\n\n    for (const key of keys) {\n      const value = object[key];\n\n      if (!(this.ignoreUndefined && value === undefined)) {\n        this.encodeString(key);\n        this.doEncode(value, depth + 1);\n      }\n    }\n  }\n\n  private encodeExtension(ext: ExtData) {\n    if (typeof ext.data === \"function\") {\n      const data = ext.data(this.pos + 6);\n      const size = data.length;\n\n      if (size >= 0x100000000) {\n        throw new Error(`Too large extension object: ${size}`);\n      }\n\n      this.writeU8(0xc9);\n      this.writeU32(size);\n      this.writeI8(ext.type);\n      this.writeU8a(data);\n      return;\n    }\n\n    const size = ext.data.length;\n    if (size === 1) {\n      // fixext 1\n      this.writeU8(0xd4);\n    } else if (size === 2) {\n      // fixext 2\n      this.writeU8(0xd5);\n    } else if (size === 4) {\n      // fixext 4\n      this.writeU8(0xd6);\n    } else if (size === 8) {\n      // fixext 8\n      this.writeU8(0xd7);\n    } else if (size === 16) {\n      // fixext 16\n      this.writeU8(0xd8);\n    } else if (size < 0x100) {\n      // ext 8\n      this.writeU8(0xc7);\n      this.writeU8(size);\n    } else if (size < 0x10000) {\n      // ext 16\n      this.writeU8(0xc8);\n      this.writeU16(size);\n    } else if (size < 0x100000000) {\n      // ext 32\n      this.writeU8(0xc9);\n      this.writeU32(size);\n    } else {\n      throw new Error(`Too large extension object: ${size}`);\n    }\n    this.writeI8(ext.type);\n    this.writeU8a(ext.data);\n  }\n\n  private writeU8(value: number) {\n    this.ensureBufferSizeToWrite(1);\n\n    this.view.setUint8(this.pos, value);\n    this.pos++;\n  }\n\n  private writeU8a(values: ArrayLike<number>) {\n    const size = values.length;\n    this.ensureBufferSizeToWrite(size);\n\n    this.bytes.set(values, this.pos);\n    this.pos += size;\n  }\n\n  private writeI8(value: number) {\n    this.ensureBufferSizeToWrite(1);\n\n    this.view.setInt8(this.pos, value);\n    this.pos++;\n  }\n\n  private writeU16(value: number) {\n    this.ensureBufferSizeToWrite(2);\n\n    this.view.setUint16(this.pos, value);\n    this.pos += 2;\n  }\n\n  private writeI16(value: number) {\n    this.ensureBufferSizeToWrite(2);\n\n    this.view.setInt16(this.pos, value);\n    this.pos += 2;\n  }\n\n  private writeU32(value: number) {\n    this.ensureBufferSizeToWrite(4);\n\n    this.view.setUint32(this.pos, value);\n    this.pos += 4;\n  }\n\n  private writeI32(value: number) {\n    this.ensureBufferSizeToWrite(4);\n\n    this.view.setInt32(this.pos, value);\n    this.pos += 4;\n  }\n\n  private writeF32(value: number) {\n    this.ensureBufferSizeToWrite(4);\n\n    this.view.setFloat32(this.pos, value);\n    this.pos += 4;\n  }\n\n  private writeF64(value: number) {\n    this.ensureBufferSizeToWrite(8);\n\n    this.view.setFloat64(this.pos, value);\n    this.pos += 8;\n  }\n\n  private writeU64(value: number) {\n    this.ensureBufferSizeToWrite(8);\n\n    setUint64(this.view, this.pos, value);\n    this.pos += 8;\n  }\n\n  private writeI64(value: number) {\n    this.ensureBufferSizeToWrite(8);\n\n    setInt64(this.view, this.pos, value);\n    this.pos += 8;\n  }\n\n  private writeBigUint64(value: bigint) {\n    this.ensureBufferSizeToWrite(8);\n\n    this.view.setBigUint64(this.pos, value);\n    this.pos += 8;\n  }\n\n  private writeBigInt64(value: bigint) {\n    this.ensureBufferSizeToWrite(8);\n\n    this.view.setBigInt64(this.pos, value);\n    this.pos += 8;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}