{"ast":null,"code":"import { NetworkUtil } from '@reown/appkit-common';\nimport { ChainController } from '../../controllers/ChainController.js';\nexport class ReownAuthenticationMessenger {\n  constructor(params) {\n    this.getNonce = params.getNonce;\n  }\n  async createMessage(input) {\n    const params = {\n      accountAddress: input.accountAddress,\n      chainId: input.chainId,\n      version: '1',\n      domain: typeof document === 'undefined' ? 'Unknown Domain' : document.location.host,\n      uri: typeof document === 'undefined' ? 'Unknown URI' : document.location.href,\n      resources: this.resources,\n      nonce: await this.getNonce(input),\n      issuedAt: this.stringifyDate(new Date()),\n      statement: undefined,\n      expirationTime: undefined,\n      notBefore: undefined\n    };\n    const methods = {\n      toString: () => this.stringify(params)\n    };\n    return Object.assign(params, methods);\n  }\n  stringify(params) {\n    var _params$resources;\n    const networkName = this.getNetworkName(params.chainId);\n    return [\"\".concat(params.domain, \" wants you to sign in with your \").concat(networkName, \" account:\"), params.accountAddress, params.statement ? \"\\n\".concat(params.statement, \"\\n\") : '', \"URI: \".concat(params.uri), \"Version: \".concat(params.version), \"Chain ID: \".concat(params.chainId), \"Nonce: \".concat(params.nonce), params.issuedAt && \"Issued At: \".concat(params.issuedAt), params.expirationTime && \"Expiration Time: \".concat(params.expirationTime), params.notBefore && \"Not Before: \".concat(params.notBefore), params.requestId && \"Request ID: \".concat(params.requestId), ((_params$resources = params.resources) === null || _params$resources === void 0 ? void 0 : _params$resources.length) && params.resources.reduce((acc, resource) => \"\".concat(acc, \"\\n- \").concat(resource), 'Resources:')].filter(line => typeof line === 'string').join('\\n').trim();\n  }\n  getNetworkName(chainId) {\n    const requestedNetworks = ChainController.getAllRequestedCaipNetworks();\n    return NetworkUtil.getNetworkNameByCaipNetworkId(requestedNetworks, chainId);\n  }\n  stringifyDate(date) {\n    return date.toISOString();\n  }\n}","map":{"version":3,"names":["NetworkUtil","ChainController","ReownAuthenticationMessenger","constructor","params","getNonce","createMessage","input","accountAddress","chainId","version","domain","document","location","host","uri","href","resources","nonce","issuedAt","stringifyDate","Date","statement","undefined","expirationTime","notBefore","methods","toString","stringify","Object","assign","_params$resources","networkName","getNetworkName","concat","requestId","length","reduce","acc","resource","filter","line","join","trim","requestedNetworks","getAllRequestedCaipNetworks","getNetworkNameByCaipNetworkId","date","toISOString"],"sources":["../../../../../src/features/reown-authentication/ReownAuthenticationMessenger.ts"],"sourcesContent":[null],"mappings":"AAAA,SAA6BA,WAAW,QAAQ,sBAAsB;AAEtE,SAASC,eAAe,QAAQ,sCAAsC;AAGtE,OAAM,MAAOC,4BAA4B;EAKvCC,YAAYC,MAAsD;IAChE,IAAI,CAACC,QAAQ,GAAGD,MAAM,CAACC,QAAQ;EACjC;EAEA,MAAMC,aAAaA,CAACC,KAAwB;IAC1C,MAAMH,MAAM,GAAG;MACbI,cAAc,EAAED,KAAK,CAACC,cAAc;MACpCC,OAAO,EAAEF,KAAK,CAACE,OAAO;MACtBC,OAAO,EAAE,GAAG;MACZC,MAAM,EAAE,OAAOC,QAAQ,KAAK,WAAW,GAAG,gBAAgB,GAAGA,QAAQ,CAACC,QAAQ,CAACC,IAAI;MACnFC,GAAG,EAAE,OAAOH,QAAQ,KAAK,WAAW,GAAG,aAAa,GAAGA,QAAQ,CAACC,QAAQ,CAACG,IAAI;MAC7EC,SAAS,EAAE,IAAI,CAACA,SAAS;MACzBC,KAAK,EAAE,MAAM,IAAI,CAACb,QAAQ,CAACE,KAAK,CAAC;MACjCY,QAAQ,EAAE,IAAI,CAACC,aAAa,CAAC,IAAIC,IAAI,EAAE,CAAC;MACxCC,SAAS,EAAEC,SAAS;MACpBC,cAAc,EAAED,SAAS;MACzBE,SAAS,EAAEF;KACZ;IAED,MAAMG,OAAO,GAAG;MACdC,QAAQ,EAAEA,CAAA,KAAM,IAAI,CAACC,SAAS,CAACxB,MAAM;KACR;IAE/B,OAAOyB,MAAM,CAACC,MAAM,CAAC1B,MAAM,EAAEsB,OAAO,CAAC;EACvC;EAEQE,SAASA,CAACxB,MAAwB;IAAA,IAAA2B,iBAAA;IACxC,MAAMC,WAAW,GAAG,IAAI,CAACC,cAAc,CAAC7B,MAAM,CAACK,OAAO,CAAC;IAEvD,OAAO,IAAAyB,MAAA,CACF9B,MAAM,CAACO,MAAM,sCAAAuB,MAAA,CAAmCF,WAAW,gBAC9D5B,MAAM,CAACI,cAAc,EACrBJ,MAAM,CAACkB,SAAS,QAAAY,MAAA,CAAQ9B,MAAM,CAACkB,SAAS,UAAO,EAAE,UAAAY,MAAA,CACzC9B,MAAM,CAACW,GAAG,eAAAmB,MAAA,CACN9B,MAAM,CAACM,OAAO,gBAAAwB,MAAA,CACb9B,MAAM,CAACK,OAAO,aAAAyB,MAAA,CACjB9B,MAAM,CAACc,KAAK,GACtBd,MAAM,CAACe,QAAQ,kBAAAe,MAAA,CAAkB9B,MAAM,CAACe,QAAQ,CAAE,EAClDf,MAAM,CAACoB,cAAc,wBAAAU,MAAA,CAAwB9B,MAAM,CAACoB,cAAc,CAAE,EACpEpB,MAAM,CAACqB,SAAS,mBAAAS,MAAA,CAAmB9B,MAAM,CAACqB,SAAS,CAAE,EACrDrB,MAAM,CAAC+B,SAAS,mBAAAD,MAAA,CAAmB9B,MAAM,CAAC+B,SAAS,CAAE,EACrD,EAAAJ,iBAAA,GAAA3B,MAAM,CAACa,SAAS,cAAAc,iBAAA,uBAAhBA,iBAAA,CAAkBK,MAAM,KACtBhC,MAAM,CAACa,SAAS,CAACoB,MAAM,CAAC,CAACC,GAAG,EAAEC,QAAQ,QAAAL,MAAA,CAAQI,GAAG,UAAAJ,MAAA,CAAOK,QAAQ,CAAE,EAAE,YAAY,CAAC,CACpF,CACEC,MAAM,CAACC,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ,CAAC,CACxCC,IAAI,CAAC,IAAI,CAAC,CACVC,IAAI,EAAE;EACX;EAEQV,cAAcA,CAACxB,OAAsB;IAC3C,MAAMmC,iBAAiB,GAAG3C,eAAe,CAAC4C,2BAA2B,EAAE;IAEvE,OAAO7C,WAAW,CAAC8C,6BAA6B,CAACF,iBAAiB,EAAEnC,OAAO,CAAC;EAC9E;EAEQW,aAAaA,CAAC2B,IAAU;IAC9B,OAAOA,IAAI,CAACC,WAAW,EAAE;EAC3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}