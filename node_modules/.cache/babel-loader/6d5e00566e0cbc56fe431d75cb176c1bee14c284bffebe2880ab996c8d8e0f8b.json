{"ast":null,"code":"import _objectSpread from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport destr from 'destr';\nimport { n as normalizeBaseKey, a as normalizeKey, b as asyncCall, f as filterKeyByDepth, c as filterKeyByBase, s as serializeRaw, d as stringify, e as deserializeRaw, j as joinKeys } from './shared/unstorage.zVDD2mZo.mjs';\nexport { p as prefixStorage } from './shared/unstorage.zVDD2mZo.mjs';\nfunction defineDriver(factory) {\n  return factory;\n}\nconst DRIVER_NAME = \"memory\";\nconst memory = defineDriver(() => {\n  const data = /* @__PURE__ */new Map();\n  return {\n    name: DRIVER_NAME,\n    getInstance: () => data,\n    hasItem(key) {\n      return data.has(key);\n    },\n    getItem(key) {\n      var _data$get;\n      return (_data$get = data.get(key)) !== null && _data$get !== void 0 ? _data$get : null;\n    },\n    getItemRaw(key) {\n      var _data$get2;\n      return (_data$get2 = data.get(key)) !== null && _data$get2 !== void 0 ? _data$get2 : null;\n    },\n    setItem(key, value) {\n      data.set(key, value);\n    },\n    setItemRaw(key, value) {\n      data.set(key, value);\n    },\n    removeItem(key) {\n      data.delete(key);\n    },\n    getKeys() {\n      return [...data.keys()];\n    },\n    clear() {\n      data.clear();\n    },\n    dispose() {\n      data.clear();\n    }\n  };\n});\nfunction createStorage() {\n  let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const context = {\n    mounts: {\n      \"\": options.driver || memory()\n    },\n    mountpoints: [\"\"],\n    watching: false,\n    watchListeners: [],\n    unwatch: {}\n  };\n  const getMount = key => {\n    for (const base of context.mountpoints) {\n      if (key.startsWith(base)) {\n        return {\n          base,\n          relativeKey: key.slice(base.length),\n          driver: context.mounts[base]\n        };\n      }\n    }\n    return {\n      base: \"\",\n      relativeKey: key,\n      driver: context.mounts[\"\"]\n    };\n  };\n  const getMounts = (base, includeParent) => {\n    return context.mountpoints.filter(mountpoint => mountpoint.startsWith(base) || includeParent && base.startsWith(mountpoint)).map(mountpoint => ({\n      relativeBase: base.length > mountpoint.length ? base.slice(mountpoint.length) : void 0,\n      mountpoint,\n      driver: context.mounts[mountpoint]\n    }));\n  };\n  const onChange = (event, key) => {\n    if (!context.watching) {\n      return;\n    }\n    key = normalizeKey(key);\n    for (const listener of context.watchListeners) {\n      listener(event, key);\n    }\n  };\n  const startWatch = async () => {\n    if (context.watching) {\n      return;\n    }\n    context.watching = true;\n    for (const mountpoint in context.mounts) {\n      context.unwatch[mountpoint] = await watch(context.mounts[mountpoint], onChange, mountpoint);\n    }\n  };\n  const stopWatch = async () => {\n    if (!context.watching) {\n      return;\n    }\n    for (const mountpoint in context.unwatch) {\n      await context.unwatch[mountpoint]();\n    }\n    context.unwatch = {};\n    context.watching = false;\n  };\n  const runBatch = (items, commonOptions, cb) => {\n    const batches = /* @__PURE__ */new Map();\n    const getBatch = mount => {\n      let batch = batches.get(mount.base);\n      if (!batch) {\n        batch = {\n          driver: mount.driver,\n          base: mount.base,\n          items: []\n        };\n        batches.set(mount.base, batch);\n      }\n      return batch;\n    };\n    for (const item of items) {\n      const isStringItem = typeof item === \"string\";\n      const key = normalizeKey(isStringItem ? item : item.key);\n      const value = isStringItem ? void 0 : item.value;\n      const options2 = isStringItem || !item.options ? commonOptions : _objectSpread(_objectSpread({}, commonOptions), item.options);\n      const mount = getMount(key);\n      getBatch(mount).items.push({\n        key,\n        value,\n        relativeKey: mount.relativeKey,\n        options: options2\n      });\n    }\n    return Promise.all([...batches.values()].map(batch => cb(batch))).then(r => r.flat());\n  };\n  const storage = {\n    // Item\n    hasItem(key) {\n      let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      key = normalizeKey(key);\n      const {\n        relativeKey,\n        driver\n      } = getMount(key);\n      return asyncCall(driver.hasItem, relativeKey, opts);\n    },\n    getItem(key) {\n      let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      key = normalizeKey(key);\n      const {\n        relativeKey,\n        driver\n      } = getMount(key);\n      return asyncCall(driver.getItem, relativeKey, opts).then(value => destr(value));\n    },\n    getItems(items) {\n      let commonOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return runBatch(items, commonOptions, batch => {\n        if (batch.driver.getItems) {\n          return asyncCall(batch.driver.getItems, batch.items.map(item => ({\n            key: item.relativeKey,\n            options: item.options\n          })), commonOptions).then(r => r.map(item => ({\n            key: joinKeys(batch.base, item.key),\n            value: destr(item.value)\n          })));\n        }\n        return Promise.all(batch.items.map(item => {\n          return asyncCall(batch.driver.getItem, item.relativeKey, item.options).then(value => ({\n            key: item.key,\n            value: destr(value)\n          }));\n        }));\n      });\n    },\n    getItemRaw(key) {\n      let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      key = normalizeKey(key);\n      const {\n        relativeKey,\n        driver\n      } = getMount(key);\n      if (driver.getItemRaw) {\n        return asyncCall(driver.getItemRaw, relativeKey, opts);\n      }\n      return asyncCall(driver.getItem, relativeKey, opts).then(value => deserializeRaw(value));\n    },\n    async setItem(key, value) {\n      let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (value === void 0) {\n        return storage.removeItem(key);\n      }\n      key = normalizeKey(key);\n      const {\n        relativeKey,\n        driver\n      } = getMount(key);\n      if (!driver.setItem) {\n        return;\n      }\n      await asyncCall(driver.setItem, relativeKey, stringify(value), opts);\n      if (!driver.watch) {\n        onChange(\"update\", key);\n      }\n    },\n    async setItems(items, commonOptions) {\n      await runBatch(items, commonOptions, async batch => {\n        if (batch.driver.setItems) {\n          return asyncCall(batch.driver.setItems, batch.items.map(item => ({\n            key: item.relativeKey,\n            value: stringify(item.value),\n            options: item.options\n          })), commonOptions);\n        }\n        if (!batch.driver.setItem) {\n          return;\n        }\n        await Promise.all(batch.items.map(item => {\n          return asyncCall(batch.driver.setItem, item.relativeKey, stringify(item.value), item.options);\n        }));\n      });\n    },\n    async setItemRaw(key, value) {\n      let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (value === void 0) {\n        return storage.removeItem(key, opts);\n      }\n      key = normalizeKey(key);\n      const {\n        relativeKey,\n        driver\n      } = getMount(key);\n      if (driver.setItemRaw) {\n        await asyncCall(driver.setItemRaw, relativeKey, value, opts);\n      } else if (driver.setItem) {\n        await asyncCall(driver.setItem, relativeKey, serializeRaw(value), opts);\n      } else {\n        return;\n      }\n      if (!driver.watch) {\n        onChange(\"update\", key);\n      }\n    },\n    async removeItem(key) {\n      let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (typeof opts === \"boolean\") {\n        opts = {\n          removeMeta: opts\n        };\n      }\n      key = normalizeKey(key);\n      const {\n        relativeKey,\n        driver\n      } = getMount(key);\n      if (!driver.removeItem) {\n        return;\n      }\n      await asyncCall(driver.removeItem, relativeKey, opts);\n      if (opts.removeMeta || opts.removeMata) {\n        await asyncCall(driver.removeItem, relativeKey + \"$\", opts);\n      }\n      if (!driver.watch) {\n        onChange(\"remove\", key);\n      }\n    },\n    // Meta\n    async getMeta(key) {\n      let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (typeof opts === \"boolean\") {\n        opts = {\n          nativeOnly: opts\n        };\n      }\n      key = normalizeKey(key);\n      const {\n        relativeKey,\n        driver\n      } = getMount(key);\n      const meta = /* @__PURE__ */Object.create(null);\n      if (driver.getMeta) {\n        Object.assign(meta, await asyncCall(driver.getMeta, relativeKey, opts));\n      }\n      if (!opts.nativeOnly) {\n        const value = await asyncCall(driver.getItem, relativeKey + \"$\", opts).then(value_ => destr(value_));\n        if (value && typeof value === \"object\") {\n          if (typeof value.atime === \"string\") {\n            value.atime = new Date(value.atime);\n          }\n          if (typeof value.mtime === \"string\") {\n            value.mtime = new Date(value.mtime);\n          }\n          Object.assign(meta, value);\n        }\n      }\n      return meta;\n    },\n    setMeta(key, value) {\n      let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return this.setItem(key + \"$\", value, opts);\n    },\n    removeMeta(key) {\n      let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return this.removeItem(key + \"$\", opts);\n    },\n    // Keys\n    async getKeys(base) {\n      let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      base = normalizeBaseKey(base);\n      const mounts = getMounts(base, true);\n      let maskedMounts = [];\n      const allKeys = [];\n      let allMountsSupportMaxDepth = true;\n      for (const mount of mounts) {\n        var _mount$driver$flags;\n        if (!((_mount$driver$flags = mount.driver.flags) !== null && _mount$driver$flags !== void 0 && _mount$driver$flags.maxDepth)) {\n          allMountsSupportMaxDepth = false;\n        }\n        const rawKeys = await asyncCall(mount.driver.getKeys, mount.relativeBase, opts);\n        for (const key of rawKeys) {\n          const fullKey = mount.mountpoint + normalizeKey(key);\n          if (!maskedMounts.some(p => fullKey.startsWith(p))) {\n            allKeys.push(fullKey);\n          }\n        }\n        maskedMounts = [mount.mountpoint, ...maskedMounts.filter(p => !p.startsWith(mount.mountpoint))];\n      }\n      const shouldFilterByDepth = opts.maxDepth !== void 0 && !allMountsSupportMaxDepth;\n      return allKeys.filter(key => (!shouldFilterByDepth || filterKeyByDepth(key, opts.maxDepth)) && filterKeyByBase(key, base));\n    },\n    // Utils\n    async clear(base) {\n      let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      base = normalizeBaseKey(base);\n      await Promise.all(getMounts(base, false).map(async m => {\n        if (m.driver.clear) {\n          return asyncCall(m.driver.clear, m.relativeBase, opts);\n        }\n        if (m.driver.removeItem) {\n          const keys = await m.driver.getKeys(m.relativeBase || \"\", opts);\n          return Promise.all(keys.map(key => m.driver.removeItem(key, opts)));\n        }\n      }));\n    },\n    async dispose() {\n      await Promise.all(Object.values(context.mounts).map(driver => dispose(driver)));\n    },\n    async watch(callback) {\n      await startWatch();\n      context.watchListeners.push(callback);\n      return async () => {\n        context.watchListeners = context.watchListeners.filter(listener => listener !== callback);\n        if (context.watchListeners.length === 0) {\n          await stopWatch();\n        }\n      };\n    },\n    async unwatch() {\n      context.watchListeners = [];\n      await stopWatch();\n    },\n    // Mount\n    mount(base, driver) {\n      base = normalizeBaseKey(base);\n      if (base && context.mounts[base]) {\n        throw new Error(\"already mounted at \".concat(base));\n      }\n      if (base) {\n        context.mountpoints.push(base);\n        context.mountpoints.sort((a, b) => b.length - a.length);\n      }\n      context.mounts[base] = driver;\n      if (context.watching) {\n        Promise.resolve(watch(driver, onChange, base)).then(unwatcher => {\n          context.unwatch[base] = unwatcher;\n        }).catch(console.error);\n      }\n      return storage;\n    },\n    async unmount(base) {\n      let _dispose = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      base = normalizeBaseKey(base);\n      if (!base || !context.mounts[base]) {\n        return;\n      }\n      if (context.watching && base in context.unwatch) {\n        var _context$unwatch$base, _context$unwatch;\n        (_context$unwatch$base = (_context$unwatch = context.unwatch)[base]) === null || _context$unwatch$base === void 0 || _context$unwatch$base.call(_context$unwatch);\n        delete context.unwatch[base];\n      }\n      if (_dispose) {\n        await dispose(context.mounts[base]);\n      }\n      context.mountpoints = context.mountpoints.filter(key => key !== base);\n      delete context.mounts[base];\n    },\n    getMount() {\n      let key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      key = normalizeKey(key) + \":\";\n      const m = getMount(key);\n      return {\n        driver: m.driver,\n        base: m.base\n      };\n    },\n    getMounts() {\n      let base = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      base = normalizeKey(base);\n      const mounts = getMounts(base, opts.parents);\n      return mounts.map(m => ({\n        driver: m.driver,\n        base: m.mountpoint\n      }));\n    },\n    // Aliases\n    keys: function (base) {\n      let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return storage.getKeys(base, opts);\n    },\n    get: function (key) {\n      let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return storage.getItem(key, opts);\n    },\n    set: function (key, value) {\n      let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return storage.setItem(key, value, opts);\n    },\n    has: function (key) {\n      let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return storage.hasItem(key, opts);\n    },\n    del: function (key) {\n      let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return storage.removeItem(key, opts);\n    },\n    remove: function (key) {\n      let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return storage.removeItem(key, opts);\n    }\n  };\n  return storage;\n}\nasync function snapshot(storage, base) {\n  base = normalizeBaseKey(base);\n  const keys = await storage.getKeys(base);\n  const snapshot2 = {};\n  await Promise.all(keys.map(async key => {\n    snapshot2[key.slice(base.length)] = await storage.getItem(key);\n  }));\n  return snapshot2;\n}\nasync function restoreSnapshot(driver, snapshot2) {\n  let base = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n  base = normalizeBaseKey(base);\n  await Promise.all(Object.entries(snapshot2).map(e => driver.setItem(base + e[0], e[1])));\n}\nfunction watch(driver, onChange, base) {\n  return driver.watch ? driver.watch((event, key) => onChange(event, base + key)) : () => {};\n}\nasync function dispose(driver) {\n  if (typeof driver.dispose === \"function\") {\n    await asyncCall(driver.dispose);\n  }\n}\nconst builtinDrivers = {\n  \"azure-app-configuration\": \"unstorage/drivers/azure-app-configuration\",\n  \"azureAppConfiguration\": \"unstorage/drivers/azure-app-configuration\",\n  \"azure-cosmos\": \"unstorage/drivers/azure-cosmos\",\n  \"azureCosmos\": \"unstorage/drivers/azure-cosmos\",\n  \"azure-key-vault\": \"unstorage/drivers/azure-key-vault\",\n  \"azureKeyVault\": \"unstorage/drivers/azure-key-vault\",\n  \"azure-storage-blob\": \"unstorage/drivers/azure-storage-blob\",\n  \"azureStorageBlob\": \"unstorage/drivers/azure-storage-blob\",\n  \"azure-storage-table\": \"unstorage/drivers/azure-storage-table\",\n  \"azureStorageTable\": \"unstorage/drivers/azure-storage-table\",\n  \"capacitor-preferences\": \"unstorage/drivers/capacitor-preferences\",\n  \"capacitorPreferences\": \"unstorage/drivers/capacitor-preferences\",\n  \"cloudflare-kv-binding\": \"unstorage/drivers/cloudflare-kv-binding\",\n  \"cloudflareKVBinding\": \"unstorage/drivers/cloudflare-kv-binding\",\n  \"cloudflare-kv-http\": \"unstorage/drivers/cloudflare-kv-http\",\n  \"cloudflareKVHttp\": \"unstorage/drivers/cloudflare-kv-http\",\n  \"cloudflare-r2-binding\": \"unstorage/drivers/cloudflare-r2-binding\",\n  \"cloudflareR2Binding\": \"unstorage/drivers/cloudflare-r2-binding\",\n  \"db0\": \"unstorage/drivers/db0\",\n  \"deno-kv-node\": \"unstorage/drivers/deno-kv-node\",\n  \"denoKVNode\": \"unstorage/drivers/deno-kv-node\",\n  \"deno-kv\": \"unstorage/drivers/deno-kv\",\n  \"denoKV\": \"unstorage/drivers/deno-kv\",\n  \"fs-lite\": \"unstorage/drivers/fs-lite\",\n  \"fsLite\": \"unstorage/drivers/fs-lite\",\n  \"fs\": \"unstorage/drivers/fs\",\n  \"github\": \"unstorage/drivers/github\",\n  \"http\": \"unstorage/drivers/http\",\n  \"indexedb\": \"unstorage/drivers/indexedb\",\n  \"localstorage\": \"unstorage/drivers/localstorage\",\n  \"lru-cache\": \"unstorage/drivers/lru-cache\",\n  \"lruCache\": \"unstorage/drivers/lru-cache\",\n  \"memory\": \"unstorage/drivers/memory\",\n  \"mongodb\": \"unstorage/drivers/mongodb\",\n  \"netlify-blobs\": \"unstorage/drivers/netlify-blobs\",\n  \"netlifyBlobs\": \"unstorage/drivers/netlify-blobs\",\n  \"null\": \"unstorage/drivers/null\",\n  \"overlay\": \"unstorage/drivers/overlay\",\n  \"planetscale\": \"unstorage/drivers/planetscale\",\n  \"redis\": \"unstorage/drivers/redis\",\n  \"s3\": \"unstorage/drivers/s3\",\n  \"session-storage\": \"unstorage/drivers/session-storage\",\n  \"sessionStorage\": \"unstorage/drivers/session-storage\",\n  \"uploadthing\": \"unstorage/drivers/uploadthing\",\n  \"upstash\": \"unstorage/drivers/upstash\",\n  \"vercel-blob\": \"unstorage/drivers/vercel-blob\",\n  \"vercelBlob\": \"unstorage/drivers/vercel-blob\",\n  \"vercel-kv\": \"unstorage/drivers/vercel-kv\",\n  \"vercelKV\": \"unstorage/drivers/vercel-kv\",\n  \"vercel-runtime-cache\": \"unstorage/drivers/vercel-runtime-cache\",\n  \"vercelRuntimeCache\": \"unstorage/drivers/vercel-runtime-cache\"\n};\nexport { builtinDrivers, createStorage, defineDriver, filterKeyByBase, filterKeyByDepth, joinKeys, normalizeBaseKey, normalizeKey, restoreSnapshot, snapshot };","map":{"version":3,"names":["destr","n","normalizeBaseKey","a","normalizeKey","b","asyncCall","f","filterKeyByDepth","c","filterKeyByBase","s","serializeRaw","d","stringify","e","deserializeRaw","j","joinKeys","p","prefixStorage","defineDriver","factory","DRIVER_NAME","memory","data","Map","name","getInstance","hasItem","key","has","getItem","_data$get","get","getItemRaw","_data$get2","setItem","value","set","setItemRaw","removeItem","delete","getKeys","keys","clear","dispose","createStorage","options","arguments","length","undefined","context","mounts","driver","mountpoints","watching","watchListeners","unwatch","getMount","base","startsWith","relativeKey","slice","getMounts","includeParent","filter","mountpoint","map","relativeBase","onChange","event","listener","startWatch","watch","stopWatch","runBatch","items","commonOptions","cb","batches","getBatch","mount","batch","item","isStringItem","options2","_objectSpread","push","Promise","all","values","then","r","flat","storage","opts","getItems","setItems","removeMeta","removeMata","getMeta","nativeOnly","meta","Object","create","assign","value_","atime","Date","mtime","setMeta","maskedMounts","allKeys","allMountsSupportMaxDepth","_mount$driver$flags","flags","maxDepth","rawKeys","fullKey","some","shouldFilterByDepth","m","callback","Error","concat","sort","resolve","unwatcher","catch","console","error","unmount","_dispose","_context$unwatch$base","_context$unwatch","call","parents","del","remove","snapshot","snapshot2","restoreSnapshot","entries","builtinDrivers"],"sources":["/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/unstorage/dist/index.mjs"],"sourcesContent":["import destr from 'destr';\nimport { n as normalizeBaseKey, a as normalizeKey, b as asyncCall, f as filterKeyByDepth, c as filterKeyByBase, s as serializeRaw, d as stringify, e as deserializeRaw, j as joinKeys } from './shared/unstorage.zVDD2mZo.mjs';\nexport { p as prefixStorage } from './shared/unstorage.zVDD2mZo.mjs';\n\nfunction defineDriver(factory) {\n  return factory;\n}\n\nconst DRIVER_NAME = \"memory\";\nconst memory = defineDriver(() => {\n  const data = /* @__PURE__ */ new Map();\n  return {\n    name: DRIVER_NAME,\n    getInstance: () => data,\n    hasItem(key) {\n      return data.has(key);\n    },\n    getItem(key) {\n      return data.get(key) ?? null;\n    },\n    getItemRaw(key) {\n      return data.get(key) ?? null;\n    },\n    setItem(key, value) {\n      data.set(key, value);\n    },\n    setItemRaw(key, value) {\n      data.set(key, value);\n    },\n    removeItem(key) {\n      data.delete(key);\n    },\n    getKeys() {\n      return [...data.keys()];\n    },\n    clear() {\n      data.clear();\n    },\n    dispose() {\n      data.clear();\n    }\n  };\n});\n\nfunction createStorage(options = {}) {\n  const context = {\n    mounts: { \"\": options.driver || memory() },\n    mountpoints: [\"\"],\n    watching: false,\n    watchListeners: [],\n    unwatch: {}\n  };\n  const getMount = (key) => {\n    for (const base of context.mountpoints) {\n      if (key.startsWith(base)) {\n        return {\n          base,\n          relativeKey: key.slice(base.length),\n          driver: context.mounts[base]\n        };\n      }\n    }\n    return {\n      base: \"\",\n      relativeKey: key,\n      driver: context.mounts[\"\"]\n    };\n  };\n  const getMounts = (base, includeParent) => {\n    return context.mountpoints.filter(\n      (mountpoint) => mountpoint.startsWith(base) || includeParent && base.startsWith(mountpoint)\n    ).map((mountpoint) => ({\n      relativeBase: base.length > mountpoint.length ? base.slice(mountpoint.length) : void 0,\n      mountpoint,\n      driver: context.mounts[mountpoint]\n    }));\n  };\n  const onChange = (event, key) => {\n    if (!context.watching) {\n      return;\n    }\n    key = normalizeKey(key);\n    for (const listener of context.watchListeners) {\n      listener(event, key);\n    }\n  };\n  const startWatch = async () => {\n    if (context.watching) {\n      return;\n    }\n    context.watching = true;\n    for (const mountpoint in context.mounts) {\n      context.unwatch[mountpoint] = await watch(\n        context.mounts[mountpoint],\n        onChange,\n        mountpoint\n      );\n    }\n  };\n  const stopWatch = async () => {\n    if (!context.watching) {\n      return;\n    }\n    for (const mountpoint in context.unwatch) {\n      await context.unwatch[mountpoint]();\n    }\n    context.unwatch = {};\n    context.watching = false;\n  };\n  const runBatch = (items, commonOptions, cb) => {\n    const batches = /* @__PURE__ */ new Map();\n    const getBatch = (mount) => {\n      let batch = batches.get(mount.base);\n      if (!batch) {\n        batch = {\n          driver: mount.driver,\n          base: mount.base,\n          items: []\n        };\n        batches.set(mount.base, batch);\n      }\n      return batch;\n    };\n    for (const item of items) {\n      const isStringItem = typeof item === \"string\";\n      const key = normalizeKey(isStringItem ? item : item.key);\n      const value = isStringItem ? void 0 : item.value;\n      const options2 = isStringItem || !item.options ? commonOptions : { ...commonOptions, ...item.options };\n      const mount = getMount(key);\n      getBatch(mount).items.push({\n        key,\n        value,\n        relativeKey: mount.relativeKey,\n        options: options2\n      });\n    }\n    return Promise.all([...batches.values()].map((batch) => cb(batch))).then(\n      (r) => r.flat()\n    );\n  };\n  const storage = {\n    // Item\n    hasItem(key, opts = {}) {\n      key = normalizeKey(key);\n      const { relativeKey, driver } = getMount(key);\n      return asyncCall(driver.hasItem, relativeKey, opts);\n    },\n    getItem(key, opts = {}) {\n      key = normalizeKey(key);\n      const { relativeKey, driver } = getMount(key);\n      return asyncCall(driver.getItem, relativeKey, opts).then(\n        (value) => destr(value)\n      );\n    },\n    getItems(items, commonOptions = {}) {\n      return runBatch(items, commonOptions, (batch) => {\n        if (batch.driver.getItems) {\n          return asyncCall(\n            batch.driver.getItems,\n            batch.items.map((item) => ({\n              key: item.relativeKey,\n              options: item.options\n            })),\n            commonOptions\n          ).then(\n            (r) => r.map((item) => ({\n              key: joinKeys(batch.base, item.key),\n              value: destr(item.value)\n            }))\n          );\n        }\n        return Promise.all(\n          batch.items.map((item) => {\n            return asyncCall(\n              batch.driver.getItem,\n              item.relativeKey,\n              item.options\n            ).then((value) => ({\n              key: item.key,\n              value: destr(value)\n            }));\n          })\n        );\n      });\n    },\n    getItemRaw(key, opts = {}) {\n      key = normalizeKey(key);\n      const { relativeKey, driver } = getMount(key);\n      if (driver.getItemRaw) {\n        return asyncCall(driver.getItemRaw, relativeKey, opts);\n      }\n      return asyncCall(driver.getItem, relativeKey, opts).then(\n        (value) => deserializeRaw(value)\n      );\n    },\n    async setItem(key, value, opts = {}) {\n      if (value === void 0) {\n        return storage.removeItem(key);\n      }\n      key = normalizeKey(key);\n      const { relativeKey, driver } = getMount(key);\n      if (!driver.setItem) {\n        return;\n      }\n      await asyncCall(driver.setItem, relativeKey, stringify(value), opts);\n      if (!driver.watch) {\n        onChange(\"update\", key);\n      }\n    },\n    async setItems(items, commonOptions) {\n      await runBatch(items, commonOptions, async (batch) => {\n        if (batch.driver.setItems) {\n          return asyncCall(\n            batch.driver.setItems,\n            batch.items.map((item) => ({\n              key: item.relativeKey,\n              value: stringify(item.value),\n              options: item.options\n            })),\n            commonOptions\n          );\n        }\n        if (!batch.driver.setItem) {\n          return;\n        }\n        await Promise.all(\n          batch.items.map((item) => {\n            return asyncCall(\n              batch.driver.setItem,\n              item.relativeKey,\n              stringify(item.value),\n              item.options\n            );\n          })\n        );\n      });\n    },\n    async setItemRaw(key, value, opts = {}) {\n      if (value === void 0) {\n        return storage.removeItem(key, opts);\n      }\n      key = normalizeKey(key);\n      const { relativeKey, driver } = getMount(key);\n      if (driver.setItemRaw) {\n        await asyncCall(driver.setItemRaw, relativeKey, value, opts);\n      } else if (driver.setItem) {\n        await asyncCall(driver.setItem, relativeKey, serializeRaw(value), opts);\n      } else {\n        return;\n      }\n      if (!driver.watch) {\n        onChange(\"update\", key);\n      }\n    },\n    async removeItem(key, opts = {}) {\n      if (typeof opts === \"boolean\") {\n        opts = { removeMeta: opts };\n      }\n      key = normalizeKey(key);\n      const { relativeKey, driver } = getMount(key);\n      if (!driver.removeItem) {\n        return;\n      }\n      await asyncCall(driver.removeItem, relativeKey, opts);\n      if (opts.removeMeta || opts.removeMata) {\n        await asyncCall(driver.removeItem, relativeKey + \"$\", opts);\n      }\n      if (!driver.watch) {\n        onChange(\"remove\", key);\n      }\n    },\n    // Meta\n    async getMeta(key, opts = {}) {\n      if (typeof opts === \"boolean\") {\n        opts = { nativeOnly: opts };\n      }\n      key = normalizeKey(key);\n      const { relativeKey, driver } = getMount(key);\n      const meta = /* @__PURE__ */ Object.create(null);\n      if (driver.getMeta) {\n        Object.assign(meta, await asyncCall(driver.getMeta, relativeKey, opts));\n      }\n      if (!opts.nativeOnly) {\n        const value = await asyncCall(\n          driver.getItem,\n          relativeKey + \"$\",\n          opts\n        ).then((value_) => destr(value_));\n        if (value && typeof value === \"object\") {\n          if (typeof value.atime === \"string\") {\n            value.atime = new Date(value.atime);\n          }\n          if (typeof value.mtime === \"string\") {\n            value.mtime = new Date(value.mtime);\n          }\n          Object.assign(meta, value);\n        }\n      }\n      return meta;\n    },\n    setMeta(key, value, opts = {}) {\n      return this.setItem(key + \"$\", value, opts);\n    },\n    removeMeta(key, opts = {}) {\n      return this.removeItem(key + \"$\", opts);\n    },\n    // Keys\n    async getKeys(base, opts = {}) {\n      base = normalizeBaseKey(base);\n      const mounts = getMounts(base, true);\n      let maskedMounts = [];\n      const allKeys = [];\n      let allMountsSupportMaxDepth = true;\n      for (const mount of mounts) {\n        if (!mount.driver.flags?.maxDepth) {\n          allMountsSupportMaxDepth = false;\n        }\n        const rawKeys = await asyncCall(\n          mount.driver.getKeys,\n          mount.relativeBase,\n          opts\n        );\n        for (const key of rawKeys) {\n          const fullKey = mount.mountpoint + normalizeKey(key);\n          if (!maskedMounts.some((p) => fullKey.startsWith(p))) {\n            allKeys.push(fullKey);\n          }\n        }\n        maskedMounts = [\n          mount.mountpoint,\n          ...maskedMounts.filter((p) => !p.startsWith(mount.mountpoint))\n        ];\n      }\n      const shouldFilterByDepth = opts.maxDepth !== void 0 && !allMountsSupportMaxDepth;\n      return allKeys.filter(\n        (key) => (!shouldFilterByDepth || filterKeyByDepth(key, opts.maxDepth)) && filterKeyByBase(key, base)\n      );\n    },\n    // Utils\n    async clear(base, opts = {}) {\n      base = normalizeBaseKey(base);\n      await Promise.all(\n        getMounts(base, false).map(async (m) => {\n          if (m.driver.clear) {\n            return asyncCall(m.driver.clear, m.relativeBase, opts);\n          }\n          if (m.driver.removeItem) {\n            const keys = await m.driver.getKeys(m.relativeBase || \"\", opts);\n            return Promise.all(\n              keys.map((key) => m.driver.removeItem(key, opts))\n            );\n          }\n        })\n      );\n    },\n    async dispose() {\n      await Promise.all(\n        Object.values(context.mounts).map((driver) => dispose(driver))\n      );\n    },\n    async watch(callback) {\n      await startWatch();\n      context.watchListeners.push(callback);\n      return async () => {\n        context.watchListeners = context.watchListeners.filter(\n          (listener) => listener !== callback\n        );\n        if (context.watchListeners.length === 0) {\n          await stopWatch();\n        }\n      };\n    },\n    async unwatch() {\n      context.watchListeners = [];\n      await stopWatch();\n    },\n    // Mount\n    mount(base, driver) {\n      base = normalizeBaseKey(base);\n      if (base && context.mounts[base]) {\n        throw new Error(`already mounted at ${base}`);\n      }\n      if (base) {\n        context.mountpoints.push(base);\n        context.mountpoints.sort((a, b) => b.length - a.length);\n      }\n      context.mounts[base] = driver;\n      if (context.watching) {\n        Promise.resolve(watch(driver, onChange, base)).then((unwatcher) => {\n          context.unwatch[base] = unwatcher;\n        }).catch(console.error);\n      }\n      return storage;\n    },\n    async unmount(base, _dispose = true) {\n      base = normalizeBaseKey(base);\n      if (!base || !context.mounts[base]) {\n        return;\n      }\n      if (context.watching && base in context.unwatch) {\n        context.unwatch[base]?.();\n        delete context.unwatch[base];\n      }\n      if (_dispose) {\n        await dispose(context.mounts[base]);\n      }\n      context.mountpoints = context.mountpoints.filter((key) => key !== base);\n      delete context.mounts[base];\n    },\n    getMount(key = \"\") {\n      key = normalizeKey(key) + \":\";\n      const m = getMount(key);\n      return {\n        driver: m.driver,\n        base: m.base\n      };\n    },\n    getMounts(base = \"\", opts = {}) {\n      base = normalizeKey(base);\n      const mounts = getMounts(base, opts.parents);\n      return mounts.map((m) => ({\n        driver: m.driver,\n        base: m.mountpoint\n      }));\n    },\n    // Aliases\n    keys: (base, opts = {}) => storage.getKeys(base, opts),\n    get: (key, opts = {}) => storage.getItem(key, opts),\n    set: (key, value, opts = {}) => storage.setItem(key, value, opts),\n    has: (key, opts = {}) => storage.hasItem(key, opts),\n    del: (key, opts = {}) => storage.removeItem(key, opts),\n    remove: (key, opts = {}) => storage.removeItem(key, opts)\n  };\n  return storage;\n}\nasync function snapshot(storage, base) {\n  base = normalizeBaseKey(base);\n  const keys = await storage.getKeys(base);\n  const snapshot2 = {};\n  await Promise.all(\n    keys.map(async (key) => {\n      snapshot2[key.slice(base.length)] = await storage.getItem(key);\n    })\n  );\n  return snapshot2;\n}\nasync function restoreSnapshot(driver, snapshot2, base = \"\") {\n  base = normalizeBaseKey(base);\n  await Promise.all(\n    Object.entries(snapshot2).map((e) => driver.setItem(base + e[0], e[1]))\n  );\n}\nfunction watch(driver, onChange, base) {\n  return driver.watch ? driver.watch((event, key) => onChange(event, base + key)) : () => {\n  };\n}\nasync function dispose(driver) {\n  if (typeof driver.dispose === \"function\") {\n    await asyncCall(driver.dispose);\n  }\n}\n\nconst builtinDrivers = {\n  \"azure-app-configuration\": \"unstorage/drivers/azure-app-configuration\",\n  \"azureAppConfiguration\": \"unstorage/drivers/azure-app-configuration\",\n  \"azure-cosmos\": \"unstorage/drivers/azure-cosmos\",\n  \"azureCosmos\": \"unstorage/drivers/azure-cosmos\",\n  \"azure-key-vault\": \"unstorage/drivers/azure-key-vault\",\n  \"azureKeyVault\": \"unstorage/drivers/azure-key-vault\",\n  \"azure-storage-blob\": \"unstorage/drivers/azure-storage-blob\",\n  \"azureStorageBlob\": \"unstorage/drivers/azure-storage-blob\",\n  \"azure-storage-table\": \"unstorage/drivers/azure-storage-table\",\n  \"azureStorageTable\": \"unstorage/drivers/azure-storage-table\",\n  \"capacitor-preferences\": \"unstorage/drivers/capacitor-preferences\",\n  \"capacitorPreferences\": \"unstorage/drivers/capacitor-preferences\",\n  \"cloudflare-kv-binding\": \"unstorage/drivers/cloudflare-kv-binding\",\n  \"cloudflareKVBinding\": \"unstorage/drivers/cloudflare-kv-binding\",\n  \"cloudflare-kv-http\": \"unstorage/drivers/cloudflare-kv-http\",\n  \"cloudflareKVHttp\": \"unstorage/drivers/cloudflare-kv-http\",\n  \"cloudflare-r2-binding\": \"unstorage/drivers/cloudflare-r2-binding\",\n  \"cloudflareR2Binding\": \"unstorage/drivers/cloudflare-r2-binding\",\n  \"db0\": \"unstorage/drivers/db0\",\n  \"deno-kv-node\": \"unstorage/drivers/deno-kv-node\",\n  \"denoKVNode\": \"unstorage/drivers/deno-kv-node\",\n  \"deno-kv\": \"unstorage/drivers/deno-kv\",\n  \"denoKV\": \"unstorage/drivers/deno-kv\",\n  \"fs-lite\": \"unstorage/drivers/fs-lite\",\n  \"fsLite\": \"unstorage/drivers/fs-lite\",\n  \"fs\": \"unstorage/drivers/fs\",\n  \"github\": \"unstorage/drivers/github\",\n  \"http\": \"unstorage/drivers/http\",\n  \"indexedb\": \"unstorage/drivers/indexedb\",\n  \"localstorage\": \"unstorage/drivers/localstorage\",\n  \"lru-cache\": \"unstorage/drivers/lru-cache\",\n  \"lruCache\": \"unstorage/drivers/lru-cache\",\n  \"memory\": \"unstorage/drivers/memory\",\n  \"mongodb\": \"unstorage/drivers/mongodb\",\n  \"netlify-blobs\": \"unstorage/drivers/netlify-blobs\",\n  \"netlifyBlobs\": \"unstorage/drivers/netlify-blobs\",\n  \"null\": \"unstorage/drivers/null\",\n  \"overlay\": \"unstorage/drivers/overlay\",\n  \"planetscale\": \"unstorage/drivers/planetscale\",\n  \"redis\": \"unstorage/drivers/redis\",\n  \"s3\": \"unstorage/drivers/s3\",\n  \"session-storage\": \"unstorage/drivers/session-storage\",\n  \"sessionStorage\": \"unstorage/drivers/session-storage\",\n  \"uploadthing\": \"unstorage/drivers/uploadthing\",\n  \"upstash\": \"unstorage/drivers/upstash\",\n  \"vercel-blob\": \"unstorage/drivers/vercel-blob\",\n  \"vercelBlob\": \"unstorage/drivers/vercel-blob\",\n  \"vercel-kv\": \"unstorage/drivers/vercel-kv\",\n  \"vercelKV\": \"unstorage/drivers/vercel-kv\",\n  \"vercel-runtime-cache\": \"unstorage/drivers/vercel-runtime-cache\",\n  \"vercelRuntimeCache\": \"unstorage/drivers/vercel-runtime-cache\"\n};\n\nexport { builtinDrivers, createStorage, defineDriver, filterKeyByBase, filterKeyByDepth, joinKeys, normalizeBaseKey, normalizeKey, restoreSnapshot, snapshot };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}