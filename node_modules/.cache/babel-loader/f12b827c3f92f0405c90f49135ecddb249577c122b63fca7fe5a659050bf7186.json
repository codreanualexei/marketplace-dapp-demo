{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";\nvar _templateObject, _templateObject2, _templateObject3;\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { LitElement, html } from 'lit';\nimport { state } from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport { ApiController, ConnectorController, CoreHelperUtil, OptionsController } from '@reown/appkit-controllers';\nimport { customElement } from '@reown/appkit-ui';\nimport '@reown/appkit-ui/wui-card-select-loader';\nimport '@reown/appkit-ui/wui-grid';\nimport { WalletUtil } from '../../utils/WalletUtil.js';\nimport '../w3m-all-wallets-list-item/index.js';\nimport styles from './styles.js';\nconst PAGINATOR_ID = 'local-paginator';\nlet W3mAllWalletsList = class W3mAllWalletsList extends LitElement {\n  constructor() {\n    super();\n    this.unsubscribe = [];\n    this.paginationObserver = undefined;\n    this.loading = !ApiController.state.wallets.length;\n    this.wallets = ApiController.state.wallets;\n    this.recommended = ApiController.state.recommended;\n    this.featured = ApiController.state.featured;\n    this.filteredWallets = ApiController.state.filteredWallets;\n    this.mobileFullScreen = OptionsController.state.enableMobileFullScreen;\n    this.unsubscribe.push(...[ApiController.subscribeKey('wallets', val => this.wallets = val), ApiController.subscribeKey('recommended', val => this.recommended = val), ApiController.subscribeKey('featured', val => this.featured = val), ApiController.subscribeKey('filteredWallets', val => this.filteredWallets = val)]);\n  }\n  firstUpdated() {\n    this.initialFetch();\n    this.createPaginationObserver();\n  }\n  disconnectedCallback() {\n    var _this$paginationObser;\n    this.unsubscribe.forEach(unsubscribe => unsubscribe());\n    (_this$paginationObser = this.paginationObserver) === null || _this$paginationObser === void 0 || _this$paginationObser.disconnect();\n  }\n  render() {\n    if (this.mobileFullScreen) {\n      this.setAttribute('data-mobile-fullscreen', 'true');\n    }\n    return html(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      <wui-grid\\n        data-scroll=\", \"\\n        .padding=\", \"\\n        gap=\\\"2\\\"\\n        justifyContent=\\\"space-between\\\"\\n      >\\n        \", \"\\n        \", \"\\n      </wui-grid>\\n    \"])), !this.loading, ['0', '3', '3', '3'], this.loading ? this.shimmerTemplate(16) : this.walletsTemplate(), this.paginationLoaderTemplate());\n  }\n  async initialFetch() {\n    var _this$shadowRoot;\n    this.loading = true;\n    const gridEl = (_this$shadowRoot = this.shadowRoot) === null || _this$shadowRoot === void 0 ? void 0 : _this$shadowRoot.querySelector('wui-grid');\n    if (gridEl) {\n      await ApiController.fetchWalletsByPage({\n        page: 1\n      });\n      await gridEl.animate([{\n        opacity: 1\n      }, {\n        opacity: 0\n      }], {\n        duration: 200,\n        fill: 'forwards',\n        easing: 'ease'\n      }).finished;\n      this.loading = false;\n      gridEl.animate([{\n        opacity: 0\n      }, {\n        opacity: 1\n      }], {\n        duration: 200,\n        fill: 'forwards',\n        easing: 'ease'\n      });\n    }\n  }\n  shimmerTemplate(items, id) {\n    return [...Array(items)].map(() => html(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n        <wui-card-select-loader type=\\\"wallet\\\" id=\", \"></wui-card-select-loader>\\n      \"])), ifDefined(id)));\n  }\n  getWallets() {\n    var _this$filteredWallets;\n    const wallets = [...this.featured, ...this.recommended];\n    if (((_this$filteredWallets = this.filteredWallets) === null || _this$filteredWallets === void 0 ? void 0 : _this$filteredWallets.length) > 0) {\n      wallets.push(...this.filteredWallets);\n    } else {\n      wallets.push(...this.wallets);\n    }\n    const uniqueWallets = CoreHelperUtil.uniqueBy(wallets, 'id');\n    const walletsWithInstalled = WalletUtil.markWalletsAsInstalled(uniqueWallets);\n    return WalletUtil.markWalletsWithDisplayIndex(walletsWithInstalled);\n  }\n  walletsTemplate() {\n    const wallets = this.getWallets();\n    return wallets.map((wallet, index) => html(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n        <w3m-all-wallets-list-item\\n          data-testid=\\\"wallet-search-item-\", \"\\\"\\n          @click=\", \"\\n          .wallet=\", \"\\n          explorerId=\", \"\\n          certified=\", \"\\n          displayIndex=\", \"\\n        ></w3m-all-wallets-list-item>\\n      \"])), wallet.id, () => this.onConnectWallet(wallet), wallet, wallet.id, this.badge === 'certified', index));\n  }\n  paginationLoaderTemplate() {\n    const {\n      wallets,\n      recommended,\n      featured,\n      count,\n      mobileFilteredOutWalletsLength\n    } = ApiController.state;\n    const columns = window.innerWidth < 352 ? 3 : 4;\n    const currentWallets = wallets.length + recommended.length;\n    const minimumRows = Math.ceil(currentWallets / columns);\n    let shimmerCount = minimumRows * columns - currentWallets + columns;\n    shimmerCount -= wallets.length ? featured.length % columns : 0;\n    if (count === 0 && featured.length > 0) {\n      return null;\n    }\n    if (count === 0 || [...featured, ...wallets, ...recommended].length < count - (mobileFilteredOutWalletsLength !== null && mobileFilteredOutWalletsLength !== void 0 ? mobileFilteredOutWalletsLength : 0)) {\n      return this.shimmerTemplate(shimmerCount, PAGINATOR_ID);\n    }\n    return null;\n  }\n  createPaginationObserver() {\n    var _this$shadowRoot2;\n    const loaderEl = (_this$shadowRoot2 = this.shadowRoot) === null || _this$shadowRoot2 === void 0 ? void 0 : _this$shadowRoot2.querySelector(\"#\".concat(PAGINATOR_ID));\n    if (loaderEl) {\n      this.paginationObserver = new IntersectionObserver(_ref => {\n        let [element] = _ref;\n        if (element !== null && element !== void 0 && element.isIntersecting && !this.loading) {\n          const {\n            page,\n            count,\n            wallets\n          } = ApiController.state;\n          if (wallets.length < count) {\n            ApiController.fetchWalletsByPage({\n              page: page + 1\n            });\n          }\n        }\n      });\n      this.paginationObserver.observe(loaderEl);\n    }\n  }\n  onConnectWallet(wallet) {\n    ConnectorController.selectWalletConnector(wallet);\n  }\n};\nW3mAllWalletsList.styles = styles;\n__decorate([state()], W3mAllWalletsList.prototype, \"loading\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"wallets\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"recommended\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"featured\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"filteredWallets\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"badge\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"mobileFullScreen\", void 0);\nW3mAllWalletsList = __decorate([customElement('w3m-all-wallets-list')], W3mAllWalletsList);\nexport { W3mAllWalletsList };","map":{"version":3,"names":["LitElement","html","state","ifDefined","ApiController","ConnectorController","CoreHelperUtil","OptionsController","customElement","WalletUtil","styles","PAGINATOR_ID","W3mAllWalletsList","constructor","unsubscribe","paginationObserver","undefined","loading","wallets","length","recommended","featured","filteredWallets","mobileFullScreen","enableMobileFullScreen","push","subscribeKey","val","firstUpdated","initialFetch","createPaginationObserver","disconnectedCallback","_this$paginationObser","forEach","disconnect","render","setAttribute","_templateObject","_taggedTemplateLiteral","shimmerTemplate","walletsTemplate","paginationLoaderTemplate","_this$shadowRoot","gridEl","shadowRoot","querySelector","fetchWalletsByPage","page","animate","opacity","duration","fill","easing","finished","items","id","Array","map","_templateObject2","getWallets","_this$filteredWallets","uniqueWallets","uniqueBy","walletsWithInstalled","markWalletsAsInstalled","markWalletsWithDisplayIndex","wallet","index","_templateObject3","onConnectWallet","badge","count","mobileFilteredOutWalletsLength","columns","window","innerWidth","currentWallets","minimumRows","Math","ceil","shimmerCount","_this$shadowRoot2","loaderEl","concat","IntersectionObserver","_ref","element","isIntersecting","observe","selectWalletConnector","__decorate"],"sources":["../../../../../src/partials/w3m-all-wallets-list/index.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}