{"ast":null,"code":"/* eslint-disable max-depth */\nimport { ref } from 'valtio';\nimport { ParseUtil } from '@reown/appkit-common';\nimport { ConstantsUtil as CommonConstantsUtil } from '@reown/appkit-common';\nimport { W3mFrameRpcConstants } from '@reown/appkit-wallet/utils';\nimport { ChainController } from '../controllers/ChainController.js';\nimport { ConnectionController } from '../controllers/ConnectionController.js';\nimport { ConnectorController } from '../controllers/ConnectorController.js';\nimport { EventsController } from '../controllers/EventsController.js';\nimport { ModalController } from '../controllers/ModalController.js';\nimport { RouterController } from '../controllers/RouterController.js';\nimport { getPreferredAccountType } from './ChainControllerUtil.js';\nimport { ConstantsUtil } from './ConstantsUtil.js';\nimport { CoreHelperUtil } from './CoreHelperUtil.js';\nimport { StorageUtil } from './StorageUtil.js';\n// -- Constants ------------------------------------------ //\nconst UPDATE_EMAIL_INTERVAL_MS = 1_000;\nexport const ConnectorControllerUtil = {\n  checkNamespaceConnectorId(namespace, connectorId) {\n    return ConnectorController.getConnectorId(namespace) === connectorId;\n  },\n  isSocialProvider(socialProvider) {\n    return ConstantsUtil.DEFAULT_REMOTE_FEATURES.socials.includes(socialProvider);\n  },\n  connectWalletConnect({\n    walletConnect,\n    connector,\n    closeModalOnConnect = true,\n    redirectViewOnModalClose = 'Connect',\n    onOpen,\n    onConnect\n  }) {\n    return new Promise((resolve, reject) => {\n      if (walletConnect) {\n        ConnectorController.setActiveConnector(connector);\n      }\n      onOpen?.(CoreHelperUtil.isMobile() && walletConnect);\n      if (redirectViewOnModalClose) {\n        const unsubscribeModalController = ModalController.subscribeKey('open', val => {\n          if (!val) {\n            if (RouterController.state.view !== redirectViewOnModalClose) {\n              RouterController.replace(redirectViewOnModalClose);\n            }\n            unsubscribeModalController();\n            reject(new Error('Modal closed'));\n          }\n        });\n      }\n      const unsubscribeChainController = ChainController.subscribeKey('activeCaipAddress', val => {\n        if (val) {\n          onConnect?.();\n          if (closeModalOnConnect) {\n            ModalController.close();\n          }\n          unsubscribeChainController();\n          resolve(ParseUtil.parseCaipAddress(val));\n        }\n      });\n    });\n  },\n  connectExternal(connector) {\n    return new Promise((resolve, reject) => {\n      const unsubscribeChainController = ChainController.subscribeKey('activeCaipAddress', val => {\n        if (val) {\n          ModalController.close();\n          unsubscribeChainController();\n          resolve(ParseUtil.parseCaipAddress(val));\n        }\n      });\n      ConnectionController.connectExternal(connector, connector.chain).catch(() => {\n        unsubscribeChainController();\n        reject(new Error('Connection rejected'));\n      });\n    });\n  },\n  connectSocial({\n    social,\n    namespace,\n    closeModalOnConnect = true,\n    onOpenFarcaster,\n    onConnect\n  }) {\n    const accountData = ChainController.getAccountData(namespace);\n    let socialWindow = accountData?.socialWindow;\n    let socialProvider = accountData?.socialProvider;\n    let isConnectingSocial = false;\n    let popupWindow = null;\n    const namespaceToUse = namespace || ChainController.state.activeChain;\n    const unsubscribeChainController = ChainController.subscribeKey('activeCaipAddress', val => {\n      if (val) {\n        if (closeModalOnConnect) {\n          ModalController.close();\n        }\n        unsubscribeChainController();\n      }\n    });\n    return new Promise((resolve, reject) => {\n      async function handleSocialConnection(event) {\n        if (event.data?.resultUri) {\n          if (event.origin === CommonConstantsUtil.SECURE_SITE_SDK_ORIGIN) {\n            window.removeEventListener('message', handleSocialConnection, false);\n            try {\n              const authConnector = ConnectorController.getAuthConnector(namespaceToUse);\n              if (authConnector && !isConnectingSocial) {\n                const _accountData = ChainController.getAccountData(namespaceToUse);\n                if (socialWindow) {\n                  socialWindow.close();\n                  ChainController.setAccountProp('socialWindow', undefined, namespaceToUse);\n                  socialWindow = _accountData?.socialWindow;\n                }\n                isConnectingSocial = true;\n                const uri = event.data.resultUri;\n                if (socialProvider) {\n                  EventsController.sendEvent({\n                    type: 'track',\n                    event: 'SOCIAL_LOGIN_REQUEST_USER_DATA',\n                    properties: {\n                      provider: socialProvider\n                    }\n                  });\n                }\n                if (socialProvider) {\n                  StorageUtil.setConnectedSocialProvider(socialProvider);\n                  await ConnectionController.connectExternal({\n                    id: authConnector.id,\n                    type: authConnector.type,\n                    socialUri: uri\n                  }, authConnector.chain);\n                  const caipAddress = ChainController.state.activeCaipAddress;\n                  if (!caipAddress) {\n                    reject(new Error('Failed to connect'));\n                    return;\n                  }\n                  resolve(ParseUtil.parseCaipAddress(caipAddress));\n                  EventsController.sendEvent({\n                    type: 'track',\n                    event: 'SOCIAL_LOGIN_SUCCESS',\n                    properties: {\n                      provider: socialProvider\n                    }\n                  });\n                }\n              }\n            } catch (err) {\n              if (socialProvider) {\n                EventsController.sendEvent({\n                  type: 'track',\n                  event: 'SOCIAL_LOGIN_ERROR',\n                  properties: {\n                    provider: socialProvider,\n                    message: CoreHelperUtil.parseError(err)\n                  }\n                });\n              }\n              reject(new Error('Failed to connect'));\n            }\n          } else if (socialProvider) {\n            EventsController.sendEvent({\n              type: 'track',\n              event: 'SOCIAL_LOGIN_ERROR',\n              properties: {\n                provider: socialProvider,\n                message: 'Untrusted Origin'\n              }\n            });\n          }\n        }\n      }\n      async function connectSocial() {\n        if (social) {\n          const _accountData = ChainController.getAccountData(namespaceToUse);\n          ChainController.setAccountProp('socialProvider', social, namespaceToUse);\n          socialProvider = _accountData?.socialProvider;\n          EventsController.sendEvent({\n            type: 'track',\n            event: 'SOCIAL_LOGIN_STARTED',\n            properties: {\n              provider: socialProvider\n            }\n          });\n        }\n        if (socialProvider === 'farcaster') {\n          onOpenFarcaster?.();\n          const unsubscribeModalController = ModalController.subscribeKey('open', val => {\n            if (!val && social === 'farcaster') {\n              reject(new Error('Popup closed'));\n              onConnect?.();\n              unsubscribeModalController();\n            }\n          });\n          const authConnector = ConnectorController.getAuthConnector();\n          if (authConnector) {\n            const _accountData = ChainController.getAccountData(namespaceToUse);\n            if (!_accountData?.farcasterUrl) {\n              try {\n                const {\n                  url\n                } = await authConnector.provider.getFarcasterUri();\n                ChainController.setAccountProp('farcasterUrl', url, namespaceToUse);\n              } catch {\n                reject(new Error('Failed to connect to farcaster'));\n              }\n            }\n          }\n        } else {\n          const authConnector = ConnectorController.getAuthConnector();\n          popupWindow = CoreHelperUtil.returnOpenHref(`${CommonConstantsUtil.SECURE_SITE_SDK_ORIGIN}/loading`, 'popupWindow', 'width=600,height=800,scrollbars=yes');\n          try {\n            if (authConnector && socialProvider) {\n              const {\n                uri\n              } = await authConnector.provider.getSocialRedirectUri({\n                provider: socialProvider\n              });\n              if (popupWindow && uri) {\n                ChainController.setAccountProp('socialWindow', ref(popupWindow), namespaceToUse);\n                socialWindow = accountData?.socialWindow;\n                popupWindow.location.href = uri;\n                const interval = setInterval(() => {\n                  if (socialWindow?.closed && !isConnectingSocial) {\n                    reject(new Error('Popup closed'));\n                    clearInterval(interval);\n                  }\n                }, 1000);\n                window.addEventListener('message', handleSocialConnection, false);\n              } else {\n                popupWindow?.close();\n                reject(new Error('Failed to initiate social connection'));\n              }\n            }\n          } catch {\n            reject(new Error('Failed to initiate social connection'));\n            popupWindow?.close();\n          }\n        }\n      }\n      connectSocial();\n    });\n  },\n  connectEmail({\n    closeModalOnConnect = true,\n    redirectViewOnModalClose = 'Connect',\n    onOpen,\n    onConnect\n  }) {\n    return new Promise((resolve, reject) => {\n      onOpen?.();\n      if (redirectViewOnModalClose) {\n        const unsubscribeModalController = ModalController.subscribeKey('open', val => {\n          if (!val) {\n            if (RouterController.state.view !== redirectViewOnModalClose) {\n              RouterController.replace(redirectViewOnModalClose);\n            }\n            unsubscribeModalController();\n            reject(new Error('Modal closed'));\n          }\n        });\n      }\n      const unsubscribeChainController = ChainController.subscribeKey('activeCaipAddress', val => {\n        if (val) {\n          onConnect?.();\n          if (closeModalOnConnect) {\n            ModalController.close();\n          }\n          unsubscribeChainController();\n          resolve(ParseUtil.parseCaipAddress(val));\n        }\n      });\n    });\n  },\n  async updateEmail() {\n    const connectorId = StorageUtil.getConnectedConnectorId(ChainController.state.activeChain);\n    const authConnector = ConnectorController.getAuthConnector();\n    if (!authConnector) {\n      throw new Error('No auth connector found');\n    }\n    if (connectorId !== CommonConstantsUtil.CONNECTOR_ID.AUTH) {\n      throw new Error('Not connected to email or social');\n    }\n    const initialEmail = authConnector.provider.getEmail() ?? '';\n    await ModalController.open({\n      view: 'UpdateEmailWallet',\n      data: {\n        email: initialEmail,\n        redirectView: undefined\n      }\n    });\n    return new Promise((resolve, reject) => {\n      const interval = setInterval(() => {\n        const newEmail = authConnector.provider.getEmail() ?? '';\n        if (newEmail !== initialEmail) {\n          ModalController.close();\n          clearInterval(interval);\n          unsubscribeModalController();\n          resolve({\n            email: newEmail\n          });\n        }\n      }, UPDATE_EMAIL_INTERVAL_MS);\n      const unsubscribeModalController = ModalController.subscribeKey('open', val => {\n        if (!val) {\n          if (RouterController.state.view !== 'Connect') {\n            RouterController.push('Connect');\n          }\n          clearInterval(interval);\n          unsubscribeModalController();\n          reject(new Error('Modal closed'));\n        }\n      });\n    });\n  },\n  canSwitchToSmartAccount(namespace) {\n    const isSmartAccountEnabled = ChainController.checkIfSmartAccountEnabled();\n    return isSmartAccountEnabled && getPreferredAccountType(namespace) === W3mFrameRpcConstants.ACCOUNT_TYPES.EOA;\n  }\n};","map":{"version":3,"names":["ref","ParseUtil","ConstantsUtil","CommonConstantsUtil","W3mFrameRpcConstants","ChainController","ConnectionController","ConnectorController","EventsController","ModalController","RouterController","getPreferredAccountType","CoreHelperUtil","StorageUtil","UPDATE_EMAIL_INTERVAL_MS","ConnectorControllerUtil","checkNamespaceConnectorId","namespace","connectorId","getConnectorId","isSocialProvider","socialProvider","DEFAULT_REMOTE_FEATURES","socials","includes","connectWalletConnect","walletConnect","connector","closeModalOnConnect","redirectViewOnModalClose","onOpen","onConnect","Promise","resolve","reject","setActiveConnector","isMobile","unsubscribeModalController","subscribeKey","val","state","view","replace","Error","unsubscribeChainController","close","parseCaipAddress","connectExternal","chain","catch","connectSocial","social","onOpenFarcaster","accountData","getAccountData","socialWindow","isConnectingSocial","popupWindow","namespaceToUse","activeChain","handleSocialConnection","event","data","resultUri","origin","SECURE_SITE_SDK_ORIGIN","window","removeEventListener","authConnector","getAuthConnector","_accountData","setAccountProp","undefined","uri","sendEvent","type","properties","provider","setConnectedSocialProvider","id","socialUri","caipAddress","activeCaipAddress","err","message","parseError","farcasterUrl","url","getFarcasterUri","returnOpenHref","getSocialRedirectUri","location","href","interval","setInterval","closed","clearInterval","addEventListener","connectEmail","updateEmail","getConnectedConnectorId","CONNECTOR_ID","AUTH","initialEmail","getEmail","open","email","redirectView","newEmail","push","canSwitchToSmartAccount","isSmartAccountEnabled","checkIfSmartAccountEnabled","ACCOUNT_TYPES","EOA"],"sources":["../../../../src/utils/ConnectorControllerUtil.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}