{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { state } from 'lit/decorators.js';\nimport { ConnectionController, ConstantsUtil, CoreHelperUtil, EventsController, OptionsController, RouterController } from '@reown/appkit-controllers';\nimport { customElement } from '@reown/appkit-ui';\nimport { W3mConnectingWidget } from '../../utils/w3m-connecting-widget/index.js';\nlet W3mConnectingWcMobile = class W3mConnectingWcMobile extends W3mConnectingWidget {\n  constructor() {\n    var _this$wallet2;\n    super();\n    this.btnLabelTimeout = undefined;\n    this.redirectDeeplink = undefined;\n    this.redirectUniversalLink = undefined;\n    this.target = undefined;\n    this.preferUniversalLinks = OptionsController.state.experimental_preferUniversalLinks;\n    this.isLoading = true;\n    this.onConnect = () => {\n      var _this$wallet;\n      if ((_this$wallet = this.wallet) !== null && _this$wallet !== void 0 && _this$wallet.mobile_link && this.uri) {\n        try {\n          this.error = false;\n          const {\n            mobile_link,\n            link_mode,\n            name\n          } = this.wallet;\n          const {\n            redirect,\n            redirectUniversalLink,\n            href\n          } = CoreHelperUtil.formatNativeUrl(mobile_link, this.uri, link_mode);\n          this.redirectDeeplink = redirect;\n          this.redirectUniversalLink = redirectUniversalLink;\n          this.target = CoreHelperUtil.isIframe() ? '_top' : '_self';\n          ConnectionController.setWcLinking({\n            name,\n            href\n          });\n          ConnectionController.setRecentWallet(this.wallet);\n          if (this.preferUniversalLinks && this.redirectUniversalLink) {\n            CoreHelperUtil.openHref(this.redirectUniversalLink, this.target);\n          } else {\n            CoreHelperUtil.openHref(this.redirectDeeplink, this.target);\n          }\n        } catch (e) {\n          EventsController.sendEvent({\n            type: 'track',\n            event: 'CONNECT_PROXY_ERROR',\n            properties: {\n              message: e instanceof Error ? e.message : 'Error parsing the deeplink',\n              uri: this.uri,\n              mobile_link: this.wallet.mobile_link,\n              name: this.wallet.name\n            }\n          });\n          this.error = true;\n        }\n      }\n    };\n    if (!this.wallet) {\n      throw new Error('w3m-connecting-wc-mobile: No wallet provided');\n    }\n    this.secondaryBtnLabel = 'Open';\n    this.secondaryLabel = ConstantsUtil.CONNECT_LABELS.MOBILE;\n    this.secondaryBtnIcon = 'externalLink';\n    this.onHandleURI();\n    this.unsubscribe.push(ConnectionController.subscribeKey('wcUri', () => {\n      this.onHandleURI();\n    }));\n    EventsController.sendEvent({\n      type: 'track',\n      event: 'SELECT_WALLET',\n      properties: {\n        name: this.wallet.name,\n        platform: 'mobile',\n        displayIndex: (_this$wallet2 = this.wallet) === null || _this$wallet2 === void 0 ? void 0 : _this$wallet2.display_index,\n        walletRank: this.wallet.order,\n        view: RouterController.state.view\n      }\n    });\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    clearTimeout(this.btnLabelTimeout);\n  }\n  onHandleURI() {\n    this.isLoading = !this.uri;\n    if (!this.ready && this.uri) {\n      var _this$onConnect;\n      this.ready = true;\n      (_this$onConnect = this.onConnect) === null || _this$onConnect === void 0 || _this$onConnect.call(this);\n    }\n  }\n  onTryAgain() {\n    var _this$onConnect2;\n    ConnectionController.setWcError(false);\n    (_this$onConnect2 = this.onConnect) === null || _this$onConnect2 === void 0 || _this$onConnect2.call(this);\n  }\n};\n__decorate([state()], W3mConnectingWcMobile.prototype, \"redirectDeeplink\", void 0);\n__decorate([state()], W3mConnectingWcMobile.prototype, \"redirectUniversalLink\", void 0);\n__decorate([state()], W3mConnectingWcMobile.prototype, \"target\", void 0);\n__decorate([state()], W3mConnectingWcMobile.prototype, \"preferUniversalLinks\", void 0);\n__decorate([state()], W3mConnectingWcMobile.prototype, \"isLoading\", void 0);\nW3mConnectingWcMobile = __decorate([customElement('w3m-connecting-wc-mobile')], W3mConnectingWcMobile);\nexport { W3mConnectingWcMobile };","map":{"version":3,"names":["state","ConnectionController","ConstantsUtil","CoreHelperUtil","EventsController","OptionsController","RouterController","customElement","W3mConnectingWidget","W3mConnectingWcMobile","constructor","_this$wallet2","btnLabelTimeout","undefined","redirectDeeplink","redirectUniversalLink","target","preferUniversalLinks","experimental_preferUniversalLinks","isLoading","onConnect","_this$wallet","wallet","mobile_link","uri","error","link_mode","name","redirect","href","formatNativeUrl","isIframe","setWcLinking","setRecentWallet","openHref","e","sendEvent","type","event","properties","message","Error","secondaryBtnLabel","secondaryLabel","CONNECT_LABELS","MOBILE","secondaryBtnIcon","onHandleURI","unsubscribe","push","subscribeKey","platform","displayIndex","display_index","walletRank","order","view","disconnectedCallback","clearTimeout","ready","_this$onConnect","call","onTryAgain","_this$onConnect2","setWcError","__decorate"],"sources":["../../../../../src/partials/w3m-connecting-wc-mobile/index.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}