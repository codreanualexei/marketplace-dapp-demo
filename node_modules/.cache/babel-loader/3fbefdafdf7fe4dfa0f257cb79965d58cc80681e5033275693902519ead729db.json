{"ast":null,"code":"import _objectSpread from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { proxy } from 'valtio/vanilla';\nimport { ConstantsUtil } from '../utils/ConstantsUtil.js';\nimport { CoreHelperUtil } from '../utils/CoreHelperUtil.js';\nimport { FetchUtil } from '../utils/FetchUtil.js';\nimport { StorageUtil } from '../utils/StorageUtil.js';\nimport { ChainController } from './ChainController.js';\nimport { OptionsController } from './OptionsController.js';\nimport { SnackController } from './SnackController.js';\nconst DEFAULT_OPTIONS = {\n  purchaseCurrencies: [{\n    id: '2b92315d-eab7-5bef-84fa-089a131333f5',\n    name: 'USD Coin',\n    symbol: 'USDC',\n    networks: [{\n      name: 'ethereum-mainnet',\n      display_name: 'Ethereum',\n      chain_id: '1',\n      contract_address: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48'\n    }, {\n      name: 'polygon-mainnet',\n      display_name: 'Polygon',\n      chain_id: '137',\n      contract_address: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174'\n    }]\n  }, {\n    id: '2b92315d-eab7-5bef-84fa-089a131333f5',\n    name: 'Ether',\n    symbol: 'ETH',\n    networks: [{\n      name: 'ethereum-mainnet',\n      display_name: 'Ethereum',\n      chain_id: '1',\n      contract_address: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48'\n    }, {\n      name: 'polygon-mainnet',\n      display_name: 'Polygon',\n      chain_id: '137',\n      contract_address: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174'\n    }]\n  }],\n  paymentCurrencies: [{\n    id: 'USD',\n    payment_method_limits: [{\n      id: 'card',\n      min: '10.00',\n      max: '7500.00'\n    }, {\n      id: 'ach_bank_account',\n      min: '10.00',\n      max: '25000.00'\n    }]\n  }, {\n    id: 'EUR',\n    payment_method_limits: [{\n      id: 'card',\n      min: '10.00',\n      max: '7500.00'\n    }, {\n      id: 'ach_bank_account',\n      min: '10.00',\n      max: '25000.00'\n    }]\n  }]\n};\n// -- Helpers ------------------------------------------- //\nconst baseUrl = CoreHelperUtil.getBlockchainApiUrl();\n// -- State --------------------------------------------- //\nconst state = proxy({\n  clientId: null,\n  api: new FetchUtil({\n    baseUrl,\n    clientId: null\n  }),\n  supportedChains: {\n    http: [],\n    ws: []\n  }\n});\n// -- Controller ---------------------------------------- //\nexport const BlockchainApiController = {\n  state,\n  async get(request) {\n    const {\n      st,\n      sv\n    } = BlockchainApiController.getSdkProperties();\n    const projectId = OptionsController.state.projectId;\n    const params = _objectSpread(_objectSpread({}, request.params || {}), {}, {\n      st,\n      sv,\n      projectId\n    });\n    return state.api.get(_objectSpread(_objectSpread({}, request), {}, {\n      params\n    }));\n  },\n  getSdkProperties() {\n    const {\n      sdkType,\n      sdkVersion\n    } = OptionsController.state;\n    return {\n      st: sdkType || 'unknown',\n      sv: sdkVersion || 'unknown'\n    };\n  },\n  async isNetworkSupported(networkId) {\n    if (!networkId) {\n      return false;\n    }\n    try {\n      if (!state.supportedChains.http.length) {\n        await BlockchainApiController.getSupportedNetworks();\n      }\n    } catch (e) {\n      return false;\n    }\n    return state.supportedChains.http.includes(networkId);\n  },\n  async getSupportedNetworks() {\n    try {\n      const supportedChains = await BlockchainApiController.get({\n        path: 'v1/supported-chains'\n      });\n      state.supportedChains = supportedChains;\n      return supportedChains;\n    } catch (_unused) {\n      return state.supportedChains;\n    }\n  },\n  async fetchIdentity(_ref) {\n    let {\n      address\n    } = _ref;\n    const identityCache = StorageUtil.getIdentityFromCacheForAddress(address);\n    if (identityCache) {\n      return identityCache;\n    }\n    const result = await BlockchainApiController.get({\n      path: \"/v1/identity/\".concat(address),\n      params: {\n        sender: ChainController.state.activeCaipAddress ? CoreHelperUtil.getPlainAddress(ChainController.state.activeCaipAddress) : undefined\n      }\n    });\n    StorageUtil.updateIdentityCache({\n      address,\n      identity: result,\n      timestamp: Date.now()\n    });\n    return result;\n  },\n  async fetchTransactions(_ref2) {\n    var _ChainController$stat;\n    let {\n      account,\n      cursor,\n      signal,\n      cache,\n      chainId\n    } = _ref2;\n    const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat = ChainController.state.activeCaipNetwork) === null || _ChainController$stat === void 0 ? void 0 : _ChainController$stat.caipNetworkId);\n    if (!isSupported) {\n      return {\n        data: [],\n        next: undefined\n      };\n    }\n    const transactionsCache = StorageUtil.getTransactionsCacheForAddress({\n      address: account,\n      chainId\n    });\n    if (transactionsCache) {\n      return transactionsCache;\n    }\n    const result = await BlockchainApiController.get({\n      path: \"/v1/account/\".concat(account, \"/history\"),\n      params: {\n        cursor,\n        chainId\n      },\n      signal,\n      cache\n    });\n    StorageUtil.updateTransactionsCache({\n      address: account,\n      chainId,\n      timestamp: Date.now(),\n      transactions: result\n    });\n    return result;\n  },\n  async fetchSwapQuote(_ref3) {\n    var _ChainController$stat2;\n    let {\n      amount,\n      userAddress,\n      from,\n      to,\n      gasPrice\n    } = _ref3;\n    const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat2 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat2 === void 0 ? void 0 : _ChainController$stat2.caipNetworkId);\n    if (!isSupported) {\n      return {\n        quotes: []\n      };\n    }\n    return BlockchainApiController.get({\n      path: \"/v1/convert/quotes\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      params: {\n        amount,\n        userAddress,\n        from,\n        to,\n        gasPrice\n      }\n    });\n  },\n  async fetchSwapTokens(_ref4) {\n    var _ChainController$stat3;\n    let {\n      chainId\n    } = _ref4;\n    const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat3 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat3 === void 0 ? void 0 : _ChainController$stat3.caipNetworkId);\n    if (!isSupported) {\n      return {\n        tokens: []\n      };\n    }\n    return BlockchainApiController.get({\n      path: \"/v1/convert/tokens\",\n      params: {\n        chainId\n      }\n    });\n  },\n  async fetchTokenPrice(_ref5) {\n    var _ChainController$stat4;\n    let {\n      addresses\n    } = _ref5;\n    const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat4 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat4 === void 0 ? void 0 : _ChainController$stat4.caipNetworkId);\n    if (!isSupported) {\n      return {\n        fungibles: []\n      };\n    }\n    const tokenPriceCache = StorageUtil.getTokenPriceCacheForAddresses(addresses);\n    if (tokenPriceCache) {\n      return tokenPriceCache;\n    }\n    const result = await state.api.post({\n      path: '/v1/fungible/price',\n      body: {\n        currency: 'usd',\n        addresses,\n        projectId: OptionsController.state.projectId\n      },\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    StorageUtil.updateTokenPriceCache({\n      addresses,\n      timestamp: Date.now(),\n      tokenPrice: result\n    });\n    return result;\n  },\n  async fetchSwapAllowance(_ref6) {\n    var _ChainController$stat5;\n    let {\n      tokenAddress,\n      userAddress\n    } = _ref6;\n    const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat5 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat5 === void 0 ? void 0 : _ChainController$stat5.caipNetworkId);\n    if (!isSupported) {\n      return {\n        allowance: '0'\n      };\n    }\n    return BlockchainApiController.get({\n      path: \"/v1/convert/allowance\",\n      params: {\n        tokenAddress,\n        userAddress\n      },\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n  },\n  async fetchGasPrice(_ref7) {\n    var _ChainController$stat6;\n    let {\n      chainId\n    } = _ref7;\n    const {\n      st,\n      sv\n    } = BlockchainApiController.getSdkProperties();\n    const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat6 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat6 === void 0 ? void 0 : _ChainController$stat6.caipNetworkId);\n    if (!isSupported) {\n      throw new Error('Network not supported for Gas Price');\n    }\n    return BlockchainApiController.get({\n      path: \"/v1/convert/gas-price\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      params: {\n        chainId,\n        st,\n        sv\n      }\n    });\n  },\n  async generateSwapCalldata(_ref8) {\n    var _ChainController$stat7;\n    let {\n      amount,\n      from,\n      to,\n      userAddress,\n      disableEstimate\n    } = _ref8;\n    const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat7 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat7 === void 0 ? void 0 : _ChainController$stat7.caipNetworkId);\n    if (!isSupported) {\n      throw new Error('Network not supported for Swaps');\n    }\n    return state.api.post({\n      path: '/v1/convert/build-transaction',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: {\n        amount,\n        eip155: {\n          slippage: ConstantsUtil.CONVERT_SLIPPAGE_TOLERANCE\n        },\n        projectId: OptionsController.state.projectId,\n        from,\n        to,\n        userAddress,\n        disableEstimate\n      }\n    });\n  },\n  async generateApproveCalldata(_ref9) {\n    var _ChainController$stat8;\n    let {\n      from,\n      to,\n      userAddress\n    } = _ref9;\n    const {\n      st,\n      sv\n    } = BlockchainApiController.getSdkProperties();\n    const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat8 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat8 === void 0 ? void 0 : _ChainController$stat8.caipNetworkId);\n    if (!isSupported) {\n      throw new Error('Network not supported for Swaps');\n    }\n    return BlockchainApiController.get({\n      path: \"/v1/convert/build-approve\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      params: {\n        userAddress,\n        from,\n        to,\n        st,\n        sv\n      }\n    });\n  },\n  async getBalance(address, chainId, forceUpdate) {\n    var _ChainController$stat9;\n    const {\n      st,\n      sv\n    } = BlockchainApiController.getSdkProperties();\n    const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat9 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat9 === void 0 ? void 0 : _ChainController$stat9.caipNetworkId);\n    if (!isSupported) {\n      SnackController.showError('Token Balance Unavailable');\n      return {\n        balances: []\n      };\n    }\n    const caipAddress = \"\".concat(chainId, \":\").concat(address);\n    const cachedBalance = StorageUtil.getBalanceCacheForCaipAddress(caipAddress);\n    if (cachedBalance) {\n      return cachedBalance;\n    }\n    const balance = await BlockchainApiController.get({\n      path: \"/v1/account/\".concat(address, \"/balance\"),\n      params: {\n        currency: 'usd',\n        chainId,\n        forceUpdate,\n        st,\n        sv\n      }\n    });\n    StorageUtil.updateBalanceCache({\n      caipAddress,\n      balance,\n      timestamp: Date.now()\n    });\n    return balance;\n  },\n  async lookupEnsName(name) {\n    var _ChainController$stat0;\n    const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat0 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat0 === void 0 ? void 0 : _ChainController$stat0.caipNetworkId);\n    if (!isSupported) {\n      return {\n        addresses: {},\n        attributes: []\n      };\n    }\n    return BlockchainApiController.get({\n      path: \"/v1/profile/account/\".concat(name),\n      params: {\n        apiVersion: '2'\n      }\n    });\n  },\n  async reverseLookupEnsName(_ref0) {\n    var _ChainController$stat1, _ChainController$getA;\n    let {\n      address\n    } = _ref0;\n    const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat1 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat1 === void 0 ? void 0 : _ChainController$stat1.caipNetworkId);\n    if (!isSupported) {\n      return [];\n    }\n    const sender = (_ChainController$getA = ChainController.getAccountData()) === null || _ChainController$getA === void 0 ? void 0 : _ChainController$getA.address;\n    return BlockchainApiController.get({\n      path: \"/v1/profile/reverse/\".concat(address),\n      params: {\n        sender,\n        apiVersion: '2'\n      }\n    });\n  },\n  async getEnsNameSuggestions(name) {\n    var _ChainController$stat10;\n    const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat10 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat10 === void 0 ? void 0 : _ChainController$stat10.caipNetworkId);\n    if (!isSupported) {\n      return {\n        suggestions: []\n      };\n    }\n    return BlockchainApiController.get({\n      path: \"/v1/profile/suggestions/\".concat(name),\n      params: {\n        zone: 'reown.id'\n      }\n    });\n  },\n  async registerEnsName(_ref1) {\n    var _ChainController$stat11;\n    let {\n      coinType,\n      address,\n      message,\n      signature\n    } = _ref1;\n    const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat11 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat11 === void 0 ? void 0 : _ChainController$stat11.caipNetworkId);\n    if (!isSupported) {\n      return {\n        success: false\n      };\n    }\n    return state.api.post({\n      path: \"/v1/profile/account\",\n      body: {\n        coin_type: coinType,\n        address,\n        message,\n        signature\n      },\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n  },\n  async generateOnRampURL(_ref10) {\n    var _ChainController$stat12;\n    let {\n      destinationWallets,\n      partnerUserId,\n      defaultNetwork,\n      purchaseAmount,\n      paymentAmount\n    } = _ref10;\n    const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat12 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat12 === void 0 ? void 0 : _ChainController$stat12.caipNetworkId);\n    if (!isSupported) {\n      return '';\n    }\n    const response = await state.api.post({\n      path: \"/v1/generators/onrampurl\",\n      params: {\n        projectId: OptionsController.state.projectId\n      },\n      body: {\n        destinationWallets,\n        defaultNetwork,\n        partnerUserId,\n        defaultExperience: 'buy',\n        presetCryptoAmount: purchaseAmount,\n        presetFiatAmount: paymentAmount\n      }\n    });\n    return response.url;\n  },\n  async getOnrampOptions() {\n    var _ChainController$stat13;\n    const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat13 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat13 === void 0 ? void 0 : _ChainController$stat13.caipNetworkId);\n    if (!isSupported) {\n      return {\n        paymentCurrencies: [],\n        purchaseCurrencies: []\n      };\n    }\n    try {\n      const response = await BlockchainApiController.get({\n        path: \"/v1/onramp/options\"\n      });\n      return response;\n    } catch (e) {\n      return DEFAULT_OPTIONS;\n    }\n  },\n  async getOnrampQuote(_ref11) {\n    let {\n      purchaseCurrency,\n      paymentCurrency,\n      amount,\n      network\n    } = _ref11;\n    try {\n      var _ChainController$stat14;\n      const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat14 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat14 === void 0 ? void 0 : _ChainController$stat14.caipNetworkId);\n      if (!isSupported) {\n        return null;\n      }\n      const response = await state.api.post({\n        path: \"/v1/onramp/quote\",\n        params: {\n          projectId: OptionsController.state.projectId\n        },\n        body: {\n          purchaseCurrency,\n          paymentCurrency,\n          amount,\n          network\n        }\n      });\n      return response;\n    } catch (e) {\n      // Mocking response as 1:1 until endpoint is ready\n      return {\n        networkFee: {\n          amount,\n          currency: paymentCurrency.id\n        },\n        paymentSubtotal: {\n          amount,\n          currency: paymentCurrency.id\n        },\n        paymentTotal: {\n          amount,\n          currency: paymentCurrency.id\n        },\n        purchaseAmount: {\n          amount,\n          currency: paymentCurrency.id\n        },\n        quoteId: 'mocked-quote-id'\n      };\n    }\n  },\n  async getSmartSessions(caipAddress) {\n    var _ChainController$stat15;\n    const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat15 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat15 === void 0 ? void 0 : _ChainController$stat15.caipNetworkId);\n    if (!isSupported) {\n      return [];\n    }\n    return BlockchainApiController.get({\n      path: \"/v1/sessions/\".concat(caipAddress)\n    });\n  },\n  async revokeSmartSession(address, pci, signature) {\n    var _ChainController$stat16;\n    const isSupported = await BlockchainApiController.isNetworkSupported((_ChainController$stat16 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat16 === void 0 ? void 0 : _ChainController$stat16.caipNetworkId);\n    if (!isSupported) {\n      return {\n        success: false\n      };\n    }\n    return state.api.post({\n      path: \"/v1/sessions/\".concat(address, \"/revoke\"),\n      params: {\n        projectId: OptionsController.state.projectId\n      },\n      body: {\n        pci,\n        signature\n      }\n    });\n  },\n  setClientId(clientId) {\n    state.clientId = clientId;\n    state.api = new FetchUtil({\n      baseUrl,\n      clientId\n    });\n  }\n};","map":{"version":3,"names":["proxy","ConstantsUtil","CoreHelperUtil","FetchUtil","StorageUtil","ChainController","OptionsController","SnackController","DEFAULT_OPTIONS","purchaseCurrencies","id","name","symbol","networks","display_name","chain_id","contract_address","paymentCurrencies","payment_method_limits","min","max","baseUrl","getBlockchainApiUrl","state","clientId","api","supportedChains","http","ws","BlockchainApiController","get","request","st","sv","getSdkProperties","projectId","params","_objectSpread","sdkType","sdkVersion","isNetworkSupported","networkId","length","getSupportedNetworks","e","includes","path","_unused","fetchIdentity","_ref","address","identityCache","getIdentityFromCacheForAddress","result","concat","sender","activeCaipAddress","getPlainAddress","undefined","updateIdentityCache","identity","timestamp","Date","now","fetchTransactions","_ref2","_ChainController$stat","account","cursor","signal","cache","chainId","isSupported","activeCaipNetwork","caipNetworkId","data","next","transactionsCache","getTransactionsCacheForAddress","updateTransactionsCache","transactions","fetchSwapQuote","_ref3","_ChainController$stat2","amount","userAddress","from","to","gasPrice","quotes","headers","fetchSwapTokens","_ref4","_ChainController$stat3","tokens","fetchTokenPrice","_ref5","_ChainController$stat4","addresses","fungibles","tokenPriceCache","getTokenPriceCacheForAddresses","post","body","currency","updateTokenPriceCache","tokenPrice","fetchSwapAllowance","_ref6","_ChainController$stat5","tokenAddress","allowance","fetchGasPrice","_ref7","_ChainController$stat6","Error","generateSwapCalldata","_ref8","_ChainController$stat7","disableEstimate","eip155","slippage","CONVERT_SLIPPAGE_TOLERANCE","generateApproveCalldata","_ref9","_ChainController$stat8","getBalance","forceUpdate","_ChainController$stat9","showError","balances","caipAddress","cachedBalance","getBalanceCacheForCaipAddress","balance","updateBalanceCache","lookupEnsName","_ChainController$stat0","attributes","apiVersion","reverseLookupEnsName","_ref0","_ChainController$stat1","_ChainController$getA","getAccountData","getEnsNameSuggestions","_ChainController$stat10","suggestions","zone","registerEnsName","_ref1","_ChainController$stat11","coinType","message","signature","success","coin_type","generateOnRampURL","_ref10","_ChainController$stat12","destinationWallets","partnerUserId","defaultNetwork","purchaseAmount","paymentAmount","response","defaultExperience","presetCryptoAmount","presetFiatAmount","url","getOnrampOptions","_ChainController$stat13","getOnrampQuote","_ref11","purchaseCurrency","paymentCurrency","network","_ChainController$stat14","networkFee","paymentSubtotal","paymentTotal","quoteId","getSmartSessions","_ChainController$stat15","revokeSmartSession","pci","_ChainController$stat16","setClientId"],"sources":["../../../../src/controllers/BlockchainApiController.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}