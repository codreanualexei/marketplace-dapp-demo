{"ast":null,"code":"import { ConstantsUtil as CommonConstants } from '@reown/appkit-common';\nimport { ConstantsUtil } from './ConstantsUtil.js';\nimport { StorageUtil } from './StorageUtil.js';\nexport const CoreHelperUtil = {\n  isMobile() {\n    if (this.isClient()) {\n      return Boolean(window?.matchMedia && typeof window.matchMedia === 'function' && window.matchMedia('(pointer:coarse)')?.matches || /Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent));\n    }\n    return false;\n  },\n  checkCaipNetwork(network, networkName = '') {\n    return network?.caipNetworkId.toLocaleLowerCase().includes(networkName.toLowerCase());\n  },\n  isAndroid() {\n    if (!this.isMobile()) {\n      return false;\n    }\n    const ua = window?.navigator.userAgent.toLowerCase();\n    return CoreHelperUtil.isMobile() && ua.includes('android');\n  },\n  isIos() {\n    if (!this.isMobile()) {\n      return false;\n    }\n    const ua = window?.navigator.userAgent.toLowerCase();\n    return ua.includes('iphone') || ua.includes('ipad');\n  },\n  isSafari() {\n    if (!this.isClient()) {\n      return false;\n    }\n    const ua = window?.navigator.userAgent.toLowerCase();\n    return ua.includes('safari');\n  },\n  isClient() {\n    return typeof window !== 'undefined';\n  },\n  isPairingExpired(expiry) {\n    return expiry ? expiry - Date.now() <= ConstantsUtil.TEN_SEC_MS : true;\n  },\n  isAllowedRetry(lastRetry, differenceMs = ConstantsUtil.ONE_SEC_MS) {\n    return Date.now() - lastRetry >= differenceMs;\n  },\n  copyToClopboard(text) {\n    navigator.clipboard.writeText(text);\n  },\n  isIframe() {\n    try {\n      return window?.self !== window?.top;\n    } catch (e) {\n      return false;\n    }\n  },\n  isSafeApp() {\n    if (CoreHelperUtil.isClient() && window.self !== window.top) {\n      try {\n        const ancestor = window?.location?.ancestorOrigins?.[0];\n        const safeAppUrl = 'https://app.safe.global';\n        if (ancestor) {\n          const ancestorUrl = new URL(ancestor);\n          const safeUrl = new URL(safeAppUrl);\n          return ancestorUrl.hostname === safeUrl.hostname;\n        }\n      } catch {\n        return false;\n      }\n    }\n    return false;\n  },\n  getPairingExpiry() {\n    return Date.now() + ConstantsUtil.FOUR_MINUTES_MS;\n  },\n  getNetworkId(caipAddress) {\n    return caipAddress?.split(':')[1];\n  },\n  getPlainAddress(caipAddress) {\n    return caipAddress?.split(':')[2];\n  },\n  async wait(milliseconds) {\n    return new Promise(resolve => {\n      setTimeout(resolve, milliseconds);\n    });\n  },\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  debounce(func, timeout = 500) {\n    let timer = undefined;\n    return (...args) => {\n      function next() {\n        func(...args);\n      }\n      if (timer) {\n        clearTimeout(timer);\n      }\n      timer = setTimeout(next, timeout);\n    };\n  },\n  isHttpUrl(url) {\n    return url.startsWith('http://') || url.startsWith('https://');\n  },\n  formatNativeUrl(appUrl, wcUri, universalLink = null) {\n    if (CoreHelperUtil.isHttpUrl(appUrl)) {\n      return this.formatUniversalUrl(appUrl, wcUri);\n    }\n    let safeAppUrl = appUrl;\n    let safeUniversalLink = universalLink;\n    if (safeAppUrl) {\n      if (!safeAppUrl.includes('://')) {\n        safeAppUrl = appUrl.replaceAll('/', '').replaceAll(':', '');\n        safeAppUrl = `${safeAppUrl}://`;\n      }\n      if (!safeAppUrl.endsWith('/')) {\n        safeAppUrl = `${safeAppUrl}/`;\n      }\n    }\n    if (safeUniversalLink && !safeUniversalLink?.endsWith('/')) {\n      safeUniversalLink = `${safeUniversalLink}/`;\n    }\n    // Android deeplinks in tg context require the uri to be encoded twice\n    if (this.isTelegram() && this.isAndroid()) {\n      // eslint-disable-next-line no-param-reassign\n      wcUri = encodeURIComponent(wcUri);\n    }\n    const encodedWcUrl = encodeURIComponent(wcUri);\n    return {\n      redirect: `${safeAppUrl}wc?uri=${encodedWcUrl}`,\n      redirectUniversalLink: safeUniversalLink ? `${safeUniversalLink}wc?uri=${encodedWcUrl}` : undefined,\n      href: safeAppUrl\n    };\n  },\n  formatUniversalUrl(appUrl, wcUri) {\n    if (!CoreHelperUtil.isHttpUrl(appUrl)) {\n      return this.formatNativeUrl(appUrl, wcUri);\n    }\n    let safeAppUrl = appUrl;\n    if (!safeAppUrl.endsWith('/')) {\n      safeAppUrl = `${safeAppUrl}/`;\n    }\n    const encodedWcUrl = encodeURIComponent(wcUri);\n    return {\n      redirect: `${safeAppUrl}wc?uri=${encodedWcUrl}`,\n      href: safeAppUrl\n    };\n  },\n  getOpenTargetForPlatform(target) {\n    if (target === 'popupWindow') {\n      return target;\n    }\n    // Only '_blank' deeplinks work in Telegram context\n    if (this.isTelegram()) {\n      // But for social login, we need to load the page in the same context\n      if (StorageUtil.getTelegramSocialProvider()) {\n        return '_top';\n      }\n      return '_blank';\n    }\n    return target;\n  },\n  openHref(href, target, features) {\n    window?.open(href, this.getOpenTargetForPlatform(target), features || 'noreferrer noopener');\n  },\n  returnOpenHref(href, target, features) {\n    return window?.open(href, this.getOpenTargetForPlatform(target), features || 'noreferrer noopener');\n  },\n  isTelegram() {\n    return typeof window !== 'undefined' && (\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Boolean(window.TelegramWebviewProxy) ||\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Boolean(window.Telegram) ||\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Boolean(window.TelegramWebviewProxyProto));\n  },\n  isPWA() {\n    if (typeof window === 'undefined') {\n      return false;\n    }\n    const isStandaloneDisplayMode = window?.matchMedia && typeof window.matchMedia === 'function' ? window.matchMedia('(display-mode: standalone)')?.matches : false;\n    const isIOSStandalone = window?.navigator?.standalone;\n    return Boolean(isStandaloneDisplayMode || isIOSStandalone);\n  },\n  async preloadImage(src) {\n    const imagePromise = new Promise((resolve, reject) => {\n      const image = new Image();\n      image.onload = resolve;\n      image.onerror = reject;\n      image.crossOrigin = 'anonymous';\n      image.src = src;\n    });\n    return Promise.race([imagePromise, CoreHelperUtil.wait(2000)]);\n  },\n  parseBalance(balance, symbol) {\n    let formattedBalance = '0.000';\n    if (typeof balance === 'string') {\n      const number = Number(balance);\n      if (!isNaN(number)) {\n        const formattedValue = (Math.floor(number * 1000) / 1000).toFixed(3);\n        if (formattedValue) {\n          formattedBalance = formattedValue;\n        }\n      }\n    }\n    const [valueString, decimalsString] = formattedBalance.split('.');\n    const value = valueString || '0';\n    const decimals = decimalsString || '000';\n    const formattedText = `${value}.${decimals}${symbol ? ` ${symbol}` : ''}`;\n    return {\n      formattedText,\n      value,\n      decimals,\n      symbol\n    };\n  },\n  getApiUrl() {\n    return CommonConstants.W3M_API_URL;\n  },\n  getBlockchainApiUrl() {\n    return CommonConstants.BLOCKCHAIN_API_RPC_URL;\n  },\n  getAnalyticsUrl() {\n    return CommonConstants.PULSE_API_URL;\n  },\n  getUUID() {\n    if (crypto?.randomUUID) {\n      return crypto.randomUUID();\n    }\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/gu, c => {\n      const r = Math.random() * 16 | 0;\n      const v = c === 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  },\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  parseError(error) {\n    if (typeof error === 'string') {\n      return error;\n    } else if (typeof error?.issues?.[0]?.message === 'string') {\n      return error.issues[0].message;\n    } else if (error instanceof Error) {\n      return error.message;\n    }\n    return 'Unknown error';\n  },\n  sortRequestedNetworks(approvedIds, requestedNetworks = []) {\n    const approvedIndexMap = {};\n    if (requestedNetworks && approvedIds) {\n      approvedIds.forEach((id, index) => {\n        approvedIndexMap[id] = index;\n      });\n      requestedNetworks.sort((a, b) => {\n        const indexA = approvedIndexMap[a.id];\n        const indexB = approvedIndexMap[b.id];\n        if (indexA !== undefined && indexB !== undefined) {\n          return indexA - indexB;\n        } else if (indexA !== undefined) {\n          return -1;\n        } else if (indexB !== undefined) {\n          return 1;\n        }\n        return 0;\n      });\n    }\n    return requestedNetworks;\n  },\n  calculateBalance(array) {\n    let sum = 0;\n    for (const item of array) {\n      sum += item.value ?? 0;\n    }\n    return sum;\n  },\n  formatTokenBalance(number) {\n    const roundedNumber = number.toFixed(2);\n    const [dollars, pennies] = roundedNumber.split('.');\n    return {\n      dollars,\n      pennies\n    };\n  },\n  isAddress(address, chain = 'eip155') {\n    switch (chain) {\n      case 'eip155':\n        if (!/^(?:0x)?[0-9a-f]{40}$/iu.test(address)) {\n          return false;\n        } else if (/^(?:0x)?[0-9a-f]{40}$/iu.test(address) || /^(?:0x)?[0-9A-F]{40}$/iu.test(address)) {\n          return true;\n        }\n        return false;\n      case 'solana':\n        return /[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(address);\n      default:\n        return false;\n    }\n  },\n  uniqueBy(arr, key) {\n    const set = new Set();\n    return arr.filter(item => {\n      const keyValue = item[key];\n      if (set.has(keyValue)) {\n        return false;\n      }\n      set.add(keyValue);\n      return true;\n    });\n  },\n  generateSdkVersion(adapters, platform, version) {\n    const hasNoAdapters = adapters.length === 0;\n    const adapterNames = hasNoAdapters ? ConstantsUtil.ADAPTER_TYPES.UNIVERSAL : adapters.map(adapter => adapter.adapterType).join(',');\n    return `${platform}-${adapterNames}-${version}`;\n  },\n  // eslint-disable-next-line max-params\n  createAccount(namespace, address, type, publicKey, path) {\n    return {\n      namespace,\n      address,\n      type,\n      publicKey,\n      path\n    };\n  },\n  isCaipAddress(address) {\n    if (typeof address !== 'string') {\n      return false;\n    }\n    const sections = address.split(':');\n    const namespace = sections[0];\n    return sections.filter(Boolean).length === 3 && namespace in CommonConstants.CHAIN_NAME_MAP;\n  },\n  getAccount(account) {\n    if (!account) {\n      return {\n        address: undefined,\n        chainId: undefined\n      };\n    }\n    if (typeof account === 'string') {\n      return {\n        address: account,\n        chainId: undefined\n      };\n    }\n    return {\n      address: account.address,\n      chainId: account.chainId\n    };\n  },\n  isMac() {\n    const ua = window?.navigator.userAgent.toLowerCase();\n    return ua.includes('macintosh') && !ua.includes('safari');\n  },\n  formatTelegramSocialLoginUrl(url) {\n    const valueToInject = `--${encodeURIComponent(window?.location.href)}`;\n    const paramToInject = 'state=';\n    const parsedUrl = new URL(url);\n    if (parsedUrl.host === 'auth.magic.link') {\n      const providerParam = 'provider_authorization_url=';\n      const providerUrl = url.substring(url.indexOf(providerParam) + providerParam.length);\n      const resultUrl = this.injectIntoUrl(decodeURIComponent(providerUrl), paramToInject, valueToInject);\n      return url.replace(providerUrl, encodeURIComponent(resultUrl));\n    }\n    return this.injectIntoUrl(url, paramToInject, valueToInject);\n  },\n  injectIntoUrl(url, key, appendString) {\n    // Find the position of \"key\" e.g. \"state=\" in the URL\n    const keyIndex = url.indexOf(key);\n    if (keyIndex === -1) {\n      throw new Error(`${key} parameter not found in the URL: ${url}`);\n    }\n    // Find the position of the next \"&\" after \"key\"\n    const keyEndIndex = url.indexOf('&', keyIndex);\n    const keyLength = key.length;\n    // If there is no \"&\" after key, it means \"key\" is the last parameter\n    // eslint-disable-next-line no-negated-condition\n    const keyParamEnd = keyEndIndex !== -1 ? keyEndIndex : url.length;\n    // Extract the part of the URL before the key value\n    const beforeKeyValue = url.substring(0, keyIndex + keyLength);\n    // Extract the current key value\n    const currentKeyValue = url.substring(keyIndex + keyLength, keyParamEnd);\n    // Extract the part of the URL after the key value\n    const afterKeyValue = url.substring(keyEndIndex);\n    // Append the new string to the key value\n    const newKeyValue = currentKeyValue + appendString;\n    // Reconstruct the URL with the appended key value\n    const newUrl = beforeKeyValue + newKeyValue + afterKeyValue;\n    return newUrl;\n  }\n};","map":{"version":3,"names":["ConstantsUtil","CommonConstants","StorageUtil","CoreHelperUtil","isMobile","isClient","Boolean","window","matchMedia","matches","test","navigator","userAgent","checkCaipNetwork","network","networkName","caipNetworkId","toLocaleLowerCase","includes","toLowerCase","isAndroid","ua","isIos","isSafari","isPairingExpired","expiry","Date","now","TEN_SEC_MS","isAllowedRetry","lastRetry","differenceMs","ONE_SEC_MS","copyToClopboard","text","clipboard","writeText","isIframe","self","top","e","isSafeApp","ancestor","location","ancestorOrigins","safeAppUrl","ancestorUrl","URL","safeUrl","hostname","getPairingExpiry","FOUR_MINUTES_MS","getNetworkId","caipAddress","split","getPlainAddress","wait","milliseconds","Promise","resolve","setTimeout","debounce","func","timeout","timer","undefined","args","next","clearTimeout","isHttpUrl","url","startsWith","formatNativeUrl","appUrl","wcUri","universalLink","formatUniversalUrl","safeUniversalLink","replaceAll","endsWith","isTelegram","encodeURIComponent","encodedWcUrl","redirect","redirectUniversalLink","href","getOpenTargetForPlatform","target","getTelegramSocialProvider","openHref","features","open","returnOpenHref","TelegramWebviewProxy","Telegram","TelegramWebviewProxyProto","isPWA","isStandaloneDisplayMode","isIOSStandalone","standalone","preloadImage","src","imagePromise","reject","image","Image","onload","onerror","crossOrigin","race","parseBalance","balance","symbol","formattedBalance","number","Number","isNaN","formattedValue","Math","floor","toFixed","valueString","decimalsString","value","decimals","formattedText","getApiUrl","W3M_API_URL","getBlockchainApiUrl","BLOCKCHAIN_API_RPC_URL","getAnalyticsUrl","PULSE_API_URL","getUUID","crypto","randomUUID","replace","c","r","random","v","toString","parseError","error","issues","message","Error","sortRequestedNetworks","approvedIds","requestedNetworks","approvedIndexMap","forEach","id","index","sort","a","b","indexA","indexB","calculateBalance","array","sum","item","formatTokenBalance","roundedNumber","dollars","pennies","isAddress","address","chain","uniqueBy","arr","key","set","Set","filter","keyValue","has","add","generateSdkVersion","adapters","platform","version","hasNoAdapters","length","adapterNames","ADAPTER_TYPES","UNIVERSAL","map","adapter","adapterType","join","createAccount","namespace","type","publicKey","path","isCaipAddress","sections","CHAIN_NAME_MAP","getAccount","account","chainId","isMac","formatTelegramSocialLoginUrl","valueToInject","paramToInject","parsedUrl","host","providerParam","providerUrl","substring","indexOf","resultUrl","injectIntoUrl","decodeURIComponent","appendString","keyIndex","keyEndIndex","keyLength","keyParamEnd","beforeKeyValue","currentKeyValue","afterKeyValue","newKeyValue","newUrl"],"sources":["../../../../src/utils/CoreHelperUtil.ts"],"sourcesContent":[null],"mappings":"AAQA,SAASA,aAAa,IAAIC,eAAe,QAAQ,sBAAsB;AAGvE,SAASD,aAAa,QAAQ,oBAAoB;AAClD,SAASE,WAAW,QAAQ,kBAAkB;AAM9C,OAAO,MAAMC,cAAc,GAAG;EAC5BC,QAAQA,CAAA;IACN,IAAI,IAAI,CAACC,QAAQ,EAAE,EAAE;MACnB,OAAOC,OAAO,CACXC,MAAM,EAAEC,UAAU,IACjB,OAAOD,MAAM,CAACC,UAAU,KAAK,UAAU,IACvCD,MAAM,CAACC,UAAU,CAAC,kBAAkB,CAAC,EAAEC,OAAO,IAC9C,uDAAuD,CAACC,IAAI,CAACC,SAAS,CAACC,SAAS,CAAC,CACpF;IACH;IAEA,OAAO,KAAK;EACd,CAAC;EAEDC,gBAAgBA,CAACC,OAAgC,EAAEC,WAAW,GAAG,EAAE;IACjE,OAAOD,OAAO,EAAEE,aAAa,CAACC,iBAAiB,EAAE,CAACC,QAAQ,CAACH,WAAW,CAACI,WAAW,EAAE,CAAC;EACvF,CAAC;EAEDC,SAASA,CAAA;IACP,IAAI,CAAC,IAAI,CAAChB,QAAQ,EAAE,EAAE;MACpB,OAAO,KAAK;IACd;IAEA,MAAMiB,EAAE,GAAGd,MAAM,EAAEI,SAAS,CAACC,SAAS,CAACO,WAAW,EAAE;IAEpD,OAAOhB,cAAc,CAACC,QAAQ,EAAE,IAAIiB,EAAE,CAACH,QAAQ,CAAC,SAAS,CAAC;EAC5D,CAAC;EAEDI,KAAKA,CAAA;IACH,IAAI,CAAC,IAAI,CAAClB,QAAQ,EAAE,EAAE;MACpB,OAAO,KAAK;IACd;IAEA,MAAMiB,EAAE,GAAGd,MAAM,EAAEI,SAAS,CAACC,SAAS,CAACO,WAAW,EAAE;IAEpD,OAAOE,EAAE,CAACH,QAAQ,CAAC,QAAQ,CAAC,IAAIG,EAAE,CAACH,QAAQ,CAAC,MAAM,CAAC;EACrD,CAAC;EAEDK,QAAQA,CAAA;IACN,IAAI,CAAC,IAAI,CAAClB,QAAQ,EAAE,EAAE;MACpB,OAAO,KAAK;IACd;IAEA,MAAMgB,EAAE,GAAGd,MAAM,EAAEI,SAAS,CAACC,SAAS,CAACO,WAAW,EAAE;IAEpD,OAAOE,EAAE,CAACH,QAAQ,CAAC,QAAQ,CAAC;EAC9B,CAAC;EAEDb,QAAQA,CAAA;IACN,OAAO,OAAOE,MAAM,KAAK,WAAW;EACtC,CAAC;EAEDiB,gBAAgBA,CAACC,MAAe;IAC9B,OAAOA,MAAM,GAAGA,MAAM,GAAGC,IAAI,CAACC,GAAG,EAAE,IAAI3B,aAAa,CAAC4B,UAAU,GAAG,IAAI;EACxE,CAAC;EAEDC,cAAcA,CAACC,SAAiB,EAAEC,YAAY,GAAG/B,aAAa,CAACgC,UAAU;IACvE,OAAON,IAAI,CAACC,GAAG,EAAE,GAAGG,SAAS,IAAIC,YAAY;EAC/C,CAAC;EAEDE,eAAeA,CAACC,IAAY;IAC1BvB,SAAS,CAACwB,SAAS,CAACC,SAAS,CAACF,IAAI,CAAC;EACrC,CAAC;EAEDG,QAAQA,CAAA;IACN,IAAI;MACF,OAAO9B,MAAM,EAAE+B,IAAI,KAAK/B,MAAM,EAAEgC,GAAG;IACrC,CAAC,CAAC,OAAOC,CAAC,EAAE;MACV,OAAO,KAAK;IACd;EACF,CAAC;EACDC,SAASA,CAAA;IACP,IAAItC,cAAc,CAACE,QAAQ,EAAE,IAAIE,MAAM,CAAC+B,IAAI,KAAK/B,MAAM,CAACgC,GAAG,EAAE;MAC3D,IAAI;QACF,MAAMG,QAAQ,GAAGnC,MAAM,EAAEoC,QAAQ,EAAEC,eAAe,GAAG,CAAC,CAAC;QAEvD,MAAMC,UAAU,GAAG,yBAAyB;QAC5C,IAAIH,QAAQ,EAAE;UACZ,MAAMI,WAAW,GAAG,IAAIC,GAAG,CAACL,QAAQ,CAAC;UACrC,MAAMM,OAAO,GAAG,IAAID,GAAG,CAACF,UAAU,CAAC;UAEnC,OAAOC,WAAW,CAACG,QAAQ,KAAKD,OAAO,CAACC,QAAQ;QAClD;MACF,CAAC,CAAC,MAAM;QACN,OAAO,KAAK;MACd;IACF;IAEA,OAAO,KAAK;EACd,CAAC;EAEDC,gBAAgBA,CAAA;IACd,OAAOxB,IAAI,CAACC,GAAG,EAAE,GAAG3B,aAAa,CAACmD,eAAe;EACnD,CAAC;EAEDC,YAAYA,CAACC,WAAoC;IAC/C,OAAOA,WAAW,EAAEC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EACnC,CAAC;EAEDC,eAAeA,CAACF,WAAoC;IAClD,OAAOA,WAAW,EAAEC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAwB;EAC1D,CAAC;EAED,MAAME,IAAIA,CAACC,YAAoB;IAC7B,OAAO,IAAIC,OAAO,CAACC,OAAO,IAAG;MAC3BC,UAAU,CAACD,OAAO,EAAEF,YAAY,CAAC;IACnC,CAAC,CAAC;EACJ,CAAC;EAED;EACAI,QAAQA,CAACC,IAAiC,EAAEC,OAAO,GAAG,GAAG;IACvD,IAAIC,KAAK,GAA8CC,SAAS;IAEhE,OAAO,CAAC,GAAGC,IAAe,KAAI;MAC5B,SAASC,IAAIA,CAAA;QACXL,IAAI,CAAC,GAAGI,IAAI,CAAC;MACf;MAEA,IAAIF,KAAK,EAAE;QACTI,YAAY,CAACJ,KAAK,CAAC;MACrB;MACAA,KAAK,GAAGJ,UAAU,CAACO,IAAI,EAAEJ,OAAO,CAAC;IACnC,CAAC;EACH,CAAC;EAEDM,SAASA,CAACC,GAAW;IACnB,OAAOA,GAAG,CAACC,UAAU,CAAC,SAAS,CAAC,IAAID,GAAG,CAACC,UAAU,CAAC,UAAU,CAAC;EAChE,CAAC;EAEDC,eAAeA,CACbC,MAAc,EACdC,KAAa,EACbC,aAAA,GAA+B,IAAI;IAEnC,IAAIxE,cAAc,CAACkE,SAAS,CAACI,MAAM,CAAC,EAAE;MACpC,OAAO,IAAI,CAACG,kBAAkB,CAACH,MAAM,EAAEC,KAAK,CAAC;IAC/C;IAEA,IAAI7B,UAAU,GAAG4B,MAAM;IACvB,IAAII,iBAAiB,GAAGF,aAAa;IAErC,IAAI9B,UAAU,EAAE;MACd,IAAI,CAACA,UAAU,CAAC3B,QAAQ,CAAC,KAAK,CAAC,EAAE;QAC/B2B,UAAU,GAAG4B,MAAM,CAACK,UAAU,CAAC,GAAG,EAAE,EAAE,CAAC,CAACA,UAAU,CAAC,GAAG,EAAE,EAAE,CAAC;QAC3DjC,UAAU,GAAG,GAAGA,UAAU,KAAK;MACjC;MAEA,IAAI,CAACA,UAAU,CAACkC,QAAQ,CAAC,GAAG,CAAC,EAAE;QAC7BlC,UAAU,GAAG,GAAGA,UAAU,GAAG;MAC/B;IACF;IACA,IAAIgC,iBAAiB,IAAI,CAACA,iBAAiB,EAAEE,QAAQ,CAAC,GAAG,CAAC,EAAE;MAC1DF,iBAAiB,GAAG,GAAGA,iBAAiB,GAAG;IAC7C;IAEA;IACA,IAAI,IAAI,CAACG,UAAU,EAAE,IAAI,IAAI,CAAC5D,SAAS,EAAE,EAAE;MACzC;MACAsD,KAAK,GAAGO,kBAAkB,CAACP,KAAK,CAAC;IACnC;IACA,MAAMQ,YAAY,GAAGD,kBAAkB,CAACP,KAAK,CAAC;IAE9C,OAAO;MACLS,QAAQ,EAAE,GAAGtC,UAAU,UAAUqC,YAAY,EAAE;MAC/CE,qBAAqB,EAAEP,iBAAiB,GACpC,GAAGA,iBAAiB,UAAUK,YAAY,EAAE,GAC5CjB,SAAS;MACboB,IAAI,EAAExC;KACP;EACH,CAAC;EAED+B,kBAAkBA,CAACH,MAAc,EAAEC,KAAa;IAC9C,IAAI,CAACvE,cAAc,CAACkE,SAAS,CAACI,MAAM,CAAC,EAAE;MACrC,OAAO,IAAI,CAACD,eAAe,CAACC,MAAM,EAAEC,KAAK,CAAC;IAC5C;IACA,IAAI7B,UAAU,GAAG4B,MAAM;IACvB,IAAI,CAAC5B,UAAU,CAACkC,QAAQ,CAAC,GAAG,CAAC,EAAE;MAC7BlC,UAAU,GAAG,GAAGA,UAAU,GAAG;IAC/B;IACA,MAAMqC,YAAY,GAAGD,kBAAkB,CAACP,KAAK,CAAC;IAE9C,OAAO;MACLS,QAAQ,EAAE,GAAGtC,UAAU,UAAUqC,YAAY,EAAE;MAC/CG,IAAI,EAAExC;KACP;EACH,CAAC;EACDyC,wBAAwBA,CAACC,MAAkB;IACzC,IAAIA,MAAM,KAAK,aAAa,EAAE;MAC5B,OAAOA,MAAM;IACf;IACA;IACA,IAAI,IAAI,CAACP,UAAU,EAAE,EAAE;MACrB;MACA,IAAI9E,WAAW,CAACsF,yBAAyB,EAAE,EAAE;QAC3C,OAAO,MAAM;MACf;MAEA,OAAO,QAAQ;IACjB;IAEA,OAAOD,MAAM;EACf,CAAC;EACDE,QAAQA,CAACJ,IAAY,EAAEE,MAAkB,EAAEG,QAAiB;IAC1DnF,MAAM,EAAEoF,IAAI,CAACN,IAAI,EAAE,IAAI,CAACC,wBAAwB,CAACC,MAAM,CAAC,EAAEG,QAAQ,IAAI,qBAAqB,CAAC;EAC9F,CAAC;EAEDE,cAAcA,CAACP,IAAY,EAAEE,MAAkB,EAAEG,QAAiB;IAChE,OAAOnF,MAAM,EAAEoF,IAAI,CACjBN,IAAI,EACJ,IAAI,CAACC,wBAAwB,CAACC,MAAM,CAAC,EACrCG,QAAQ,IAAI,qBAAqB,CAClC;EACH,CAAC;EAEDV,UAAUA,CAAA;IACR,OACE,OAAOzE,MAAM,KAAK,WAAW;IAC7B;IACCD,OAAO,CAAEC,MAAc,CAACsF,oBAAoB,CAAC;IAC5C;IACAvF,OAAO,CAAEC,MAAc,CAACuF,QAAQ,CAAC;IACjC;IACAxF,OAAO,CAAEC,MAAc,CAACwF,yBAAyB,CAAC,CAAC;EAEzD,CAAC;EAEDC,KAAKA,CAAA;IACH,IAAI,OAAOzF,MAAM,KAAK,WAAW,EAAE;MACjC,OAAO,KAAK;IACd;IAEA,MAAM0F,uBAAuB,GAC3B1F,MAAM,EAAEC,UAAU,IAAI,OAAOD,MAAM,CAACC,UAAU,KAAK,UAAU,GACzDD,MAAM,CAACC,UAAU,CAAC,4BAA4B,CAAC,EAAEC,OAAO,GACxD,KAAK;IACX,MAAMyF,eAAe,GAAI3F,MAAM,EAAEI,SAAgD,EAAEwF,UAAU;IAE7F,OAAO7F,OAAO,CAAC2F,uBAAuB,IAAIC,eAAe,CAAC;EAC5D,CAAC;EAED,MAAME,YAAYA,CAACC,GAAW;IAC5B,MAAMC,YAAY,GAAG,IAAI5C,OAAO,CAAC,CAACC,OAAO,EAAE4C,MAAM,KAAI;MACnD,MAAMC,KAAK,GAAG,IAAIC,KAAK,EAAE;MACzBD,KAAK,CAACE,MAAM,GAAG/C,OAAO;MACtB6C,KAAK,CAACG,OAAO,GAAGJ,MAAM;MACtBC,KAAK,CAACI,WAAW,GAAG,WAAW;MAC/BJ,KAAK,CAACH,GAAG,GAAGA,GAAG;IACjB,CAAC,CAAC;IAEF,OAAO3C,OAAO,CAACmD,IAAI,CAAC,CAACP,YAAY,EAAEnG,cAAc,CAACqD,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;EAChE,CAAC;EAEDsD,YAAYA,CAACC,OAA2B,EAAEC,MAA0B;IAClE,IAAIC,gBAAgB,GAAG,OAAO;IAE9B,IAAI,OAAOF,OAAO,KAAK,QAAQ,EAAE;MAC/B,MAAMG,MAAM,GAAGC,MAAM,CAACJ,OAAO,CAAC;MAC9B,IAAI,CAACK,KAAK,CAACF,MAAM,CAAC,EAAE;QAClB,MAAMG,cAAc,GAAG,CAACC,IAAI,CAACC,KAAK,CAACL,MAAM,GAAG,IAAI,CAAC,GAAG,IAAI,EAAEM,OAAO,CAAC,CAAC,CAAC;QACpE,IAAIH,cAAc,EAAE;UAClBJ,gBAAgB,GAAGI,cAAc;QACnC;MACF;IACF;IACA,MAAM,CAACI,WAAW,EAAEC,cAAc,CAAC,GAAGT,gBAAgB,CAAC3D,KAAK,CAAC,GAAG,CAAC;IAEjE,MAAMqE,KAAK,GAAGF,WAAW,IAAI,GAAG;IAChC,MAAMG,QAAQ,GAAGF,cAAc,IAAI,KAAK;IAExC,MAAMG,aAAa,GAAG,GAAGF,KAAK,IAAIC,QAAQ,GAAGZ,MAAM,GAAG,IAAIA,MAAM,EAAE,GAAG,EAAE,EAAE;IAEzE,OAAO;MACLa,aAAa;MACbF,KAAK;MACLC,QAAQ;MACRZ;KACD;EACH,CAAC;EAEDc,SAASA,CAAA;IACP,OAAO7H,eAAe,CAAC8H,WAAW;EACpC,CAAC;EAEDC,mBAAmBA,CAAA;IACjB,OAAO/H,eAAe,CAACgI,sBAAsB;EAC/C,CAAC;EAEDC,eAAeA,CAAA;IACb,OAAOjI,eAAe,CAACkI,aAAa;EACtC,CAAC;EAEDC,OAAOA,CAAA;IACL,IAAIC,MAAM,EAAEC,UAAU,EAAE;MACtB,OAAOD,MAAM,CAACC,UAAU,EAAE;IAC5B;IAEA,OAAO,sCAAsC,CAACC,OAAO,CAAC,QAAQ,EAAEC,CAAC,IAAG;MAClE,MAAMC,CAAC,GAAInB,IAAI,CAACoB,MAAM,EAAE,GAAG,EAAE,GAAI,CAAC;MAClC,MAAMC,CAAC,GAAGH,CAAC,KAAK,GAAG,GAAGC,CAAC,GAAIA,CAAC,GAAG,GAAG,GAAI,GAAG;MAEzC,OAAOE,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC;IACvB,CAAC,CAAC;EACJ,CAAC;EAED;EACAC,UAAUA,CAACC,KAAU;IACnB,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;MAC7B,OAAOA,KAAK;IACd,CAAC,MAAM,IAAI,OAAOA,KAAK,EAAEC,MAAM,GAAG,CAAC,CAAC,EAAEC,OAAO,KAAK,QAAQ,EAAE;MAC1D,OAAOF,KAAK,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,OAAO;IAChC,CAAC,MAAM,IAAIF,KAAK,YAAYG,KAAK,EAAE;MACjC,OAAOH,KAAK,CAACE,OAAO;IACtB;IAEA,OAAO,eAAe;EACxB,CAAC;EAEDE,qBAAqBA,CACnBC,WAAgD,EAChDC,iBAAA,GAAmC,EAAE;IAErC,MAAMC,gBAAgB,GAA2B,EAAE;IAEnD,IAAID,iBAAiB,IAAID,WAAW,EAAE;MACpCA,WAAW,CAACG,OAAO,CAAC,CAACC,EAAE,EAAEC,KAAK,KAAI;QAChCH,gBAAgB,CAACE,EAAE,CAAC,GAAGC,KAAK;MAC9B,CAAC,CAAC;MAEFJ,iBAAiB,CAACK,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAI;QAC9B,MAAMC,MAAM,GAAGP,gBAAgB,CAACK,CAAC,CAACH,EAAE,CAAC;QACrC,MAAMM,MAAM,GAAGR,gBAAgB,CAACM,CAAC,CAACJ,EAAE,CAAC;QAErC,IAAIK,MAAM,KAAK3F,SAAS,IAAI4F,MAAM,KAAK5F,SAAS,EAAE;UAChD,OAAO2F,MAAM,GAAGC,MAAM;QACxB,CAAC,MAAM,IAAID,MAAM,KAAK3F,SAAS,EAAE;UAC/B,OAAO,CAAC,CAAC;QACX,CAAC,MAAM,IAAI4F,MAAM,KAAK5F,SAAS,EAAE;UAC/B,OAAO,CAAC;QACV;QAEA,OAAO,CAAC;MACV,CAAC,CAAC;IACJ;IAEA,OAAOmF,iBAAiB;EAC1B,CAAC;EAEDU,gBAAgBA,CAACC,KAAgB;IAC/B,IAAIC,GAAG,GAAG,CAAC;IACX,KAAK,MAAMC,IAAI,IAAIF,KAAK,EAAE;MACxBC,GAAG,IAAIC,IAAI,CAACtC,KAAK,IAAI,CAAC;IACxB;IAEA,OAAOqC,GAAG;EACZ,CAAC;EAEDE,kBAAkBA,CAAChD,MAAc;IAC/B,MAAMiD,aAAa,GAAGjD,MAAM,CAACM,OAAO,CAAC,CAAC,CAAC;IACvC,MAAM,CAAC4C,OAAO,EAAEC,OAAO,CAAC,GAAGF,aAAa,CAAC7G,KAAK,CAAC,GAAG,CAAC;IAEnD,OAAO;MAAE8G,OAAO;MAAEC;IAAO,CAAE;EAC7B,CAAC;EAEDC,SAASA,CAACC,OAAe,EAAEC,KAAA,GAAwB,QAAQ;IACzD,QAAQA,KAAK;MACX,KAAK,QAAQ;QACX,IAAI,CAAC,yBAAyB,CAAC9J,IAAI,CAAC6J,OAAO,CAAC,EAAE;UAC5C,OAAO,KAAK;QACd,CAAC,MAAM,IACL,yBAAyB,CAAC7J,IAAI,CAAC6J,OAAO,CAAC,IACvC,yBAAyB,CAAC7J,IAAI,CAAC6J,OAAO,CAAC,EACvC;UACA,OAAO,IAAI;QACb;QAEA,OAAO,KAAK;MACd,KAAK,QAAQ;QACX,OAAO,gCAAgC,CAAC7J,IAAI,CAAC6J,OAAO,CAAC;MAEvD;QACE,OAAO,KAAK;IAChB;EACF,CAAC;EAEDE,QAAQA,CAAIC,GAAQ,EAAEC,GAAY;IAChC,MAAMC,GAAG,GAAG,IAAIC,GAAG,EAAE;IAErB,OAAOH,GAAG,CAACI,MAAM,CAACb,IAAI,IAAG;MACvB,MAAMc,QAAQ,GAAGd,IAAI,CAACU,GAAG,CAAC;MAC1B,IAAIC,GAAG,CAACI,GAAG,CAACD,QAAQ,CAAC,EAAE;QACrB,OAAO,KAAK;MACd;MACAH,GAAG,CAACK,GAAG,CAACF,QAAQ,CAAC;MAEjB,OAAO,IAAI;IACb,CAAC,CAAC;EACJ,CAAC;EAEDG,kBAAkBA,CAChBC,QAAwB,EACxBC,QAAsB,EACtBC,OAAe;IAEf,MAAMC,aAAa,GAAGH,QAAQ,CAACI,MAAM,KAAK,CAAC;IAC3C,MAAMC,YAAY,GAChBF,aAAa,GACTtL,aAAa,CAACyL,aAAa,CAACC,SAAS,GACrCP,QAAQ,CAACQ,GAAG,CAACC,OAAO,IAAIA,OAAO,CAACC,WAAW,CAAC,CAACC,IAAI,CAAC,GAAG,CAC3C;IAEhB,OAAO,GAAGV,QAAQ,IAAII,YAAY,IAAIH,OAAO,EAAE;EACjD,CAAC;EAED;EACAU,aAAaA,CACXC,SAAY,EACZzB,OAAe,EACf0B,IAAyB,EACzBC,SAAkB,EAClBC,IAAa;IAEb,OAAO;MACLH,SAAS;MACTzB,OAAO;MACP0B,IAAI;MACJC,SAAS;MACTC;KACoB;EACxB,CAAC;EAEDC,aAAaA,CAAC7B,OAAiB;IAC7B,IAAI,OAAOA,OAAO,KAAK,QAAQ,EAAE;MAC/B,OAAO,KAAK;IACd;IAEA,MAAM8B,QAAQ,GAAG9B,OAAO,CAACjH,KAAK,CAAC,GAAG,CAAC;IACnC,MAAM0I,SAAS,GAAGK,QAAQ,CAAC,CAAC,CAAC;IAE7B,OACEA,QAAQ,CAACvB,MAAM,CAACxK,OAAO,CAAC,CAACiL,MAAM,KAAK,CAAC,IACpCS,SAAoB,IAAI/L,eAAe,CAACqM,cAAc;EAE3D,CAAC;EACDC,UAAUA,CAACC,OAAoC;IAC7C,IAAI,CAACA,OAAO,EAAE;MACZ,OAAO;QACLjC,OAAO,EAAEtG,SAAS;QAClBwI,OAAO,EAAExI;OACV;IACH;IAEA,IAAI,OAAOuI,OAAO,KAAK,QAAQ,EAAE;MAC/B,OAAO;QACLjC,OAAO,EAAEiC,OAAO;QAChBC,OAAO,EAAExI;OACV;IACH;IAEA,OAAO;MACLsG,OAAO,EAAEiC,OAAO,CAACjC,OAAO;MACxBkC,OAAO,EAAED,OAAO,CAACC;KAClB;EACH,CAAC;EACDC,KAAKA,CAAA;IACH,MAAMrL,EAAE,GAAGd,MAAM,EAAEI,SAAS,CAACC,SAAS,CAACO,WAAW,EAAE;IAEpD,OAAOE,EAAE,CAACH,QAAQ,CAAC,WAAW,CAAC,IAAI,CAACG,EAAE,CAACH,QAAQ,CAAC,QAAQ,CAAC;EAC3D,CAAC;EAEDyL,4BAA4BA,CAACrI,GAAW;IACtC,MAAMsI,aAAa,GAAG,KAAK3H,kBAAkB,CAAC1E,MAAM,EAAEoC,QAAQ,CAAC0C,IAAI,CAAC,EAAE;IACtE,MAAMwH,aAAa,GAAG,QAAQ;IAC9B,MAAMC,SAAS,GAAG,IAAI/J,GAAG,CAACuB,GAAG,CAAC;IAC9B,IAAIwI,SAAS,CAACC,IAAI,KAAK,iBAAiB,EAAE;MACxC,MAAMC,aAAa,GAAG,6BAA6B;MACnD,MAAMC,WAAW,GAAG3I,GAAG,CAAC4I,SAAS,CAAC5I,GAAG,CAAC6I,OAAO,CAACH,aAAa,CAAC,GAAGA,aAAa,CAACzB,MAAM,CAAC;MACpF,MAAM6B,SAAS,GAAG,IAAI,CAACC,aAAa,CAClCC,kBAAkB,CAACL,WAAW,CAAC,EAC/BJ,aAAa,EACbD,aAAa,CACd;MAED,OAAOtI,GAAG,CAACiE,OAAO,CAAC0E,WAAW,EAAEhI,kBAAkB,CAACmI,SAAS,CAAC,CAAC;IAChE;IAEA,OAAO,IAAI,CAACC,aAAa,CAAC/I,GAAG,EAAEuI,aAAa,EAAED,aAAa,CAAC;EAC9D,CAAC;EACDS,aAAaA,CAAC/I,GAAW,EAAEqG,GAAW,EAAE4C,YAAoB;IAC1D;IACA,MAAMC,QAAQ,GAAGlJ,GAAG,CAAC6I,OAAO,CAACxC,GAAG,CAAC;IAEjC,IAAI6C,QAAQ,KAAK,CAAC,CAAC,EAAE;MACnB,MAAM,IAAIvE,KAAK,CAAC,GAAG0B,GAAG,oCAAoCrG,GAAG,EAAE,CAAC;IAClE;IAEA;IACA,MAAMmJ,WAAW,GAAGnJ,GAAG,CAAC6I,OAAO,CAAC,GAAG,EAAEK,QAAQ,CAAC;IAC9C,MAAME,SAAS,GAAG/C,GAAG,CAACY,MAAM;IAC5B;IACA;IACA,MAAMoC,WAAW,GAAGF,WAAW,KAAK,CAAC,CAAC,GAAGA,WAAW,GAAGnJ,GAAG,CAACiH,MAAM;IACjE;IACA,MAAMqC,cAAc,GAAGtJ,GAAG,CAAC4I,SAAS,CAAC,CAAC,EAAEM,QAAQ,GAAGE,SAAS,CAAC;IAC7D;IACA,MAAMG,eAAe,GAAGvJ,GAAG,CAAC4I,SAAS,CAACM,QAAQ,GAAGE,SAAS,EAAEC,WAAW,CAAC;IACxE;IACA,MAAMG,aAAa,GAAGxJ,GAAG,CAAC4I,SAAS,CAACO,WAAW,CAAC;IAChD;IACA,MAAMM,WAAW,GAAGF,eAAe,GAAGN,YAAY;IAClD;IACA,MAAMS,MAAM,GAAGJ,cAAc,GAAGG,WAAW,GAAGD,aAAa;IAE3D,OAAOE,MAAM;EACf;CACD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}