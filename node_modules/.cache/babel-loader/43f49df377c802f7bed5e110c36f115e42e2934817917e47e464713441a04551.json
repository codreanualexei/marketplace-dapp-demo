{"ast":null,"code":"import * as Errors from './Errors.js';\n/** @see https://ethereum.github.io/yellowpaper/paper.pdf */\nexport const exponents = {\n  wei: 0,\n  gwei: 9,\n  szabo: 12,\n  finney: 15,\n  ether: 18\n};\n/**\n * Formats a `bigint` Value to its string representation (divided by the given exponent).\n *\n * @example\n * ```ts twoslash\n * import { Value } from 'ox'\n *\n * Value.format(420_000_000_000n, 9)\n * // @log: '420'\n * ```\n *\n * @param value - The `bigint` Value to format.\n * @param decimals - The exponent to divide the `bigint` Value by.\n * @returns The string representation of the Value.\n */\nexport function format(value) {\n  let decimals = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  let display = value.toString();\n  const negative = display.startsWith('-');\n  if (negative) display = display.slice(1);\n  display = display.padStart(decimals, '0');\n  let [integer, fraction] = [display.slice(0, display.length - decimals), display.slice(display.length - decimals)];\n  fraction = fraction.replace(/(0+)$/, '');\n  return \"\".concat(negative ? '-' : '').concat(integer || '0').concat(fraction ? \".\".concat(fraction) : '');\n}\n/**\n * Formats a `bigint` Value (default: wei) to a string representation of Ether.\n *\n * @example\n * ```ts twoslash\n * import { Value } from 'ox'\n *\n * Value.formatEther(1_000_000_000_000_000_000n)\n * // @log: '1'\n * ```\n *\n * @param wei - The Value to format.\n * @param unit - The unit to format the Value in. @default 'wei'.\n * @returns The Ether string representation of the Value.\n */\nexport function formatEther(wei) {\n  let unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'wei';\n  return format(wei, exponents.ether - exponents[unit]);\n}\n/**\n * Formats a `bigint` Value (default: wei) to a string representation of Gwei.\n *\n * @example\n * ```ts twoslash\n * import { Value } from 'ox'\n *\n * Value.formatGwei(1_000_000_000n)\n * // @log: '1'\n * ```\n *\n * @param wei - The Value to format.\n * @param unit - The unit to format the Value in. @default 'wei'.\n * @returns The Gwei string representation of the Value.\n */\nexport function formatGwei(wei) {\n  let unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'wei';\n  return format(wei, exponents.gwei - exponents[unit]);\n}\n/**\n * Parses a `string` representation of a Value to `bigint` (multiplied by the given exponent).\n *\n * @example\n * ```ts twoslash\n * import { Value } from 'ox'\n *\n * Value.from('420', 9)\n * // @log: 420000000000n\n * ```\n *\n * @param value - The string representation of the Value.\n * @param decimals - The exponent to multiply the Value by.\n * @returns The `bigint` representation of the Value.\n */\nexport function from(value) {\n  let decimals = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  if (!/^(-?)([0-9]*)\\.?([0-9]*)$/.test(value)) throw new InvalidDecimalNumberError({\n    value\n  });\n  let [integer = '', fraction = '0'] = value.split('.');\n  const negative = integer.startsWith('-');\n  if (negative) integer = integer.slice(1);\n  // trim trailing zeros.\n  fraction = fraction.replace(/(0+)$/, '');\n  // round off if the fraction is larger than the number of decimals.\n  if (decimals === 0) {\n    if (Math.round(Number(\".\".concat(fraction))) === 1) integer = \"\".concat(BigInt(integer) + 1n);\n    fraction = '';\n  } else if (fraction.length > decimals) {\n    const [left, unit, right] = [fraction.slice(0, decimals - 1), fraction.slice(decimals - 1, decimals), fraction.slice(decimals)];\n    const rounded = Math.round(Number(\"\".concat(unit, \".\").concat(right)));\n    if (rounded > 9) fraction = \"\".concat(BigInt(left) + BigInt(1), \"0\").padStart(left.length + 1, '0');else fraction = \"\".concat(left).concat(rounded);\n    if (fraction.length > decimals) {\n      fraction = fraction.slice(1);\n      integer = \"\".concat(BigInt(integer) + 1n);\n    }\n    fraction = fraction.slice(0, decimals);\n  } else {\n    fraction = fraction.padEnd(decimals, '0');\n  }\n  return BigInt(\"\".concat(negative ? '-' : '').concat(integer).concat(fraction));\n}\n/**\n * Parses a string representation of Ether to a `bigint` Value (default: wei).\n *\n * @example\n * ```ts twoslash\n * import { Value } from 'ox'\n *\n * Value.fromEther('420')\n * // @log: 420000000000000000000n\n * ```\n *\n * @param ether - String representation of Ether.\n * @param unit - The unit to parse to. @default 'wei'.\n * @returns A `bigint` Value.\n */\nexport function fromEther(ether) {\n  let unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'wei';\n  return from(ether, exponents.ether - exponents[unit]);\n}\n/**\n * Parses a string representation of Gwei to a `bigint` Value (default: wei).\n *\n * @example\n * ```ts twoslash\n * import { Value } from 'ox'\n *\n * Value.fromGwei('420')\n * // @log: 420000000000n\n * ```\n *\n * @param gwei - String representation of Gwei.\n * @param unit - The unit to parse to. @default 'wei'.\n * @returns A `bigint` Value.\n */\nexport function fromGwei(gwei) {\n  let unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'wei';\n  return from(gwei, exponents.gwei - exponents[unit]);\n}\n/**\n * Thrown when a value is not a valid decimal number.\n *\n * @example\n * ```ts twoslash\n * import { Value } from 'ox'\n *\n * Value.fromEther('123.456.789')\n * // @error: Value.InvalidDecimalNumberError: Value `123.456.789` is not a valid decimal number.\n * ```\n */\nexport class InvalidDecimalNumberError extends Errors.BaseError {\n  constructor(_ref) {\n    let {\n      value\n    } = _ref;\n    super(\"Value `\".concat(value, \"` is not a valid decimal number.\"));\n    Object.defineProperty(this, \"name\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 'Value.InvalidDecimalNumberError'\n    });\n  }\n}","map":{"version":3,"names":["Errors","exponents","wei","gwei","szabo","finney","ether","format","value","decimals","arguments","length","undefined","display","toString","negative","startsWith","slice","padStart","integer","fraction","replace","concat","formatEther","unit","formatGwei","from","test","InvalidDecimalNumberError","split","Math","round","Number","BigInt","left","right","rounded","padEnd","fromEther","fromGwei","BaseError","constructor","_ref","Object","defineProperty"],"sources":["/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/ox/core/Value.ts"],"sourcesContent":["import * as Errors from './Errors.js'\n\n/** @see https://ethereum.github.io/yellowpaper/paper.pdf */\nexport const exponents = {\n  wei: 0,\n  gwei: 9,\n  szabo: 12,\n  finney: 15,\n  ether: 18,\n} as const\n\n/**\n * Formats a `bigint` Value to its string representation (divided by the given exponent).\n *\n * @example\n * ```ts twoslash\n * import { Value } from 'ox'\n *\n * Value.format(420_000_000_000n, 9)\n * // @log: '420'\n * ```\n *\n * @param value - The `bigint` Value to format.\n * @param decimals - The exponent to divide the `bigint` Value by.\n * @returns The string representation of the Value.\n */\nexport function format(value: bigint, decimals = 0) {\n  let display = value.toString()\n\n  const negative = display.startsWith('-')\n  if (negative) display = display.slice(1)\n\n  display = display.padStart(decimals, '0')\n\n  let [integer, fraction] = [\n    display.slice(0, display.length - decimals),\n    display.slice(display.length - decimals),\n  ]\n  fraction = fraction.replace(/(0+)$/, '')\n  return `${negative ? '-' : ''}${integer || '0'}${\n    fraction ? `.${fraction}` : ''\n  }`\n}\n\nexport declare namespace format {\n  type ErrorType = Errors.GlobalErrorType\n}\n\n/**\n * Formats a `bigint` Value (default: wei) to a string representation of Ether.\n *\n * @example\n * ```ts twoslash\n * import { Value } from 'ox'\n *\n * Value.formatEther(1_000_000_000_000_000_000n)\n * // @log: '1'\n * ```\n *\n * @param wei - The Value to format.\n * @param unit - The unit to format the Value in. @default 'wei'.\n * @returns The Ether string representation of the Value.\n */\nexport function formatEther(\n  wei: bigint,\n  unit: 'wei' | 'gwei' | 'szabo' | 'finney' = 'wei',\n) {\n  return format(wei, exponents.ether - exponents[unit])\n}\n\nexport declare namespace formatEther {\n  type ErrorType = format.ErrorType | Errors.GlobalErrorType\n}\n\n/**\n * Formats a `bigint` Value (default: wei) to a string representation of Gwei.\n *\n * @example\n * ```ts twoslash\n * import { Value } from 'ox'\n *\n * Value.formatGwei(1_000_000_000n)\n * // @log: '1'\n * ```\n *\n * @param wei - The Value to format.\n * @param unit - The unit to format the Value in. @default 'wei'.\n * @returns The Gwei string representation of the Value.\n */\nexport function formatGwei(wei: bigint, unit: 'wei' = 'wei') {\n  return format(wei, exponents.gwei - exponents[unit])\n}\n\nexport declare namespace formatGwei {\n  type ErrorType = format.ErrorType | Errors.GlobalErrorType\n}\n\n/**\n * Parses a `string` representation of a Value to `bigint` (multiplied by the given exponent).\n *\n * @example\n * ```ts twoslash\n * import { Value } from 'ox'\n *\n * Value.from('420', 9)\n * // @log: 420000000000n\n * ```\n *\n * @param value - The string representation of the Value.\n * @param decimals - The exponent to multiply the Value by.\n * @returns The `bigint` representation of the Value.\n */\nexport function from(value: string, decimals = 0) {\n  if (!/^(-?)([0-9]*)\\.?([0-9]*)$/.test(value))\n    throw new InvalidDecimalNumberError({ value })\n\n  let [integer = '', fraction = '0'] = value.split('.')\n\n  const negative = integer.startsWith('-')\n  if (negative) integer = integer.slice(1)\n\n  // trim trailing zeros.\n  fraction = fraction.replace(/(0+)$/, '')\n\n  // round off if the fraction is larger than the number of decimals.\n  if (decimals === 0) {\n    if (Math.round(Number(`.${fraction}`)) === 1)\n      integer = `${BigInt(integer) + 1n}`\n    fraction = ''\n  } else if (fraction.length > decimals) {\n    const [left, unit, right] = [\n      fraction.slice(0, decimals - 1),\n      fraction.slice(decimals - 1, decimals),\n      fraction.slice(decimals),\n    ]\n\n    const rounded = Math.round(Number(`${unit}.${right}`))\n    if (rounded > 9)\n      fraction = `${BigInt(left) + BigInt(1)}0`.padStart(left.length + 1, '0')\n    else fraction = `${left}${rounded}`\n\n    if (fraction.length > decimals) {\n      fraction = fraction.slice(1)\n      integer = `${BigInt(integer) + 1n}`\n    }\n\n    fraction = fraction.slice(0, decimals)\n  } else {\n    fraction = fraction.padEnd(decimals, '0')\n  }\n\n  return BigInt(`${negative ? '-' : ''}${integer}${fraction}`)\n}\n\nexport declare namespace from {\n  type ErrorType = Errors.GlobalErrorType\n}\n\n/**\n * Parses a string representation of Ether to a `bigint` Value (default: wei).\n *\n * @example\n * ```ts twoslash\n * import { Value } from 'ox'\n *\n * Value.fromEther('420')\n * // @log: 420000000000000000000n\n * ```\n *\n * @param ether - String representation of Ether.\n * @param unit - The unit to parse to. @default 'wei'.\n * @returns A `bigint` Value.\n */\nexport function fromEther(\n  ether: string,\n  unit: 'wei' | 'gwei' | 'szabo' | 'finney' = 'wei',\n) {\n  return from(ether, exponents.ether - exponents[unit])\n}\n\nexport declare namespace fromEther {\n  type ErrorType = from.ErrorType | Errors.GlobalErrorType\n}\n\n/**\n * Parses a string representation of Gwei to a `bigint` Value (default: wei).\n *\n * @example\n * ```ts twoslash\n * import { Value } from 'ox'\n *\n * Value.fromGwei('420')\n * // @log: 420000000000n\n * ```\n *\n * @param gwei - String representation of Gwei.\n * @param unit - The unit to parse to. @default 'wei'.\n * @returns A `bigint` Value.\n */\nexport function fromGwei(gwei: string, unit: 'wei' = 'wei') {\n  return from(gwei, exponents.gwei - exponents[unit])\n}\n\nexport declare namespace fromGwei {\n  type ErrorType = from.ErrorType | Errors.GlobalErrorType\n}\n\n/**\n * Thrown when a value is not a valid decimal number.\n *\n * @example\n * ```ts twoslash\n * import { Value } from 'ox'\n *\n * Value.fromEther('123.456.789')\n * // @error: Value.InvalidDecimalNumberError: Value `123.456.789` is not a valid decimal number.\n * ```\n */\nexport class InvalidDecimalNumberError extends Errors.BaseError {\n  override readonly name = 'Value.InvalidDecimalNumberError'\n  constructor({ value }: { value: string }) {\n    super(`Value \\`${value}\\` is not a valid decimal number.`)\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}