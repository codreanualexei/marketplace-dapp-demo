{"ast":null,"code":"import { useMemo, useRef, useSyncExternalStore, useCallback, useLayoutEffect, useEffect, useDebugValue } from 'react';\nimport { isChanged, createProxy, affectedToPathList } from 'proxy-compare';\nimport { subscribe, snapshot } from 'valtio/vanilla';\nconst useAffectedDebugValue = (state, affected) => {\n  const pathList = useRef(void 0);\n  useEffect(() => {\n    pathList.current = affectedToPathList(state, affected, true);\n  });\n  useDebugValue(pathList.current);\n};\nconst condUseAffectedDebugValue = useAffectedDebugValue;\nconst targetCache = /* @__PURE__ */new WeakMap();\nfunction useSnapshot(proxyObject, options) {\n  const notifyInSync = options == null ? void 0 : options.sync;\n  const affected = useMemo(() => proxyObject && /* @__PURE__ */new WeakMap(), [proxyObject]);\n  const lastSnapshot = useRef(void 0);\n  let inRender = true;\n  const currSnapshot = useSyncExternalStore(useCallback(callback => {\n    const unsub = subscribe(proxyObject, callback, notifyInSync);\n    callback();\n    return unsub;\n  }, [proxyObject, notifyInSync]), () => {\n    const nextSnapshot = snapshot(proxyObject);\n    try {\n      if (!inRender && lastSnapshot.current && !isChanged(lastSnapshot.current, nextSnapshot, affected, /* @__PURE__ */new WeakMap())) {\n        return lastSnapshot.current;\n      }\n    } catch (e) {}\n    return nextSnapshot;\n  }, () => snapshot(proxyObject));\n  inRender = false;\n  useLayoutEffect(() => {\n    lastSnapshot.current = currSnapshot;\n  });\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    condUseAffectedDebugValue(currSnapshot, affected);\n  }\n  const proxyCache = useMemo(() => /* @__PURE__ */new WeakMap(), []);\n  return createProxy(currSnapshot, affected, proxyCache, targetCache);\n}\nexport { useSnapshot };","map":{"version":3,"names":["useMemo","useRef","useSyncExternalStore","useCallback","useLayoutEffect","useEffect","useDebugValue","isChanged","createProxy","affectedToPathList","subscribe","snapshot","useAffectedDebugValue","state","affected","pathList","current","condUseAffectedDebugValue","targetCache","WeakMap","useSnapshot","proxyObject","options","notifyInSync","sync","lastSnapshot","inRender","currSnapshot","callback","unsub","nextSnapshot","e","import","meta","env","MODE","proxyCache"],"sources":["/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/valtio/esm/react.mjs"],"sourcesContent":["import { useMemo, useRef, useSyncExternalStore, useCallback, useLayoutEffect, useEffect, useDebugValue } from 'react';\nimport { isChanged, createProxy, affectedToPathList } from 'proxy-compare';\nimport { subscribe, snapshot } from 'valtio/vanilla';\n\nconst useAffectedDebugValue = (state, affected) => {\n  const pathList = useRef(void 0);\n  useEffect(() => {\n    pathList.current = affectedToPathList(state, affected, true);\n  });\n  useDebugValue(pathList.current);\n};\nconst condUseAffectedDebugValue = useAffectedDebugValue;\nconst targetCache = /* @__PURE__ */ new WeakMap();\nfunction useSnapshot(proxyObject, options) {\n  const notifyInSync = options == null ? void 0 : options.sync;\n  const affected = useMemo(\n    () => proxyObject && /* @__PURE__ */ new WeakMap(),\n    [proxyObject]\n  );\n  const lastSnapshot = useRef(void 0);\n  let inRender = true;\n  const currSnapshot = useSyncExternalStore(\n    useCallback(\n      (callback) => {\n        const unsub = subscribe(proxyObject, callback, notifyInSync);\n        callback();\n        return unsub;\n      },\n      [proxyObject, notifyInSync]\n    ),\n    () => {\n      const nextSnapshot = snapshot(proxyObject);\n      try {\n        if (!inRender && lastSnapshot.current && !isChanged(\n          lastSnapshot.current,\n          nextSnapshot,\n          affected,\n          /* @__PURE__ */ new WeakMap()\n        )) {\n          return lastSnapshot.current;\n        }\n      } catch (e) {\n      }\n      return nextSnapshot;\n    },\n    () => snapshot(proxyObject)\n  );\n  inRender = false;\n  useLayoutEffect(() => {\n    lastSnapshot.current = currSnapshot;\n  });\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    condUseAffectedDebugValue(currSnapshot, affected);\n  }\n  const proxyCache = useMemo(() => /* @__PURE__ */ new WeakMap(), []);\n  return createProxy(currSnapshot, affected, proxyCache, targetCache);\n}\n\nexport { useSnapshot };\n"],"mappings":"AAAA,SAASA,OAAO,EAAEC,MAAM,EAAEC,oBAAoB,EAAEC,WAAW,EAAEC,eAAe,EAAEC,SAAS,EAAEC,aAAa,QAAQ,OAAO;AACrH,SAASC,SAAS,EAAEC,WAAW,EAAEC,kBAAkB,QAAQ,eAAe;AAC1E,SAASC,SAAS,EAAEC,QAAQ,QAAQ,gBAAgB;AAEpD,MAAMC,qBAAqB,GAAGA,CAACC,KAAK,EAAEC,QAAQ,KAAK;EACjD,MAAMC,QAAQ,GAAGd,MAAM,CAAC,KAAK,CAAC,CAAC;EAC/BI,SAAS,CAAC,MAAM;IACdU,QAAQ,CAACC,OAAO,GAAGP,kBAAkB,CAACI,KAAK,EAAEC,QAAQ,EAAE,IAAI,CAAC;EAC9D,CAAC,CAAC;EACFR,aAAa,CAACS,QAAQ,CAACC,OAAO,CAAC;AACjC,CAAC;AACD,MAAMC,yBAAyB,GAAGL,qBAAqB;AACvD,MAAMM,WAAW,GAAG,eAAgB,IAAIC,OAAO,CAAC,CAAC;AACjD,SAASC,WAAWA,CAACC,WAAW,EAAEC,OAAO,EAAE;EACzC,MAAMC,YAAY,GAAGD,OAAO,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACE,IAAI;EAC5D,MAAMV,QAAQ,GAAGd,OAAO,CACtB,MAAMqB,WAAW,IAAI,eAAgB,IAAIF,OAAO,CAAC,CAAC,EAClD,CAACE,WAAW,CACd,CAAC;EACD,MAAMI,YAAY,GAAGxB,MAAM,CAAC,KAAK,CAAC,CAAC;EACnC,IAAIyB,QAAQ,GAAG,IAAI;EACnB,MAAMC,YAAY,GAAGzB,oBAAoB,CACvCC,WAAW,CACRyB,QAAQ,IAAK;IACZ,MAAMC,KAAK,GAAGnB,SAAS,CAACW,WAAW,EAAEO,QAAQ,EAAEL,YAAY,CAAC;IAC5DK,QAAQ,CAAC,CAAC;IACV,OAAOC,KAAK;EACd,CAAC,EACD,CAACR,WAAW,EAAEE,YAAY,CAC5B,CAAC,EACD,MAAM;IACJ,MAAMO,YAAY,GAAGnB,QAAQ,CAACU,WAAW,CAAC;IAC1C,IAAI;MACF,IAAI,CAACK,QAAQ,IAAID,YAAY,CAACT,OAAO,IAAI,CAACT,SAAS,CACjDkB,YAAY,CAACT,OAAO,EACpBc,YAAY,EACZhB,QAAQ,EACR,eAAgB,IAAIK,OAAO,CAAC,CAC9B,CAAC,EAAE;QACD,OAAOM,YAAY,CAACT,OAAO;MAC7B;IACF,CAAC,CAAC,OAAOe,CAAC,EAAE,CACZ;IACA,OAAOD,YAAY;EACrB,CAAC,EACD,MAAMnB,QAAQ,CAACU,WAAW,CAC5B,CAAC;EACDK,QAAQ,GAAG,KAAK;EAChBtB,eAAe,CAAC,MAAM;IACpBqB,YAAY,CAACT,OAAO,GAAGW,YAAY;EACrC,CAAC,CAAC;EACF,IAAI,CAACK,MAAM,CAACC,IAAI,CAACC,GAAG,GAAGF,MAAM,CAACC,IAAI,CAACC,GAAG,CAACC,IAAI,GAAG,KAAK,CAAC,MAAM,YAAY,EAAE;IACtElB,yBAAyB,CAACU,YAAY,EAAEb,QAAQ,CAAC;EACnD;EACA,MAAMsB,UAAU,GAAGpC,OAAO,CAAC,MAAM,eAAgB,IAAImB,OAAO,CAAC,CAAC,EAAE,EAAE,CAAC;EACnE,OAAOX,WAAW,CAACmB,YAAY,EAAEb,QAAQ,EAAEsB,UAAU,EAAElB,WAAW,CAAC;AACrE;AAEA,SAASE,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}