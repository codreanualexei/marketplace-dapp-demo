{"ast":null,"code":"import _objectSpread from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _wrapRegExp from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/wrapRegExp.js\";\nconst _excluded = [\"scheme\", \"statement\"],\n  _excluded2 = [\"chainId\", \"expirationTime\", \"issuedAt\", \"notBefore\", \"requestId\"];\nimport * as Address from './Address.js';\nimport * as Errors from './Errors.js';\nimport { uid } from './internal/uid.js';\nexport const domainRegex = /^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}(:[0-9]{1,5})?$/;\nexport const ipRegex = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(:[0-9]{1,5})?$/;\nexport const localhostRegex = /^localhost(:[0-9]{1,5})?$/;\nexport const nonceRegex = /^[a-zA-Z0-9]{8,}$/;\nexport const schemeRegex = /^([a-zA-Z][a-zA-Z0-9+-.]*)$/;\n// https://regexr.com/80gdj\nexport const prefixRegex = /*#__PURE__*/_wrapRegExp(/^(?:([a-zA-Z][a-zA-Z0-9+-.]*):\\/\\/)?([a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\\n)(0x[a-fA-F0-9]{40})\\n\\n(?:(.*)\\n\\n)?/, {\n  scheme: 1,\n  domain: 2,\n  address: 3,\n  statement: 4\n});\n// https://regexr.com/80gf9\nexport const suffixRegex = /*#__PURE__*/_wrapRegExp(/(?:URI: (.+))\\n(?:Version: (.+))\\n(?:Chain ID: (\\d+))\\n(?:Nonce: ([a-zA-Z0-9]+))\\n(?:Issued At: (.+))(?:\\nExpiration Time: (.+))?(?:\\nNot Before: (.+))?(?:\\nRequest ID: (.+))?/, {\n  uri: 1,\n  version: 2,\n  chainId: 3,\n  nonce: 4,\n  issuedAt: 5,\n  expirationTime: 6,\n  notBefore: 7,\n  requestId: 8\n});\n/**\n * Creates [EIP-4361](https://eips.ethereum.org/EIPS/eip-4361) formatted message.\n *\n * @example\n * ```ts twoslash\n * import { Siwe } from 'ox'\n *\n * Siwe.createMessage({\n *   address: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n *   chainId: 1,\n *   domain: 'example.com',\n *   nonce: 'foobarbaz',\n *   uri: 'https://example.com/path',\n *   version: '1',\n * })\n * // @log: \"example.com wants you to sign in with your Ethereum account:\n * // @log: 0xA0Cf798816D4b9b9866b5330EEa46a18382f251e\n * // @log:\n * // @log:\n * // @log: URI: https://example.com/path\n * // @log: Version: 1\n * // @log: Chain ID: 1\n * // @log: Nonce: foobarbaz\n * // @log: Issued At: 2023-02-01T00:00:00.000Z\"\n * ```\n *\n * @param value - Values to use when creating EIP-4361 formatted message.\n * @returns EIP-4361 formatted message.\n */\nexport function createMessage(value) {\n  const {\n    chainId,\n    domain,\n    expirationTime,\n    issuedAt = new Date(),\n    nonce,\n    notBefore,\n    requestId,\n    resources,\n    scheme,\n    uri,\n    version\n  } = value;\n  // Validate fields\n  {\n    // Required fields\n    if (chainId !== Math.floor(chainId)) throw new InvalidMessageFieldError({\n      field: 'chainId',\n      metaMessages: ['- Chain ID must be a EIP-155 chain ID.', '- See https://eips.ethereum.org/EIPS/eip-155', '', \"Provided value: \".concat(chainId)]\n    });\n    if (!(domainRegex.test(domain) || ipRegex.test(domain) || localhostRegex.test(domain))) throw new InvalidMessageFieldError({\n      field: 'domain',\n      metaMessages: ['- Domain must be an RFC 3986 authority.', '- See https://www.rfc-editor.org/rfc/rfc3986', '', \"Provided value: \".concat(domain)]\n    });\n    if (!nonceRegex.test(nonce)) throw new InvalidMessageFieldError({\n      field: 'nonce',\n      metaMessages: ['- Nonce must be at least 8 characters.', '- Nonce must be alphanumeric.', '', \"Provided value: \".concat(nonce)]\n    });\n    if (!isUri(uri)) throw new InvalidMessageFieldError({\n      field: 'uri',\n      metaMessages: ['- URI must be a RFC 3986 URI referring to the resource that is the subject of the signing.', '- See https://www.rfc-editor.org/rfc/rfc3986', '', \"Provided value: \".concat(uri)]\n    });\n    if (version !== '1') throw new InvalidMessageFieldError({\n      field: 'version',\n      metaMessages: [\"- Version must be '1'.\", '', \"Provided value: \".concat(version)]\n    });\n    // Optional fields\n    if (scheme && !schemeRegex.test(scheme)) throw new InvalidMessageFieldError({\n      field: 'scheme',\n      metaMessages: ['- Scheme must be an RFC 3986 URI scheme.', '- See https://www.rfc-editor.org/rfc/rfc3986#section-3.1', '', \"Provided value: \".concat(scheme)]\n    });\n    const statement = value.statement;\n    if (statement !== null && statement !== void 0 && statement.includes('\\n')) throw new InvalidMessageFieldError({\n      field: 'statement',\n      metaMessages: [\"- Statement must not include '\\\\n'.\", '', \"Provided value: \".concat(statement)]\n    });\n  }\n  // Construct message\n  const address = Address.from(value.address, {\n    checksum: true\n  });\n  const origin = (() => {\n    if (scheme) return \"\".concat(scheme, \"://\").concat(domain);\n    return domain;\n  })();\n  const statement = (() => {\n    if (!value.statement) return '';\n    return \"\".concat(value.statement, \"\\n\");\n  })();\n  const prefix = \"\".concat(origin, \" wants you to sign in with your Ethereum account:\\n\").concat(address, \"\\n\\n\").concat(statement);\n  let suffix = \"URI: \".concat(uri, \"\\nVersion: \").concat(version, \"\\nChain ID: \").concat(chainId, \"\\nNonce: \").concat(nonce, \"\\nIssued At: \").concat(issuedAt.toISOString());\n  if (expirationTime) suffix += \"\\nExpiration Time: \".concat(expirationTime.toISOString());\n  if (notBefore) suffix += \"\\nNot Before: \".concat(notBefore.toISOString());\n  if (requestId) suffix += \"\\nRequest ID: \".concat(requestId);\n  if (resources) {\n    let content = '\\nResources:';\n    for (const resource of resources) {\n      if (!isUri(resource)) throw new InvalidMessageFieldError({\n        field: 'resources',\n        metaMessages: ['- Every resource must be a RFC 3986 URI.', '- See https://www.rfc-editor.org/rfc/rfc3986', '', \"Provided value: \".concat(resource)]\n      });\n      content += \"\\n- \".concat(resource);\n    }\n    suffix += content;\n  }\n  return \"\".concat(prefix, \"\\n\").concat(suffix);\n}\n/**\n * Generates random [EIP-4361](https://eips.ethereum.org/EIPS/eip-4361) nonce.\n *\n * @example\n * ```ts twoslash\n * import { Siwe } from 'ox'\n *\n * Siwe.generateNonce()\n * // @log: '65ed4681d4efe0270b923ff5f4b097b1c95974dc33aeebecd5724c42fd86dfd25dc70b27ef836b2aa22e68f19ebcccc1'\n * ```\n *\n * @returns Random nonce.\n */\nexport function generateNonce() {\n  return uid(96);\n}\n/**\n * Check if the given URI is a valid [RFC 3986](https://www.rfc-editor.org/rfc/rfc3986) URI.\n *\n * @example\n * ```ts twoslash\n * import { Siwe } from 'ox'\n *\n * Siwe.isUri('https://example.com/foo')\n * // @log: true\n * ```\n *\n * @param value - Value to check.\n * @returns `false` if invalid, otherwise the valid URI.\n */\n// based on https://github.com/ogt/valid-url\nexport function isUri(value) {\n  // check for illegal characters\n  if (/[^a-z0-9:/?#[\\]@!$&'()*+,;=.\\-_~%]/i.test(value)) return false;\n  // check for hex escapes that aren't complete\n  if (/%[^0-9a-f]/i.test(value)) return false;\n  if (/%[0-9a-f](:?[^0-9a-f]|$)/i.test(value)) return false;\n  // from RFC 3986\n  const splitted = splitUri(value);\n  const scheme = splitted[1];\n  const authority = splitted[2];\n  const path = splitted[3];\n  const query = splitted[4];\n  const fragment = splitted[5];\n  // scheme and path are required, though the path can be empty\n  if (!(scheme !== null && scheme !== void 0 && scheme.length && path && path.length >= 0)) return false;\n  // if authority is present, the path must be empty or begin with a /\n  if (authority !== null && authority !== void 0 && authority.length) {\n    if (!(path.length === 0 || /^\\//.test(path))) return false;\n  } else {\n    // if authority is not present, the path must not start with //\n    if (/^\\/\\//.test(path)) return false;\n  }\n  // scheme must begin with a letter, then consist of letters, digits, +, ., or -\n  if (!/^[a-z][a-z0-9+\\-.]*$/.test(scheme.toLowerCase())) return false;\n  let out = '';\n  // re-assemble the URL per section 5.3 in RFC 3986\n  out += \"\".concat(scheme, \":\");\n  if (authority !== null && authority !== void 0 && authority.length) out += \"//\".concat(authority);\n  out += path;\n  if (query !== null && query !== void 0 && query.length) out += \"?\".concat(query);\n  if (fragment !== null && fragment !== void 0 && fragment.length) out += \"#\".concat(fragment);\n  return out;\n}\nfunction splitUri(value) {\n  return value.match(/(?:([^:/?#]+):)?(?:\\/\\/([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?/);\n}\n/**\n * [EIP-4361](https://eips.ethereum.org/EIPS/eip-4361) formatted message into message fields object.\n *\n * @example\n * ```ts twoslash\n * import { Siwe } from 'ox'\n *\n * Siwe.parseMessage(`example.com wants you to sign in with your Ethereum account:\n * 0xA0Cf798816D4b9b9866b5330EEa46a18382f251e\n *\n * I accept the ExampleOrg Terms of Service: https://example.com/tos\n *\n * URI: https://example.com/path\n * Version: 1\n * Chain ID: 1\n * Nonce: foobarbaz\n * Issued At: 2023-02-01T00:00:00.000Z`)\n * // @log: {\n * // @log:   address: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n * // @log:   chainId: 1,\n * // @log:   domain: 'example.com',\n * // @log:   issuedAt: '2023-02-01T00:00:00.000Z',\n * // @log:   nonce: 'foobarbaz',\n * // @log:   statement: 'I accept the ExampleOrg Terms of Service: https://example.com/tos',\n * // @log:   uri: 'https://example.com/path',\n * // @log:   version: '1',\n * // @log: }\n * ```\n *\n * @param message - [EIP-4361](https://eips.ethereum.org/EIPS/eip-4361) formatted message.\n * @returns Message fields object.\n */\nexport function parseMessage(message) {\n  var _message$match$groups, _message$match, _message$match$groups2, _message$match2, _message$split$;\n  const _ref = (_message$match$groups = (_message$match = message.match(prefixRegex)) === null || _message$match === void 0 ? void 0 : _message$match.groups) !== null && _message$match$groups !== void 0 ? _message$match$groups : {},\n    {\n      scheme,\n      statement\n    } = _ref,\n    prefix = _objectWithoutProperties(_ref, _excluded);\n  const _ref2 = (_message$match$groups2 = (_message$match2 = message.match(suffixRegex)) === null || _message$match2 === void 0 ? void 0 : _message$match2.groups) !== null && _message$match$groups2 !== void 0 ? _message$match$groups2 : {},\n    {\n      chainId,\n      expirationTime,\n      issuedAt,\n      notBefore,\n      requestId\n    } = _ref2,\n    suffix = _objectWithoutProperties(_ref2, _excluded2);\n  const resources = (_message$split$ = message.split('Resources:')[1]) === null || _message$split$ === void 0 ? void 0 : _message$split$.split('\\n- ').slice(1);\n  return _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, prefix), suffix), chainId ? {\n    chainId: Number(chainId)\n  } : {}), expirationTime ? {\n    expirationTime: new Date(expirationTime)\n  } : {}), issuedAt ? {\n    issuedAt: new Date(issuedAt)\n  } : {}), notBefore ? {\n    notBefore: new Date(notBefore)\n  } : {}), requestId ? {\n    requestId\n  } : {}), resources ? {\n    resources\n  } : {}), scheme ? {\n    scheme\n  } : {}), statement ? {\n    statement\n  } : {});\n}\n/**\n * Validates [EIP-4361](https://eips.ethereum.org/EIPS/eip-4361) message.\n *\n * @example\n * ```ts twoslash\n * import { Siwe } from 'ox'\n *\n * Siwe.validateMessage({\n *   address: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n *   domain: 'example.com',\n *   message: {\n *     address: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n *     chainId: 1,\n *     domain: 'example.com',\n *     nonce: 'foobarbaz',\n *     uri: 'https://example.com/path',\n *     version: '1',\n *   },\n *   nonce: 'foobarbaz',\n * })\n * // @log: true\n * ```\n *\n * @param value - Values to use when validating EIP-4361 formatted message.\n * @returns Whether the message is valid.\n */\nexport function validateMessage(value) {\n  const {\n    address,\n    domain,\n    message,\n    nonce,\n    scheme,\n    time = new Date()\n  } = value;\n  if (domain && message.domain !== domain) return false;\n  if (nonce && message.nonce !== nonce) return false;\n  if (scheme && message.scheme !== scheme) return false;\n  if (message.expirationTime && time >= message.expirationTime) return false;\n  if (message.notBefore && time < message.notBefore) return false;\n  try {\n    if (!message.address) return false;\n    if (address && !Address.isEqual(message.address, address)) return false;\n  } catch (_unused) {\n    return false;\n  }\n  return true;\n}\n/**\n * Thrown when a field in a SIWE Message is invalid.\n *\n * @example\n * ```ts twoslash\n * import { Siwe } from 'ox'\n *\n * Siwe.createMessage({\n *   address: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n *   chainId: 1.1,\n *   domain: 'example.com',\n *   nonce: 'foobarbaz',\n *   uri: 'https://example.com/path',\n *   version: '1',\n * })\n * // @error: Siwe.InvalidMessageFieldError: Invalid Sign-In with Ethereum message field \"chainId\".\n * // @error: - Chain ID must be a EIP-155 chain ID.\n * // @error: - See https://eips.ethereum.org/EIPS/eip-155\n * // @error: Provided value: 1.1\n * ```\n */\nexport class InvalidMessageFieldError extends Errors.BaseError {\n  constructor(parameters) {\n    const {\n      field,\n      metaMessages\n    } = parameters;\n    super(\"Invalid Sign-In with Ethereum message field \\\"\".concat(field, \"\\\".\"), {\n      metaMessages\n    });\n    Object.defineProperty(this, \"name\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 'Siwe.InvalidMessageFieldError'\n    });\n  }\n}","map":{"version":3,"names":["Address","Errors","uid","domainRegex","ipRegex","localhostRegex","nonceRegex","schemeRegex","prefixRegex","_wrapRegExp","scheme","domain","address","statement","suffixRegex","uri","version","chainId","nonce","issuedAt","expirationTime","notBefore","requestId","createMessage","value","Date","resources","Math","floor","InvalidMessageFieldError","field","metaMessages","concat","test","isUri","includes","from","checksum","origin","prefix","suffix","toISOString","content","resource","generateNonce","splitted","splitUri","authority","path","query","fragment","length","toLowerCase","out","match","parseMessage","message","_message$match$groups","_message$match","_message$match$groups2","_message$match2","_message$split$","_ref","groups","_objectWithoutProperties","_excluded","_ref2","_excluded2","split","slice","_objectSpread","Number","validateMessage","time","isEqual","_unused","BaseError","constructor","parameters","Object","defineProperty"],"sources":["/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/ox/core/Siwe.ts"],"sourcesContent":["import * as Address from './Address.js'\nimport * as Errors from './Errors.js'\nimport type { ExactPartial } from './internal/types.js'\nimport { uid } from './internal/uid.js'\n\nexport const domainRegex =\n  /^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}(:[0-9]{1,5})?$/\n\nexport const ipRegex =\n  /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(:[0-9]{1,5})?$/\n\nexport const localhostRegex = /^localhost(:[0-9]{1,5})?$/\n\nexport const nonceRegex = /^[a-zA-Z0-9]{8,}$/\n\nexport const schemeRegex = /^([a-zA-Z][a-zA-Z0-9+-.]*)$/\n\n// https://regexr.com/80gdj\nexport const prefixRegex =\n  /^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\\/\\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\\n)(?<address>0x[a-fA-F0-9]{40})\\n\\n(?:(?<statement>.*)\\n\\n)?/\n\n// https://regexr.com/80gf9\nexport const suffixRegex =\n  /(?:URI: (?<uri>.+))\\n(?:Version: (?<version>.+))\\n(?:Chain ID: (?<chainId>\\d+))\\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\\n(?:Issued At: (?<issuedAt>.+))(?:\\nExpiration Time: (?<expirationTime>.+))?(?:\\nNot Before: (?<notBefore>.+))?(?:\\nRequest ID: (?<requestId>.+))?/\n\n/** [EIP-4361](https://eips.ethereum.org/EIPS/eip-4361) message fields. */\nexport type Message = {\n  /**\n   * The Ethereum address performing the signing.\n   */\n  address: Address.Address\n  /**\n   * The [EIP-155](https://eips.ethereum.org/EIPS/eip-155) Chain ID to which the session is bound,\n   */\n  chainId: number\n  /**\n   * [RFC 3986](https://www.rfc-editor.org/rfc/rfc3986) authority that is requesting the signing.\n   */\n  domain: string\n  /**\n   * Time when the signed authentication message is no longer valid.\n   */\n  expirationTime?: Date | undefined\n  /**\n   * Time when the message was generated, typically the current time.\n   */\n  issuedAt?: Date | undefined\n  /**\n   * A random string typically chosen by the relying party and used to prevent replay attacks.\n   */\n  nonce: string\n  /**\n   * Time when the signed authentication message will become valid.\n   */\n  notBefore?: Date | undefined\n  /**\n   * A system-specific identifier that may be used to uniquely refer to the sign-in request.\n   */\n  requestId?: string | undefined\n  /**\n   * A list of information or references to information the user wishes to have resolved as part of authentication by the relying party.\n   */\n  resources?: string[] | undefined\n  /**\n   * [RFC 3986](https://www.rfc-editor.org/rfc/rfc3986#section-3.1) URI scheme of the origin of the request.\n   */\n  scheme?: string | undefined\n  /**\n   * A human-readable ASCII assertion that the user will sign.\n   */\n  statement?: string | undefined\n  /**\n   * [RFC 3986](https://www.rfc-editor.org/rfc/rfc3986) URI referring to the resource that is the subject of the signing (as in the subject of a claim).\n   */\n  uri: string\n  /**\n   * The current version of the SIWE Message.\n   */\n  version: '1'\n}\n\n/**\n * Creates [EIP-4361](https://eips.ethereum.org/EIPS/eip-4361) formatted message.\n *\n * @example\n * ```ts twoslash\n * import { Siwe } from 'ox'\n *\n * Siwe.createMessage({\n *   address: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n *   chainId: 1,\n *   domain: 'example.com',\n *   nonce: 'foobarbaz',\n *   uri: 'https://example.com/path',\n *   version: '1',\n * })\n * // @log: \"example.com wants you to sign in with your Ethereum account:\n * // @log: 0xA0Cf798816D4b9b9866b5330EEa46a18382f251e\n * // @log:\n * // @log:\n * // @log: URI: https://example.com/path\n * // @log: Version: 1\n * // @log: Chain ID: 1\n * // @log: Nonce: foobarbaz\n * // @log: Issued At: 2023-02-01T00:00:00.000Z\"\n * ```\n *\n * @param value - Values to use when creating EIP-4361 formatted message.\n * @returns EIP-4361 formatted message.\n */\nexport function createMessage(value: Message): string {\n  const {\n    chainId,\n    domain,\n    expirationTime,\n    issuedAt = new Date(),\n    nonce,\n    notBefore,\n    requestId,\n    resources,\n    scheme,\n    uri,\n    version,\n  } = value\n\n  // Validate fields\n  {\n    // Required fields\n    if (chainId !== Math.floor(chainId))\n      throw new InvalidMessageFieldError({\n        field: 'chainId',\n        metaMessages: [\n          '- Chain ID must be a EIP-155 chain ID.',\n          '- See https://eips.ethereum.org/EIPS/eip-155',\n          '',\n          `Provided value: ${chainId}`,\n        ],\n      })\n    if (\n      !(\n        domainRegex.test(domain) ||\n        ipRegex.test(domain) ||\n        localhostRegex.test(domain)\n      )\n    )\n      throw new InvalidMessageFieldError({\n        field: 'domain',\n        metaMessages: [\n          '- Domain must be an RFC 3986 authority.',\n          '- See https://www.rfc-editor.org/rfc/rfc3986',\n          '',\n          `Provided value: ${domain}`,\n        ],\n      })\n    if (!nonceRegex.test(nonce))\n      throw new InvalidMessageFieldError({\n        field: 'nonce',\n        metaMessages: [\n          '- Nonce must be at least 8 characters.',\n          '- Nonce must be alphanumeric.',\n          '',\n          `Provided value: ${nonce}`,\n        ],\n      })\n    if (!isUri(uri))\n      throw new InvalidMessageFieldError({\n        field: 'uri',\n        metaMessages: [\n          '- URI must be a RFC 3986 URI referring to the resource that is the subject of the signing.',\n          '- See https://www.rfc-editor.org/rfc/rfc3986',\n          '',\n          `Provided value: ${uri}`,\n        ],\n      })\n    if (version !== '1')\n      throw new InvalidMessageFieldError({\n        field: 'version',\n        metaMessages: [\n          \"- Version must be '1'.\",\n          '',\n          `Provided value: ${version}`,\n        ],\n      })\n\n    // Optional fields\n    if (scheme && !schemeRegex.test(scheme))\n      throw new InvalidMessageFieldError({\n        field: 'scheme',\n        metaMessages: [\n          '- Scheme must be an RFC 3986 URI scheme.',\n          '- See https://www.rfc-editor.org/rfc/rfc3986#section-3.1',\n          '',\n          `Provided value: ${scheme}`,\n        ],\n      })\n    const statement = value.statement\n    if (statement?.includes('\\n'))\n      throw new InvalidMessageFieldError({\n        field: 'statement',\n        metaMessages: [\n          \"- Statement must not include '\\\\n'.\",\n          '',\n          `Provided value: ${statement}`,\n        ],\n      })\n  }\n\n  // Construct message\n  const address = Address.from(value.address, { checksum: true })\n  const origin = (() => {\n    if (scheme) return `${scheme}://${domain}`\n    return domain\n  })()\n  const statement = (() => {\n    if (!value.statement) return ''\n    return `${value.statement}\\n`\n  })()\n  const prefix = `${origin} wants you to sign in with your Ethereum account:\\n${address}\\n\\n${statement}`\n\n  let suffix = `URI: ${uri}\\nVersion: ${version}\\nChain ID: ${chainId}\\nNonce: ${nonce}\\nIssued At: ${issuedAt.toISOString()}`\n\n  if (expirationTime)\n    suffix += `\\nExpiration Time: ${expirationTime.toISOString()}`\n  if (notBefore) suffix += `\\nNot Before: ${notBefore.toISOString()}`\n  if (requestId) suffix += `\\nRequest ID: ${requestId}`\n  if (resources) {\n    let content = '\\nResources:'\n    for (const resource of resources) {\n      if (!isUri(resource))\n        throw new InvalidMessageFieldError({\n          field: 'resources',\n          metaMessages: [\n            '- Every resource must be a RFC 3986 URI.',\n            '- See https://www.rfc-editor.org/rfc/rfc3986',\n            '',\n            `Provided value: ${resource}`,\n          ],\n        })\n      content += `\\n- ${resource}`\n    }\n    suffix += content\n  }\n\n  return `${prefix}\\n${suffix}`\n}\n\nexport declare namespace createMessage {\n  type ErrorType =\n    | Address.from.ErrorType\n    | InvalidMessageFieldError\n    | Errors.GlobalErrorType\n}\n\n/**\n * Generates random [EIP-4361](https://eips.ethereum.org/EIPS/eip-4361) nonce.\n *\n * @example\n * ```ts twoslash\n * import { Siwe } from 'ox'\n *\n * Siwe.generateNonce()\n * // @log: '65ed4681d4efe0270b923ff5f4b097b1c95974dc33aeebecd5724c42fd86dfd25dc70b27ef836b2aa22e68f19ebcccc1'\n * ```\n *\n * @returns Random nonce.\n */\nexport function generateNonce(): string {\n  return uid(96)\n}\n\n/**\n * Check if the given URI is a valid [RFC 3986](https://www.rfc-editor.org/rfc/rfc3986) URI.\n *\n * @example\n * ```ts twoslash\n * import { Siwe } from 'ox'\n *\n * Siwe.isUri('https://example.com/foo')\n * // @log: true\n * ```\n *\n * @param value - Value to check.\n * @returns `false` if invalid, otherwise the valid URI.\n */\n// based on https://github.com/ogt/valid-url\nexport function isUri(value: string): false | string {\n  // check for illegal characters\n  if (/[^a-z0-9:/?#[\\]@!$&'()*+,;=.\\-_~%]/i.test(value)) return false\n\n  // check for hex escapes that aren't complete\n  if (/%[^0-9a-f]/i.test(value)) return false\n  if (/%[0-9a-f](:?[^0-9a-f]|$)/i.test(value)) return false\n\n  // from RFC 3986\n  const splitted = splitUri(value)\n  const scheme = splitted[1]\n  const authority = splitted[2]\n  const path = splitted[3]\n  const query = splitted[4]\n  const fragment = splitted[5]\n\n  // scheme and path are required, though the path can be empty\n  if (!(scheme?.length && path && path.length >= 0)) return false\n\n  // if authority is present, the path must be empty or begin with a /\n  if (authority?.length) {\n    if (!(path.length === 0 || /^\\//.test(path))) return false\n  } else {\n    // if authority is not present, the path must not start with //\n    if (/^\\/\\//.test(path)) return false\n  }\n\n  // scheme must begin with a letter, then consist of letters, digits, +, ., or -\n  if (!/^[a-z][a-z0-9+\\-.]*$/.test(scheme.toLowerCase())) return false\n\n  let out = ''\n  // re-assemble the URL per section 5.3 in RFC 3986\n  out += `${scheme}:`\n  if (authority?.length) out += `//${authority}`\n\n  out += path\n\n  if (query?.length) out += `?${query}`\n  if (fragment?.length) out += `#${fragment}`\n\n  return out\n}\n\nfunction splitUri(value: string) {\n  return value.match(\n    /(?:([^:/?#]+):)?(?:\\/\\/([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?/,\n  )!\n}\n\n/**\n * [EIP-4361](https://eips.ethereum.org/EIPS/eip-4361) formatted message into message fields object.\n *\n * @example\n * ```ts twoslash\n * import { Siwe } from 'ox'\n *\n * Siwe.parseMessage(`example.com wants you to sign in with your Ethereum account:\n * 0xA0Cf798816D4b9b9866b5330EEa46a18382f251e\n *\n * I accept the ExampleOrg Terms of Service: https://example.com/tos\n *\n * URI: https://example.com/path\n * Version: 1\n * Chain ID: 1\n * Nonce: foobarbaz\n * Issued At: 2023-02-01T00:00:00.000Z`)\n * // @log: {\n * // @log:   address: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n * // @log:   chainId: 1,\n * // @log:   domain: 'example.com',\n * // @log:   issuedAt: '2023-02-01T00:00:00.000Z',\n * // @log:   nonce: 'foobarbaz',\n * // @log:   statement: 'I accept the ExampleOrg Terms of Service: https://example.com/tos',\n * // @log:   uri: 'https://example.com/path',\n * // @log:   version: '1',\n * // @log: }\n * ```\n *\n * @param message - [EIP-4361](https://eips.ethereum.org/EIPS/eip-4361) formatted message.\n * @returns Message fields object.\n */\nexport function parseMessage(message: string): ExactPartial<Message> {\n  const { scheme, statement, ...prefix } = (message.match(prefixRegex)\n    ?.groups ?? {}) as {\n    address: Address.Address\n    domain: string\n    scheme?: string\n    statement?: string\n  }\n  const { chainId, expirationTime, issuedAt, notBefore, requestId, ...suffix } =\n    (message.match(suffixRegex)?.groups ?? {}) as {\n      chainId: string\n      expirationTime?: string\n      issuedAt?: string\n      nonce: string\n      notBefore?: string\n      requestId?: string\n      uri: string\n      version: '1'\n    }\n  const resources = message.split('Resources:')[1]?.split('\\n- ').slice(1)\n  return {\n    ...prefix,\n    ...suffix,\n    ...(chainId ? { chainId: Number(chainId) } : {}),\n    ...(expirationTime ? { expirationTime: new Date(expirationTime) } : {}),\n    ...(issuedAt ? { issuedAt: new Date(issuedAt) } : {}),\n    ...(notBefore ? { notBefore: new Date(notBefore) } : {}),\n    ...(requestId ? { requestId } : {}),\n    ...(resources ? { resources } : {}),\n    ...(scheme ? { scheme } : {}),\n    ...(statement ? { statement } : {}),\n  }\n}\n\n/**\n * Validates [EIP-4361](https://eips.ethereum.org/EIPS/eip-4361) message.\n *\n * @example\n * ```ts twoslash\n * import { Siwe } from 'ox'\n *\n * Siwe.validateMessage({\n *   address: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n *   domain: 'example.com',\n *   message: {\n *     address: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n *     chainId: 1,\n *     domain: 'example.com',\n *     nonce: 'foobarbaz',\n *     uri: 'https://example.com/path',\n *     version: '1',\n *   },\n *   nonce: 'foobarbaz',\n * })\n * // @log: true\n * ```\n *\n * @param value - Values to use when validating EIP-4361 formatted message.\n * @returns Whether the message is valid.\n */\nexport function validateMessage(value: validateMessage.Value): boolean {\n  const { address, domain, message, nonce, scheme, time = new Date() } = value\n\n  if (domain && message.domain !== domain) return false\n  if (nonce && message.nonce !== nonce) return false\n  if (scheme && message.scheme !== scheme) return false\n\n  if (message.expirationTime && time >= message.expirationTime) return false\n  if (message.notBefore && time < message.notBefore) return false\n\n  try {\n    if (!message.address) return false\n    if (address && !Address.isEqual(message.address, address)) return false\n  } catch {\n    return false\n  }\n\n  return true\n}\n\nexport declare namespace validateMessage {\n  interface Value {\n    /**\n     * Ethereum address to check against.\n     */\n    address?: Address.Address | undefined\n    /**\n     * [RFC 3986](https://www.rfc-editor.org/rfc/rfc3986) authority to check against.\n     */\n    domain?: string | undefined\n    /**\n     * EIP-4361 message fields.\n     */\n    message: ExactPartial<Message>\n    /**\n     * Random string to check against.\n     */\n    nonce?: string | undefined\n    /**\n     * [RFC 3986](https://www.rfc-editor.org/rfc/rfc3986#section-3.1) URI scheme to check against.\n     */\n    scheme?: string | undefined\n    /**\n     * Current time to check optional `expirationTime` and `notBefore` fields.\n     *\n     * @default new Date()\n     */\n    time?: Date | undefined\n  }\n}\n\n/**\n * Thrown when a field in a SIWE Message is invalid.\n *\n * @example\n * ```ts twoslash\n * import { Siwe } from 'ox'\n *\n * Siwe.createMessage({\n *   address: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n *   chainId: 1.1,\n *   domain: 'example.com',\n *   nonce: 'foobarbaz',\n *   uri: 'https://example.com/path',\n *   version: '1',\n * })\n * // @error: Siwe.InvalidMessageFieldError: Invalid Sign-In with Ethereum message field \"chainId\".\n * // @error: - Chain ID must be a EIP-155 chain ID.\n * // @error: - See https://eips.ethereum.org/EIPS/eip-155\n * // @error: Provided value: 1.1\n * ```\n */\nexport class InvalidMessageFieldError extends Errors.BaseError {\n  override readonly name = 'Siwe.InvalidMessageFieldError'\n\n  constructor(parameters: {\n    field: string\n    metaMessages?: string[] | undefined\n  }) {\n    const { field, metaMessages } = parameters\n    super(`Invalid Sign-In with Ethereum message field \"${field}\".`, {\n      metaMessages,\n    })\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}