{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";\nvar _templateObject, _templateObject2, _templateObject3;\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { LitElement, html } from 'lit';\nimport { property, state } from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport { ConstantsUtil as CommonConstantsUtil, ParseUtil } from '@reown/appkit-common';\nimport { ApiController, ChainController, ConnectorController, CoreHelperUtil, ModalController, ModalUtil, OptionsController, RouterController, SIWXUtil, SnackController, SwapController, ThemeController } from '@reown/appkit-controllers';\nimport { UiHelperUtil, customElement, initializeTheming, vars } from '@reown/appkit-ui';\nimport '@reown/appkit-ui/wui-card';\nimport '@reown/appkit-ui/wui-flex';\nimport '../../partials/w3m-alertbar/index.js';\nimport '../../partials/w3m-header/index.js';\nimport '../../partials/w3m-snackbar/index.js';\nimport '../../partials/w3m-tooltip/index.js';\nimport { HelpersUtil } from '../../utils/HelpersUtil.js';\nimport '../w3m-footer/index.js';\nimport '../w3m-router/index.js';\nimport styles from './styles.js';\nconst SCROLL_LOCK = 'scroll-lock';\nconst PADDING_OVERRIDES = {\n  PayWithExchange: '0',\n  PayWithExchangeSelectAsset: '0'\n};\nexport class W3mModalBase extends LitElement {\n  constructor() {\n    super();\n    this.unsubscribe = [];\n    this.abortController = undefined;\n    this.hasPrefetched = false;\n    this.enableEmbedded = OptionsController.state.enableEmbedded;\n    this.open = ModalController.state.open;\n    this.caipAddress = ChainController.state.activeCaipAddress;\n    this.caipNetwork = ChainController.state.activeCaipNetwork;\n    this.shake = ModalController.state.shake;\n    this.filterByNamespace = ConnectorController.state.filterByNamespace;\n    this.padding = vars.spacing[1];\n    this.mobileFullScreen = OptionsController.state.enableMobileFullScreen;\n    this.initializeTheming();\n    ApiController.prefetchAnalyticsConfig();\n    this.unsubscribe.push(...[ModalController.subscribeKey('open', val => val ? this.onOpen() : this.onClose()), ModalController.subscribeKey('shake', val => this.shake = val), ChainController.subscribeKey('activeCaipNetwork', val => this.onNewNetwork(val)), ChainController.subscribeKey('activeCaipAddress', val => this.onNewAddress(val)), OptionsController.subscribeKey('enableEmbedded', val => this.enableEmbedded = val), ConnectorController.subscribeKey('filterByNamespace', val => {\n      var _ChainController$getA;\n      if (this.filterByNamespace !== val && !((_ChainController$getA = ChainController.getAccountData(val)) !== null && _ChainController$getA !== void 0 && _ChainController$getA.caipAddress)) {\n        ApiController.fetchRecommendedWallets();\n        this.filterByNamespace = val;\n      }\n    }), RouterController.subscribeKey('view', () => {\n      var _PADDING_OVERRIDES$Ro;\n      this.dataset['border'] = HelpersUtil.hasFooter() ? 'true' : 'false';\n      this.padding = (_PADDING_OVERRIDES$Ro = PADDING_OVERRIDES[RouterController.state.view]) !== null && _PADDING_OVERRIDES$Ro !== void 0 ? _PADDING_OVERRIDES$Ro : vars.spacing[1];\n    })]);\n  }\n  firstUpdated() {\n    this.dataset['border'] = HelpersUtil.hasFooter() ? 'true' : 'false';\n    if (this.mobileFullScreen) {\n      this.setAttribute('data-mobile-fullscreen', 'true');\n    }\n    if (this.caipAddress) {\n      if (this.enableEmbedded) {\n        ModalController.close();\n        this.prefetch();\n        return;\n      }\n      this.onNewAddress(this.caipAddress);\n    }\n    if (this.open) {\n      this.onOpen();\n    }\n    if (this.enableEmbedded) {\n      this.prefetch();\n    }\n  }\n  disconnectedCallback() {\n    this.unsubscribe.forEach(unsubscribe => unsubscribe());\n    this.onRemoveKeyboardListener();\n  }\n  render() {\n    this.style.setProperty('--local-modal-padding', this.padding);\n    if (this.enableEmbedded) {\n      return html(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\", \"\\n        <w3m-tooltip></w3m-tooltip> \"])), this.contentTemplate());\n    }\n    return this.open ? html(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n          <wui-flex @click=\", \" data-testid=\\\"w3m-modal-overlay\\\">\\n            \", \"\\n          </wui-flex>\\n          <w3m-tooltip></w3m-tooltip>\\n        \"])), this.onOverlayClick.bind(this), this.contentTemplate()) : null;\n  }\n  contentTemplate() {\n    return html(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\" <wui-card\\n      shake=\\\"\", \"\\\"\\n      data-embedded=\\\"\", \"\\\"\\n      role=\\\"alertdialog\\\"\\n      aria-modal=\\\"true\\\"\\n      tabindex=\\\"0\\\"\\n      data-testid=\\\"w3m-modal-card\\\"\\n    >\\n      <w3m-header></w3m-header>\\n      <w3m-router></w3m-router>\\n      <w3m-footer></w3m-footer>\\n      <w3m-snackbar></w3m-snackbar>\\n      <w3m-alertbar></w3m-alertbar>\\n    </wui-card>\"])), this.shake, ifDefined(this.enableEmbedded));\n  }\n  async onOverlayClick(event) {\n    if (event.target === event.currentTarget) {\n      if (this.mobileFullScreen) {\n        return;\n      }\n      await this.handleClose();\n    }\n  }\n  async handleClose() {\n    await ModalUtil.safeClose();\n  }\n  initializeTheming() {\n    const {\n      themeVariables,\n      themeMode\n    } = ThemeController.state;\n    const defaultThemeMode = UiHelperUtil.getColorTheme(themeMode);\n    initializeTheming(themeVariables, defaultThemeMode);\n  }\n  onClose() {\n    this.open = false;\n    this.classList.remove('open');\n    this.onScrollUnlock();\n    SnackController.hide();\n    this.onRemoveKeyboardListener();\n  }\n  onOpen() {\n    this.open = true;\n    this.classList.add('open');\n    this.onScrollLock();\n    this.onAddKeyboardListener();\n  }\n  onScrollLock() {\n    const styleTag = document.createElement('style');\n    styleTag.dataset['w3m'] = SCROLL_LOCK;\n    styleTag.textContent = \"\\n      body {\\n        touch-action: none;\\n        overflow: hidden;\\n        overscroll-behavior: contain;\\n      }\\n      w3m-modal {\\n        pointer-events: auto;\\n      }\\n    \";\n    document.head.appendChild(styleTag);\n  }\n  onScrollUnlock() {\n    const styleTag = document.head.querySelector(\"style[data-w3m=\\\"\".concat(SCROLL_LOCK, \"\\\"]\"));\n    if (styleTag) {\n      styleTag.remove();\n    }\n  }\n  onAddKeyboardListener() {\n    var _this$shadowRoot;\n    this.abortController = new AbortController();\n    const card = (_this$shadowRoot = this.shadowRoot) === null || _this$shadowRoot === void 0 ? void 0 : _this$shadowRoot.querySelector('wui-card');\n    card === null || card === void 0 || card.focus();\n    window.addEventListener('keydown', event => {\n      if (event.key === 'Escape') {\n        this.handleClose();\n      } else if (event.key === 'Tab') {\n        const {\n          tagName\n        } = event.target;\n        if (tagName && !tagName.includes('W3M-') && !tagName.includes('WUI-')) {\n          card === null || card === void 0 || card.focus();\n        }\n      }\n    }, this.abortController);\n  }\n  onRemoveKeyboardListener() {\n    var _this$abortController;\n    (_this$abortController = this.abortController) === null || _this$abortController === void 0 || _this$abortController.abort();\n    this.abortController = undefined;\n  }\n  async onNewAddress(caipAddress) {\n    const isSwitchingNamespace = ChainController.state.isSwitchingNamespace;\n    const isInProfileView = RouterController.state.view === 'ProfileWallets';\n    if (caipAddress) {\n      await this.onConnected({\n        caipAddress,\n        isSwitchingNamespace,\n        isInProfileView\n      });\n    } else if (!isSwitchingNamespace && !this.enableEmbedded && !isInProfileView) {\n      ModalController.close();\n    }\n    await SIWXUtil.initializeIfEnabled(caipAddress);\n    this.caipAddress = caipAddress;\n    ChainController.setIsSwitchingNamespace(false);\n  }\n  async onConnected(args) {\n    if (args.isInProfileView) {\n      return;\n    }\n    const {\n      chainNamespace,\n      chainId,\n      address: newAddress\n    } = ParseUtil.parseCaipAddress(args.caipAddress);\n    const caipNetworkId = \"\".concat(chainNamespace, \":\").concat(chainId);\n    const wasPreviouslyDisconnected = !CoreHelperUtil.getPlainAddress(this.caipAddress);\n    const sessions = await SIWXUtil.getSessions({\n      address: newAddress,\n      caipNetworkId\n    });\n    const isAuthenticated = SIWXUtil.getSIWX() ? sessions.some(s => s.data.accountAddress === newAddress) : true;\n    const shouldGoBack = args.isSwitchingNamespace && isAuthenticated && !this.enableEmbedded;\n    const shouldCloseEmbeddedModal = this.enableEmbedded && wasPreviouslyDisconnected;\n    if (shouldGoBack) {\n      RouterController.goBack();\n    } else if (shouldCloseEmbeddedModal) {\n      ModalController.close();\n    }\n  }\n  onNewNetwork(nextCaipNetwork) {\n    var _prevCaipNetwork$caip, _nextCaipNetwork$caip, _ChainController$getA2;\n    const prevCaipNetwork = this.caipNetwork;\n    const prevCaipNetworkId = prevCaipNetwork === null || prevCaipNetwork === void 0 || (_prevCaipNetwork$caip = prevCaipNetwork.caipNetworkId) === null || _prevCaipNetwork$caip === void 0 ? void 0 : _prevCaipNetwork$caip.toString();\n    const prevChainNamespace = prevCaipNetwork === null || prevCaipNetwork === void 0 ? void 0 : prevCaipNetwork.chainNamespace;\n    const nextNetworkId = nextCaipNetwork === null || nextCaipNetwork === void 0 || (_nextCaipNetwork$caip = nextCaipNetwork.caipNetworkId) === null || _nextCaipNetwork$caip === void 0 ? void 0 : _nextCaipNetwork$caip.toString();\n    const nextChainNamespace = nextCaipNetwork === null || nextCaipNetwork === void 0 ? void 0 : nextCaipNetwork.chainNamespace;\n    const networkIdChanged = prevCaipNetworkId !== nextNetworkId;\n    const namespaceChanged = prevChainNamespace !== nextChainNamespace;\n    const isNetworkChangedInSameNamespace = networkIdChanged && !namespaceChanged;\n    const wasUnsupportedNetwork = (prevCaipNetwork === null || prevCaipNetwork === void 0 ? void 0 : prevCaipNetwork.name) === CommonConstantsUtil.UNSUPPORTED_NETWORK_NAME;\n    const isConnectingExternal = RouterController.state.view === 'ConnectingExternal';\n    const isInProfileWalletsView = RouterController.state.view === 'ProfileWallets';\n    const isNotConnected = !((_ChainController$getA2 = ChainController.getAccountData(nextCaipNetwork === null || nextCaipNetwork === void 0 ? void 0 : nextCaipNetwork.chainNamespace)) !== null && _ChainController$getA2 !== void 0 && _ChainController$getA2.caipAddress);\n    const isUnsupportedNetworkScreen = RouterController.state.view === 'UnsupportedChain';\n    const isModalOpen = ModalController.state.open;\n    let shouldGoBack = false;\n    if (this.enableEmbedded && RouterController.state.view === 'SwitchNetwork') {\n      shouldGoBack = true;\n    }\n    if (networkIdChanged) {\n      SwapController.resetState();\n    }\n    if (isModalOpen && !isConnectingExternal && !isInProfileWalletsView) {\n      if (isNotConnected) {\n        if (networkIdChanged) {\n          shouldGoBack = true;\n        }\n      } else if (isUnsupportedNetworkScreen) {\n        shouldGoBack = true;\n      } else if (isNetworkChangedInSameNamespace && !wasUnsupportedNetwork) {\n        shouldGoBack = true;\n      }\n    }\n    if (shouldGoBack && RouterController.state.view !== 'SIWXSignMessage') {\n      RouterController.goBack();\n    }\n    this.caipNetwork = nextCaipNetwork;\n  }\n  prefetch() {\n    if (!this.hasPrefetched) {\n      ApiController.prefetch();\n      ApiController.fetchWalletsByPage({\n        page: 1\n      });\n      this.hasPrefetched = true;\n    }\n  }\n}\nW3mModalBase.styles = styles;\n__decorate([property({\n  type: Boolean\n})], W3mModalBase.prototype, \"enableEmbedded\", void 0);\n__decorate([state()], W3mModalBase.prototype, \"open\", void 0);\n__decorate([state()], W3mModalBase.prototype, \"caipAddress\", void 0);\n__decorate([state()], W3mModalBase.prototype, \"caipNetwork\", void 0);\n__decorate([state()], W3mModalBase.prototype, \"shake\", void 0);\n__decorate([state()], W3mModalBase.prototype, \"filterByNamespace\", void 0);\n__decorate([state()], W3mModalBase.prototype, \"padding\", void 0);\n__decorate([state()], W3mModalBase.prototype, \"mobileFullScreen\", void 0);\nlet W3mModal = class W3mModal extends W3mModalBase {};\nW3mModal = __decorate([customElement('w3m-modal')], W3mModal);\nexport { W3mModal };\nlet AppKitModal = class AppKitModal extends W3mModalBase {};\nAppKitModal = __decorate([customElement('appkit-modal')], AppKitModal);\nexport { AppKitModal };","map":{"version":3,"names":["LitElement","html","property","state","ifDefined","ConstantsUtil","CommonConstantsUtil","ParseUtil","ApiController","ChainController","ConnectorController","CoreHelperUtil","ModalController","ModalUtil","OptionsController","RouterController","SIWXUtil","SnackController","SwapController","ThemeController","UiHelperUtil","customElement","initializeTheming","vars","HelpersUtil","styles","SCROLL_LOCK","PADDING_OVERRIDES","PayWithExchange","PayWithExchangeSelectAsset","W3mModalBase","constructor","unsubscribe","abortController","undefined","hasPrefetched","enableEmbedded","open","caipAddress","activeCaipAddress","caipNetwork","activeCaipNetwork","shake","filterByNamespace","padding","spacing","mobileFullScreen","enableMobileFullScreen","prefetchAnalyticsConfig","push","subscribeKey","val","onOpen","onClose","onNewNetwork","onNewAddress","_ChainController$getA","getAccountData","fetchRecommendedWallets","_PADDING_OVERRIDES$Ro","dataset","hasFooter","view","firstUpdated","setAttribute","close","prefetch","disconnectedCallback","forEach","onRemoveKeyboardListener","render","style","setProperty","_templateObject","_taggedTemplateLiteral","contentTemplate","_templateObject2","onOverlayClick","bind","_templateObject3","event","target","currentTarget","handleClose","safeClose","themeVariables","themeMode","defaultThemeMode","getColorTheme","classList","remove","onScrollUnlock","hide","add","onScrollLock","onAddKeyboardListener","styleTag","document","createElement","textContent","head","appendChild","querySelector","concat","_this$shadowRoot","AbortController","card","shadowRoot","focus","window","addEventListener","key","tagName","includes","_this$abortController","abort","isSwitchingNamespace","isInProfileView","onConnected","initializeIfEnabled","setIsSwitchingNamespace","args","chainNamespace","chainId","address","newAddress","parseCaipAddress","caipNetworkId","wasPreviouslyDisconnected","getPlainAddress","sessions","getSessions","isAuthenticated","getSIWX","some","s","data","accountAddress","shouldGoBack","shouldCloseEmbeddedModal","goBack","nextCaipNetwork","_prevCaipNetwork$caip","_nextCaipNetwork$caip","_ChainController$getA2","prevCaipNetwork","prevCaipNetworkId","toString","prevChainNamespace","nextNetworkId","nextChainNamespace","networkIdChanged","namespaceChanged","isNetworkChangedInSameNamespace","wasUnsupportedNetwork","name","UNSUPPORTED_NETWORK_NAME","isConnectingExternal","isInProfileWalletsView","isNotConnected","isUnsupportedNetworkScreen","isModalOpen","resetState","fetchWalletsByPage","page","__decorate","type","Boolean","W3mModal","AppKitModal"],"sources":["../../../../../src/modal/w3m-modal/index.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}