{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { LitElement, html } from 'lit';\nimport { property, state } from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport { OptionsController } from '@reown/appkit-controllers';\nimport { UiHelperUtil, customElement } from '@reown/appkit-ui';\nimport styles from './styles.js';\nconst HEADER_HEIGHT = 60;\nlet W3mRouterContainer = class W3mRouterContainer extends LitElement {\n  constructor() {\n    super(...arguments);\n    this.resizeObserver = undefined;\n    this.transitionDuration = '0.15s';\n    this.transitionFunction = '';\n    this.history = '';\n    this.view = '';\n    this.setView = undefined;\n    this.viewDirection = '';\n    this.historyState = '';\n    this.previousHeight = '0px';\n    this.mobileFullScreen = OptionsController.state.enableMobileFullScreen;\n    this.onViewportResize = () => {\n      this.updateContainerHeight();\n    };\n  }\n  updated(changedProps) {\n    if (changedProps.has('history')) {\n      const newHistory = this.history;\n      if (this.historyState !== '' && this.historyState !== newHistory) {\n        this.onViewChange(newHistory);\n      }\n    }\n    if (changedProps.has('transitionDuration')) {\n      this.style.setProperty('--local-duration', this.transitionDuration);\n    }\n    if (changedProps.has('transitionFunction')) {\n      this.style.setProperty('--local-transition', this.transitionFunction);\n    }\n  }\n  firstUpdated() {\n    if (this.transitionFunction) {\n      this.style.setProperty('--local-transition', this.transitionFunction);\n    }\n    this.style.setProperty('--local-duration', this.transitionDuration);\n    this.historyState = this.history;\n    this.resizeObserver = new ResizeObserver(entries => {\n      for (const entry of entries) {\n        if (entry.target === this.getWrapper()) {\n          let newHeight = entry.contentRect.height;\n          const footerHeight = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--apkt-footer-height') || '0');\n          if (this.mobileFullScreen) {\n            const viewportHeight = window.visualViewport?.height || window.innerHeight;\n            const headerHeight = this.getHeaderHeight();\n            newHeight = viewportHeight - headerHeight - footerHeight;\n            this.style.setProperty('--local-border-bottom-radius', '0px');\n          } else {\n            const totalHeight = newHeight + footerHeight;\n            newHeight = totalHeight;\n            this.style.setProperty('--local-border-bottom-radius', footerHeight ? 'var(--apkt-borderRadius-5)' : '0px');\n          }\n          this.style.setProperty('--local-container-height', `${newHeight}px`);\n          if (this.previousHeight !== '0px') {\n            this.style.setProperty('--local-duration-height', this.transitionDuration);\n          }\n          this.previousHeight = `${newHeight}px`;\n        }\n      }\n    });\n    this.resizeObserver.observe(this.getWrapper());\n    this.updateContainerHeight();\n    window.addEventListener('resize', this.onViewportResize);\n    window.visualViewport?.addEventListener('resize', this.onViewportResize);\n  }\n  disconnectedCallback() {\n    const wrapper = this.getWrapper();\n    if (wrapper && this.resizeObserver) {\n      this.resizeObserver.unobserve(wrapper);\n    }\n    window.removeEventListener('resize', this.onViewportResize);\n    window.visualViewport?.removeEventListener('resize', this.onViewportResize);\n  }\n  render() {\n    return html`\n      <div class=\"container\" data-mobile-fullscreen=\"${ifDefined(this.mobileFullScreen)}\">\n        <div\n          class=\"page\"\n          data-mobile-fullscreen=\"${ifDefined(this.mobileFullScreen)}\"\n          view-direction=\"${this.viewDirection}\"\n        >\n          <div class=\"page-content\">\n            <slot></slot>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n  onViewChange(history) {\n    const historyArr = history.split(',').filter(Boolean);\n    const prevArr = this.historyState.split(',').filter(Boolean);\n    const prevLength = prevArr.length;\n    const newLength = historyArr.length;\n    const newView = historyArr[historyArr.length - 1] || '';\n    const duration = UiHelperUtil.cssDurationToNumber(this.transitionDuration);\n    let direction = '';\n    if (newLength > prevLength) {\n      direction = 'next';\n    } else if (newLength < prevLength) {\n      direction = 'prev';\n    } else if (newLength === prevLength && historyArr[newLength - 1] !== prevArr[prevLength - 1]) {\n      direction = 'next';\n    }\n    this.viewDirection = `${direction}-${newView}`;\n    setTimeout(() => {\n      this.historyState = history;\n      this.setView?.(newView);\n    }, duration);\n    setTimeout(() => {\n      this.viewDirection = '';\n    }, duration * 2);\n  }\n  getWrapper() {\n    return this.shadowRoot?.querySelector('div.page');\n  }\n  updateContainerHeight() {\n    const wrapper = this.getWrapper();\n    if (!wrapper) {\n      return;\n    }\n    const footerHeight = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--apkt-footer-height') || '0');\n    let newHeight = 0;\n    if (this.mobileFullScreen) {\n      const viewportHeight = window.visualViewport?.height || window.innerHeight;\n      const headerHeight = this.getHeaderHeight();\n      newHeight = viewportHeight - headerHeight - footerHeight;\n      this.style.setProperty('--local-border-bottom-radius', '0px');\n    } else {\n      newHeight = wrapper.getBoundingClientRect().height + footerHeight;\n      this.style.setProperty('--local-border-bottom-radius', footerHeight ? 'var(--apkt-borderRadius-5)' : '0px');\n    }\n    this.style.setProperty('--local-container-height', `${newHeight}px`);\n    if (this.previousHeight !== '0px') {\n      this.style.setProperty('--local-duration-height', this.transitionDuration);\n    }\n    this.previousHeight = `${newHeight}px`;\n  }\n  getHeaderHeight() {\n    return HEADER_HEIGHT;\n  }\n};\nW3mRouterContainer.styles = [styles];\n__decorate([property({\n  type: String\n})], W3mRouterContainer.prototype, \"transitionDuration\", void 0);\n__decorate([property({\n  type: String\n})], W3mRouterContainer.prototype, \"transitionFunction\", void 0);\n__decorate([property({\n  type: String\n})], W3mRouterContainer.prototype, \"history\", void 0);\n__decorate([property({\n  type: String\n})], W3mRouterContainer.prototype, \"view\", void 0);\n__decorate([property({\n  attribute: false\n})], W3mRouterContainer.prototype, \"setView\", void 0);\n__decorate([state()], W3mRouterContainer.prototype, \"viewDirection\", void 0);\n__decorate([state()], W3mRouterContainer.prototype, \"historyState\", void 0);\n__decorate([state()], W3mRouterContainer.prototype, \"previousHeight\", void 0);\n__decorate([state()], W3mRouterContainer.prototype, \"mobileFullScreen\", void 0);\nW3mRouterContainer = __decorate([customElement('w3m-router-container')], W3mRouterContainer);\nexport { W3mRouterContainer };","map":{"version":3,"names":["LitElement","html","property","state","ifDefined","OptionsController","UiHelperUtil","customElement","styles","HEADER_HEIGHT","W3mRouterContainer","constructor","resizeObserver","undefined","transitionDuration","transitionFunction","history","view","setView","viewDirection","historyState","previousHeight","mobileFullScreen","enableMobileFullScreen","onViewportResize","updateContainerHeight","updated","changedProps","has","newHistory","onViewChange","style","setProperty","firstUpdated","ResizeObserver","entries","entry","target","getWrapper","newHeight","contentRect","height","footerHeight","parseFloat","getComputedStyle","document","documentElement","getPropertyValue","viewportHeight","window","visualViewport","innerHeight","headerHeight","getHeaderHeight","totalHeight","observe","addEventListener","disconnectedCallback","wrapper","unobserve","removeEventListener","render","historyArr","split","filter","Boolean","prevArr","prevLength","length","newLength","newView","duration","cssDurationToNumber","direction","setTimeout","shadowRoot","querySelector","getBoundingClientRect","__decorate","type","String","attribute"],"sources":["../../../../../src/partials/w3m-router-container/index.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}