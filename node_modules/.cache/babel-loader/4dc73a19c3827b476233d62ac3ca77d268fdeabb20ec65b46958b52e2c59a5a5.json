{"ast":null,"code":"import _objectSpread from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"accessList\", \"blockNumber\", \"blockTag\", \"data\", \"gas\", \"gasPrice\", \"maxFeePerGas\", \"maxPriorityFeePerGas\", \"nonce\", \"to\", \"value\"];\nimport { parseAccount } from '../../accounts/utils/parseAccount.js';\nimport { AccountNotFoundError } from '../../errors/account.js';\nimport { numberToHex } from '../../utils/encoding/toHex.js';\nimport { getCallError } from '../../utils/errors/getCallError.js';\nimport { extract } from '../../utils/formatters/extract.js';\nimport { formatTransactionRequest } from '../../utils/formatters/transactionRequest.js';\nimport { assertRequest } from '../../utils/transaction/assertRequest.js';\n/**\n * Estimates the gas and fees per gas necessary to complete a transaction without submitting it to the network.\n *\n * @param client - Client to use\n * @param parameters - {@link EstimateGasParameters}\n * @returns A gas estimate and fees per gas (in wei). {@link EstimateGasReturnType}\n *\n * @example\n * import { createPublicClient, http, parseEther } from 'viem'\n * import { linea } from 'viem/chains'\n * import { estimateGas } from 'viem/linea'\n *\n * const client = createPublicClient({\n *   chain: linea,\n *   transport: http(),\n * })\n * const gasEstimate = await estimateGas(client, {\n *   account: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n *   to: '0x70997970c51812dc3a010c7d01b50e0d17dc79c8',\n *   value: 0n,\n * })\n */\nexport async function estimateGas(client, args) {\n  const {\n    account: account_ = client.account\n  } = args;\n  if (!account_) throw new AccountNotFoundError();\n  const account = parseAccount(account_);\n  try {\n    var _client$chain;\n    const {\n        accessList,\n        blockNumber,\n        blockTag,\n        data,\n        gas,\n        gasPrice,\n        maxFeePerGas,\n        maxPriorityFeePerGas,\n        nonce,\n        to,\n        value\n      } = args,\n      rest = _objectWithoutProperties(args, _excluded);\n    const blockNumberHex = typeof blockNumber === 'bigint' ? numberToHex(blockNumber) : undefined;\n    const block = blockNumberHex || blockTag;\n    assertRequest(args);\n    const chainFormat = (_client$chain = client.chain) === null || _client$chain === void 0 || (_client$chain = _client$chain.formatters) === null || _client$chain === void 0 || (_client$chain = _client$chain.transactionRequest) === null || _client$chain === void 0 ? void 0 : _client$chain.format;\n    const format = chainFormat || formatTransactionRequest;\n    const request = format(_objectSpread(_objectSpread({}, extract(rest, {\n      format: chainFormat\n    })), {}, {\n      from: account === null || account === void 0 ? void 0 : account.address,\n      accessList,\n      data,\n      gas,\n      gasPrice,\n      maxFeePerGas,\n      maxPriorityFeePerGas,\n      nonce,\n      to,\n      value\n    }), 'estimateGas');\n    const {\n      baseFeePerGas,\n      gasLimit,\n      priorityFeePerGas\n    } = await client.request({\n      method: 'linea_estimateGas',\n      params: block ? [request, block] : [request]\n    });\n    return {\n      baseFeePerGas: BigInt(baseFeePerGas),\n      gasLimit: BigInt(gasLimit),\n      priorityFeePerGas: BigInt(priorityFeePerGas)\n    };\n  } catch (err) {\n    throw getCallError(err, _objectSpread(_objectSpread({}, args), {}, {\n      account,\n      chain: client.chain\n    }));\n  }\n}","map":{"version":3,"names":["parseAccount","AccountNotFoundError","numberToHex","getCallError","extract","formatTransactionRequest","assertRequest","estimateGas","client","args","account","account_","_client$chain","accessList","blockNumber","blockTag","data","gas","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","value","rest","_objectWithoutProperties","_excluded","blockNumberHex","undefined","block","chainFormat","chain","formatters","transactionRequest","format","request","_objectSpread","from","address","baseFeePerGas","gasLimit","priorityFeePerGas","method","params","BigInt","err"],"sources":["/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/viem/linea/actions/estimateGas.ts"],"sourcesContent":["import type { Account } from '../../accounts/types.js'\nimport { parseAccount } from '../../accounts/utils/parseAccount.js'\nimport type { EstimateGasParameters as EstimateGasParameters_base } from '../../actions/public/estimateGas.js'\nimport type { Client } from '../../clients/createClient.js'\nimport type { Transport } from '../../clients/transports/createTransport.js'\nimport { AccountNotFoundError } from '../../errors/account.js'\nimport type { BaseError } from '../../errors/base.js'\nimport type { GetAccountParameter } from '../../types/account.js'\nimport type { Chain } from '../../types/chain.js'\nimport type { TransactionRequest } from '../../types/transaction.js'\nimport type { Filter } from '../../types/utils.js'\nimport { numberToHex } from '../../utils/encoding/toHex.js'\nimport { getCallError } from '../../utils/errors/getCallError.js'\nimport { extract } from '../../utils/formatters/extract.js'\nimport { formatTransactionRequest } from '../../utils/formatters/transactionRequest.js'\nimport {\n  type AssertRequestParameters,\n  assertRequest,\n} from '../../utils/transaction/assertRequest.js'\nimport type { LineaRpcSchema } from '../types/rpc.js'\n\nexport type EstimateGasParameters<\n  chain extends Chain | undefined = Chain | undefined,\n  account extends Account | undefined = Account | undefined,\n> = EstimateGasParameters_base<chain> & GetAccountParameter<account>\n\nexport type EstimateGasReturnType = {\n  gasLimit: bigint\n  baseFeePerGas: bigint\n  priorityFeePerGas: bigint\n}\n\n/**\n * Estimates the gas and fees per gas necessary to complete a transaction without submitting it to the network.\n *\n * @param client - Client to use\n * @param parameters - {@link EstimateGasParameters}\n * @returns A gas estimate and fees per gas (in wei). {@link EstimateGasReturnType}\n *\n * @example\n * import { createPublicClient, http, parseEther } from 'viem'\n * import { linea } from 'viem/chains'\n * import { estimateGas } from 'viem/linea'\n *\n * const client = createPublicClient({\n *   chain: linea,\n *   transport: http(),\n * })\n * const gasEstimate = await estimateGas(client, {\n *   account: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n *   to: '0x70997970c51812dc3a010c7d01b50e0d17dc79c8',\n *   value: 0n,\n * })\n */\nexport async function estimateGas<\n  chain extends Chain | undefined,\n  account extends Account | undefined,\n>(\n  client: Client<Transport, chain, account>,\n  args: EstimateGasParameters<chain>,\n): Promise<EstimateGasReturnType> {\n  const { account: account_ = client.account } = args\n\n  if (!account_) throw new AccountNotFoundError()\n  const account = parseAccount(account_)\n\n  try {\n    const {\n      accessList,\n      blockNumber,\n      blockTag,\n      data,\n      gas,\n      gasPrice,\n      maxFeePerGas,\n      maxPriorityFeePerGas,\n      nonce,\n      to,\n      value,\n      ...rest\n    } = args\n\n    const blockNumberHex =\n      typeof blockNumber === 'bigint' ? numberToHex(blockNumber) : undefined\n    const block = blockNumberHex || blockTag\n\n    assertRequest(args as AssertRequestParameters)\n\n    const chainFormat = client.chain?.formatters?.transactionRequest?.format\n    const format = chainFormat || formatTransactionRequest\n\n    const request = format(\n      {\n        // Pick out extra data that might exist on the chain's transaction request type.\n        ...extract(rest, { format: chainFormat }),\n        from: account?.address,\n        accessList,\n        data,\n        gas,\n        gasPrice,\n        maxFeePerGas,\n        maxPriorityFeePerGas,\n        nonce,\n        to,\n        value,\n      } as TransactionRequest,\n      'estimateGas',\n    )\n\n    type LineaEstimateGasSchema = Filter<\n      LineaRpcSchema,\n      { Method: 'linea_estimateGas' }\n    >[0]\n    const { baseFeePerGas, gasLimit, priorityFeePerGas } =\n      await client.request<LineaEstimateGasSchema>({\n        method: 'linea_estimateGas',\n        params: block ? [request, block] : [request],\n      })\n    return {\n      baseFeePerGas: BigInt(baseFeePerGas),\n      gasLimit: BigInt(gasLimit),\n      priorityFeePerGas: BigInt(priorityFeePerGas),\n    }\n  } catch (err) {\n    throw getCallError(err as BaseError, {\n      ...args,\n      account,\n      chain: client.chain,\n    })\n  }\n}\n"],"mappings":";;;AACA,SAASA,YAAY,QAAQ,sCAAsC;AAInE,SAASC,oBAAoB,QAAQ,yBAAyB;AAM9D,SAASC,WAAW,QAAQ,+BAA+B;AAC3D,SAASC,YAAY,QAAQ,oCAAoC;AACjE,SAASC,OAAO,QAAQ,mCAAmC;AAC3D,SAASC,wBAAwB,QAAQ,8CAA8C;AACvF,SAEEC,aAAa,QACR,0CAA0C;AAcjD;;;;;;;;;;;;;;;;;;;;;;AAsBA,OAAO,eAAeC,WAAWA,CAI/BC,MAAyC,EACzCC,IAAkC;EAElC,MAAM;IAAEC,OAAO,EAAEC,QAAQ,GAAGH,MAAM,CAACE;EAAO,CAAE,GAAGD,IAAI;EAEnD,IAAI,CAACE,QAAQ,EAAE,MAAM,IAAIV,oBAAoB,EAAE;EAC/C,MAAMS,OAAO,GAAGV,YAAY,CAACW,QAAQ,CAAC;EAEtC,IAAI;IAAA,IAAAC,aAAA;IACF,MAAM;QACJC,UAAU;QACVC,WAAW;QACXC,QAAQ;QACRC,IAAI;QACJC,GAAG;QACHC,QAAQ;QACRC,YAAY;QACZC,oBAAoB;QACpBC,KAAK;QACLC,EAAE;QACFC;MACO,CACR,GAAGd,IAAI;MADHe,IAAI,GAAAC,wBAAA,CACLhB,IAAI,EAAAiB,SAAA;IAER,MAAMC,cAAc,GAClB,OAAOb,WAAW,KAAK,QAAQ,GAAGZ,WAAW,CAACY,WAAW,CAAC,GAAGc,SAAS;IACxE,MAAMC,KAAK,GAAGF,cAAc,IAAIZ,QAAQ;IAExCT,aAAa,CAACG,IAA+B,CAAC;IAE9C,MAAMqB,WAAW,IAAAlB,aAAA,GAAGJ,MAAM,CAACuB,KAAK,cAAAnB,aAAA,gBAAAA,aAAA,GAAZA,aAAA,CAAcoB,UAAU,cAAApB,aAAA,gBAAAA,aAAA,GAAxBA,aAAA,CAA0BqB,kBAAkB,cAAArB,aAAA,uBAA5CA,aAAA,CAA8CsB,MAAM;IACxE,MAAMA,MAAM,GAAGJ,WAAW,IAAIzB,wBAAwB;IAEtD,MAAM8B,OAAO,GAAGD,MAAM,CAAAE,aAAA,CAAAA,aAAA,KAGfhC,OAAO,CAACoB,IAAI,EAAE;MAAEU,MAAM,EAAEJ;IAAW,CAAE,CAAC;MACzCO,IAAI,EAAE3B,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAE4B,OAAO;MACtBzB,UAAU;MACVG,IAAI;MACJC,GAAG;MACHC,QAAQ;MACRC,YAAY;MACZC,oBAAoB;MACpBC,KAAK;MACLC,EAAE;MACFC;IAAK,IAEP,aAAa,CACd;IAMD,MAAM;MAAEgB,aAAa;MAAEC,QAAQ;MAAEC;IAAiB,CAAE,GAClD,MAAMjC,MAAM,CAAC2B,OAAO,CAAyB;MAC3CO,MAAM,EAAE,mBAAmB;MAC3BC,MAAM,EAAEd,KAAK,GAAG,CAACM,OAAO,EAAEN,KAAK,CAAC,GAAG,CAACM,OAAO;KAC5C,CAAC;IACJ,OAAO;MACLI,aAAa,EAAEK,MAAM,CAACL,aAAa,CAAC;MACpCC,QAAQ,EAAEI,MAAM,CAACJ,QAAQ,CAAC;MAC1BC,iBAAiB,EAAEG,MAAM,CAACH,iBAAiB;KAC5C;EACH,CAAC,CAAC,OAAOI,GAAG,EAAE;IACZ,MAAM1C,YAAY,CAAC0C,GAAgB,EAAAT,aAAA,CAAAA,aAAA,KAC9B3B,IAAI;MACPC,OAAO;MACPqB,KAAK,EAAEvB,MAAM,CAACuB;IAAK,EACpB,CAAC;EACJ;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}