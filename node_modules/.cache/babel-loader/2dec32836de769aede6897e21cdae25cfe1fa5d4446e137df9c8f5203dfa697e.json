{"ast":null,"code":"import { proxy, ref, subscribe as sub } from 'valtio/vanilla';\nimport { subscribeKey as subKey } from 'valtio/vanilla/utils';\nimport { ConstantsUtil as CommonConstantsUtil, ErrorUtil, NumberUtil, UserRejectedRequestError } from '@reown/appkit-common';\nimport { ContractUtil } from '@reown/appkit-common';\nimport { W3mFrameRpcConstants } from '@reown/appkit-wallet/utils';\nimport { BalanceUtil } from '../utils/BalanceUtil.js';\nimport { getActiveNetworkTokenAddress, getPreferredAccountType } from '../utils/ChainControllerUtil.js';\nimport { ConstantsUtil } from '../utils/ConstantsUtil.js';\nimport { CoreHelperUtil } from '../utils/CoreHelperUtil.js';\nimport { SwapApiUtil } from '../utils/SwapApiUtil.js';\nimport { withErrorBoundary } from '../utils/withErrorBoundary.js';\nimport { ChainController } from './ChainController.js';\nimport { ConnectionController } from './ConnectionController.js';\nimport { EventsController } from './EventsController.js';\nimport { RouterController } from './RouterController.js';\nimport { SnackController } from './SnackController.js';\n// -- State --------------------------------------------- //\nconst state = proxy({\n  tokenBalances: [],\n  loading: false\n});\n// -- Controller ---------------------------------------- //\nconst controller = {\n  state,\n  subscribe(callback) {\n    return sub(state, () => callback(state));\n  },\n  subscribeKey(key, callback) {\n    return subKey(state, key, callback);\n  },\n  setToken(token) {\n    if (token) {\n      state.token = ref(token);\n    }\n  },\n  setTokenAmount(sendTokenAmount) {\n    state.sendTokenAmount = sendTokenAmount;\n  },\n  setReceiverAddress(receiverAddress) {\n    state.receiverAddress = receiverAddress;\n  },\n  setReceiverProfileImageUrl(receiverProfileImageUrl) {\n    state.receiverProfileImageUrl = receiverProfileImageUrl;\n  },\n  setReceiverProfileName(receiverProfileName) {\n    state.receiverProfileName = receiverProfileName;\n  },\n  setNetworkBalanceInUsd(networkBalanceInUSD) {\n    state.networkBalanceInUSD = networkBalanceInUSD;\n  },\n  setLoading(loading) {\n    state.loading = loading;\n  },\n  getSdkEventProperties(error) {\n    var _state$token, _state$sendTokenAmoun, _ChainController$stat;\n    return {\n      message: CoreHelperUtil.parseError(error),\n      isSmartAccount: getPreferredAccountType(ChainController.state.activeChain) === W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,\n      token: ((_state$token = state.token) === null || _state$token === void 0 ? void 0 : _state$token.symbol) || '',\n      amount: (_state$sendTokenAmoun = state.sendTokenAmount) !== null && _state$sendTokenAmoun !== void 0 ? _state$sendTokenAmoun : 0,\n      network: ((_ChainController$stat = ChainController.state.activeCaipNetwork) === null || _ChainController$stat === void 0 ? void 0 : _ChainController$stat.caipNetworkId) || ''\n    };\n  },\n  async sendToken() {\n    try {\n      var _ChainController$stat2;\n      SendController.setLoading(true);\n      switch ((_ChainController$stat2 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat2 === void 0 ? void 0 : _ChainController$stat2.chainNamespace) {\n        case 'eip155':\n          await SendController.sendEvmToken();\n          return;\n        case 'solana':\n          await SendController.sendSolanaToken();\n          return;\n        default:\n          throw new Error('Unsupported chain');\n      }\n    } catch (err) {\n      if (ErrorUtil.isUserRejectedRequestError(err)) {\n        throw new UserRejectedRequestError(err);\n      }\n      throw err;\n    } finally {\n      SendController.setLoading(false);\n    }\n  },\n  async sendEvmToken() {\n    var _SendController$state;\n    const activeChainNamespace = ChainController.state.activeChain;\n    if (!activeChainNamespace) {\n      throw new Error('SendController:sendEvmToken - activeChainNamespace is required');\n    }\n    const activeAccountType = getPreferredAccountType(activeChainNamespace);\n    if (!SendController.state.sendTokenAmount || !SendController.state.receiverAddress) {\n      throw new Error('An amount and receiver address are required');\n    }\n    if (!SendController.state.token) {\n      throw new Error('A token is required');\n    }\n    if ((_SendController$state = SendController.state.token) !== null && _SendController$state !== void 0 && _SendController$state.address) {\n      var _ChainController$stat3;\n      EventsController.sendEvent({\n        type: 'track',\n        event: 'SEND_INITIATED',\n        properties: {\n          isSmartAccount: activeAccountType === W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,\n          token: SendController.state.token.address,\n          amount: SendController.state.sendTokenAmount,\n          network: ((_ChainController$stat3 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat3 === void 0 ? void 0 : _ChainController$stat3.caipNetworkId) || ''\n        }\n      });\n      const {\n        hash\n      } = await SendController.sendERC20Token({\n        receiverAddress: SendController.state.receiverAddress,\n        tokenAddress: SendController.state.token.address,\n        sendTokenAmount: SendController.state.sendTokenAmount,\n        decimals: SendController.state.token.quantity.decimals\n      });\n      if (hash) {\n        state.hash = hash;\n      }\n    } else {\n      var _ChainController$stat4;\n      EventsController.sendEvent({\n        type: 'track',\n        event: 'SEND_INITIATED',\n        properties: {\n          isSmartAccount: activeAccountType === W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,\n          token: SendController.state.token.symbol || '',\n          amount: SendController.state.sendTokenAmount,\n          network: ((_ChainController$stat4 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat4 === void 0 ? void 0 : _ChainController$stat4.caipNetworkId) || ''\n        }\n      });\n      const {\n        hash\n      } = await SendController.sendNativeToken({\n        receiverAddress: SendController.state.receiverAddress,\n        sendTokenAmount: SendController.state.sendTokenAmount,\n        decimals: SendController.state.token.quantity.decimals\n      });\n      if (hash) {\n        state.hash = hash;\n      }\n    }\n  },\n  async fetchTokenBalance(onError) {\n    var _ChainController$stat5, _ChainController$stat6, _ChainController$getA, _ChainController$getA2;\n    state.loading = true;\n    const namespace = ChainController.state.activeChain;\n    const chainId = (_ChainController$stat5 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat5 === void 0 ? void 0 : _ChainController$stat5.caipNetworkId;\n    const chain = (_ChainController$stat6 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat6 === void 0 ? void 0 : _ChainController$stat6.chainNamespace;\n    const caipAddress = (_ChainController$getA = (_ChainController$getA2 = ChainController.getAccountData(namespace)) === null || _ChainController$getA2 === void 0 ? void 0 : _ChainController$getA2.caipAddress) !== null && _ChainController$getA !== void 0 ? _ChainController$getA : ChainController.state.activeCaipAddress;\n    const address = caipAddress ? CoreHelperUtil.getPlainAddress(caipAddress) : undefined;\n    if (state.lastRetry && !CoreHelperUtil.isAllowedRetry(state.lastRetry, 30 * ConstantsUtil.ONE_SEC_MS)) {\n      state.loading = false;\n      return [];\n    }\n    try {\n      if (address && chainId && chain) {\n        const balances = await BalanceUtil.getMyTokensWithBalance();\n        state.tokenBalances = balances;\n        state.lastRetry = undefined;\n        return balances;\n      }\n    } catch (error) {\n      state.lastRetry = Date.now();\n      onError === null || onError === void 0 || onError(error);\n      SnackController.showError('Token Balance Unavailable');\n    } finally {\n      state.loading = false;\n    }\n    return [];\n  },\n  fetchNetworkBalance() {\n    if (state.tokenBalances.length === 0) {\n      return;\n    }\n    const networkTokenBalances = SwapApiUtil.mapBalancesToSwapTokens(state.tokenBalances);\n    if (!networkTokenBalances) {\n      return;\n    }\n    const networkToken = networkTokenBalances.find(token => token.address === getActiveNetworkTokenAddress());\n    if (!networkToken) {\n      return;\n    }\n    state.networkBalanceInUSD = networkToken ? NumberUtil.multiply(networkToken.quantity.numeric, networkToken.price).toString() : '0';\n  },\n  async sendNativeToken(params) {\n    var _ChainController$getA3, _SendController$state2, _ChainController$stat7, _ConnectionController;\n    RouterController.pushTransactionStack({});\n    const to = params.receiverAddress;\n    const address = (_ChainController$getA3 = ChainController.getAccountData()) === null || _ChainController$getA3 === void 0 ? void 0 : _ChainController$getA3.address;\n    const value = ConnectionController.parseUnits(params.sendTokenAmount.toString(), Number(params.decimals));\n    const data = '0x';\n    const hash = await ConnectionController.sendTransaction({\n      chainNamespace: CommonConstantsUtil.CHAIN.EVM,\n      to,\n      address,\n      data,\n      value: value !== null && value !== void 0 ? value : BigInt(0)\n    });\n    EventsController.sendEvent({\n      type: 'track',\n      event: 'SEND_SUCCESS',\n      properties: {\n        isSmartAccount: getPreferredAccountType('eip155') === W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,\n        token: ((_SendController$state2 = SendController.state.token) === null || _SendController$state2 === void 0 ? void 0 : _SendController$state2.symbol) || '',\n        amount: params.sendTokenAmount,\n        network: ((_ChainController$stat7 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat7 === void 0 ? void 0 : _ChainController$stat7.caipNetworkId) || '',\n        hash: hash || ''\n      }\n    });\n    (_ConnectionController = ConnectionController._getClient()) === null || _ConnectionController === void 0 || _ConnectionController.updateBalance('eip155');\n    SendController.resetSend();\n    return {\n      hash\n    };\n  },\n  async sendERC20Token(params) {\n    var _ChainController$getA4;\n    RouterController.pushTransactionStack({\n      onSuccess() {\n        RouterController.replace('Account');\n      }\n    });\n    const amount = ConnectionController.parseUnits(params.sendTokenAmount.toString(), Number(params.decimals));\n    const address = (_ChainController$getA4 = ChainController.getAccountData()) === null || _ChainController$getA4 === void 0 ? void 0 : _ChainController$getA4.address;\n    if (address && params.sendTokenAmount && params.receiverAddress && params.tokenAddress) {\n      var _SendController$state3, _ChainController$stat8;\n      const tokenAddress = CoreHelperUtil.getPlainAddress(params.tokenAddress);\n      if (!tokenAddress) {\n        throw new Error('SendController:sendERC20Token - tokenAddress is required');\n      }\n      const hash = await ConnectionController.writeContract({\n        fromAddress: address,\n        tokenAddress,\n        args: [params.receiverAddress, amount !== null && amount !== void 0 ? amount : BigInt(0)],\n        method: 'transfer',\n        abi: ContractUtil.getERC20Abi(tokenAddress),\n        chainNamespace: CommonConstantsUtil.CHAIN.EVM\n      });\n      EventsController.sendEvent({\n        type: 'track',\n        event: 'SEND_SUCCESS',\n        properties: {\n          isSmartAccount: getPreferredAccountType('eip155') === W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,\n          token: ((_SendController$state3 = SendController.state.token) === null || _SendController$state3 === void 0 ? void 0 : _SendController$state3.symbol) || '',\n          amount: params.sendTokenAmount,\n          network: ((_ChainController$stat8 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat8 === void 0 ? void 0 : _ChainController$stat8.caipNetworkId) || '',\n          hash: hash || ''\n        }\n      });\n      SendController.resetSend();\n      return {\n        hash\n      };\n    }\n    return {\n      hash: undefined\n    };\n  },\n  async sendSolanaToken() {\n    var _ConnectionController2;\n    if (!SendController.state.sendTokenAmount || !SendController.state.receiverAddress) {\n      throw new Error('An amount and receiver address are required');\n    }\n    RouterController.pushTransactionStack({\n      onSuccess() {\n        RouterController.replace('Account');\n      }\n    });\n    let tokenMint = undefined;\n    if (SendController.state.token && SendController.state.token.address !== ConstantsUtil.SOLANA_NATIVE_TOKEN_ADDRESS) {\n      if (CoreHelperUtil.isCaipAddress(SendController.state.token.address)) {\n        tokenMint = CoreHelperUtil.getPlainAddress(SendController.state.token.address);\n      } else {\n        tokenMint = SendController.state.token.address;\n      }\n    }\n    const hash = await ConnectionController.sendTransaction({\n      chainNamespace: 'solana',\n      tokenMint,\n      to: SendController.state.receiverAddress,\n      value: SendController.state.sendTokenAmount\n    });\n    if (hash) {\n      state.hash = hash;\n    }\n    (_ConnectionController2 = ConnectionController._getClient()) === null || _ConnectionController2 === void 0 || _ConnectionController2.updateBalance('solana');\n    SendController.resetSend();\n  },\n  resetSend() {\n    state.token = undefined;\n    state.sendTokenAmount = undefined;\n    state.receiverAddress = undefined;\n    state.receiverProfileImageUrl = undefined;\n    state.receiverProfileName = undefined;\n    state.loading = false;\n    state.tokenBalances = [];\n  }\n};\n// Export the controller wrapped with our error boundary\nexport const SendController = withErrorBoundary(controller);","map":{"version":3,"names":["proxy","ref","subscribe","sub","subscribeKey","subKey","ConstantsUtil","CommonConstantsUtil","ErrorUtil","NumberUtil","UserRejectedRequestError","ContractUtil","W3mFrameRpcConstants","BalanceUtil","getActiveNetworkTokenAddress","getPreferredAccountType","CoreHelperUtil","SwapApiUtil","withErrorBoundary","ChainController","ConnectionController","EventsController","RouterController","SnackController","state","tokenBalances","loading","controller","callback","key","setToken","token","setTokenAmount","sendTokenAmount","setReceiverAddress","receiverAddress","setReceiverProfileImageUrl","receiverProfileImageUrl","setReceiverProfileName","receiverProfileName","setNetworkBalanceInUsd","networkBalanceInUSD","setLoading","getSdkEventProperties","error","_state$token","_state$sendTokenAmoun","_ChainController$stat","message","parseError","isSmartAccount","activeChain","ACCOUNT_TYPES","SMART_ACCOUNT","symbol","amount","network","activeCaipNetwork","caipNetworkId","sendToken","_ChainController$stat2","SendController","chainNamespace","sendEvmToken","sendSolanaToken","Error","err","isUserRejectedRequestError","_SendController$state","activeChainNamespace","activeAccountType","address","_ChainController$stat3","sendEvent","type","event","properties","hash","sendERC20Token","tokenAddress","decimals","quantity","_ChainController$stat4","sendNativeToken","fetchTokenBalance","onError","_ChainController$stat5","_ChainController$stat6","_ChainController$getA","_ChainController$getA2","namespace","chainId","chain","caipAddress","getAccountData","activeCaipAddress","getPlainAddress","undefined","lastRetry","isAllowedRetry","ONE_SEC_MS","balances","getMyTokensWithBalance","Date","now","showError","fetchNetworkBalance","length","networkTokenBalances","mapBalancesToSwapTokens","networkToken","find","multiply","numeric","price","toString","params","_ChainController$getA3","_SendController$state2","_ChainController$stat7","_ConnectionController","pushTransactionStack","to","value","parseUnits","Number","data","sendTransaction","CHAIN","EVM","BigInt","_getClient","updateBalance","resetSend","_ChainController$getA4","onSuccess","replace","_SendController$state3","_ChainController$stat8","writeContract","fromAddress","args","method","abi","getERC20Abi","_ConnectionController2","tokenMint","SOLANA_NATIVE_TOKEN_ADDRESS","isCaipAddress"],"sources":["../../../../src/controllers/SendController.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}