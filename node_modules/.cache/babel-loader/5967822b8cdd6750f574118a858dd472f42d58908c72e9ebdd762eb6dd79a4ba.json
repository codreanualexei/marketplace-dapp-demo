{"ast":null,"code":"var _jsxFileName = \"/Users/alex.codreanu/Desktop/marketplace-dapp/src/contexts/WalletContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { ethers } from 'ethers';\nimport { EthereumProvider } from '@walletconnect/ethereum-provider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WalletContext = /*#__PURE__*/createContext(undefined);\nexport const useWallet = () => {\n  _s();\n  const context = useContext(WalletContext);\n  if (!context) {\n    throw new Error('useWallet must be used within a WalletProvider');\n  }\n  return context;\n};\n_s(useWallet, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const WalletProvider = ({\n  children\n}) => {\n  _s2();\n  const [account, setAccount] = useState(null);\n  const [balance, setBalance] = useState(null);\n  const [chainId, setChainId] = useState(null);\n  const [provider, setProvider] = useState(null);\n  const [signer, setSigner] = useState(null);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [error, setError] = useState(null);\n  const [walletType, setWalletType] = useState(null);\n  const [walletConnectProvider, setWalletConnectProvider] = useState(null);\n  const updateBalance = async (address, provider) => {\n    try {\n      const balanceWei = await provider.getBalance(address);\n      const balanceEth = ethers.formatEther(balanceWei);\n      setBalance(parseFloat(balanceEth).toFixed(4));\n    } catch (err) {\n      console.error('Error fetching balance:', err);\n    }\n  };\n  const connectWallet = async (walletType = 'metamask') => {\n    setIsConnecting(true);\n    setError(null);\n    try {\n      if (walletType === 'metamask') {\n        await connectMetaMask();\n      } else if (walletType === 'walletconnect') {\n        await connectWalletConnect();\n      }\n    } catch (err) {\n      console.error('Error connecting wallet:', err);\n      setError(err.message || 'Failed to connect wallet');\n    } finally {\n      setIsConnecting(false);\n    }\n  };\n  const connectMetaMask = async () => {\n    if (typeof window.ethereum === 'undefined') {\n      throw new Error('Please install MetaMask to use this dApp');\n    }\n    const browserProvider = new ethers.BrowserProvider(window.ethereum);\n    const accounts = await browserProvider.send('eth_requestAccounts', []);\n    if (accounts.length === 0) {\n      throw new Error('No accounts found');\n    }\n    const userSigner = await browserProvider.getSigner();\n    const network = await browserProvider.getNetwork();\n    setProvider(browserProvider);\n    setSigner(userSigner);\n    setAccount(accounts[0]);\n    setChainId(Number(network.chainId));\n    setWalletType('metamask');\n    await updateBalance(accounts[0], browserProvider);\n  };\n  const connectWalletConnect = async () => {\n    try {\n      // Create WalletConnect provider\n      const projectId = process.env.REACT_APP_WALLETCONNECT_PROJECT_ID;\n      if (!projectId) {\n        throw new Error('WalletConnect Project ID not configured. Please set REACT_APP_WALLETCONNECT_PROJECT_ID in your environment variables.');\n      }\n      const wcProvider = await EthereumProvider.init({\n        projectId: projectId,\n        chains: [1, 137, 56, 43114, 80002],\n        // Ethereum, Polygon, BSC, Avalanche, Polygon Amoy\n        showQrModal: true,\n        metadata: {\n          name: 'STR Domains Marketplace',\n          description: 'Decentralized marketplace for STR domains',\n          url: window.location.origin,\n          icons: [`${window.location.origin}/logo192.png`]\n        }\n      });\n\n      // Enable session (triggers QR Code modal)\n      await wcProvider.enable();\n\n      // Create ethers provider from WalletConnect provider\n      const browserProvider = new ethers.BrowserProvider(wcProvider);\n      const accounts = await browserProvider.listAccounts();\n      if (accounts.length === 0) {\n        throw new Error('No accounts found');\n      }\n      const userSigner = await browserProvider.getSigner();\n      const network = await browserProvider.getNetwork();\n      setProvider(browserProvider);\n      setSigner(userSigner);\n      setAccount(accounts[0].address);\n      setChainId(Number(network.chainId));\n      setWalletType('walletconnect');\n      setWalletConnectProvider(wcProvider);\n      await updateBalance(accounts[0].address, browserProvider);\n    } catch (error) {\n      var _error$message;\n      if ((_error$message = error.message) !== null && _error$message !== void 0 && _error$message.includes('User rejected')) {\n        throw new Error('Connection cancelled by user');\n      }\n      throw error;\n    }\n  };\n  const switchNetwork = async targetChainId => {\n    if (walletType === 'metamask') {\n      await switchMetaMaskNetwork(targetChainId);\n    } else if (walletType === 'walletconnect') {\n      await switchWalletConnectNetwork(targetChainId);\n    } else {\n      throw new Error('No wallet connected');\n    }\n  };\n  const switchMetaMaskNetwork = async targetChainId => {\n    if (typeof window.ethereum === 'undefined') {\n      throw new Error('MetaMask not detected');\n    }\n    const chainIdHex = `0x${targetChainId.toString(16)}`;\n    try {\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{\n          chainId: chainIdHex\n        }]\n      });\n    } catch (switchError) {\n      // Chain not added to MetaMask, try to add it\n      if (switchError.code === 4902) {\n        await addMetaMaskNetwork(targetChainId);\n      } else {\n        throw switchError;\n      }\n    }\n  };\n  const addMetaMaskNetwork = async chainId => {\n    const chainIdHex = `0x${chainId.toString(16)}`;\n    const networkConfig = getNetworkConfig(chainId);\n    await window.ethereum.request({\n      method: 'wallet_addEthereumChain',\n      params: [networkConfig]\n    });\n  };\n  const switchWalletConnectNetwork = async targetChainId => {\n    if (!walletConnectProvider) {\n      throw new Error('WalletConnect not connected');\n    }\n    try {\n      await walletConnectProvider.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{\n          chainId: `0x${targetChainId.toString(16)}`\n        }]\n      });\n    } catch (switchError) {\n      // Chain might not be supported by the wallet\n      if (switchError.code === 4902) {\n        throw new Error('Network not supported by your wallet. Please switch manually.');\n      } else {\n        throw switchError;\n      }\n    }\n  };\n  const getNetworkConfig = chainId => {\n    const chainIdHex = `0x${chainId.toString(16)}`;\n    switch (chainId) {\n      case 80002:\n        // Polygon Amoy\n        return {\n          chainId: chainIdHex,\n          chainName: 'Polygon Amoy Testnet',\n          nativeCurrency: {\n            name: 'MATIC',\n            symbol: 'MATIC',\n            decimals: 18\n          },\n          rpcUrls: ['https://rpc-amoy.polygon.technology'],\n          blockExplorerUrls: ['https://amoy.polygonscan.com/']\n        };\n      case 137:\n        // Polygon Mainnet\n        return {\n          chainId: chainIdHex,\n          chainName: 'Polygon Mainnet',\n          nativeCurrency: {\n            name: 'MATIC',\n            symbol: 'MATIC',\n            decimals: 18\n          },\n          rpcUrls: ['https://polygon-rpc.com'],\n          blockExplorerUrls: ['https://polygonscan.com/']\n        };\n      case 1:\n        // Ethereum Mainnet\n        return {\n          chainId: chainIdHex,\n          chainName: 'Ethereum Mainnet',\n          nativeCurrency: {\n            name: 'Ethereum',\n            symbol: 'ETH',\n            decimals: 18\n          },\n          rpcUrls: ['https://mainnet.infura.io/v3/'],\n          blockExplorerUrls: ['https://etherscan.io/']\n        };\n      default:\n        throw new Error(`Unsupported network: ${chainId}`);\n    }\n  };\n  const disconnectWallet = async () => {\n    // Disconnect WalletConnect if it's connected\n    if (walletConnectProvider && walletType === 'walletconnect') {\n      try {\n        await walletConnectProvider.disconnect();\n      } catch (error) {\n        console.error('Error disconnecting WalletConnect:', error);\n      }\n    }\n    setAccount(null);\n    setBalance(null);\n    setChainId(null);\n    setProvider(null);\n    setSigner(null);\n    setError(null);\n    setWalletType(null);\n    setWalletConnectProvider(null);\n    localStorage.setItem('walletDisconnected', 'true');\n  };\n\n  // Listen for account changes\n  useEffect(() => {\n    const cleanupFunctions = [];\n\n    // MetaMask event listeners\n    if (typeof window.ethereum !== 'undefined' && walletType === 'metamask') {\n      var _window$ethereum$on, _window$ethereum, _window$ethereum$on2, _window$ethereum2;\n      const handleAccountsChanged = accounts => {\n        if (accounts.length === 0) {\n          disconnectWallet();\n        } else if (accounts[0] !== account) {\n          setAccount(accounts[0]);\n          if (provider) {\n            updateBalance(accounts[0], provider);\n          }\n        }\n      };\n      const handleChainChanged = chainIdHex => {\n        setChainId(parseInt(chainIdHex, 16));\n        window.location.reload();\n      };\n      (_window$ethereum$on = (_window$ethereum = window.ethereum).on) === null || _window$ethereum$on === void 0 ? void 0 : _window$ethereum$on.call(_window$ethereum, 'accountsChanged', handleAccountsChanged);\n      (_window$ethereum$on2 = (_window$ethereum2 = window.ethereum).on) === null || _window$ethereum$on2 === void 0 ? void 0 : _window$ethereum$on2.call(_window$ethereum2, 'chainChanged', handleChainChanged);\n      cleanupFunctions.push(() => {\n        if (typeof window.ethereum !== 'undefined') {\n          var _removeListener, _ref, _removeListener2, _ref2;\n          (_removeListener = (_ref = window.ethereum).removeListener) === null || _removeListener === void 0 ? void 0 : _removeListener.call(_ref, 'accountsChanged', handleAccountsChanged);\n          (_removeListener2 = (_ref2 = window.ethereum).removeListener) === null || _removeListener2 === void 0 ? void 0 : _removeListener2.call(_ref2, 'chainChanged', handleChainChanged);\n        }\n      });\n    }\n\n    // WalletConnect event listeners\n    if (walletConnectProvider && walletType === 'walletconnect') {\n      const handleAccountsChanged = accounts => {\n        if (accounts.length === 0) {\n          disconnectWallet();\n        } else if (accounts[0] !== account) {\n          setAccount(accounts[0]);\n          if (provider) {\n            updateBalance(accounts[0], provider);\n          }\n        }\n      };\n      const handleChainChanged = chainId => {\n        setChainId(chainId);\n        window.location.reload();\n      };\n      const handleDisconnect = () => {\n        disconnectWallet();\n      };\n      walletConnectProvider.on('accountsChanged', handleAccountsChanged);\n      walletConnectProvider.on('chainChanged', handleChainChanged);\n      walletConnectProvider.on('disconnect', handleDisconnect);\n      cleanupFunctions.push(() => {\n        walletConnectProvider.off('accountsChanged', handleAccountsChanged);\n        walletConnectProvider.off('chainChanged', handleChainChanged);\n        walletConnectProvider.off('disconnect', handleDisconnect);\n      });\n    }\n    return () => {\n      cleanupFunctions.forEach(cleanup => cleanup());\n    };\n  }, [account, provider, walletType, walletConnectProvider]);\n\n  // Auto-connect if previously connected\n  useEffect(() => {\n    const checkConnection = async () => {\n      if (localStorage.getItem('walletDisconnected') !== 'true') {\n        // Check MetaMask first\n        if (typeof window.ethereum !== 'undefined') {\n          try {\n            const browserProvider = new ethers.BrowserProvider(window.ethereum);\n            const accounts = await browserProvider.send('eth_accounts', []);\n            if (accounts.length > 0) {\n              const userSigner = await browserProvider.getSigner();\n              const network = await browserProvider.getNetwork();\n              setProvider(browserProvider);\n              setSigner(userSigner);\n              setAccount(accounts[0]);\n              setChainId(Number(network.chainId));\n              setWalletType('metamask');\n              await updateBalance(accounts[0], browserProvider);\n              return;\n            }\n          } catch (err) {\n            console.error('Error checking MetaMask connection:', err);\n          }\n        }\n\n        // Check WalletConnect session\n        try {\n          const projectId = process.env.REACT_APP_WALLETCONNECT_PROJECT_ID;\n          if (projectId) {\n            const wcProvider = await EthereumProvider.init({\n              projectId: projectId,\n              chains: [1, 137, 56, 43114],\n              showQrModal: false,\n              metadata: {\n                name: 'STR Domains Marketplace',\n                description: 'Decentralized marketplace for STR domains',\n                url: window.location.origin,\n                icons: [`${window.location.origin}/logo192.png`]\n              }\n            });\n            if (wcProvider.session) {\n              const browserProvider = new ethers.BrowserProvider(wcProvider);\n              const accounts = await browserProvider.listAccounts();\n              if (accounts.length > 0) {\n                const userSigner = await browserProvider.getSigner();\n                const network = await browserProvider.getNetwork();\n                setProvider(browserProvider);\n                setSigner(userSigner);\n                setAccount(accounts[0].address);\n                setChainId(Number(network.chainId));\n                setWalletType('walletconnect');\n                setWalletConnectProvider(wcProvider);\n                await updateBalance(accounts[0].address, browserProvider);\n              }\n            }\n          }\n        } catch (err) {\n          console.error('Error checking WalletConnect connection:', err);\n        }\n      }\n    };\n    checkConnection();\n  }, []);\n  const value = {\n    account,\n    balance,\n    chainId,\n    provider,\n    signer,\n    connectWallet,\n    disconnectWallet,\n    switchNetwork,\n    isConnecting,\n    error,\n    walletType\n  };\n  return /*#__PURE__*/_jsxDEV(WalletContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 433,\n    columnNumber: 10\n  }, this);\n};\n_s2(WalletProvider, \"tW0vn9qJnosXbte1cnmN2QmrhP4=\");\n_c = WalletProvider;\nvar _c;\n$RefreshReg$(_c, \"WalletProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","ethers","EthereumProvider","jsxDEV","_jsxDEV","WalletContext","undefined","useWallet","_s","context","Error","WalletProvider","children","_s2","account","setAccount","balance","setBalance","chainId","setChainId","provider","setProvider","signer","setSigner","isConnecting","setIsConnecting","error","setError","walletType","setWalletType","walletConnectProvider","setWalletConnectProvider","updateBalance","address","balanceWei","getBalance","balanceEth","formatEther","parseFloat","toFixed","err","console","connectWallet","connectMetaMask","connectWalletConnect","message","window","ethereum","browserProvider","BrowserProvider","accounts","send","length","userSigner","getSigner","network","getNetwork","Number","projectId","process","env","REACT_APP_WALLETCONNECT_PROJECT_ID","wcProvider","init","chains","showQrModal","metadata","name","description","url","location","origin","icons","enable","listAccounts","_error$message","includes","switchNetwork","targetChainId","switchMetaMaskNetwork","switchWalletConnectNetwork","chainIdHex","toString","request","method","params","switchError","code","addMetaMaskNetwork","networkConfig","getNetworkConfig","chainName","nativeCurrency","symbol","decimals","rpcUrls","blockExplorerUrls","disconnectWallet","disconnect","localStorage","setItem","cleanupFunctions","_window$ethereum$on","_window$ethereum","_window$ethereum$on2","_window$ethereum2","handleAccountsChanged","handleChainChanged","parseInt","reload","on","call","push","_removeListener","_ref","_removeListener2","_ref2","removeListener","handleDisconnect","off","forEach","cleanup","checkConnection","getItem","session","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/alex.codreanu/Desktop/marketplace-dapp/src/contexts/WalletContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { ethers } from 'ethers';\nimport { EthereumProvider } from '@walletconnect/ethereum-provider';\n\nexport type WalletType = 'metamask' | 'walletconnect';\n\ninterface WalletContextType {\n  account: string | null;\n  balance: string | null;\n  chainId: number | null;\n  provider: ethers.BrowserProvider | null;\n  signer: ethers.JsonRpcSigner | null;\n  connectWallet: (walletType?: WalletType) => Promise<void>;\n  disconnectWallet: () => void;\n  switchNetwork: (chainId: number) => Promise<void>;\n  isConnecting: boolean;\n  error: string | null;\n  walletType: WalletType | null;\n}\n\nconst WalletContext = createContext<WalletContextType | undefined>(undefined);\n\nexport const useWallet = () => {\n  const context = useContext(WalletContext);\n  if (!context) {\n    throw new Error('useWallet must be used within a WalletProvider');\n  }\n  return context;\n};\n\ninterface WalletProviderProps {\n  children: ReactNode;\n}\n\nexport const WalletProvider: React.FC<WalletProviderProps> = ({ children }) => {\n  const [account, setAccount] = useState<string | null>(null);\n  const [balance, setBalance] = useState<string | null>(null);\n  const [chainId, setChainId] = useState<number | null>(null);\n  const [provider, setProvider] = useState<ethers.BrowserProvider | null>(null);\n  const [signer, setSigner] = useState<ethers.JsonRpcSigner | null>(null);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [walletType, setWalletType] = useState<WalletType | null>(null);\n  const [walletConnectProvider, setWalletConnectProvider] = useState<any>(null);\n\n  const updateBalance = async (address: string, provider: ethers.BrowserProvider) => {\n    try {\n      const balanceWei = await provider.getBalance(address);\n      const balanceEth = ethers.formatEther(balanceWei);\n      setBalance(parseFloat(balanceEth).toFixed(4));\n    } catch (err) {\n      console.error('Error fetching balance:', err);\n    }\n  };\n\n  const connectWallet = async (walletType: WalletType = 'metamask') => {\n    setIsConnecting(true);\n    setError(null);\n\n    try {\n      if (walletType === 'metamask') {\n        await connectMetaMask();\n      } else if (walletType === 'walletconnect') {\n        await connectWalletConnect();\n      }\n    } catch (err: any) {\n      console.error('Error connecting wallet:', err);\n      setError(err.message || 'Failed to connect wallet');\n    } finally {\n      setIsConnecting(false);\n    }\n  };\n\n  const connectMetaMask = async () => {\n    if (typeof window.ethereum === 'undefined') {\n      throw new Error('Please install MetaMask to use this dApp');\n    }\n\n    const browserProvider = new ethers.BrowserProvider(window.ethereum);\n    const accounts = await browserProvider.send('eth_requestAccounts', []);\n    \n    if (accounts.length === 0) {\n      throw new Error('No accounts found');\n    }\n\n    const userSigner = await browserProvider.getSigner();\n    const network = await browserProvider.getNetwork();\n    \n    setProvider(browserProvider);\n    setSigner(userSigner);\n    setAccount(accounts[0]);\n    setChainId(Number(network.chainId));\n    setWalletType('metamask');\n    \n    await updateBalance(accounts[0], browserProvider);\n  };\n\n  const connectWalletConnect = async () => {\n    try {\n      // Create WalletConnect provider\n      const projectId = process.env.REACT_APP_WALLETCONNECT_PROJECT_ID;\n      if (!projectId) {\n        throw new Error('WalletConnect Project ID not configured. Please set REACT_APP_WALLETCONNECT_PROJECT_ID in your environment variables.');\n      }\n\n      const wcProvider = await EthereumProvider.init({\n        projectId: projectId,\n        chains: [1, 137, 56, 43114, 80002], // Ethereum, Polygon, BSC, Avalanche, Polygon Amoy\n        showQrModal: true,\n        metadata: {\n          name: 'STR Domains Marketplace',\n          description: 'Decentralized marketplace for STR domains',\n          url: window.location.origin,\n          icons: [`${window.location.origin}/logo192.png`]\n        }\n      });\n\n      // Enable session (triggers QR Code modal)\n      await wcProvider.enable();\n\n      // Create ethers provider from WalletConnect provider\n      const browserProvider = new ethers.BrowserProvider(wcProvider);\n      const accounts = await browserProvider.listAccounts();\n      \n      if (accounts.length === 0) {\n        throw new Error('No accounts found');\n      }\n\n      const userSigner = await browserProvider.getSigner();\n      const network = await browserProvider.getNetwork();\n      \n      setProvider(browserProvider);\n      setSigner(userSigner);\n      setAccount(accounts[0].address);\n      setChainId(Number(network.chainId));\n      setWalletType('walletconnect');\n      setWalletConnectProvider(wcProvider);\n      \n      await updateBalance(accounts[0].address, browserProvider);\n    } catch (error: any) {\n      if (error.message?.includes('User rejected')) {\n        throw new Error('Connection cancelled by user');\n      }\n      throw error;\n    }\n  };\n\n  const switchNetwork = async (targetChainId: number) => {\n    if (walletType === 'metamask') {\n      await switchMetaMaskNetwork(targetChainId);\n    } else if (walletType === 'walletconnect') {\n      await switchWalletConnectNetwork(targetChainId);\n    } else {\n      throw new Error('No wallet connected');\n    }\n  };\n\n  const switchMetaMaskNetwork = async (targetChainId: number) => {\n    if (typeof window.ethereum === 'undefined') {\n      throw new Error('MetaMask not detected');\n    }\n\n    const chainIdHex = `0x${targetChainId.toString(16)}`;\n\n    try {\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{ chainId: chainIdHex }],\n      });\n    } catch (switchError: any) {\n      // Chain not added to MetaMask, try to add it\n      if (switchError.code === 4902) {\n        await addMetaMaskNetwork(targetChainId);\n      } else {\n        throw switchError;\n      }\n    }\n  };\n\n  const addMetaMaskNetwork = async (chainId: number) => {\n    const chainIdHex = `0x${chainId.toString(16)}`;\n    const networkConfig = getNetworkConfig(chainId);\n\n    await window.ethereum.request({\n      method: 'wallet_addEthereumChain',\n      params: [networkConfig],\n    });\n  };\n\n  const switchWalletConnectNetwork = async (targetChainId: number) => {\n    if (!walletConnectProvider) {\n      throw new Error('WalletConnect not connected');\n    }\n\n    try {\n      await walletConnectProvider.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{ chainId: `0x${targetChainId.toString(16)}` }],\n      });\n    } catch (switchError: any) {\n      // Chain might not be supported by the wallet\n      if (switchError.code === 4902) {\n        throw new Error('Network not supported by your wallet. Please switch manually.');\n      } else {\n        throw switchError;\n      }\n    }\n  };\n\n  const getNetworkConfig = (chainId: number) => {\n    const chainIdHex = `0x${chainId.toString(16)}`;\n\n    switch (chainId) {\n      case 80002: // Polygon Amoy\n        return {\n          chainId: chainIdHex,\n          chainName: 'Polygon Amoy Testnet',\n          nativeCurrency: {\n            name: 'MATIC',\n            symbol: 'MATIC',\n            decimals: 18,\n          },\n          rpcUrls: ['https://rpc-amoy.polygon.technology'],\n          blockExplorerUrls: ['https://amoy.polygonscan.com/'],\n        };\n      case 137: // Polygon Mainnet\n        return {\n          chainId: chainIdHex,\n          chainName: 'Polygon Mainnet',\n          nativeCurrency: {\n            name: 'MATIC',\n            symbol: 'MATIC',\n            decimals: 18,\n          },\n          rpcUrls: ['https://polygon-rpc.com'],\n          blockExplorerUrls: ['https://polygonscan.com/'],\n        };\n      case 1: // Ethereum Mainnet\n        return {\n          chainId: chainIdHex,\n          chainName: 'Ethereum Mainnet',\n          nativeCurrency: {\n            name: 'Ethereum',\n            symbol: 'ETH',\n            decimals: 18,\n          },\n          rpcUrls: ['https://mainnet.infura.io/v3/'],\n          blockExplorerUrls: ['https://etherscan.io/'],\n        };\n      default:\n        throw new Error(`Unsupported network: ${chainId}`);\n    }\n  };\n\n  const disconnectWallet = async () => {\n    // Disconnect WalletConnect if it's connected\n    if (walletConnectProvider && walletType === 'walletconnect') {\n      try {\n        await walletConnectProvider.disconnect();\n      } catch (error) {\n        console.error('Error disconnecting WalletConnect:', error);\n      }\n    }\n\n    setAccount(null);\n    setBalance(null);\n    setChainId(null);\n    setProvider(null);\n    setSigner(null);\n    setError(null);\n    setWalletType(null);\n    setWalletConnectProvider(null);\n    localStorage.setItem('walletDisconnected', 'true');\n  };\n\n  // Listen for account changes\n  useEffect(() => {\n    const cleanupFunctions: (() => void)[] = [];\n\n    // MetaMask event listeners\n    if (typeof window.ethereum !== 'undefined' && walletType === 'metamask') {\n      const handleAccountsChanged = (accounts: string[]) => {\n        if (accounts.length === 0) {\n          disconnectWallet();\n        } else if (accounts[0] !== account) {\n          setAccount(accounts[0]);\n          if (provider) {\n            updateBalance(accounts[0], provider);\n          }\n        }\n      };\n\n      const handleChainChanged = (chainIdHex: string) => {\n        setChainId(parseInt(chainIdHex, 16));\n        window.location.reload();\n      };\n\n      window.ethereum.on?.('accountsChanged', handleAccountsChanged);\n      window.ethereum.on?.('chainChanged', handleChainChanged);\n\n      cleanupFunctions.push(() => {\n        if (typeof window.ethereum !== 'undefined') {\n          (window.ethereum as any).removeListener?.('accountsChanged', handleAccountsChanged);\n          (window.ethereum as any).removeListener?.('chainChanged', handleChainChanged);\n        }\n      });\n    }\n\n    // WalletConnect event listeners\n    if (walletConnectProvider && walletType === 'walletconnect') {\n      const handleAccountsChanged = (accounts: string[]) => {\n        if (accounts.length === 0) {\n          disconnectWallet();\n        } else if (accounts[0] !== account) {\n          setAccount(accounts[0]);\n          if (provider) {\n            updateBalance(accounts[0], provider);\n          }\n        }\n      };\n\n      const handleChainChanged = (chainId: number) => {\n        setChainId(chainId);\n        window.location.reload();\n      };\n\n      const handleDisconnect = () => {\n        disconnectWallet();\n      };\n\n      walletConnectProvider.on('accountsChanged', handleAccountsChanged);\n      walletConnectProvider.on('chainChanged', handleChainChanged);\n      walletConnectProvider.on('disconnect', handleDisconnect);\n\n      cleanupFunctions.push(() => {\n        walletConnectProvider.off('accountsChanged', handleAccountsChanged);\n        walletConnectProvider.off('chainChanged', handleChainChanged);\n        walletConnectProvider.off('disconnect', handleDisconnect);\n      });\n    }\n\n    return () => {\n      cleanupFunctions.forEach(cleanup => cleanup());\n    };\n  }, [account, provider, walletType, walletConnectProvider]);\n\n  // Auto-connect if previously connected\n  useEffect(() => {\n    const checkConnection = async () => {\n      if (localStorage.getItem('walletDisconnected') !== 'true') {\n        // Check MetaMask first\n        if (typeof window.ethereum !== 'undefined') {\n          try {\n            const browserProvider = new ethers.BrowserProvider(window.ethereum);\n            const accounts = await browserProvider.send('eth_accounts', []);\n            \n            if (accounts.length > 0) {\n              const userSigner = await browserProvider.getSigner();\n              const network = await browserProvider.getNetwork();\n              \n              setProvider(browserProvider);\n              setSigner(userSigner);\n              setAccount(accounts[0]);\n              setChainId(Number(network.chainId));\n              setWalletType('metamask');\n              \n              await updateBalance(accounts[0], browserProvider);\n              return;\n            }\n          } catch (err) {\n            console.error('Error checking MetaMask connection:', err);\n          }\n        }\n\n        // Check WalletConnect session\n        try {\n          const projectId = process.env.REACT_APP_WALLETCONNECT_PROJECT_ID;\n          if (projectId) {\n            const wcProvider = await EthereumProvider.init({\n              projectId: projectId,\n              chains: [1, 137, 56, 43114],\n              showQrModal: false,\n              metadata: {\n                name: 'STR Domains Marketplace',\n                description: 'Decentralized marketplace for STR domains',\n                url: window.location.origin,\n                icons: [`${window.location.origin}/logo192.png`]\n              }\n            });\n\n            if (wcProvider.session) {\n              const browserProvider = new ethers.BrowserProvider(wcProvider);\n              const accounts = await browserProvider.listAccounts();\n              \n              if (accounts.length > 0) {\n                const userSigner = await browserProvider.getSigner();\n                const network = await browserProvider.getNetwork();\n                \n                setProvider(browserProvider);\n                setSigner(userSigner);\n                setAccount(accounts[0].address);\n                setChainId(Number(network.chainId));\n                setWalletType('walletconnect');\n                setWalletConnectProvider(wcProvider);\n                \n                await updateBalance(accounts[0].address, browserProvider);\n              }\n            }\n          }\n        } catch (err) {\n          console.error('Error checking WalletConnect connection:', err);\n        }\n      }\n    };\n\n    checkConnection();\n  }, []);\n\n  const value: WalletContextType = {\n    account,\n    balance,\n    chainId,\n    provider,\n    signer,\n    connectWallet,\n    disconnectWallet,\n    switchNetwork,\n    isConnecting,\n    error,\n    walletType,\n  };\n\n  return <WalletContext.Provider value={value}>{children}</WalletContext.Provider>;\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}