{"ast":null,"code":"import _objectSpread from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { ConstantsUtil as CommonConstantsUtil } from '@reown/appkit-common';\nimport { CoreHelperUtil } from '@reown/appkit-controllers';\nimport { ConnectorUtil } from '@reown/appkit-scaffold-ui/utils';\nimport { HelpersUtil } from '@reown/appkit-utils';\nimport { BitcoinConstantsUtil } from '@reown/appkit-utils/bitcoin';\nimport { WcHelpersUtil } from '../utils/HelpersUtil.js';\n// -- Class ------------------------------------------------------------------\nexport class ConnectionManager {\n  constructor(params) {\n    this.namespace = params.namespace;\n  }\n  async syncConnections(params) {\n    switch (this.namespace) {\n      case CommonConstantsUtil.CHAIN.EVM:\n        await this.syncEVMConnections(params);\n        break;\n      case CommonConstantsUtil.CHAIN.SOLANA:\n        await this.syncSolanaConnections(params);\n        break;\n      case CommonConstantsUtil.CHAIN.BITCOIN:\n        await this.syncBitcoinConnections(params);\n        break;\n      default:\n        throw new Error(\"Unsupported chain namespace: \".concat(this.namespace));\n    }\n  }\n  async syncEVMConnections(_ref) {\n    let {\n      connectors,\n      caipNetworks,\n      universalProvider,\n      onConnection,\n      onListenProvider\n    } = _ref;\n    await Promise.all(connectors.filter(c => {\n      const {\n        hasDisconnected,\n        hasConnected\n      } = HelpersUtil.getConnectorStorageInfo(c.id, this.namespace);\n      return !hasDisconnected && hasConnected;\n    }).map(async connector => {\n      if (connector.id === CommonConstantsUtil.CONNECTOR_ID.WALLET_CONNECT) {\n        const accounts = WcHelpersUtil.getWalletConnectAccounts(universalProvider, this.namespace);\n        const caipNetwork = caipNetworks.find(n => {\n          var _accounts$;\n          return n.chainNamespace === this.namespace && n.id.toString() === ((_accounts$ = accounts[0]) === null || _accounts$ === void 0 || (_accounts$ = _accounts$.chainId) === null || _accounts$ === void 0 ? void 0 : _accounts$.toString());\n        });\n        if (accounts.length > 0) {\n          onConnection({\n            connectorId: connector.id,\n            accounts: accounts.map(account => ({\n              address: account.address\n            })),\n            caipNetwork\n          });\n        }\n      } else {\n        const {\n          accounts,\n          chainId\n        } = await ConnectorUtil.fetchProviderData(connector);\n        if (accounts.length > 0 && chainId) {\n          const caipNetwork = caipNetworks.find(n => n.chainNamespace === this.namespace && n.id.toString() === chainId.toString());\n          onConnection({\n            connectorId: connector.id,\n            accounts: accounts.map(address => ({\n              address\n            })),\n            caipNetwork\n          });\n          if (connector.provider && connector.id !== CommonConstantsUtil.CONNECTOR_ID.AUTH && connector.id !== CommonConstantsUtil.CONNECTOR_ID.WALLET_CONNECT) {\n            onListenProvider(connector.id, connector.provider);\n          }\n        }\n      }\n    }));\n  }\n  async syncSolanaConnections(_ref2) {\n    let {\n      connectors,\n      caipNetwork,\n      universalProvider,\n      onConnection,\n      onListenProvider\n    } = _ref2;\n    await Promise.all(connectors.filter(c => {\n      const {\n        hasDisconnected,\n        hasConnected\n      } = HelpersUtil.getConnectorStorageInfo(c.id, this.namespace);\n      return !hasDisconnected && hasConnected;\n    }).map(async connector => {\n      if (connector.id === CommonConstantsUtil.CONNECTOR_ID.WALLET_CONNECT) {\n        const accounts = WcHelpersUtil.getWalletConnectAccounts(universalProvider, this.namespace);\n        if (accounts.length > 0) {\n          onConnection({\n            connectorId: connector.id,\n            accounts: accounts.map(account => ({\n              address: account.address\n            })),\n            caipNetwork\n          });\n        }\n      } else {\n        const address = await connector.connect({\n          chainId: caipNetwork === null || caipNetwork === void 0 ? void 0 : caipNetwork.id\n        });\n        if (address) {\n          onConnection({\n            connectorId: connector.id,\n            accounts: [{\n              address\n            }],\n            caipNetwork\n          });\n          onListenProvider(connector.id, connector.provider);\n        }\n      }\n    }));\n  }\n  async syncBitcoinConnections(_ref3) {\n    let {\n      connectors,\n      caipNetwork,\n      universalProvider,\n      onConnection,\n      onListenProvider\n    } = _ref3;\n    await Promise.all(connectors.filter(c => {\n      const {\n        hasDisconnected,\n        hasConnected\n      } = HelpersUtil.getConnectorStorageInfo(c.id, this.namespace);\n      return !hasDisconnected && hasConnected;\n    }).map(async connector => {\n      if (connector.id === CommonConstantsUtil.CONNECTOR_ID.WALLET_CONNECT) {\n        const accounts = WcHelpersUtil.getWalletConnectAccounts(universalProvider, this.namespace);\n        if (accounts.length > 0) {\n          onConnection({\n            connectorId: connector.id,\n            accounts: accounts.map(account => ({\n              address: account.address\n            })),\n            caipNetwork\n          });\n        }\n        return;\n      }\n      const address = await connector.connect();\n      const addresses = await connector.getAccountAddresses();\n      let accounts = addresses === null || addresses === void 0 ? void 0 : addresses.map(a => CoreHelperUtil.createAccount(CommonConstantsUtil.CHAIN.BITCOIN, a.address, a.purpose || 'payment', a.publicKey, a.path));\n      if (accounts && accounts.length > 1) {\n        var _accounts$BitcoinCons, _accounts$BitcoinCons2, _accounts$BitcoinCons3, _accounts$BitcoinCons4, _accounts$BitcoinCons5, _accounts$BitcoinCons6, _accounts$BitcoinCons7, _accounts$BitcoinCons8, _accounts$BitcoinCons9, _accounts$BitcoinCons0, _accounts$BitcoinCons1, _accounts$BitcoinCons10;\n        accounts = [{\n          namespace: CommonConstantsUtil.CHAIN.BITCOIN,\n          publicKey: (_accounts$BitcoinCons = (_accounts$BitcoinCons2 = accounts[BitcoinConstantsUtil.ACCOUNT_INDEXES.PAYMENT]) === null || _accounts$BitcoinCons2 === void 0 ? void 0 : _accounts$BitcoinCons2.publicKey) !== null && _accounts$BitcoinCons !== void 0 ? _accounts$BitcoinCons : '',\n          path: (_accounts$BitcoinCons3 = (_accounts$BitcoinCons4 = accounts[BitcoinConstantsUtil.ACCOUNT_INDEXES.PAYMENT]) === null || _accounts$BitcoinCons4 === void 0 ? void 0 : _accounts$BitcoinCons4.path) !== null && _accounts$BitcoinCons3 !== void 0 ? _accounts$BitcoinCons3 : '',\n          address: (_accounts$BitcoinCons5 = (_accounts$BitcoinCons6 = accounts[BitcoinConstantsUtil.ACCOUNT_INDEXES.PAYMENT]) === null || _accounts$BitcoinCons6 === void 0 ? void 0 : _accounts$BitcoinCons6.address) !== null && _accounts$BitcoinCons5 !== void 0 ? _accounts$BitcoinCons5 : '',\n          type: 'payment'\n        }, {\n          namespace: CommonConstantsUtil.CHAIN.BITCOIN,\n          publicKey: (_accounts$BitcoinCons7 = (_accounts$BitcoinCons8 = accounts[BitcoinConstantsUtil.ACCOUNT_INDEXES.ORDINAL]) === null || _accounts$BitcoinCons8 === void 0 ? void 0 : _accounts$BitcoinCons8.publicKey) !== null && _accounts$BitcoinCons7 !== void 0 ? _accounts$BitcoinCons7 : '',\n          path: (_accounts$BitcoinCons9 = (_accounts$BitcoinCons0 = accounts[BitcoinConstantsUtil.ACCOUNT_INDEXES.ORDINAL]) === null || _accounts$BitcoinCons0 === void 0 ? void 0 : _accounts$BitcoinCons0.path) !== null && _accounts$BitcoinCons9 !== void 0 ? _accounts$BitcoinCons9 : '',\n          address: (_accounts$BitcoinCons1 = (_accounts$BitcoinCons10 = accounts[BitcoinConstantsUtil.ACCOUNT_INDEXES.ORDINAL]) === null || _accounts$BitcoinCons10 === void 0 ? void 0 : _accounts$BitcoinCons10.address) !== null && _accounts$BitcoinCons1 !== void 0 ? _accounts$BitcoinCons1 : '',\n          type: 'ordinal'\n        }];\n      }\n      const chain = connector.chains.find(c => c.id === (caipNetwork === null || caipNetwork === void 0 ? void 0 : caipNetwork.id)) || connector.chains[0];\n      if (!chain) {\n        throw new Error('The connector does not support any of the requested chains');\n      }\n      if (address) {\n        onListenProvider(connector.id, connector.provider);\n        onConnection({\n          connectorId: connector.id,\n          accounts: accounts.map(a => ({\n            address: a.address,\n            type: a.type,\n            publicKey: a.publicKey,\n            path: a.path\n          })),\n          caipNetwork\n        });\n      }\n    }));\n  }\n  /**\n   * Gets a connection based on provided parameters.\n   * If connectorId is provided, returns connection for that specific connector.\n   * Otherwise, returns the first available valid connection.\n   *\n   * @param params - Connection parameters\n   * @param params.address - Optional address to filter by\n   * @param params.connectorId - Optional connector ID to filter by\n   * @param params.connections - List of available connections\n   * @param params.connectors - List of available connectors\n   * @returns Connection or null if none found\n   */\n  getConnection(_ref4) {\n    let {\n      address,\n      connectorId,\n      connections,\n      connectors\n    } = _ref4;\n    if (connectorId) {\n      const connection = connections.find(c => HelpersUtil.isLowerCaseMatch(c.connectorId, connectorId));\n      if (!connection) {\n        return null;\n      }\n      const connector = connectors.find(c => HelpersUtil.isLowerCaseMatch(c.id, connection.connectorId));\n      const account = address ? connection.accounts.find(a => HelpersUtil.isLowerCaseMatch(a.address, address)) : connection.accounts[0];\n      return _objectSpread(_objectSpread({}, connection), {}, {\n        account,\n        connector\n      });\n    }\n    const validConnection = connections.find(c => c.accounts.length > 0 && connectors.some(conn => HelpersUtil.isLowerCaseMatch(conn.id, c.connectorId)));\n    if (validConnection) {\n      const [account] = validConnection.accounts;\n      const connector = connectors.find(c => HelpersUtil.isLowerCaseMatch(c.id, validConnection.connectorId));\n      return _objectSpread(_objectSpread({}, validConnection), {}, {\n        account,\n        connector\n      });\n    }\n    return null;\n  }\n}","map":{"version":3,"names":["ConstantsUtil","CommonConstantsUtil","CoreHelperUtil","ConnectorUtil","HelpersUtil","BitcoinConstantsUtil","WcHelpersUtil","ConnectionManager","constructor","params","namespace","syncConnections","CHAIN","EVM","syncEVMConnections","SOLANA","syncSolanaConnections","BITCOIN","syncBitcoinConnections","Error","concat","_ref","connectors","caipNetworks","universalProvider","onConnection","onListenProvider","Promise","all","filter","c","hasDisconnected","hasConnected","getConnectorStorageInfo","id","map","connector","CONNECTOR_ID","WALLET_CONNECT","accounts","getWalletConnectAccounts","caipNetwork","find","n","_accounts$","chainNamespace","toString","chainId","length","connectorId","account","address","fetchProviderData","provider","AUTH","_ref2","connect","_ref3","addresses","getAccountAddresses","a","createAccount","purpose","publicKey","path","_accounts$BitcoinCons","_accounts$BitcoinCons2","_accounts$BitcoinCons3","_accounts$BitcoinCons4","_accounts$BitcoinCons5","_accounts$BitcoinCons6","_accounts$BitcoinCons7","_accounts$BitcoinCons8","_accounts$BitcoinCons9","_accounts$BitcoinCons0","_accounts$BitcoinCons1","_accounts$BitcoinCons10","ACCOUNT_INDEXES","PAYMENT","type","ORDINAL","chain","chains","getConnection","_ref4","connections","connection","isLowerCaseMatch","_objectSpread","validConnection","some","conn"],"sources":["../../../../src/connections/ConnectionManager.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}