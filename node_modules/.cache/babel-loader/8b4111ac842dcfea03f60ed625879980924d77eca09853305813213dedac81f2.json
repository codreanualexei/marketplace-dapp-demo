{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { LitElement, html } from 'lit';\nimport { state } from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport { ApiController, ConnectorController, CoreHelperUtil, OptionsController } from '@reown/appkit-controllers';\nimport { customElement } from '@reown/appkit-ui';\nimport '@reown/appkit-ui/wui-card-select-loader';\nimport '@reown/appkit-ui/wui-grid';\nimport { WalletUtil } from '../../utils/WalletUtil.js';\nimport '../w3m-all-wallets-list-item/index.js';\nimport styles from './styles.js';\nconst PAGINATOR_ID = 'local-paginator';\nlet W3mAllWalletsList = class W3mAllWalletsList extends LitElement {\n  constructor() {\n    super();\n    this.unsubscribe = [];\n    this.paginationObserver = undefined;\n    this.loading = !ApiController.state.wallets.length;\n    this.wallets = ApiController.state.wallets;\n    this.recommended = ApiController.state.recommended;\n    this.featured = ApiController.state.featured;\n    this.filteredWallets = ApiController.state.filteredWallets;\n    this.mobileFullScreen = OptionsController.state.enableMobileFullScreen;\n    this.unsubscribe.push(...[ApiController.subscribeKey('wallets', val => this.wallets = val), ApiController.subscribeKey('recommended', val => this.recommended = val), ApiController.subscribeKey('featured', val => this.featured = val), ApiController.subscribeKey('filteredWallets', val => this.filteredWallets = val)]);\n  }\n  firstUpdated() {\n    this.initialFetch();\n    this.createPaginationObserver();\n  }\n  disconnectedCallback() {\n    this.unsubscribe.forEach(unsubscribe => unsubscribe());\n    this.paginationObserver?.disconnect();\n  }\n  render() {\n    if (this.mobileFullScreen) {\n      this.setAttribute('data-mobile-fullscreen', 'true');\n    }\n    return html`\n      <wui-grid\n        data-scroll=${!this.loading}\n        .padding=${['0', '3', '3', '3']}\n        gap=\"2\"\n        justifyContent=\"space-between\"\n      >\n        ${this.loading ? this.shimmerTemplate(16) : this.walletsTemplate()}\n        ${this.paginationLoaderTemplate()}\n      </wui-grid>\n    `;\n  }\n  async initialFetch() {\n    this.loading = true;\n    const gridEl = this.shadowRoot?.querySelector('wui-grid');\n    if (gridEl) {\n      await ApiController.fetchWalletsByPage({\n        page: 1\n      });\n      await gridEl.animate([{\n        opacity: 1\n      }, {\n        opacity: 0\n      }], {\n        duration: 200,\n        fill: 'forwards',\n        easing: 'ease'\n      }).finished;\n      this.loading = false;\n      gridEl.animate([{\n        opacity: 0\n      }, {\n        opacity: 1\n      }], {\n        duration: 200,\n        fill: 'forwards',\n        easing: 'ease'\n      });\n    }\n  }\n  shimmerTemplate(items, id) {\n    return [...Array(items)].map(() => html`\n        <wui-card-select-loader type=\"wallet\" id=${ifDefined(id)}></wui-card-select-loader>\n      `);\n  }\n  getWallets() {\n    const wallets = [...this.featured, ...this.recommended];\n    if (this.filteredWallets?.length > 0) {\n      wallets.push(...this.filteredWallets);\n    } else {\n      wallets.push(...this.wallets);\n    }\n    const uniqueWallets = CoreHelperUtil.uniqueBy(wallets, 'id');\n    const walletsWithInstalled = WalletUtil.markWalletsAsInstalled(uniqueWallets);\n    return WalletUtil.markWalletsWithDisplayIndex(walletsWithInstalled);\n  }\n  walletsTemplate() {\n    const wallets = this.getWallets();\n    return wallets.map((wallet, index) => html`\n        <w3m-all-wallets-list-item\n          data-testid=\"wallet-search-item-${wallet.id}\"\n          @click=${() => this.onConnectWallet(wallet)}\n          .wallet=${wallet}\n          explorerId=${wallet.id}\n          certified=${this.badge === 'certified'}\n          displayIndex=${index}\n        ></w3m-all-wallets-list-item>\n      `);\n  }\n  paginationLoaderTemplate() {\n    const {\n      wallets,\n      recommended,\n      featured,\n      count,\n      mobileFilteredOutWalletsLength\n    } = ApiController.state;\n    const columns = window.innerWidth < 352 ? 3 : 4;\n    const currentWallets = wallets.length + recommended.length;\n    const minimumRows = Math.ceil(currentWallets / columns);\n    let shimmerCount = minimumRows * columns - currentWallets + columns;\n    shimmerCount -= wallets.length ? featured.length % columns : 0;\n    if (count === 0 && featured.length > 0) {\n      return null;\n    }\n    if (count === 0 || [...featured, ...wallets, ...recommended].length < count - (mobileFilteredOutWalletsLength ?? 0)) {\n      return this.shimmerTemplate(shimmerCount, PAGINATOR_ID);\n    }\n    return null;\n  }\n  createPaginationObserver() {\n    const loaderEl = this.shadowRoot?.querySelector(`#${PAGINATOR_ID}`);\n    if (loaderEl) {\n      this.paginationObserver = new IntersectionObserver(([element]) => {\n        if (element?.isIntersecting && !this.loading) {\n          const {\n            page,\n            count,\n            wallets\n          } = ApiController.state;\n          if (wallets.length < count) {\n            ApiController.fetchWalletsByPage({\n              page: page + 1\n            });\n          }\n        }\n      });\n      this.paginationObserver.observe(loaderEl);\n    }\n  }\n  onConnectWallet(wallet) {\n    ConnectorController.selectWalletConnector(wallet);\n  }\n};\nW3mAllWalletsList.styles = styles;\n__decorate([state()], W3mAllWalletsList.prototype, \"loading\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"wallets\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"recommended\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"featured\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"filteredWallets\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"badge\", void 0);\n__decorate([state()], W3mAllWalletsList.prototype, \"mobileFullScreen\", void 0);\nW3mAllWalletsList = __decorate([customElement('w3m-all-wallets-list')], W3mAllWalletsList);\nexport { W3mAllWalletsList };","map":{"version":3,"names":["LitElement","html","state","ifDefined","ApiController","ConnectorController","CoreHelperUtil","OptionsController","customElement","WalletUtil","styles","PAGINATOR_ID","W3mAllWalletsList","constructor","unsubscribe","paginationObserver","undefined","loading","wallets","length","recommended","featured","filteredWallets","mobileFullScreen","enableMobileFullScreen","push","subscribeKey","val","firstUpdated","initialFetch","createPaginationObserver","disconnectedCallback","forEach","disconnect","render","setAttribute","shimmerTemplate","walletsTemplate","paginationLoaderTemplate","gridEl","shadowRoot","querySelector","fetchWalletsByPage","page","animate","opacity","duration","fill","easing","finished","items","id","Array","map","getWallets","uniqueWallets","uniqueBy","walletsWithInstalled","markWalletsAsInstalled","markWalletsWithDisplayIndex","wallet","index","onConnectWallet","badge","count","mobileFilteredOutWalletsLength","columns","window","innerWidth","currentWallets","minimumRows","Math","ceil","shimmerCount","loaderEl","IntersectionObserver","element","isIntersecting","observe","selectWalletConnector","__decorate"],"sources":["../../../../../src/partials/w3m-all-wallets-list/index.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}