{"ast":null,"code":"import _objectSpread from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { hexToBigInt } from '../utils/encoding/fromHex.js';\nimport { defineBlock } from '../utils/formatters/block.js';\nimport { defineTransaction, formatTransaction } from '../utils/formatters/transaction.js';\nimport { defineTransactionRequest } from '../utils/formatters/transactionRequest.js';\nimport { isCIP64 } from './utils.js';\nexport const formatters = {\n  block: /*#__PURE__*/defineBlock({\n    format(args) {\n      var _args$transactions;\n      const transactions = (_args$transactions = args.transactions) === null || _args$transactions === void 0 ? void 0 : _args$transactions.map(transaction => {\n        if (typeof transaction === 'string') return transaction;\n        const formatted = formatTransaction(transaction);\n        return _objectSpread(_objectSpread(_objectSpread({}, formatted), transaction.gatewayFee ? {\n          gatewayFee: hexToBigInt(transaction.gatewayFee),\n          gatewayFeeRecipient: transaction.gatewayFeeRecipient\n        } : {}), {}, {\n          feeCurrency: transaction.feeCurrency\n        });\n      });\n      return {\n        transactions\n      };\n    }\n  }),\n  transaction: /*#__PURE__*/defineTransaction({\n    format(args) {\n      if (args.type === '0x7e') return {\n        isSystemTx: args.isSystemTx,\n        mint: args.mint ? hexToBigInt(args.mint) : undefined,\n        sourceHash: args.sourceHash,\n        type: 'deposit'\n      };\n      const transaction = {\n        feeCurrency: args.feeCurrency\n      };\n      if (args.type === '0x7b') transaction.type = 'cip64';else {\n        if (args.type === '0x7c') transaction.type = 'cip42';\n        transaction.gatewayFee = args.gatewayFee ? hexToBigInt(args.gatewayFee) : null;\n        transaction.gatewayFeeRecipient = args.gatewayFeeRecipient;\n      }\n      return transaction;\n    }\n  }),\n  transactionRequest: /*#__PURE__*/defineTransactionRequest({\n    format(args) {\n      const request = {};\n      if (args.feeCurrency) request.feeCurrency = args.feeCurrency;\n      if (isCIP64(args)) request.type = '0x7b';\n      return request;\n    }\n  })\n};","map":{"version":3,"names":["hexToBigInt","defineBlock","defineTransaction","formatTransaction","defineTransactionRequest","isCIP64","formatters","block","format","args","_args$transactions","transactions","map","transaction","formatted","_objectSpread","gatewayFee","gatewayFeeRecipient","feeCurrency","type","isSystemTx","mint","undefined","sourceHash","transactionRequest","request"],"sources":["/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/viem/celo/formatters.ts"],"sourcesContent":["import type { ChainFormatters } from '../types/chain.js'\nimport type { RpcTransaction } from '../types/rpc.js'\nimport { hexToBigInt } from '../utils/encoding/fromHex.js'\nimport { defineBlock } from '../utils/formatters/block.js'\nimport {\n  defineTransaction,\n  formatTransaction,\n} from '../utils/formatters/transaction.js'\nimport { defineTransactionRequest } from '../utils/formatters/transactionRequest.js'\nimport type {\n  CeloBlock,\n  CeloRpcBlock,\n  CeloRpcTransaction,\n  CeloRpcTransactionRequest,\n  CeloTransaction,\n  CeloTransactionRequest,\n} from './types.js'\nimport { isCIP64 } from './utils.js'\n\nexport const formatters = {\n  block: /*#__PURE__*/ defineBlock({\n    format(args: CeloRpcBlock): CeloBlock {\n      const transactions = args.transactions?.map((transaction) => {\n        if (typeof transaction === 'string') return transaction\n        const formatted = formatTransaction(transaction as RpcTransaction)\n        return {\n          ...formatted,\n          ...(transaction.gatewayFee\n            ? {\n                gatewayFee: hexToBigInt(transaction.gatewayFee),\n                gatewayFeeRecipient: transaction.gatewayFeeRecipient,\n              }\n            : {}),\n          feeCurrency: transaction.feeCurrency,\n        }\n      })\n      return {\n        transactions,\n      } as CeloBlock\n    },\n  }),\n  transaction: /*#__PURE__*/ defineTransaction({\n    format(args: CeloRpcTransaction): CeloTransaction {\n      if (args.type === '0x7e')\n        return {\n          isSystemTx: args.isSystemTx,\n          mint: args.mint ? hexToBigInt(args.mint) : undefined,\n          sourceHash: args.sourceHash,\n          type: 'deposit',\n        } as CeloTransaction\n\n      const transaction = { feeCurrency: args.feeCurrency } as CeloTransaction\n\n      if (args.type === '0x7b') transaction.type = 'cip64'\n      else {\n        if (args.type === '0x7c') transaction.type = 'cip42'\n\n        transaction.gatewayFee = args.gatewayFee\n          ? hexToBigInt(args.gatewayFee)\n          : null\n        transaction.gatewayFeeRecipient = args.gatewayFeeRecipient\n      }\n\n      return transaction\n    },\n  }),\n  transactionRequest: /*#__PURE__*/ defineTransactionRequest({\n    format(args: CeloTransactionRequest): CeloRpcTransactionRequest {\n      const request = {} as CeloRpcTransactionRequest\n\n      if (args.feeCurrency) request.feeCurrency = args.feeCurrency\n      if (isCIP64(args)) request.type = '0x7b'\n\n      return request\n    },\n  }),\n} as const satisfies ChainFormatters\n"],"mappings":";AAEA,SAASA,WAAW,QAAQ,8BAA8B;AAC1D,SAASC,WAAW,QAAQ,8BAA8B;AAC1D,SACEC,iBAAiB,EACjBC,iBAAiB,QACZ,oCAAoC;AAC3C,SAASC,wBAAwB,QAAQ,2CAA2C;AASpF,SAASC,OAAO,QAAQ,YAAY;AAEpC,OAAO,MAAMC,UAAU,GAAG;EACxBC,KAAK,EAAE,aAAcN,WAAW,CAAC;IAC/BO,MAAMA,CAACC,IAAkB;MAAA,IAAAC,kBAAA;MACvB,MAAMC,YAAY,IAAAD,kBAAA,GAAGD,IAAI,CAACE,YAAY,cAAAD,kBAAA,uBAAjBA,kBAAA,CAAmBE,GAAG,CAAEC,WAAW,IAAI;QAC1D,IAAI,OAAOA,WAAW,KAAK,QAAQ,EAAE,OAAOA,WAAW;QACvD,MAAMC,SAAS,GAAGX,iBAAiB,CAACU,WAA6B,CAAC;QAClE,OAAAE,aAAA,CAAAA,aAAA,CAAAA,aAAA,KACKD,SAAS,GACRD,WAAW,CAACG,UAAU,GACtB;UACEA,UAAU,EAAEhB,WAAW,CAACa,WAAW,CAACG,UAAU,CAAC;UAC/CC,mBAAmB,EAAEJ,WAAW,CAACI;SAClC,GACD,EAAE;UACNC,WAAW,EAAEL,WAAW,CAACK;QAAW;MAExC,CAAC,CAAC;MACF,OAAO;QACLP;OACY;IAChB;GACD,CAAC;EACFE,WAAW,EAAE,aAAcX,iBAAiB,CAAC;IAC3CM,MAAMA,CAACC,IAAwB;MAC7B,IAAIA,IAAI,CAACU,IAAI,KAAK,MAAM,EACtB,OAAO;QACLC,UAAU,EAAEX,IAAI,CAACW,UAAU;QAC3BC,IAAI,EAAEZ,IAAI,CAACY,IAAI,GAAGrB,WAAW,CAACS,IAAI,CAACY,IAAI,CAAC,GAAGC,SAAS;QACpDC,UAAU,EAAEd,IAAI,CAACc,UAAU;QAC3BJ,IAAI,EAAE;OACY;MAEtB,MAAMN,WAAW,GAAG;QAAEK,WAAW,EAAET,IAAI,CAACS;MAAW,CAAqB;MAExE,IAAIT,IAAI,CAACU,IAAI,KAAK,MAAM,EAAEN,WAAW,CAACM,IAAI,GAAG,OAAO,MAC/C;QACH,IAAIV,IAAI,CAACU,IAAI,KAAK,MAAM,EAAEN,WAAW,CAACM,IAAI,GAAG,OAAO;QAEpDN,WAAW,CAACG,UAAU,GAAGP,IAAI,CAACO,UAAU,GACpChB,WAAW,CAACS,IAAI,CAACO,UAAU,CAAC,GAC5B,IAAI;QACRH,WAAW,CAACI,mBAAmB,GAAGR,IAAI,CAACQ,mBAAmB;MAC5D;MAEA,OAAOJ,WAAW;IACpB;GACD,CAAC;EACFW,kBAAkB,EAAE,aAAcpB,wBAAwB,CAAC;IACzDI,MAAMA,CAACC,IAA4B;MACjC,MAAMgB,OAAO,GAAG,EAA+B;MAE/C,IAAIhB,IAAI,CAACS,WAAW,EAAEO,OAAO,CAACP,WAAW,GAAGT,IAAI,CAACS,WAAW;MAC5D,IAAIb,OAAO,CAACI,IAAI,CAAC,EAAEgB,OAAO,CAACN,IAAI,GAAG,MAAM;MAExC,OAAOM,OAAO;IAChB;GACD;CACiC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}