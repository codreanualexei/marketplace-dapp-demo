{"ast":null,"code":"import UniversalProvider from '@walletconnect/universal-provider';\nimport { ConstantsUtil as CommonConstantsUtil, UserRejectedRequestError } from '@reown/appkit-common';\nimport { ChainController, ConnectorController, CoreHelperUtil, getPreferredAccountType } from '@reown/appkit-controllers';\nimport '@reown/appkit-controllers';\nimport { HelpersUtil, PresetsUtil } from '@reown/appkit-utils';\nimport { EthersHelpersUtil } from '@reown/appkit-utils/ethers';\nimport { ConnectionManager } from '../connections/ConnectionManager.js';\nimport { WalletConnectConnector } from '../connectors/WalletConnectConnector.js';\nimport { WcHelpersUtil } from '../utils/index.js';\nconst IGNORED_CONNECTOR_IDS_FOR_LISTENER = [CommonConstantsUtil.CONNECTOR_ID.AUTH, CommonConstantsUtil.CONNECTOR_ID.WALLET_CONNECT];\n/**\n * Abstract class representing a chain adapter blueprint.\n * @template Connector - The type of connector extending ChainAdapterConnector\n */\nexport class AdapterBlueprint {\n  /**\n   * Creates an instance of AdapterBlueprint.\n   * @param {AdapterBlueprint.Params} params - The parameters for initializing the adapter\n   */\n  constructor(params) {\n    this.availableConnectors = [];\n    this.availableConnections = [];\n    this.providerHandlers = {};\n    this.eventListeners = new Map();\n    this.getCaipNetworks = namespace => ChainController.getCaipNetworks(namespace);\n    this.getConnectorId = namespace => ConnectorController.getConnectorId(namespace);\n    if (params) {\n      this.construct(params);\n    }\n    if (params !== null && params !== void 0 && params.namespace) {\n      this.connectionManager = new ConnectionManager({\n        namespace: params.namespace\n      });\n    }\n  }\n  /**\n   * Initializes the adapter with the given parameters.\n   * @param {AdapterBlueprint.Params} params - The parameters for initializing the adapter\n   */\n  construct(params) {\n    this.projectId = params.projectId;\n    this.namespace = params.namespace;\n    this.adapterType = params.adapterType;\n  }\n  /**\n   * Gets the available connectors.\n   * @returns {Connector[]} An array of available connectors\n   */\n  get connectors() {\n    return this.availableConnectors;\n  }\n  /**\n   * Gets the available connections.\n   * @returns {Connection[]} An array of available connections\n   */\n  get connections() {\n    return this.availableConnections;\n  }\n  /**\n   * Gets the supported networks.\n   * @returns {CaipNetwork[]} An array of supported networks\n   */\n  get networks() {\n    return this.getCaipNetworks(this.namespace);\n  }\n  /**\n   * Handles the auth connected event.\n   * @param {W3mFrameTypes.Responses['FrameGetUserResponse']} user - The user response\n   */\n  onAuthConnected(_ref) {\n    let {\n      accounts,\n      chainId\n    } = _ref;\n    const caipNetwork = this.getCaipNetworks().filter(n => n.chainNamespace === this.namespace).find(n => n.id.toString() === (chainId === null || chainId === void 0 ? void 0 : chainId.toString()));\n    if (accounts && caipNetwork) {\n      this.addConnection({\n        connectorId: CommonConstantsUtil.CONNECTOR_ID.AUTH,\n        accounts,\n        caipNetwork\n      });\n    }\n  }\n  /**\n   * Sets the auth provider.\n   * @param {W3mFrameProvider} authProvider - The auth provider instance\n   */\n  setAuthProvider(authProvider) {\n    authProvider.onConnect(this.onAuthConnected.bind(this));\n    authProvider.onSocialConnected(this.onAuthConnected.bind(this));\n    this.addConnector({\n      id: CommonConstantsUtil.CONNECTOR_ID.AUTH,\n      type: 'AUTH',\n      name: CommonConstantsUtil.CONNECTOR_NAMES.AUTH,\n      provider: authProvider,\n      imageId: PresetsUtil.ConnectorImageIds[CommonConstantsUtil.CONNECTOR_ID.AUTH],\n      chain: this.namespace,\n      chains: []\n    });\n  }\n  /**\n   * Adds one or more connectors to the available connectors list.\n   * @param {...Connector} connectors - The connectors to add\n   */\n  addConnector() {\n    const connectorsAdded = new Set();\n    for (var _len = arguments.length, connectors = new Array(_len), _key = 0; _key < _len; _key++) {\n      connectors[_key] = arguments[_key];\n    }\n    this.availableConnectors = [...connectors, ...this.availableConnectors].filter(connector => {\n      if (connectorsAdded.has(connector.id)) {\n        return false;\n      }\n      connectorsAdded.add(connector.id);\n      return true;\n    });\n    this.emit('connectors', this.availableConnectors);\n  }\n  /**\n   * Adds connections to the available connections list\n   * @param {...Connection} connections - The connections to add\n   */\n  addConnection() {\n    const connectionsAdded = new Set();\n    for (var _len2 = arguments.length, connections = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      connections[_key2] = arguments[_key2];\n    }\n    this.availableConnections = [...connections, ...this.availableConnections].filter(connection => {\n      if (connectionsAdded.has(connection.connectorId.toLowerCase())) {\n        return false;\n      }\n      connectionsAdded.add(connection.connectorId.toLowerCase());\n      return true;\n    });\n    this.emit('connections', this.availableConnections);\n  }\n  /**\n   * Deletes a connection from the available connections list\n   * @param {string} connectorId - The connector ID of the connection to delete\n   */\n  deleteConnection(connectorId) {\n    this.availableConnections = this.availableConnections.filter(c => !HelpersUtil.isLowerCaseMatch(c.connectorId, connectorId));\n    this.emit('connections', this.availableConnections);\n  }\n  /**\n   * Clears all connections from the available connections list\n   * @param {boolean} emit - Whether to emit the connections event\n   */\n  clearConnections() {\n    let emit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    this.availableConnections = [];\n    if (emit) {\n      this.emit('connections', this.availableConnections);\n    }\n  }\n  setStatus(status, chainNamespace) {\n    ChainController.setAccountProp('status', status, chainNamespace);\n  }\n  /**\n   * Adds an event listener for a specific event.\n   * @template T\n   * @param {T} eventName - The name of the event\n   * @param {EventCallback<T>} callback - The callback function to be called when the event is emitted\n   */\n  on(eventName, callback) {\n    var _this$eventListeners$;\n    if (!this.eventListeners.has(eventName)) {\n      this.eventListeners.set(eventName, new Set());\n    }\n    (_this$eventListeners$ = this.eventListeners.get(eventName)) === null || _this$eventListeners$ === void 0 || _this$eventListeners$.add(callback);\n  }\n  /**\n   * Removes an event listener for a specific event.\n   * @template T\n   * @param {T} eventName - The name of the event\n   * @param {EventCallback<T>} callback - The callback function to be removed\n   */\n  off(eventName, callback) {\n    const listeners = this.eventListeners.get(eventName);\n    if (listeners) {\n      listeners.delete(callback);\n    }\n  }\n  /**\n   * Removes all event listeners.\n   */\n  removeAllEventListeners() {\n    this.eventListeners.forEach(listeners => {\n      listeners.clear();\n    });\n  }\n  /**\n   * Emits an event with the given name and optional data.\n   * @template T\n   * @param {T} eventName - The name of the event to emit\n   * @param {EventData[T]} [data] - The optional data to be passed to the event listeners\n   */\n  emit(eventName, data) {\n    const listeners = this.eventListeners.get(eventName);\n    if (listeners) {\n      listeners.forEach(callback => callback(data));\n    }\n  }\n  /**\n   * Connects to WalletConnect.\n   * @param {number | string} [_chainId] - Optional chain ID to connect to\n   */\n  async connectWalletConnect(_chainId) {\n    try {\n      const connector = this.getWalletConnectConnector();\n      const result = await connector.connectWalletConnect();\n      return {\n        clientId: result.clientId\n      };\n    } catch (err) {\n      if (WcHelpersUtil.isUserRejectedRequestError(err)) {\n        throw new UserRejectedRequestError(err);\n      }\n      throw err;\n    }\n  }\n  /**\n   * Switches the network.\n   * @param {AdapterBlueprint.SwitchNetworkParams} params - Network switching parameters\n   */\n  async switchNetwork(params) {\n    const {\n      caipNetwork,\n      providerType\n    } = params;\n    if (!params.provider) {\n      return;\n    }\n    const provider = 'provider' in params.provider ? params.provider.provider : params.provider;\n    if (providerType === 'WALLET_CONNECT') {\n      ;\n      provider.setDefaultChain(caipNetwork.caipNetworkId);\n      return;\n    }\n    if (provider && providerType === 'AUTH') {\n      const authProvider = provider;\n      const preferredAccountType = getPreferredAccountType(caipNetwork.chainNamespace);\n      await authProvider.switchNetwork({\n        chainId: caipNetwork.caipNetworkId\n      });\n      const user = await authProvider.getUser({\n        chainId: caipNetwork.caipNetworkId,\n        preferredAccountType\n      });\n      this.emit('switchNetwork', user);\n    }\n  }\n  getWalletConnectConnector() {\n    const connector = this.connectors.find(c => c instanceof WalletConnectConnector);\n    if (!connector) {\n      throw new Error('WalletConnectConnector not found');\n    }\n    return connector;\n  }\n  /**\n   * Handles connect event for a specific connector.\n   * @param {string[]} accounts - The accounts that changed\n   * @param {string} connectorId - The ID of the connector\n   */\n  onConnect(accounts, connectorId) {\n    if (accounts.length > 0) {\n      const {\n        address,\n        chainId\n      } = CoreHelperUtil.getAccount(accounts[0]);\n      const caipNetwork = this.getCaipNetworks().filter(n => n.chainNamespace === this.namespace).find(n => n.id.toString() === (chainId === null || chainId === void 0 ? void 0 : chainId.toString()));\n      const connector = this.connectors.find(c => c.id === connectorId);\n      if (address) {\n        this.emit('accountChanged', {\n          address,\n          chainId,\n          connector\n        });\n        this.addConnection({\n          connectorId,\n          accounts: accounts.map(_account => {\n            const {\n              address\n            } = CoreHelperUtil.getAccount(_account);\n            return {\n              address: address\n            };\n          }),\n          caipNetwork\n        });\n      }\n    }\n  }\n  /**\n   * Handles accounts changed event for a specific connector.\n   * @param {string[]} accounts - The accounts that changed\n   * @param {string} connectorId - The ID of the connector\n   */\n  onAccountsChanged(accounts, connectorId) {\n    let disconnectIfNoAccounts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    if (accounts.length > 0) {\n      var _this$connectionManag;\n      const {\n        address\n      } = CoreHelperUtil.getAccount(accounts[0]);\n      const connection = (_this$connectionManag = this.connectionManager) === null || _this$connectionManag === void 0 ? void 0 : _this$connectionManag.getConnection({\n        connectorId,\n        connections: this.connections,\n        connectors: this.connectors\n      });\n      if (address && HelpersUtil.isLowerCaseMatch(this.getConnectorId(CommonConstantsUtil.CHAIN.EVM), connectorId)) {\n        var _connection$caipNetwo;\n        this.emit('accountChanged', {\n          address,\n          chainId: connection === null || connection === void 0 || (_connection$caipNetwo = connection.caipNetwork) === null || _connection$caipNetwo === void 0 ? void 0 : _connection$caipNetwo.id,\n          connector: connection === null || connection === void 0 ? void 0 : connection.connector\n        });\n      }\n      this.addConnection({\n        connectorId,\n        accounts: accounts.map(_account => {\n          const {\n            address\n          } = CoreHelperUtil.getAccount(_account);\n          return {\n            address: address\n          };\n        }),\n        caipNetwork: connection === null || connection === void 0 ? void 0 : connection.caipNetwork\n      });\n    } else if (disconnectIfNoAccounts) {\n      this.onDisconnect(connectorId);\n    }\n  }\n  /**\n   * Handles disconnect event for a specific connector.\n   * @param {string} connectorId - The ID of the connector\n   */\n  onDisconnect(connectorId) {\n    this.removeProviderListeners(connectorId);\n    this.deleteConnection(connectorId);\n    if (HelpersUtil.isLowerCaseMatch(this.getConnectorId(CommonConstantsUtil.CHAIN.EVM), connectorId)) {\n      this.emitFirstAvailableConnection();\n    }\n    if (this.connections.length === 0) {\n      this.emit('disconnect');\n    }\n  }\n  /**\n   * Handles chain changed event for a specific connector.\n   * @param {string} chainId - The ID of the chain that changed\n   * @param {string} connectorId - The ID of the connector\n   */\n  onChainChanged(chainId, connectorId) {\n    var _this$connectionManag2;\n    const formattedChainId = typeof chainId === 'string' && chainId.startsWith('0x') ? EthersHelpersUtil.hexStringToNumber(chainId).toString() : chainId.toString();\n    const connection = (_this$connectionManag2 = this.connectionManager) === null || _this$connectionManag2 === void 0 ? void 0 : _this$connectionManag2.getConnection({\n      connectorId,\n      connections: this.connections,\n      connectors: this.connectors\n    });\n    const caipNetwork = this.getCaipNetworks().filter(n => n.chainNamespace === this.namespace).find(n => n.id.toString() === formattedChainId);\n    if (connection) {\n      this.addConnection({\n        connectorId,\n        accounts: connection.accounts,\n        caipNetwork\n      });\n    }\n    if (HelpersUtil.isLowerCaseMatch(this.getConnectorId(CommonConstantsUtil.CHAIN.EVM), connectorId)) {\n      this.emit('switchNetwork', {\n        chainId: formattedChainId\n      });\n    }\n  }\n  /**\n   * Listens to provider events for a specific connector.\n   * @param {string} connectorId - The ID of the connector\n   * @param {Provider | CombinedProvider} provider - The provider to listen to\n   */\n  listenProviderEvents(connectorId, provider) {\n    if (IGNORED_CONNECTOR_IDS_FOR_LISTENER.includes(connectorId)) {\n      return;\n    }\n    const accountsChangedHandler = accounts => this.onAccountsChanged(accounts, connectorId);\n    const chainChangedHandler = chainId => this.onChainChanged(chainId, connectorId);\n    const disconnectHandler = () => this.onDisconnect(connectorId);\n    if (!this.providerHandlers[connectorId]) {\n      provider.on('disconnect', disconnectHandler);\n      provider.on('accountsChanged', accountsChangedHandler);\n      provider.on('chainChanged', chainChangedHandler);\n      this.providerHandlers[connectorId] = {\n        provider,\n        disconnect: disconnectHandler,\n        accountsChanged: accountsChangedHandler,\n        chainChanged: chainChangedHandler\n      };\n    }\n  }\n  /**\n   * Removes provider listeners for a specific connector.\n   * @param {string} connectorId - The ID of the connector\n   */\n  removeProviderListeners(connectorId) {\n    if (this.providerHandlers[connectorId]) {\n      const {\n        provider,\n        disconnect,\n        accountsChanged,\n        chainChanged\n      } = this.providerHandlers[connectorId];\n      provider.removeListener('disconnect', disconnect);\n      provider.removeListener('accountsChanged', accountsChanged);\n      provider.removeListener('chainChanged', chainChanged);\n      this.providerHandlers[connectorId] = null;\n    }\n  }\n  /**\n   * Emits the first available connection.\n   */\n  emitFirstAvailableConnection() {\n    var _this$connectionManag3;\n    const connection = (_this$connectionManag3 = this.connectionManager) === null || _this$connectionManag3 === void 0 ? void 0 : _this$connectionManag3.getConnection({\n      connections: this.connections,\n      connectors: this.connectors\n    });\n    if (connection) {\n      var _connection$caipNetwo2;\n      const [account] = connection.accounts;\n      this.emit('accountChanged', {\n        address: account === null || account === void 0 ? void 0 : account.address,\n        chainId: (_connection$caipNetwo2 = connection.caipNetwork) === null || _connection$caipNetwo2 === void 0 ? void 0 : _connection$caipNetwo2.id,\n        connector: connection.connector\n      });\n    }\n  }\n}","map":{"version":3,"names":["UniversalProvider","ConstantsUtil","CommonConstantsUtil","UserRejectedRequestError","ChainController","ConnectorController","CoreHelperUtil","getPreferredAccountType","HelpersUtil","PresetsUtil","EthersHelpersUtil","ConnectionManager","WalletConnectConnector","WcHelpersUtil","IGNORED_CONNECTOR_IDS_FOR_LISTENER","CONNECTOR_ID","AUTH","WALLET_CONNECT","AdapterBlueprint","constructor","params","availableConnectors","availableConnections","providerHandlers","eventListeners","Map","getCaipNetworks","namespace","getConnectorId","construct","connectionManager","projectId","adapterType","connectors","connections","networks","onAuthConnected","_ref","accounts","chainId","caipNetwork","filter","n","chainNamespace","find","id","toString","addConnection","connectorId","setAuthProvider","authProvider","onConnect","bind","onSocialConnected","addConnector","type","name","CONNECTOR_NAMES","provider","imageId","ConnectorImageIds","chain","chains","connectorsAdded","Set","_len","arguments","length","Array","_key","connector","has","add","emit","connectionsAdded","_len2","_key2","connection","toLowerCase","deleteConnection","c","isLowerCaseMatch","clearConnections","undefined","setStatus","status","setAccountProp","on","eventName","callback","_this$eventListeners$","set","get","off","listeners","delete","removeAllEventListeners","forEach","clear","data","connectWalletConnect","_chainId","getWalletConnectConnector","result","clientId","err","isUserRejectedRequestError","switchNetwork","providerType","setDefaultChain","caipNetworkId","preferredAccountType","user","getUser","Error","address","getAccount","map","_account","onAccountsChanged","disconnectIfNoAccounts","_this$connectionManag","getConnection","CHAIN","EVM","_connection$caipNetwo","onDisconnect","removeProviderListeners","emitFirstAvailableConnection","onChainChanged","_this$connectionManag2","formattedChainId","startsWith","hexStringToNumber","listenProviderEvents","includes","accountsChangedHandler","chainChangedHandler","disconnectHandler","disconnect","accountsChanged","chainChanged","removeListener","_this$connectionManag3","_connection$caipNetwo2","account"],"sources":["../../../../src/adapters/ChainAdapterBlueprint.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}