{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useWallet}from'../contexts/WalletContext';import'./NetworkChecker.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AMOY_CHAIN_ID=80002;const AMOY_CHAIN_ID_HEX='0x13882';const NetworkChecker=()=>{const{chainId,account,switchNetwork,walletType}=useWallet();const[showBanner,setShowBanner]=useState(false);const[isSwitching,setIsSwitching]=useState(false);useEffect(()=>{if(account&&chainId&&chainId!==AMOY_CHAIN_ID){setShowBanner(true);}else{setShowBanner(false);}},[chainId,account]);const switchToAmoy=async()=>{setIsSwitching(true);try{await switchNetwork(AMOY_CHAIN_ID);}catch(error){console.error('Error switching network:',error);let errorMessage='Failed to switch network. ';if(walletType==='walletconnect'){errorMessage+='Please switch to Polygon Amoy manually in your wallet app.';}else{errorMessage+='Please switch manually in MetaMask.';}alert(errorMessage);}finally{setIsSwitching(false);}};if(!showBanner){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"network-banner\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"network-banner-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"warning-icon\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"banner-text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Wrong Network!\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"You're on \",chainId?\"Chain ID \".concat(chainId):'wrong network',\" using \",walletType||'wallet',\". This marketplace requires \",/*#__PURE__*/_jsx(\"strong\",{children:\"Polygon Amoy (Chain ID: 80002)\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"switch-button\",onClick:switchToAmoy,disabled:isSwitching,children:isSwitching?'Switching...':'Switch to Amoy'})]})});};export default NetworkChecker;","map":{"version":3,"names":["React","useEffect","useState","useWallet","jsx","_jsx","jsxs","_jsxs","AMOY_CHAIN_ID","AMOY_CHAIN_ID_HEX","NetworkChecker","chainId","account","switchNetwork","walletType","showBanner","setShowBanner","isSwitching","setIsSwitching","switchToAmoy","error","console","errorMessage","alert","className","children","concat","onClick","disabled"],"sources":["/Users/alex.codreanu/Desktop/marketplace-dapp/src/Components/NetworkChecker.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useWallet } from '../contexts/WalletContext';\nimport './NetworkChecker.css';\n\nconst AMOY_CHAIN_ID = 80002;\nconst AMOY_CHAIN_ID_HEX = '0x13882';\n\nconst NetworkChecker: React.FC = () => {\n  const { chainId, account, switchNetwork, walletType } = useWallet();\n  const [showBanner, setShowBanner] = useState(false);\n  const [isSwitching, setIsSwitching] = useState(false);\n\n  useEffect(() => {\n    if (account && chainId && chainId !== AMOY_CHAIN_ID) {\n      setShowBanner(true);\n    } else {\n      setShowBanner(false);\n    }\n  }, [chainId, account]);\n\n  const switchToAmoy = async () => {\n    setIsSwitching(true);\n    try {\n      await switchNetwork(AMOY_CHAIN_ID);\n    } catch (error: any) {\n      console.error('Error switching network:', error);\n      \n      let errorMessage = 'Failed to switch network. ';\n      if (walletType === 'walletconnect') {\n        errorMessage += 'Please switch to Polygon Amoy manually in your wallet app.';\n      } else {\n        errorMessage += 'Please switch manually in MetaMask.';\n      }\n      \n      alert(errorMessage);\n    } finally {\n      setIsSwitching(false);\n    }\n  };\n\n  if (!showBanner) {\n    return null;\n  }\n\n  return (\n    <div className=\"network-banner\">\n      <div className=\"network-banner-content\">\n        <span className=\"warning-icon\">⚠️</span>\n        <div className=\"banner-text\">\n          <strong>Wrong Network!</strong>\n          <p>\n            You're on {chainId ? `Chain ID ${chainId}` : 'wrong network'} using {walletType || 'wallet'}. \n            This marketplace requires <strong>Polygon Amoy (Chain ID: 80002)</strong>\n          </p>\n        </div>\n        <button \n          className=\"switch-button\" \n          onClick={switchToAmoy}\n          disabled={isSwitching}\n        >\n          {isSwitching ? 'Switching...' : 'Switch to Amoy'}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default NetworkChecker;\n\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,SAAS,KAAQ,2BAA2B,CACrD,MAAO,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9B,KAAM,CAAAC,aAAa,CAAG,KAAK,CAC3B,KAAM,CAAAC,iBAAiB,CAAG,SAAS,CAEnC,KAAM,CAAAC,cAAwB,CAAGA,CAAA,GAAM,CACrC,KAAM,CAAEC,OAAO,CAAEC,OAAO,CAAEC,aAAa,CAAEC,UAAW,CAAC,CAAGX,SAAS,CAAC,CAAC,CACnE,KAAM,CAACY,UAAU,CAAEC,aAAa,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACe,WAAW,CAAEC,cAAc,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAErDD,SAAS,CAAC,IAAM,CACd,GAAIW,OAAO,EAAID,OAAO,EAAIA,OAAO,GAAKH,aAAa,CAAE,CACnDQ,aAAa,CAAC,IAAI,CAAC,CACrB,CAAC,IAAM,CACLA,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAAE,CAACL,OAAO,CAAEC,OAAO,CAAC,CAAC,CAEtB,KAAM,CAAAO,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/BD,cAAc,CAAC,IAAI,CAAC,CACpB,GAAI,CACF,KAAM,CAAAL,aAAa,CAACL,aAAa,CAAC,CACpC,CAAE,MAAOY,KAAU,CAAE,CACnBC,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAEhD,GAAI,CAAAE,YAAY,CAAG,4BAA4B,CAC/C,GAAIR,UAAU,GAAK,eAAe,CAAE,CAClCQ,YAAY,EAAI,4DAA4D,CAC9E,CAAC,IAAM,CACLA,YAAY,EAAI,qCAAqC,CACvD,CAEAC,KAAK,CAACD,YAAY,CAAC,CACrB,CAAC,OAAS,CACRJ,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAED,GAAI,CAACH,UAAU,CAAE,CACf,MAAO,KAAI,CACb,CAEA,mBACEV,IAAA,QAAKmB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC7BlB,KAAA,QAAKiB,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrCpB,IAAA,SAAMmB,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,cAAE,CAAM,CAAC,cACxClB,KAAA,QAAKiB,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BpB,IAAA,WAAAoB,QAAA,CAAQ,gBAAc,CAAQ,CAAC,cAC/BlB,KAAA,MAAAkB,QAAA,EAAG,YACS,CAACd,OAAO,aAAAe,MAAA,CAAef,OAAO,EAAK,eAAe,CAAC,SAAO,CAACG,UAAU,EAAI,QAAQ,CAAC,8BAClE,cAAAT,IAAA,WAAAoB,QAAA,CAAQ,gCAA8B,CAAQ,CAAC,EACxE,CAAC,EACD,CAAC,cACNpB,IAAA,WACEmB,SAAS,CAAC,eAAe,CACzBG,OAAO,CAAER,YAAa,CACtBS,QAAQ,CAAEX,WAAY,CAAAQ,QAAA,CAErBR,WAAW,CAAG,cAAc,CAAG,gBAAgB,CAC1C,CAAC,EACN,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAP,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}