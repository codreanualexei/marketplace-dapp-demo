{"ast":null,"code":"import _objectDestructuringEmpty from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";\nimport _objectSpread from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport UniversalProvider from '@walletconnect/universal-provider';\nimport { ConstantsUtil, NetworkUtil, ParseUtil } from '@reown/appkit-common';\nimport { AlertController, ApiController, AssetUtil, BlockchainApiController, ChainController, ConnectionController, ConnectionControllerUtil, ConnectorController, ConstantsUtil as CoreConstantsUtil, CoreHelperUtil, EnsController, EventsController, ModalController, OnRampController, OptionsController, ProviderController, PublicStateController, RouterController, SIWXUtil, SendController, SnackController, StorageUtil, ThemeController, getPreferredAccountType } from '@reown/appkit-controllers';\nimport { WalletUtil } from '@reown/appkit-scaffold-ui/utils';\nimport { setColorTheme, setThemeVariables } from '@reown/appkit-ui';\nimport { CaipNetworksUtil, ErrorUtil, HelpersUtil, LoggerUtil, SemVerUtils, TokenUtil, ConstantsUtil as UtilConstantsUtil } from '@reown/appkit-utils';\nimport { UniversalAdapter } from '../universal-adapter/client.js';\nimport { ConfigUtil } from '../utils/ConfigUtil.js';\nimport { WcConstantsUtil, WcHelpersUtil } from '../utils/index.js';\nexport class AppKitBaseClient {\n  constructor(options) {\n    this.chainNamespaces = [];\n    this.features = {};\n    this.remoteFeatures = {};\n    this.reportedAlertErrors = {};\n    // -- Public Internal ---------------------------------------------------\n    this.getCaipNetwork = (chainNamespace, id) => {\n      if (chainNamespace) {\n        var _ChainController$getC, _ChainController$getN, _requestedCaipNetwork;\n        const caipNetworkWithId = (_ChainController$getC = ChainController.getCaipNetworks(chainNamespace)) === null || _ChainController$getC === void 0 ? void 0 : _ChainController$getC.find(c => c.id === id);\n        if (caipNetworkWithId) {\n          return caipNetworkWithId;\n        }\n        const namespaceCaipNetwork = (_ChainController$getN = ChainController.getNetworkData(chainNamespace)) === null || _ChainController$getN === void 0 ? void 0 : _ChainController$getN.caipNetwork;\n        if (namespaceCaipNetwork) {\n          return namespaceCaipNetwork;\n        }\n        const requestedCaipNetworks = ChainController.getRequestedCaipNetworks(chainNamespace);\n        return (_requestedCaipNetwork = requestedCaipNetworks.filter(c => c.chainNamespace === chainNamespace)) === null || _requestedCaipNetwork === void 0 ? void 0 : _requestedCaipNetwork[0];\n      }\n      return ChainController.state.activeCaipNetwork || this.defaultCaipNetwork;\n    };\n    this.getCaipNetworkId = () => {\n      const network = this.getCaipNetwork();\n      if (network) {\n        return network.id;\n      }\n      return undefined;\n    };\n    this.getCaipNetworks = namespace => ChainController.getCaipNetworks(namespace);\n    this.getActiveChainNamespace = () => ChainController.state.activeChain;\n    this.setRequestedCaipNetworks = (requestedCaipNetworks, chain) => {\n      ChainController.setRequestedCaipNetworks(requestedCaipNetworks, chain);\n    };\n    this.getApprovedCaipNetworkIds = () => ChainController.getAllApprovedCaipNetworkIds();\n    this.getCaipAddress = chainNamespace => {\n      var _ChainController$stat;\n      if (ChainController.state.activeChain === chainNamespace || !chainNamespace) {\n        return ChainController.state.activeCaipAddress;\n      }\n      return (_ChainController$stat = ChainController.state.chains.get(chainNamespace)) === null || _ChainController$stat === void 0 || (_ChainController$stat = _ChainController$stat.accountState) === null || _ChainController$stat === void 0 ? void 0 : _ChainController$stat.caipAddress;\n    };\n    this.setClientId = clientId => {\n      BlockchainApiController.setClientId(clientId);\n    };\n    this.getProvider = namespace => ProviderController.getProvider(namespace);\n    this.getProviderType = namespace => ProviderController.getProviderId(namespace);\n    this.getPreferredAccountType = namespace => getPreferredAccountType(namespace);\n    this.setCaipAddress = function (caipAddress, chain) {\n      let shouldRefresh = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      ChainController.setAccountProp('caipAddress', caipAddress, chain, shouldRefresh);\n      ChainController.setAccountProp('address', CoreHelperUtil.getPlainAddress(caipAddress), chain, shouldRefresh);\n    };\n    this.setBalance = (balance, balanceSymbol, chain) => {\n      ChainController.setAccountProp('balance', balance, chain);\n      ChainController.setAccountProp('balanceSymbol', balanceSymbol, chain);\n    };\n    this.setProfileName = (profileName, chain) => {\n      ChainController.setAccountProp('profileName', profileName, chain);\n    };\n    this.setProfileImage = (profileImage, chain) => {\n      ChainController.setAccountProp('profileImage', profileImage, chain);\n    };\n    this.setUser = (user, chain) => {\n      ChainController.setAccountProp('user', user, chain);\n    };\n    this.resetAccount = chain => {\n      ChainController.resetAccount(chain);\n    };\n    this.setCaipNetwork = caipNetwork => {\n      ChainController.setActiveCaipNetwork(caipNetwork);\n    };\n    this.setCaipNetworkOfNamespace = (caipNetwork, chainNamespace) => {\n      ChainController.setChainNetworkData(chainNamespace, {\n        caipNetwork\n      });\n    };\n    this.setStatus = (status, chain) => {\n      ChainController.setAccountProp('status', status, chain);\n      // If at least one namespace is connected, set the connection status\n      if (ConnectorController.isConnected()) {\n        StorageUtil.setConnectionStatus('connected');\n      } else {\n        StorageUtil.setConnectionStatus('disconnected');\n      }\n    };\n    this.getAddressByChainNamespace = chainNamespace => {\n      var _ChainController$getA;\n      return (_ChainController$getA = ChainController.getAccountData(chainNamespace)) === null || _ChainController$getA === void 0 ? void 0 : _ChainController$getA.address;\n    };\n    this.setConnectors = connectors => {\n      const allConnectors = [...ConnectorController.state.allConnectors, ...connectors];\n      ConnectorController.setConnectors(allConnectors);\n    };\n    this.setConnections = (connections, chainNamespace) => {\n      StorageUtil.setConnections(connections, chainNamespace);\n      ConnectionController.setConnections(connections, chainNamespace);\n    };\n    this.fetchIdentity = request => BlockchainApiController.fetchIdentity(request);\n    this.getReownName = address => EnsController.getNamesForAddress(address);\n    this.getConnectors = () => ConnectorController.getConnectors();\n    this.getConnectorImage = connector => AssetUtil.getConnectorImage(connector);\n    this.getConnections = namespace => {\n      if (!this.remoteFeatures.multiWallet) {\n        AlertController.open(ConstantsUtil.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT, 'info');\n        return [];\n      }\n      return ConnectionControllerUtil.getConnectionsData(namespace).connections;\n    };\n    this.getRecentConnections = namespace => {\n      if (!this.remoteFeatures.multiWallet) {\n        AlertController.open(ConstantsUtil.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT, 'info');\n        return [];\n      }\n      return ConnectionControllerUtil.getConnectionsData(namespace).recentConnections;\n    };\n    this.switchConnection = async params => {\n      if (!this.remoteFeatures.multiWallet) {\n        AlertController.open(ConstantsUtil.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT, 'info');\n        return;\n      }\n      await ConnectionController.switchConnection(params);\n    };\n    this.deleteConnection = params => {\n      if (!this.remoteFeatures.multiWallet) {\n        AlertController.open(ConstantsUtil.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT, 'info');\n        return;\n      }\n      StorageUtil.deleteAddressFromConnection(params);\n      ConnectionController.syncStorageConnections();\n    };\n    this.setConnectedWalletInfo = (connectedWalletInfo, chain) => {\n      const type = ProviderController.getProviderId(chain);\n      const walletInfo = connectedWalletInfo ? _objectSpread(_objectSpread({}, connectedWalletInfo), {}, {\n        type\n      }) : undefined;\n      ChainController.setAccountProp('connectedWalletInfo', walletInfo, chain);\n    };\n    this.getIsConnectedState = () => Boolean(ChainController.state.activeCaipAddress);\n    this.addAddressLabel = (address, label, chain) => {\n      var _ChainController$getA2;\n      const addressLabels = ((_ChainController$getA2 = ChainController.getAccountData(chain)) === null || _ChainController$getA2 === void 0 ? void 0 : _ChainController$getA2.addressLabels) || {};\n      ChainController.setAccountProp('addressLabels', _objectSpread(_objectSpread({}, addressLabels), {}, {\n        [address]: label\n      }), chain);\n    };\n    this.removeAddressLabel = (address, chain) => {\n      var _ChainController$getA3;\n      const addressLabels = ((_ChainController$getA3 = ChainController.getAccountData(chain)) === null || _ChainController$getA3 === void 0 ? void 0 : _ChainController$getA3.addressLabels) || {};\n      ChainController.setAccountProp('addressLabels', _objectSpread(_objectSpread({}, addressLabels), {}, {\n        [address]: undefined\n      }), chain);\n    };\n    this.getAddress = chainNamespace => {\n      var _ChainController$getA4;\n      const namespace = chainNamespace || ChainController.state.activeChain;\n      return (_ChainController$getA4 = ChainController.getAccountData(namespace)) === null || _ChainController$getA4 === void 0 ? void 0 : _ChainController$getA4.address;\n    };\n    this.setApprovedCaipNetworksData = namespace => ChainController.setApprovedCaipNetworksData(namespace);\n    this.resetNetwork = namespace => {\n      ChainController.resetNetwork(namespace);\n    };\n    this.addConnector = connector => {\n      ConnectorController.addConnector(connector);\n    };\n    this.resetWcConnection = () => {\n      ConnectionController.resetWcConnection();\n    };\n    this.setAddressExplorerUrl = (addressExplorerUrl, chain) => {\n      ChainController.setAccountProp('addressExplorerUrl', addressExplorerUrl, chain);\n    };\n    this.setSmartAccountDeployed = (isDeployed, chain) => {\n      ChainController.setAccountProp('smartAccountDeployed', isDeployed, chain);\n    };\n    this.setPreferredAccountType = (preferredAccountType, chain) => {\n      ChainController.setAccountProp('preferredAccountType', preferredAccountType, chain);\n    };\n    this.setEIP6963Enabled = enabled => {\n      OptionsController.setEIP6963Enabled(enabled);\n    };\n    this.handleUnsafeRPCRequest = () => {\n      if (this.isOpen()) {\n        // If we are on the modal but there is no transaction stack, close the modal\n        if (this.isTransactionStackEmpty()) {\n          return;\n        }\n        // Check if we need to replace or redirect\n        this.redirect('ApproveTransaction');\n      } else {\n        // If called from outside the modal, open ApproveTransaction\n        this.open({\n          view: 'ApproveTransaction'\n        });\n      }\n    };\n    this.options = options;\n    this.version = options.sdkVersion;\n    this.caipNetworks = this.extendCaipNetworks(options);\n    this.chainNamespaces = this.getChainNamespacesSet(options.adapters, this.caipNetworks);\n    this.defaultCaipNetwork = this.extendDefaultCaipNetwork(options);\n    this.chainAdapters = this.createAdapters(options.adapters);\n    this.readyPromise = this.initialize(options);\n    SemVerUtils.checkSDKVersion(options.sdkVersion);\n  }\n  getChainNamespacesSet(adapters, caipNetworks) {\n    const adapterNamespaces = adapters === null || adapters === void 0 ? void 0 : adapters.map(adapter => adapter.namespace).filter(namespace => Boolean(namespace));\n    if (adapterNamespaces !== null && adapterNamespaces !== void 0 && adapterNamespaces.length) {\n      return [...new Set(adapterNamespaces)];\n    }\n    const networkNamespaces = caipNetworks === null || caipNetworks === void 0 ? void 0 : caipNetworks.map(network => network.chainNamespace);\n    return [...new Set(networkNamespaces)];\n  }\n  async initialize(options) {\n    var _OptionsController$st, _OptionsController$st2, _OptionsController$st3, _OptionsController$st4, _OptionsController$st5;\n    this.initializeProjectSettings(options);\n    this.initControllers(options);\n    await this.initChainAdapters();\n    this.sendInitializeEvent(options);\n    if (OptionsController.state.enableReconnect) {\n      await this.syncExistingConnection();\n      await this.syncAdapterConnections();\n    } else {\n      await this.unSyncExistingConnection();\n    }\n    this.remoteFeatures = await ConfigUtil.fetchRemoteFeatures(options);\n    OptionsController.setRemoteFeatures(this.remoteFeatures);\n    if (this.remoteFeatures.onramp) {\n      OnRampController.setOnrampProviders(this.remoteFeatures.onramp);\n    }\n    // Check allowed origins only if email or social features are enabled\n    if ((_OptionsController$st = OptionsController.state.remoteFeatures) !== null && _OptionsController$st !== void 0 && _OptionsController$st.email || Array.isArray((_OptionsController$st2 = OptionsController.state.remoteFeatures) === null || _OptionsController$st2 === void 0 ? void 0 : _OptionsController$st2.socials) && ((_OptionsController$st3 = OptionsController.state.remoteFeatures) === null || _OptionsController$st3 === void 0 ? void 0 : _OptionsController$st3.socials.length) > 0) {\n      await this.checkAllowedOrigins();\n    }\n    if ((_OptionsController$st4 = OptionsController.state.features) !== null && _OptionsController$st4 !== void 0 && _OptionsController$st4.reownAuthentication || (_OptionsController$st5 = OptionsController.state.remoteFeatures) !== null && _OptionsController$st5 !== void 0 && _OptionsController$st5.reownAuthentication) {\n      const {\n        ReownAuthentication\n      } = await import('@reown/appkit-controllers/features');\n      const currentSIWX = OptionsController.state.siwx;\n      if (!(currentSIWX instanceof ReownAuthentication)) {\n        if (currentSIWX) {\n          console.warn('ReownAuthentication option is enabled, SIWX configuration will be overridden.');\n        }\n        OptionsController.setSIWX(new ReownAuthentication());\n      }\n      // If siwx is already configured for ReownAuthentication we keep the current instance\n    }\n  }\n  async openSend(args) {\n    var _this$getCaipNetwork;\n    const namespaceToUse = args.namespace || ChainController.state.activeChain;\n    const caipAddress = this.getCaipAddress(namespaceToUse);\n    const chainId = (_this$getCaipNetwork = this.getCaipNetwork(namespaceToUse)) === null || _this$getCaipNetwork === void 0 ? void 0 : _this$getCaipNetwork.id;\n    if (!caipAddress) {\n      throw new Error('openSend: caipAddress not found');\n    }\n    if ((chainId === null || chainId === void 0 ? void 0 : chainId.toString()) !== args.chainId.toString()) {\n      const caipNetwork = ChainController.getCaipNetworkById(args.chainId, namespaceToUse);\n      if (!caipNetwork) {\n        throw new Error(\"openSend: caipNetwork with chainId \".concat(args.chainId, \" not found\"));\n      }\n      await this.switchNetwork(caipNetwork, {\n        throwOnFailure: true\n      });\n    }\n    try {\n      const symbol = TokenUtil.getTokenSymbolByAddress(args.assetAddress);\n      if (symbol) {\n        await ApiController.fetchTokenImages([symbol]);\n      }\n    } catch (_unused) {\n      /* Ignore */\n    }\n    await ModalController.open({\n      view: 'WalletSend',\n      data: {\n        send: args\n      }\n    });\n    return new Promise((resolve, reject) => {\n      const unsubscribe = SendController.subscribeKey('hash', hash => {\n        if (hash) {\n          cleanup();\n          resolve({\n            hash\n          });\n        }\n      });\n      const unsubscribeModal = ModalController.subscribe(modal => {\n        if (!modal.open) {\n          cleanup();\n          reject(new Error('Modal closed'));\n        }\n      });\n      const cleanup = this.createCleanupHandler([unsubscribe, unsubscribeModal]);\n    });\n  }\n  toModalOptions() {\n    function isSwap(options) {\n      return (options === null || options === void 0 ? void 0 : options.view) === 'Swap';\n    }\n    function isSend(options) {\n      return (options === null || options === void 0 ? void 0 : options.view) === 'WalletSend';\n    }\n    return {\n      isSwap,\n      isSend\n    };\n  }\n  async checkAllowedOrigins() {\n    try {\n      const allowedOrigins = await ApiController.fetchAllowedOrigins();\n      if (!CoreHelperUtil.isClient()) {\n        return;\n      }\n      const currentOrigin = window.location.origin;\n      const isOriginAllowed = WcHelpersUtil.isOriginAllowed(currentOrigin, allowedOrigins, WcConstantsUtil.DEFAULT_ALLOWED_ANCESTORS);\n      if (!isOriginAllowed) {\n        AlertController.open(ErrorUtil.ALERT_ERRORS.ORIGIN_NOT_ALLOWED, 'error');\n      }\n    } catch (error) {\n      if (!(error instanceof Error)) {\n        return;\n      }\n      switch (error.message) {\n        case 'RATE_LIMITED':\n          AlertController.open(ErrorUtil.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION, 'error');\n          break;\n        case 'SERVER_ERROR':\n          {\n            const originalError = error.cause instanceof Error ? error.cause : error;\n            AlertController.open({\n              displayMessage: ErrorUtil.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,\n              debugMessage: ErrorUtil.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(originalError.message)\n            }, 'error');\n            break;\n          }\n        default:\n          break;\n      }\n    }\n  }\n  createCleanupHandler(unsubscribeFunctions) {\n    return () => {\n      unsubscribeFunctions.forEach(unsubscribe => {\n        try {\n          unsubscribe();\n        } catch (_unused2) {\n          // Ignore cleanup errors\n        }\n      });\n    };\n  }\n  sendInitializeEvent(options) {\n    var _options$siweConfig;\n    const optionsCopy = Object.assign({}, (_objectDestructuringEmpty(options), options));\n    delete optionsCopy.adapters;\n    delete optionsCopy.universalProvider;\n    EventsController.sendEvent({\n      type: 'track',\n      event: 'INITIALIZE',\n      properties: _objectSpread(_objectSpread({}, optionsCopy), {}, {\n        networks: options.networks.map(n => n.id),\n        siweConfig: {\n          options: ((_options$siweConfig = options.siweConfig) === null || _options$siweConfig === void 0 ? void 0 : _options$siweConfig.options) || {}\n        }\n      })\n    });\n  }\n  // -- Controllers initialization ---------------------------------------------------\n  initControllers(options) {\n    this.initializeOptionsController(options);\n    this.initializeChainController(options);\n    this.initializeThemeController(options);\n    this.initializeConnectionController(options);\n    this.initializeConnectorController();\n  }\n  initializeThemeController(options) {\n    if (options.themeMode) {\n      ThemeController.setThemeMode(options.themeMode);\n    }\n    if (options.themeVariables) {\n      ThemeController.setThemeVariables(options.themeVariables);\n    }\n  }\n  initializeChainController(options) {\n    var _options$adapters;\n    if (!this.connectionControllerClient || !this.networkControllerClient) {\n      throw new Error('ConnectionControllerClient and NetworkControllerClient must be set');\n    }\n    ChainController.initialize((_options$adapters = options.adapters) !== null && _options$adapters !== void 0 ? _options$adapters : [], this.caipNetworks, {\n      connectionControllerClient: this.connectionControllerClient,\n      networkControllerClient: this.networkControllerClient\n    });\n    const network = this.getDefaultNetwork();\n    if (network) {\n      ChainController.setActiveCaipNetwork(network);\n    }\n  }\n  initializeConnectionController(options) {\n    var _options$adapters2, _options$basic;\n    ConnectionController.initialize((_options$adapters2 = options.adapters) !== null && _options$adapters2 !== void 0 ? _options$adapters2 : []);\n    ConnectionController.setWcBasic((_options$basic = options.basic) !== null && _options$basic !== void 0 ? _options$basic : false);\n  }\n  initializeConnectorController() {\n    ConnectorController.initialize(this.chainNamespaces);\n  }\n  initializeProjectSettings(options) {\n    OptionsController.setProjectId(options.projectId);\n    OptionsController.setSdkVersion(options.sdkVersion);\n  }\n  initializeOptionsController(options) {\n    var _OptionsController$st6, _options$adapters3;\n    OptionsController.setDebug(options.debug !== false);\n    // On by default\n    OptionsController.setEnableWalletGuide(options.enableWalletGuide !== false);\n    OptionsController.setEnableWallets(options.enableWallets !== false);\n    OptionsController.setEIP6963Enabled(options.enableEIP6963 !== false);\n    OptionsController.setEnableNetworkSwitch(options.enableNetworkSwitch !== false);\n    OptionsController.setEnableReconnect(options.enableReconnect !== false);\n    OptionsController.setEnableMobileFullScreen(options.enableMobileFullScreen === true);\n    OptionsController.setEnableAuthLogger(options.enableAuthLogger !== false);\n    OptionsController.setCustomRpcUrls(options.customRpcUrls);\n    OptionsController.setEnableEmbedded(options.enableEmbedded);\n    OptionsController.setAllWallets(options.allWallets);\n    OptionsController.setIncludeWalletIds(options.includeWalletIds);\n    OptionsController.setExcludeWalletIds(options.excludeWalletIds);\n    OptionsController.setFeaturedWalletIds(options.featuredWalletIds);\n    OptionsController.setTokens(options.tokens);\n    OptionsController.setTermsConditionsUrl(options.termsConditionsUrl);\n    OptionsController.setPrivacyPolicyUrl(options.privacyPolicyUrl);\n    OptionsController.setCustomWallets(options.customWallets);\n    OptionsController.setFeatures(options.features);\n    OptionsController.setAllowUnsupportedChain(options.allowUnsupportedChain);\n    OptionsController.setUniversalProviderConfigOverride(options.universalProviderConfigOverride);\n    OptionsController.setPreferUniversalLinks(options.experimental_preferUniversalLinks);\n    // Save option in controller\n    OptionsController.setDefaultAccountTypes(options.defaultAccountTypes);\n    const defaultMetaData = this.getDefaultMetaData();\n    if (!options.metadata && defaultMetaData) {\n      options.metadata = defaultMetaData;\n    }\n    OptionsController.setMetadata(options.metadata);\n    OptionsController.setDisableAppend(options.disableAppend);\n    OptionsController.setEnableEmbedded(options.enableEmbedded);\n    OptionsController.setSIWX(options.siwx);\n    this.features = (_OptionsController$st6 = OptionsController.state.features) !== null && _OptionsController$st6 !== void 0 ? _OptionsController$st6 : {};\n    if (!options.projectId) {\n      AlertController.open(ErrorUtil.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED, 'error');\n      return;\n    }\n    const evmAdapter = (_options$adapters3 = options.adapters) === null || _options$adapters3 === void 0 ? void 0 : _options$adapters3.find(adapter => adapter.namespace === ConstantsUtil.CHAIN.EVM);\n    // Set the SIWE client for EVM chains\n    if (evmAdapter) {\n      if (options.siweConfig) {\n        if (options.siwx) {\n          throw new Error('Cannot set both `siweConfig` and `siwx` options');\n        }\n        OptionsController.setSIWX(options.siweConfig.mapToSIWX());\n      }\n    }\n  }\n  getDefaultMetaData() {\n    if (CoreHelperUtil.isClient()) {\n      var _document$getElements, _document$querySelect, _document$querySelect2;\n      return {\n        name: ((_document$getElements = document.getElementsByTagName('title')) === null || _document$getElements === void 0 || (_document$getElements = _document$getElements[0]) === null || _document$getElements === void 0 ? void 0 : _document$getElements.textContent) || '',\n        description: ((_document$querySelect = document.querySelector('meta[property=\"og:description\"]')) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.content) || '',\n        url: window.location.origin,\n        icons: [((_document$querySelect2 = document.querySelector('link[rel~=\"icon\"]')) === null || _document$querySelect2 === void 0 ? void 0 : _document$querySelect2.href) || '']\n      };\n    }\n    return null;\n  }\n  // -- Network Initialization ---------------------------------------------------\n  setUnsupportedNetwork(chainId) {\n    const namespace = this.getActiveChainNamespace();\n    if (namespace) {\n      const unsupportedNetwork = CaipNetworksUtil.getUnsupportedNetwork(\"\".concat(namespace, \":\").concat(chainId));\n      ChainController.setActiveCaipNetwork(unsupportedNetwork);\n    }\n  }\n  getDefaultNetwork() {\n    return CaipNetworksUtil.getCaipNetworkFromStorage(this.defaultCaipNetwork);\n  }\n  extendCaipNetwork(network, options) {\n    const extendedNetwork = CaipNetworksUtil.extendCaipNetwork(network, {\n      customNetworkImageUrls: options.chainImages,\n      projectId: options.projectId\n    });\n    return extendedNetwork;\n  }\n  extendCaipNetworks(options) {\n    const extendedNetworks = CaipNetworksUtil.extendCaipNetworks(options.networks, {\n      customNetworkImageUrls: options.chainImages,\n      customRpcUrls: options.customRpcUrls,\n      projectId: options.projectId\n    });\n    return extendedNetworks;\n  }\n  extendDefaultCaipNetwork(options) {\n    const defaultNetwork = options.networks.find(n => {\n      var _options$defaultNetwo;\n      return n.id === ((_options$defaultNetwo = options.defaultNetwork) === null || _options$defaultNetwo === void 0 ? void 0 : _options$defaultNetwo.id);\n    });\n    const extendedNetwork = defaultNetwork ? CaipNetworksUtil.extendCaipNetwork(defaultNetwork, {\n      customNetworkImageUrls: options.chainImages,\n      customRpcUrls: options.customRpcUrls,\n      projectId: options.projectId\n    }) : undefined;\n    return extendedNetwork;\n  }\n  /**\n   * Disconnects a connector with the given namespace and id. If the connector id is not provided, disconnects the adapter (namespace).\n   * @param namespace ChainNamespace\n   * @param id string\n   * @returns\n   */\n  async disconnectConnector(namespace, id) {\n    try {\n      var _ChainController$stat2;\n      this.setLoading(true, namespace);\n      let disconnectResult = {\n        connections: []\n      };\n      const adapter = this.getAdapter(namespace);\n      const caipAddress = (_ChainController$stat2 = ChainController.state.chains.get(namespace)) === null || _ChainController$stat2 === void 0 || (_ChainController$stat2 = _ChainController$stat2.accountState) === null || _ChainController$stat2 === void 0 ? void 0 : _ChainController$stat2.caipAddress;\n      /**\n       * When the page loaded, the controller doesn't have address yet.\n       * To disconnect, we are checking enableReconnect flag to disconnect the namespace.\n       */\n      if ((caipAddress || !OptionsController.state.enableReconnect) && adapter !== null && adapter !== void 0 && adapter.disconnect) {\n        disconnectResult = await adapter.disconnect({\n          id\n        });\n      }\n      this.setLoading(false, namespace);\n      return disconnectResult;\n    } catch (error) {\n      this.setLoading(false, namespace);\n      throw new Error(\"Failed to disconnect chains: \".concat(error.message));\n    }\n  }\n  // -- Client Initialization ---------------------------------------------------\n  createClients() {\n    this.connectionControllerClient = {\n      connectWalletConnect: async () => {\n        var _this$getCaipNetwork2;\n        const activeChain = ChainController.state.activeChain;\n        const adapter = this.getAdapter(activeChain);\n        const chainId = (_this$getCaipNetwork2 = this.getCaipNetwork(activeChain)) === null || _this$getCaipNetwork2 === void 0 ? void 0 : _this$getCaipNetwork2.id;\n        const connections = ConnectionController.getConnections(activeChain);\n        const isMultiWallet = this.remoteFeatures.multiWallet;\n        const hasConnections = connections.length > 0;\n        if (!adapter) {\n          throw new Error('Adapter not found');\n        }\n        const result = await adapter.connectWalletConnect(chainId);\n        const shouldClose = !hasConnections || !isMultiWallet;\n        if (shouldClose) {\n          this.close();\n        }\n        this.setClientId((result === null || result === void 0 ? void 0 : result.clientId) || null);\n        StorageUtil.setConnectedNamespaces([...ChainController.state.chains.keys()]);\n        await this.syncWalletConnectAccount();\n        await SIWXUtil.initializeIfEnabled();\n      },\n      connectExternal: async params => {\n        const connectResult = await this.onConnectExternal(params);\n        await this.connectInactiveNamespaces(params, connectResult);\n        return connectResult ? {\n          address: connectResult.address\n        } : undefined;\n      },\n      reconnectExternal: async _ref => {\n        let {\n          id,\n          info,\n          type,\n          provider\n        } = _ref;\n        const namespace = ChainController.state.activeChain;\n        const adapter = this.getAdapter(namespace);\n        if (!namespace) {\n          throw new Error('reconnectExternal: namespace not found');\n        }\n        if (!adapter) {\n          throw new Error('reconnectExternal: adapter not found');\n        }\n        if (adapter !== null && adapter !== void 0 && adapter.reconnect) {\n          var _this$getCaipNetwork3;\n          await (adapter === null || adapter === void 0 ? void 0 : adapter.reconnect({\n            id,\n            info,\n            type,\n            provider,\n            chainId: (_this$getCaipNetwork3 = this.getCaipNetwork()) === null || _this$getCaipNetwork3 === void 0 ? void 0 : _this$getCaipNetwork3.id\n          }));\n          StorageUtil.addConnectedNamespace(namespace);\n          this.syncConnectedWalletInfo(namespace);\n        }\n      },\n      disconnectConnector: async params => {\n        await this.disconnectConnector(params.namespace, params.id);\n      },\n      disconnect: async params => {\n        const {\n          id: connectorIdParam,\n          chainNamespace,\n          initialDisconnect\n        } = params || {};\n        const namespace = chainNamespace || ChainController.state.activeChain;\n        const namespaceConnectorId = ConnectorController.getConnectorId(namespace);\n        const isAuth = connectorIdParam === ConstantsUtil.CONNECTOR_ID.AUTH || namespaceConnectorId === ConstantsUtil.CONNECTOR_ID.AUTH;\n        const isWalletConnect = connectorIdParam === ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT || namespaceConnectorId === ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT;\n        try {\n          var _SIWXUtil$getSIWX;\n          const namespaces = Array.from(ChainController.state.chains.keys());\n          let namespacesToDisconnect = chainNamespace ? [chainNamespace] : namespaces;\n          /*\n           * If the connector is WalletConnect or Auth, disconnect all namespaces\n           * since they share a single connector instance across all adapters\n           */\n          if (isWalletConnect || isAuth) {\n            namespacesToDisconnect = namespaces;\n          }\n          const disconnectPromises = namespacesToDisconnect.map(async ns => {\n            const currentConnectorId = ConnectorController.getConnectorId(ns);\n            const connectorIdToDisconnect = connectorIdParam || currentConnectorId;\n            const disconnectData = await this.disconnectConnector(ns, connectorIdToDisconnect);\n            if (disconnectData) {\n              if (isAuth) {\n                StorageUtil.deleteConnectedSocialProvider();\n              }\n              disconnectData.connections.forEach(connection => {\n                StorageUtil.addDisconnectedConnectorId(connection.connectorId, ns);\n              });\n            }\n            if (initialDisconnect) {\n              this.onDisconnectNamespace({\n                chainNamespace: ns,\n                closeModal: false\n              });\n            }\n          });\n          const disconnectResults = await Promise.allSettled(disconnectPromises);\n          SendController.resetSend();\n          ConnectionController.resetWcConnection();\n          if ((_SIWXUtil$getSIWX = SIWXUtil.getSIWX()) !== null && _SIWXUtil$getSIWX !== void 0 && _SIWXUtil$getSIWX.signOutOnDisconnect) {\n            await SIWXUtil.clearSessions();\n          }\n          ConnectorController.setFilterByNamespace(undefined);\n          ConnectionController.syncStorageConnections();\n          const failures = disconnectResults.filter(result => result.status === 'rejected');\n          if (failures.length > 0) {\n            throw new Error(failures.map(f => f.reason.message).join(', '));\n          }\n          EventsController.sendEvent({\n            type: 'track',\n            event: 'DISCONNECT_SUCCESS',\n            properties: {\n              namespace: chainNamespace || 'all'\n            }\n          });\n        } catch (error) {\n          throw new Error(\"Failed to disconnect chains: \".concat(error.message));\n        }\n      },\n      checkInstalled: ids => {\n        if (!ids) {\n          return Boolean(window.ethereum);\n        }\n        return ids.some(id => {\n          var _window$ethereum;\n          return Boolean((_window$ethereum = window.ethereum) === null || _window$ethereum === void 0 ? void 0 : _window$ethereum[String(id)]);\n        });\n      },\n      signMessage: async message => {\n        const namespace = ChainController.state.activeChain;\n        const adapter = this.getAdapter(ChainController.state.activeChain);\n        if (!namespace) {\n          throw new Error('signMessage: namespace not found');\n        }\n        if (!adapter) {\n          throw new Error('signMessage: adapter not found');\n        }\n        const address = this.getAddress(namespace);\n        if (!address) {\n          throw new Error('signMessage: address not found');\n        }\n        const result = await (adapter === null || adapter === void 0 ? void 0 : adapter.signMessage({\n          message,\n          address,\n          provider: ProviderController.getProvider(namespace)\n        }));\n        return (result === null || result === void 0 ? void 0 : result.signature) || '';\n      },\n      sendTransaction: async args => {\n        const namespace = args.chainNamespace;\n        if (!namespace) {\n          throw new Error('sendTransaction: namespace not found');\n        }\n        if (CoreConstantsUtil.SEND_SUPPORTED_NAMESPACES.includes(namespace)) {\n          const adapter = this.getAdapter(namespace);\n          if (!adapter) {\n            throw new Error('sendTransaction: adapter not found');\n          }\n          const provider = ProviderController.getProvider(namespace);\n          const result = await (adapter === null || adapter === void 0 ? void 0 : adapter.sendTransaction(_objectSpread(_objectSpread({}, args), {}, {\n            caipNetwork: this.getCaipNetwork(),\n            provider\n          })));\n          return (result === null || result === void 0 ? void 0 : result.hash) || '';\n        }\n        return '';\n      },\n      estimateGas: async args => {\n        const namespace = args.chainNamespace;\n        if (namespace === ConstantsUtil.CHAIN.EVM) {\n          const adapter = this.getAdapter(namespace);\n          if (!adapter) {\n            throw new Error('estimateGas: adapter is required but got undefined');\n          }\n          const provider = ProviderController.getProvider(namespace);\n          const caipNetwork = this.getCaipNetwork();\n          if (!caipNetwork) {\n            throw new Error('estimateGas: caipNetwork is required but got undefined');\n          }\n          const result = await (adapter === null || adapter === void 0 ? void 0 : adapter.estimateGas(_objectSpread(_objectSpread({}, args), {}, {\n            provider,\n            caipNetwork\n          })));\n          return (result === null || result === void 0 ? void 0 : result.gas) || 0n;\n        }\n        return 0n;\n      },\n      getEnsAvatar: async () => {\n        var _this$getCaipNetwork4;\n        const namespace = ChainController.state.activeChain;\n        if (!namespace) {\n          throw new Error('getEnsAvatar: namespace is required but got undefined');\n        }\n        const address = this.getAddress(namespace);\n        if (!address) {\n          throw new Error('getEnsAvatar: address not found');\n        }\n        await this.syncIdentity({\n          address,\n          chainId: Number((_this$getCaipNetwork4 = this.getCaipNetwork()) === null || _this$getCaipNetwork4 === void 0 ? void 0 : _this$getCaipNetwork4.id),\n          chainNamespace: namespace\n        });\n        const accountData = ChainController.getAccountData();\n        return (accountData === null || accountData === void 0 ? void 0 : accountData.profileImage) || false;\n      },\n      getEnsAddress: async name => await WcHelpersUtil.resolveReownName(name),\n      writeContract: async args => {\n        const namespace = ChainController.state.activeChain;\n        const adapter = this.getAdapter(namespace);\n        if (!namespace) {\n          throw new Error('writeContract: namespace is required but got undefined');\n        }\n        if (!adapter) {\n          throw new Error('writeContract: adapter is required but got undefined');\n        }\n        const caipNetwork = this.getCaipNetwork();\n        const caipAddress = this.getCaipAddress();\n        const provider = ProviderController.getProvider(namespace);\n        if (!caipNetwork || !caipAddress) {\n          throw new Error('writeContract: caipNetwork or caipAddress is required but got undefined');\n        }\n        const result = await (adapter === null || adapter === void 0 ? void 0 : adapter.writeContract(_objectSpread(_objectSpread({}, args), {}, {\n          caipNetwork,\n          provider,\n          caipAddress\n        })));\n        return result === null || result === void 0 ? void 0 : result.hash;\n      },\n      parseUnits: (value, decimals) => {\n        var _adapter$parseUnits;\n        const adapter = this.getAdapter(ChainController.state.activeChain);\n        if (!adapter) {\n          throw new Error('parseUnits: adapter is required but got undefined');\n        }\n        return (_adapter$parseUnits = adapter === null || adapter === void 0 ? void 0 : adapter.parseUnits({\n          value,\n          decimals\n        })) !== null && _adapter$parseUnits !== void 0 ? _adapter$parseUnits : 0n;\n      },\n      formatUnits: (value, decimals) => {\n        var _adapter$formatUnits;\n        const adapter = this.getAdapter(ChainController.state.activeChain);\n        if (!adapter) {\n          throw new Error('formatUnits: adapter is required but got undefined');\n        }\n        return (_adapter$formatUnits = adapter === null || adapter === void 0 ? void 0 : adapter.formatUnits({\n          value,\n          decimals\n        })) !== null && _adapter$formatUnits !== void 0 ? _adapter$formatUnits : '0';\n      },\n      getCapabilities: async params => {\n        const adapter = this.getAdapter(ChainController.state.activeChain);\n        if (!adapter) {\n          throw new Error('getCapabilities: adapter is required but got undefined');\n        }\n        return await (adapter === null || adapter === void 0 ? void 0 : adapter.getCapabilities(params));\n      },\n      grantPermissions: async params => {\n        const adapter = this.getAdapter(ChainController.state.activeChain);\n        if (!adapter) {\n          throw new Error('grantPermissions: adapter is required but got undefined');\n        }\n        return await (adapter === null || adapter === void 0 ? void 0 : adapter.grantPermissions(params));\n      },\n      revokePermissions: async params => {\n        const adapter = this.getAdapter(ChainController.state.activeChain);\n        if (!adapter) {\n          throw new Error('revokePermissions: adapter is required but got undefined');\n        }\n        if (adapter !== null && adapter !== void 0 && adapter.revokePermissions) {\n          return await adapter.revokePermissions(params);\n        }\n        return '0x';\n      },\n      walletGetAssets: async params => {\n        var _await$adapter$wallet;\n        const adapter = this.getAdapter(ChainController.state.activeChain);\n        if (!adapter) {\n          throw new Error('walletGetAssets: adapter is required but got undefined');\n        }\n        return (_await$adapter$wallet = await (adapter === null || adapter === void 0 ? void 0 : adapter.walletGetAssets(params))) !== null && _await$adapter$wallet !== void 0 ? _await$adapter$wallet : {};\n      },\n      updateBalance: namespace => {\n        const address = this.getAddress(namespace);\n        const caipNetwork = this.getCaipNetwork(namespace);\n        if (!caipNetwork || !address) {\n          return;\n        }\n        this.updateNativeBalance(address, caipNetwork === null || caipNetwork === void 0 ? void 0 : caipNetwork.id, namespace);\n      }\n    };\n    this.networkControllerClient = {\n      switchCaipNetwork: async caipNetwork => await this.switchCaipNetwork(caipNetwork),\n      // eslint-disable-next-line @typescript-eslint/require-await\n      getApprovedCaipNetworksData: async () => this.getApprovedCaipNetworksData()\n    };\n    ConnectionController.setClient(this.connectionControllerClient);\n  }\n  async onConnectExternal(params) {\n    var _params$caipNetwork, _params$caipNetwork2, _fallbackCaipNetwork$;\n    const activeChain = ChainController.state.activeChain;\n    const namespace = params.chain || activeChain;\n    const adapter = this.getAdapter(namespace);\n    let shouldUpdateNetwork = true;\n    if (params.type === UtilConstantsUtil.CONNECTOR_TYPE_AUTH) {\n      const authNamespaces = ConstantsUtil.AUTH_CONNECTOR_SUPPORTED_CHAINS;\n      const hasConnectedAuthNamespace = authNamespaces.some(namespace => ConnectorController.getConnectorId(namespace) === ConstantsUtil.CONNECTOR_ID.AUTH);\n      if (hasConnectedAuthNamespace && params.chain !== activeChain) {\n        shouldUpdateNetwork = false;\n      }\n    }\n    if (params.chain && params.chain !== activeChain && !params.caipNetwork) {\n      const toConnectNetwork = this.getCaipNetworks().find(network => network.chainNamespace === params.chain);\n      if (toConnectNetwork && shouldUpdateNetwork) {\n        this.setCaipNetwork(toConnectNetwork);\n      }\n    }\n    if (!namespace) {\n      throw new Error('connectExternal: namespace not found');\n    }\n    if (!adapter) {\n      throw new Error('connectExternal: adapter not found');\n    }\n    const fallbackCaipNetwork = this.getCaipNetwork(namespace);\n    const caipNetworkToUse = params.caipNetwork || fallbackCaipNetwork;\n    const res = await adapter.connect({\n      id: params.id,\n      address: params.address,\n      info: params.info,\n      type: params.type,\n      provider: params.provider,\n      socialUri: params.socialUri,\n      chainId: ((_params$caipNetwork = params.caipNetwork) === null || _params$caipNetwork === void 0 ? void 0 : _params$caipNetwork.id) || (fallbackCaipNetwork === null || fallbackCaipNetwork === void 0 ? void 0 : fallbackCaipNetwork.id),\n      rpcUrl: ((_params$caipNetwork2 = params.caipNetwork) === null || _params$caipNetwork2 === void 0 || (_params$caipNetwork2 = _params$caipNetwork2.rpcUrls) === null || _params$caipNetwork2 === void 0 || (_params$caipNetwork2 = _params$caipNetwork2.default) === null || _params$caipNetwork2 === void 0 || (_params$caipNetwork2 = _params$caipNetwork2.http) === null || _params$caipNetwork2 === void 0 ? void 0 : _params$caipNetwork2[0]) || (fallbackCaipNetwork === null || fallbackCaipNetwork === void 0 || (_fallbackCaipNetwork$ = fallbackCaipNetwork.rpcUrls) === null || _fallbackCaipNetwork$ === void 0 || (_fallbackCaipNetwork$ = _fallbackCaipNetwork$.default) === null || _fallbackCaipNetwork$ === void 0 || (_fallbackCaipNetwork$ = _fallbackCaipNetwork$.http) === null || _fallbackCaipNetwork$ === void 0 ? void 0 : _fallbackCaipNetwork$[0])\n    });\n    if (!res) {\n      return undefined;\n    }\n    StorageUtil.addConnectedNamespace(namespace);\n    this.syncProvider(_objectSpread(_objectSpread({}, res), {}, {\n      chainNamespace: namespace\n    }));\n    this.setStatus('connected', namespace);\n    this.syncConnectedWalletInfo(namespace);\n    StorageUtil.removeDisconnectedConnectorId(params.id, namespace);\n    return {\n      address: res.address,\n      connectedCaipNetwork: caipNetworkToUse\n    };\n  }\n  async connectInactiveNamespaces(params, connectResult) {\n    var _connectResult$connec;\n    const isConnectingToAuth = params.type === UtilConstantsUtil.CONNECTOR_TYPE_AUTH;\n    const otherAuthNamespaces = HelpersUtil.getOtherAuthNamespaces(connectResult === null || connectResult === void 0 || (_connectResult$connec = connectResult.connectedCaipNetwork) === null || _connectResult$connec === void 0 ? void 0 : _connectResult$connec.chainNamespace);\n    const activeCaipNetwork = ChainController.state.activeCaipNetwork;\n    const activeAdapter = this.getAdapter(activeCaipNetwork === null || activeCaipNetwork === void 0 ? void 0 : activeCaipNetwork.chainNamespace);\n    const activeProvider = ProviderController.getProvider(activeCaipNetwork === null || activeCaipNetwork === void 0 ? void 0 : activeCaipNetwork.chainNamespace);\n    if (isConnectingToAuth) {\n      await Promise.all(otherAuthNamespaces.map(async ns => {\n        try {\n          var _caipNetworkToUse$rpc;\n          const provider = ProviderController.getProvider(ns);\n          const caipNetworkToUse = this.getCaipNetwork(ns);\n          const adapter = this.getAdapter(ns);\n          const res = await (adapter === null || adapter === void 0 ? void 0 : adapter.connect(_objectSpread(_objectSpread({}, params), {}, {\n            provider,\n            socialUri: undefined,\n            chainId: caipNetworkToUse === null || caipNetworkToUse === void 0 ? void 0 : caipNetworkToUse.id,\n            rpcUrl: caipNetworkToUse === null || caipNetworkToUse === void 0 || (_caipNetworkToUse$rpc = caipNetworkToUse.rpcUrls) === null || _caipNetworkToUse$rpc === void 0 || (_caipNetworkToUse$rpc = _caipNetworkToUse$rpc.default) === null || _caipNetworkToUse$rpc === void 0 || (_caipNetworkToUse$rpc = _caipNetworkToUse$rpc.http) === null || _caipNetworkToUse$rpc === void 0 ? void 0 : _caipNetworkToUse$rpc[0]\n          })));\n          if (res) {\n            StorageUtil.addConnectedNamespace(ns);\n            StorageUtil.removeDisconnectedConnectorId(params.id, ns);\n            this.setStatus('connected', ns);\n            this.syncConnectedWalletInfo(ns);\n          }\n        } catch (error) {\n          AlertController.warn(ErrorUtil.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.displayMessage, ErrorUtil.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.debugMessage(ns, error instanceof Error ? error.message : undefined), ErrorUtil.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.code);\n        }\n      }));\n      // Make the secure site back to current network after reconnecting the other namespaces\n      if (activeCaipNetwork) {\n        await (activeAdapter === null || activeAdapter === void 0 ? void 0 : activeAdapter.switchNetwork({\n          caipNetwork: activeCaipNetwork,\n          provider: activeProvider,\n          providerType: params.type\n        }));\n      }\n    }\n  }\n  getApprovedCaipNetworksData() {\n    const providerType = ProviderController.getProviderId(ChainController.state.activeChain);\n    if (providerType === UtilConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT) {\n      var _this$universalProvid, _this$universalProvid2;\n      const namespaces = (_this$universalProvid = this.universalProvider) === null || _this$universalProvid === void 0 || (_this$universalProvid = _this$universalProvid.session) === null || _this$universalProvid === void 0 ? void 0 : _this$universalProvid.namespaces;\n      return {\n        /*\n         * MetaMask Wallet only returns 1 namespace in the session object. This makes it imposible\n         * to switch to other networks. Setting supportsAllNetworks to true for MetaMask Wallet\n         * will make it possible to switch to other networks.\n         */\n        supportsAllNetworks: ((_this$universalProvid2 = this.universalProvider) === null || _this$universalProvid2 === void 0 || (_this$universalProvid2 = _this$universalProvid2.session) === null || _this$universalProvid2 === void 0 || (_this$universalProvid2 = _this$universalProvid2.peer) === null || _this$universalProvid2 === void 0 ? void 0 : _this$universalProvid2.metadata.name) === 'MetaMask Wallet',\n        approvedCaipNetworkIds: this.getChainsFromNamespaces(namespaces)\n      };\n    }\n    return {\n      supportsAllNetworks: true,\n      approvedCaipNetworkIds: []\n    };\n  }\n  async switchCaipNetwork(caipNetwork) {\n    const networkNamespace = caipNetwork.chainNamespace;\n    const namespaceAddress = this.getAddressByChainNamespace(caipNetwork.chainNamespace);\n    if (namespaceAddress) {\n      const provider = ProviderController.getProvider(networkNamespace);\n      const providerType = ProviderController.getProviderId(networkNamespace);\n      if (caipNetwork.chainNamespace === ChainController.state.activeChain) {\n        const adapter = this.getAdapter(networkNamespace);\n        await (adapter === null || adapter === void 0 ? void 0 : adapter.switchNetwork({\n          caipNetwork,\n          provider,\n          providerType\n        }));\n      } else {\n        this.setCaipNetwork(caipNetwork);\n        if (providerType === UtilConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT) {\n          this.syncWalletConnectAccount();\n        } else {\n          const address = this.getAddressByChainNamespace(networkNamespace);\n          if (address) {\n            this.syncAccount({\n              address,\n              chainId: caipNetwork.id,\n              chainNamespace: networkNamespace\n            });\n          }\n        }\n      }\n    } else {\n      this.setCaipNetwork(caipNetwork);\n    }\n  }\n  getChainsFromNamespaces() {\n    let namespaces = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return Object.values(namespaces).flatMap(namespace => {\n      const chains = namespace.chains || [];\n      const accountsChains = namespace.accounts.map(account => {\n        const {\n          chainId,\n          chainNamespace\n        } = ParseUtil.parseCaipAddress(account);\n        return \"\".concat(chainNamespace, \":\").concat(chainId);\n      });\n      return Array.from(new Set([...chains, ...accountsChains]));\n    });\n  }\n  // -- Adapter Initialization ---------------------------------------------------\n  createAdapters(blueprints) {\n    this.createClients();\n    return this.chainNamespaces.reduce((adapters, namespace) => {\n      const blueprint = blueprints === null || blueprints === void 0 ? void 0 : blueprints.find(b => b.namespace === namespace);\n      if (blueprint) {\n        var _this$options, _this$caipNetworks;\n        blueprint.construct({\n          namespace,\n          projectId: (_this$options = this.options) === null || _this$options === void 0 ? void 0 : _this$options.projectId,\n          networks: (_this$caipNetworks = this.caipNetworks) === null || _this$caipNetworks === void 0 ? void 0 : _this$caipNetworks.filter(_ref2 => {\n            let {\n              chainNamespace\n            } = _ref2;\n            return chainNamespace === namespace;\n          })\n        });\n        adapters[namespace] = blueprint;\n      } else {\n        adapters[namespace] = new UniversalAdapter({\n          namespace,\n          networks: this.getCaipNetworks()\n        });\n      }\n      return adapters;\n      // eslint-disable-next-line @typescript-eslint/prefer-reduce-type-parameter\n    }, {});\n  }\n  async initChainAdapter(namespace) {\n    var _this$chainAdapters;\n    this.onConnectors(namespace);\n    this.listenAdapter(namespace);\n    await ((_this$chainAdapters = this.chainAdapters) === null || _this$chainAdapters === void 0 ? void 0 : _this$chainAdapters[namespace].syncConnectors(this.options, this));\n    await this.createUniversalProviderForAdapter(namespace);\n  }\n  async initChainAdapters() {\n    await Promise.all(this.chainNamespaces.map(async namespace => {\n      await this.initChainAdapter(namespace);\n    }));\n  }\n  onConnectors(chainNamespace) {\n    const adapter = this.getAdapter(chainNamespace);\n    adapter === null || adapter === void 0 || adapter.on('connectors', this.setConnectors.bind(this));\n  }\n  listenAdapter(chainNamespace) {\n    const adapter = this.getAdapter(chainNamespace);\n    if (!adapter) {\n      return;\n    }\n    const connectionStatus = StorageUtil.getConnectionStatus();\n    if (OptionsController.state.enableReconnect === false) {\n      this.setStatus('disconnected', chainNamespace);\n    } else if (connectionStatus === 'connected') {\n      this.setStatus('connecting', chainNamespace);\n    } else if (connectionStatus === 'disconnected') {\n      /*\n       * Address cache is kept after disconnecting from the wallet\n       * but should be cleared if appkit is launched in disconnected state\n       */\n      StorageUtil.clearAddressCache();\n      this.setStatus(connectionStatus, chainNamespace);\n    } else {\n      this.setStatus(connectionStatus, chainNamespace);\n    }\n    adapter.on('switchNetwork', _ref3 => {\n      var _ChainController$stat3;\n      let {\n        address,\n        chainId\n      } = _ref3;\n      const caipNetwork = this.getCaipNetworks().find(n => n.id.toString() === chainId.toString() || n.caipNetworkId.toString() === chainId.toString());\n      const isSameNamespace = ChainController.state.activeChain === chainNamespace;\n      const accountAddress = (_ChainController$stat3 = ChainController.state.chains.get(chainNamespace)) === null || _ChainController$stat3 === void 0 || (_ChainController$stat3 = _ChainController$stat3.accountState) === null || _ChainController$stat3 === void 0 ? void 0 : _ChainController$stat3.address;\n      if (caipNetwork) {\n        const account = isSameNamespace && address ? address : accountAddress;\n        if (account) {\n          this.syncAccount({\n            address: account,\n            chainId: caipNetwork.id,\n            chainNamespace\n          });\n        }\n      } else {\n        this.setUnsupportedNetwork(chainId);\n      }\n    });\n    adapter.on('disconnect', () => {\n      const isMultiWallet = this.remoteFeatures.multiWallet;\n      const allConnections = Array.from(ConnectionController.state.connections.values()).flat();\n      this.onDisconnectNamespace({\n        chainNamespace,\n        closeModal: !isMultiWallet || allConnections.length === 0\n      });\n    });\n    adapter.on('connections', connections => {\n      this.setConnections(connections, chainNamespace);\n    });\n    adapter.on('pendingTransactions', () => {\n      const address = this.getAddress(chainNamespace);\n      const activeCaipNetwork = ChainController.state.activeCaipNetwork;\n      if (!address || !(activeCaipNetwork !== null && activeCaipNetwork !== void 0 && activeCaipNetwork.id)) {\n        return;\n      }\n      this.updateNativeBalance(address, activeCaipNetwork.id, activeCaipNetwork.chainNamespace);\n    });\n    adapter.on('accountChanged', _ref4 => {\n      var _ChainController$getN2;\n      let {\n        address,\n        chainId,\n        connector\n      } = _ref4;\n      this.handlePreviousConnectorConnection(connector);\n      const isActiveChain = ChainController.state.activeChain === chainNamespace;\n      if (connector !== null && connector !== void 0 && connector.provider) {\n        this.syncProvider({\n          id: connector.id,\n          type: connector.type,\n          provider: connector === null || connector === void 0 ? void 0 : connector.provider,\n          chainNamespace\n        });\n        this.syncConnectedWalletInfo(chainNamespace);\n      }\n      const namespaceNetworkId = (_ChainController$getN2 = ChainController.getNetworkData(chainNamespace)) === null || _ChainController$getN2 === void 0 || (_ChainController$getN2 = _ChainController$getN2.caipNetwork) === null || _ChainController$getN2 === void 0 ? void 0 : _ChainController$getN2.id;\n      const syncAccountChainId = chainId || namespaceNetworkId;\n      if (isActiveChain && syncAccountChainId) {\n        this.syncAccount({\n          address,\n          chainId: syncAccountChainId,\n          chainNamespace\n        });\n      } else if (!isActiveChain && syncAccountChainId) {\n        this.syncAccountInfo(address, syncAccountChainId, chainNamespace);\n        this.syncBalance({\n          address,\n          chainId: syncAccountChainId,\n          chainNamespace\n        });\n      } else {\n        this.syncAccountInfo(address, chainId, chainNamespace);\n      }\n      StorageUtil.addConnectedNamespace(chainNamespace);\n    });\n  }\n  /**\n   * Checks the incoming connector and handles the previous connection in the connector's namespace, and if necessary (i.e multi-wallet is disabled) disconnects the previous connector\n   * @param connector\n   */\n  async handlePreviousConnectorConnection(connector) {\n    var _OptionsController$st7;\n    const namespace = connector === null || connector === void 0 ? void 0 : connector.chain;\n    const newConnectorId = connector === null || connector === void 0 ? void 0 : connector.id;\n    const currentConnectorId = ConnectorController.getConnectorId(namespace);\n    const isMultiWalletEnabled = (_OptionsController$st7 = OptionsController.state.remoteFeatures) === null || _OptionsController$st7 === void 0 ? void 0 : _OptionsController$st7.multiWallet;\n    const hasNewConnectorConnected = currentConnectorId !== newConnectorId;\n    const shouldDisconnectPreviousConnector = namespace && newConnectorId && currentConnectorId && hasNewConnectorConnected && !isMultiWalletEnabled;\n    try {\n      if (shouldDisconnectPreviousConnector) {\n        await ConnectionController.disconnect({\n          id: currentConnectorId,\n          namespace\n        });\n      }\n    } catch (error) {\n      console.warn('Error disconnecting previous connector', error);\n    }\n  }\n  async createUniversalProviderForAdapter(chainNamespace) {\n    await this.getUniversalProvider();\n    if (this.universalProvider) {\n      var _this$chainAdapters2, _this$chainAdapters2$;\n      await ((_this$chainAdapters2 = this.chainAdapters) === null || _this$chainAdapters2 === void 0 || (_this$chainAdapters2 = _this$chainAdapters2[chainNamespace]) === null || _this$chainAdapters2 === void 0 || (_this$chainAdapters2$ = _this$chainAdapters2.setUniversalProvider) === null || _this$chainAdapters2$ === void 0 ? void 0 : _this$chainAdapters2$.call(_this$chainAdapters2, this.universalProvider));\n    }\n  }\n  // -- Connection Sync ---------------------------------------------------\n  async syncExistingConnection() {\n    await Promise.allSettled(this.chainNamespaces.map(namespace => this.syncNamespaceConnection(namespace)));\n  }\n  async unSyncExistingConnection() {\n    try {\n      await Promise.allSettled(this.chainNamespaces.map(namespace => ConnectionController.disconnect({\n        namespace,\n        initialDisconnect: true\n      })));\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error('Error disconnecting existing connections:', error);\n    }\n  }\n  async reconnectWalletConnect() {\n    await this.syncWalletConnectAccount();\n    const address = this.getAddress();\n    if (!this.getCaipAddress()) {\n      StorageUtil.deleteRecentWallet();\n    }\n    const recentWallet = StorageUtil.getRecentWallet();\n    EventsController.sendEvent({\n      type: 'track',\n      event: 'CONNECT_SUCCESS',\n      address,\n      properties: {\n        method: CoreHelperUtil.isMobile() ? 'mobile' : 'qrcode',\n        name: (recentWallet === null || recentWallet === void 0 ? void 0 : recentWallet.name) || 'Unknown',\n        reconnect: true,\n        view: RouterController.state.view,\n        walletRank: recentWallet === null || recentWallet === void 0 ? void 0 : recentWallet.order\n      }\n    });\n  }\n  async syncNamespaceConnection(namespace) {\n    try {\n      if (namespace === ConstantsUtil.CHAIN.EVM && CoreHelperUtil.isSafeApp()) {\n        ConnectorController.setConnectorId(ConstantsUtil.CONNECTOR_ID.SAFE, namespace);\n      }\n      const connectorId = ConnectorController.getConnectorId(namespace);\n      this.setStatus('connecting', namespace);\n      switch (connectorId) {\n        case ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT:\n          await this.reconnectWalletConnect();\n          break;\n        case ConstantsUtil.CONNECTOR_ID.AUTH:\n          // Handled during initialization of adapters' auth provider\n          break;\n        default:\n          await this.syncAdapterConnection(namespace);\n      }\n    } catch (err) {\n      console.warn(\"AppKit couldn't sync existing connection\", err);\n      this.setStatus('disconnected', namespace);\n    }\n  }\n  onDisconnectNamespace(options) {\n    const {\n      chainNamespace,\n      closeModal\n    } = options || {};\n    ChainController.resetAccount(chainNamespace);\n    ChainController.resetNetwork(chainNamespace);\n    StorageUtil.removeConnectedNamespace(chainNamespace);\n    const namespaces = Array.from(ChainController.state.chains.keys());\n    const namespacesToDisconnect = chainNamespace ? [chainNamespace] : namespaces;\n    namespacesToDisconnect.forEach(ns => StorageUtil.addDisconnectedConnectorId(ConnectorController.getConnectorId(ns) || '', ns));\n    ConnectorController.removeConnectorId(chainNamespace);\n    ProviderController.resetChain(chainNamespace);\n    this.setUser(null, chainNamespace);\n    this.setStatus('disconnected', chainNamespace);\n    this.setConnectedWalletInfo(null, chainNamespace);\n    if (closeModal !== false) {\n      ModalController.close();\n    }\n  }\n  async syncAdapterConnections() {\n    await Promise.allSettled(this.chainNamespaces.map(namespace => {\n      const adapter = this.getAdapter(namespace);\n      const caipAddress = this.getCaipAddress(namespace);\n      const caipNetwork = this.getCaipNetwork(namespace);\n      return adapter === null || adapter === void 0 ? void 0 : adapter.syncConnections({\n        connectToFirstConnector: !caipAddress,\n        caipNetwork\n      });\n    }));\n  }\n  async syncAdapterConnection(namespace) {\n    const adapter = this.getAdapter(namespace);\n    const caipNetwork = this.getCaipNetwork(namespace);\n    const connectorId = ConnectorController.getConnectorId(namespace);\n    const connectors = ConnectorController.getConnectors(namespace);\n    const connector = connectors.find(c => c.id === connectorId);\n    try {\n      var _caipNetwork$rpcUrls;\n      if (!adapter || !connector) {\n        throw new Error(\"Adapter or connector not found for namespace \".concat(namespace));\n      }\n      if (!(caipNetwork !== null && caipNetwork !== void 0 && caipNetwork.id)) {\n        throw new Error('CaipNetwork not found');\n      }\n      const connection = await (adapter === null || adapter === void 0 ? void 0 : adapter.syncConnection({\n        namespace,\n        id: connector.id,\n        chainId: caipNetwork.id,\n        rpcUrl: caipNetwork === null || caipNetwork === void 0 || (_caipNetwork$rpcUrls = caipNetwork.rpcUrls) === null || _caipNetwork$rpcUrls === void 0 || (_caipNetwork$rpcUrls = _caipNetwork$rpcUrls.default) === null || _caipNetwork$rpcUrls === void 0 || (_caipNetwork$rpcUrls = _caipNetwork$rpcUrls.http) === null || _caipNetwork$rpcUrls === void 0 ? void 0 : _caipNetwork$rpcUrls[0]\n      }));\n      if (connection) {\n        var _connector$info;\n        this.syncProvider(_objectSpread(_objectSpread({}, connection), {}, {\n          chainNamespace: namespace\n        }));\n        await this.syncAccount(_objectSpread(_objectSpread({}, connection), {}, {\n          chainNamespace: namespace\n        }));\n        this.setStatus('connected', namespace);\n        EventsController.sendEvent({\n          type: 'track',\n          event: 'CONNECT_SUCCESS',\n          address: connection.address,\n          properties: {\n            method: 'browser',\n            name: ((_connector$info = connector.info) === null || _connector$info === void 0 ? void 0 : _connector$info.name) || connector.name || 'Unknown',\n            reconnect: true,\n            view: RouterController.state.view,\n            walletRank: undefined\n          }\n        });\n      } else {\n        this.setStatus('disconnected', namespace);\n      }\n    } catch (e) {\n      this.onDisconnectNamespace({\n        chainNamespace: namespace,\n        closeModal: false\n      });\n    }\n  }\n  async syncWalletConnectAccount() {\n    var _this$universalProvid3;\n    const sessionNamespaces = Object.keys(((_this$universalProvid3 = this.universalProvider) === null || _this$universalProvid3 === void 0 || (_this$universalProvid3 = _this$universalProvid3.session) === null || _this$universalProvid3 === void 0 ? void 0 : _this$universalProvid3.namespaces) || {});\n    const syncTasks = this.chainNamespaces.map(async chainNamespace => {\n      var _this$universalProvid4, _ChainController$stat4;\n      const adapter = this.getAdapter(chainNamespace);\n      if (!adapter) {\n        return;\n      }\n      const namespaceAccounts = ((_this$universalProvid4 = this.universalProvider) === null || _this$universalProvid4 === void 0 || (_this$universalProvid4 = _this$universalProvid4.session) === null || _this$universalProvid4 === void 0 || (_this$universalProvid4 = _this$universalProvid4.namespaces) === null || _this$universalProvid4 === void 0 || (_this$universalProvid4 = _this$universalProvid4[chainNamespace]) === null || _this$universalProvid4 === void 0 ? void 0 : _this$universalProvid4.accounts) || [];\n      // We try and find the address for this network in the session object.\n      const activeChainId = (_ChainController$stat4 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat4 === void 0 ? void 0 : _ChainController$stat4.id;\n      const sessionAddress = namespaceAccounts.find(account => {\n        const {\n          chainId\n        } = ParseUtil.parseCaipAddress(account);\n        return chainId === (activeChainId === null || activeChainId === void 0 ? void 0 : activeChainId.toString());\n      }) || namespaceAccounts[0];\n      if (sessionAddress) {\n        const caipAddress = ParseUtil.validateCaipAddress(sessionAddress);\n        const {\n          chainId,\n          address\n        } = ParseUtil.parseCaipAddress(caipAddress);\n        ProviderController.setProviderId(chainNamespace, UtilConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT);\n        if (this.caipNetworks && ChainController.state.activeCaipNetwork && adapter.namespace !== ConstantsUtil.CHAIN.EVM) {\n          const provider = adapter.getWalletConnectProvider({\n            caipNetworks: this.getCaipNetworks(),\n            provider: this.universalProvider,\n            activeCaipNetwork: ChainController.state.activeCaipNetwork\n          });\n          ProviderController.setProvider(chainNamespace, provider);\n        } else {\n          ProviderController.setProvider(chainNamespace, this.universalProvider);\n        }\n        ConnectorController.setConnectorId(ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT, chainNamespace);\n        StorageUtil.addConnectedNamespace(chainNamespace);\n        await this.syncAccount({\n          address,\n          chainId,\n          chainNamespace\n        });\n      } else if (sessionNamespaces.includes(chainNamespace)) {\n        this.setStatus('disconnected', chainNamespace);\n      }\n      this.syncConnectedWalletInfo(chainNamespace);\n      await ChainController.setApprovedCaipNetworksData(chainNamespace);\n    });\n    await Promise.all(syncTasks);\n  }\n  syncProvider(_ref5) {\n    let {\n      type,\n      provider,\n      id,\n      chainNamespace\n    } = _ref5;\n    ProviderController.setProviderId(chainNamespace, type);\n    ProviderController.setProvider(chainNamespace, provider);\n    ConnectorController.setConnectorId(id, chainNamespace);\n  }\n  async syncAccount(params) {\n    var _ChainController$stat5;\n    const isActiveNamespace = params.chainNamespace === ChainController.state.activeChain;\n    const networkOfChain = ChainController.getCaipNetworkByNamespace(params.chainNamespace, params.chainId);\n    const {\n      address,\n      chainId,\n      chainNamespace\n    } = params;\n    const {\n      chainId: activeChainId\n    } = StorageUtil.getActiveNetworkProps();\n    const chainIdToUse = chainId || activeChainId;\n    const isUnsupportedNetwork = ((_ChainController$stat5 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat5 === void 0 ? void 0 : _ChainController$stat5.name) === ConstantsUtil.UNSUPPORTED_NETWORK_NAME;\n    const shouldSupportAllNetworks = ChainController.getNetworkProp('supportsAllNetworks', chainNamespace);\n    this.setStatus('connected', chainNamespace);\n    if (isUnsupportedNetwork && !shouldSupportAllNetworks) {\n      return;\n    }\n    if (chainIdToUse) {\n      let caipNetwork = this.getCaipNetworks().find(n => n.id.toString() === chainIdToUse.toString());\n      let fallbackCaipNetwork = this.getCaipNetworks().find(n => n.chainNamespace === chainNamespace);\n      // If doesn't support all networks, we need to use approved networks\n      if (!shouldSupportAllNetworks && !caipNetwork && !fallbackCaipNetwork) {\n        // Connection can be requested for a chain that is not supported by the wallet so we need to use approved networks here\n        const caipNetworkIds = this.getApprovedCaipNetworkIds() || [];\n        const caipNetworkId = caipNetworkIds.find(id => {\n          var _ParseUtil$parseCaipN;\n          return ((_ParseUtil$parseCaipN = ParseUtil.parseCaipNetworkId(id)) === null || _ParseUtil$parseCaipN === void 0 ? void 0 : _ParseUtil$parseCaipN.chainId) === chainIdToUse.toString();\n        });\n        const fallBackCaipNetworkId = caipNetworkIds.find(id => {\n          var _ParseUtil$parseCaipN2;\n          return ((_ParseUtil$parseCaipN2 = ParseUtil.parseCaipNetworkId(id)) === null || _ParseUtil$parseCaipN2 === void 0 ? void 0 : _ParseUtil$parseCaipN2.chainNamespace) === chainNamespace;\n        });\n        caipNetwork = this.getCaipNetworks().find(n => n.caipNetworkId === caipNetworkId);\n        fallbackCaipNetwork = this.getCaipNetworks().find(n => n.caipNetworkId === fallBackCaipNetworkId ||\n        // This is a workaround used in Solana network to support deprecated caipNetworkId\n        'deprecatedCaipNetworkId' in n && n.deprecatedCaipNetworkId === fallBackCaipNetworkId);\n      }\n      const network = caipNetwork || fallbackCaipNetwork;\n      if ((network === null || network === void 0 ? void 0 : network.chainNamespace) === ChainController.state.activeChain) {\n        var _ChainController$stat6;\n        // If the network is unsupported and the user doesn't allow unsupported chains, we show the unsupported chain UI\n        if (OptionsController.state.enableNetworkSwitch && !OptionsController.state.allowUnsupportedChain && ((_ChainController$stat6 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat6 === void 0 ? void 0 : _ChainController$stat6.name) === ConstantsUtil.UNSUPPORTED_NETWORK_NAME) {\n          ChainController.showUnsupportedChainUI();\n        } else {\n          this.setCaipNetwork(network);\n        }\n      } else if (!isActiveNamespace) {\n        if (networkOfChain) {\n          this.setCaipNetworkOfNamespace(networkOfChain, chainNamespace);\n        }\n      }\n      this.syncConnectedWalletInfo(chainNamespace);\n      const currentAddress = this.getAddress(chainNamespace);\n      if (!HelpersUtil.isLowerCaseMatch(address, currentAddress)) {\n        this.syncAccountInfo(address, network === null || network === void 0 ? void 0 : network.id, chainNamespace);\n      }\n      if (isActiveNamespace) {\n        await this.syncBalance({\n          address,\n          chainId: network === null || network === void 0 ? void 0 : network.id,\n          chainNamespace\n        });\n      } else {\n        await this.syncBalance({\n          address,\n          chainId: networkOfChain === null || networkOfChain === void 0 ? void 0 : networkOfChain.id,\n          chainNamespace\n        });\n      }\n      this.syncIdentity({\n        address,\n        chainId,\n        chainNamespace\n      });\n    }\n  }\n  async syncAccountInfo(address, chainId, chainNamespace) {\n    const caipAddress = this.getCaipAddress(chainNamespace);\n    const newChainId = chainId || (caipAddress === null || caipAddress === void 0 ? void 0 : caipAddress.split(':')[1]);\n    if (!newChainId) {\n      return;\n    }\n    const newCaipAddress = \"\".concat(chainNamespace, \":\").concat(newChainId, \":\").concat(address);\n    this.setCaipAddress(newCaipAddress, chainNamespace, true);\n    await this.syncIdentity({\n      address,\n      chainId: newChainId,\n      chainNamespace\n    });\n  }\n  async syncReownName(address, chainNamespace) {\n    try {\n      const registeredWcNames = await this.getReownName(address);\n      if (registeredWcNames[0]) {\n        const wcName = registeredWcNames[0];\n        this.setProfileName(wcName.name, chainNamespace);\n      } else {\n        this.setProfileName(null, chainNamespace);\n      }\n    } catch (_unused3) {\n      this.setProfileName(null, chainNamespace);\n    }\n  }\n  syncConnectedWalletInfo(chainNamespace) {\n    const connectorId = ConnectorController.getConnectorId(chainNamespace);\n    const providerType = ProviderController.getProviderId(chainNamespace);\n    if (providerType === UtilConstantsUtil.CONNECTOR_TYPE_ANNOUNCED || providerType === UtilConstantsUtil.CONNECTOR_TYPE_INJECTED) {\n      if (connectorId) {\n        const connectors = this.getConnectors();\n        const connector = connectors.find(c => {\n          var _c$info, _c$connectors;\n          const isConnectorId = c.id === connectorId;\n          const isRdns = ((_c$info = c.info) === null || _c$info === void 0 ? void 0 : _c$info.rdns) === connectorId;\n          const hasMultiChainConnector = (_c$connectors = c.connectors) === null || _c$connectors === void 0 ? void 0 : _c$connectors.some(_c => {\n            var _c$info2;\n            return _c.id === connectorId || ((_c$info2 = _c.info) === null || _c$info2 === void 0 ? void 0 : _c$info2.rdns) === connectorId;\n          });\n          return isConnectorId || isRdns || Boolean(hasMultiChainConnector);\n        });\n        if (connector) {\n          const {\n            info,\n            name,\n            imageUrl\n          } = connector;\n          const icon = imageUrl || this.getConnectorImage(connector);\n          this.setConnectedWalletInfo(_objectSpread({\n            name,\n            icon\n          }, info), chainNamespace);\n        }\n      }\n    } else if (providerType === UtilConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT) {\n      const provider = ProviderController.getProvider(chainNamespace);\n      if (provider !== null && provider !== void 0 && provider.session) {\n        var _provider$session$pee;\n        this.setConnectedWalletInfo(_objectSpread(_objectSpread({}, provider.session.peer.metadata), {}, {\n          name: provider.session.peer.metadata.name,\n          icon: (_provider$session$pee = provider.session.peer.metadata.icons) === null || _provider$session$pee === void 0 ? void 0 : _provider$session$pee[0]\n        }), chainNamespace);\n      }\n    } else if (connectorId) {\n      if (connectorId === ConstantsUtil.CONNECTOR_ID.COINBASE_SDK || connectorId === ConstantsUtil.CONNECTOR_ID.COINBASE) {\n        const connector = this.getConnectors().find(c => c.id === connectorId);\n        const name = (connector === null || connector === void 0 ? void 0 : connector.name) || 'Coinbase Wallet';\n        const icon = (connector === null || connector === void 0 ? void 0 : connector.imageUrl) || this.getConnectorImage(connector);\n        const info = connector === null || connector === void 0 ? void 0 : connector.info;\n        this.setConnectedWalletInfo(_objectSpread(_objectSpread({}, info), {}, {\n          name,\n          icon\n        }), chainNamespace);\n      }\n    }\n  }\n  async syncBalance(params) {\n    const caipNetwork = NetworkUtil.getNetworksByNamespace(this.getCaipNetworks(), params.chainNamespace).find(n => {\n      var _params$chainId;\n      return n.id.toString() === ((_params$chainId = params.chainId) === null || _params$chainId === void 0 ? void 0 : _params$chainId.toString());\n    });\n    if (!caipNetwork || !params.chainId) {\n      return;\n    }\n    await this.updateNativeBalance(params.address, params.chainId, params.chainNamespace);\n  }\n  async ready() {\n    await this.readyPromise;\n  }\n  async updateNativeBalance(address, chainId, namespace) {\n    const adapter = this.getAdapter(namespace);\n    const caipNetwork = ChainController.getCaipNetworkByNamespace(namespace, chainId);\n    if (adapter) {\n      const balance = await adapter.getBalance({\n        address,\n        chainId,\n        caipNetwork,\n        tokens: this.options.tokens\n      });\n      this.setBalance(balance.balance, balance.symbol, namespace);\n      return balance;\n    }\n    return undefined;\n  }\n  // -- Universal Provider ---------------------------------------------------\n  async initializeUniversalAdapter() {\n    var _this = this,\n      _this$options2,\n      _this$options3,\n      _this$options4,\n      _this$options5,\n      _this$options6,\n      _this$options7,\n      _this$options8,\n      _this$options9,\n      _this$options0,\n      _this$options1,\n      _this$options$univers;\n    const logger = LoggerUtil.createLogger(function (error) {\n      if (error) {\n        _this.handleAlertError(error);\n      }\n      // eslint-disable-next-line no-console\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      console.error(...args);\n    });\n    const universalProviderOptions = {\n      projectId: (_this$options2 = this.options) === null || _this$options2 === void 0 ? void 0 : _this$options2.projectId,\n      metadata: {\n        name: (_this$options3 = this.options) !== null && _this$options3 !== void 0 && _this$options3.metadata ? (_this$options4 = this.options) === null || _this$options4 === void 0 ? void 0 : _this$options4.metadata.name : '',\n        description: (_this$options5 = this.options) !== null && _this$options5 !== void 0 && _this$options5.metadata ? (_this$options6 = this.options) === null || _this$options6 === void 0 ? void 0 : _this$options6.metadata.description : '',\n        url: (_this$options7 = this.options) !== null && _this$options7 !== void 0 && _this$options7.metadata ? (_this$options8 = this.options) === null || _this$options8 === void 0 ? void 0 : _this$options8.metadata.url : '',\n        icons: (_this$options9 = this.options) !== null && _this$options9 !== void 0 && _this$options9.metadata ? (_this$options0 = this.options) === null || _this$options0 === void 0 ? void 0 : _this$options0.metadata.icons : ['']\n      },\n      logger\n    };\n    OptionsController.setManualWCControl(Boolean((_this$options1 = this.options) === null || _this$options1 === void 0 ? void 0 : _this$options1.manualWCControl));\n    this.universalProvider = (_this$options$univers = this.options.universalProvider) !== null && _this$options$univers !== void 0 ? _this$options$univers : await UniversalProvider.init(universalProviderOptions);\n    // Clear the session if we don't want to reconnect on init\n    if (OptionsController.state.enableReconnect === false && this.universalProvider.session) {\n      await this.universalProvider.disconnect();\n    }\n    this.listenWalletConnect();\n  }\n  listenWalletConnect() {\n    if (this.universalProvider) {\n      this.chainNamespaces.forEach(namespace => {\n        WcHelpersUtil.listenWcProvider({\n          universalProvider: this.universalProvider,\n          namespace,\n          onDisplayUri: uri => {\n            ConnectionController.setUri(uri);\n          },\n          onConnect: accounts => {\n            const {\n              address\n            } = CoreHelperUtil.getAccount(accounts[0]);\n            ConnectionController.finalizeWcConnection(address);\n          },\n          onDisconnect: () => {\n            if (ChainController.state.noAdapters) {\n              this.resetAccount(namespace);\n            }\n            ConnectionController.resetWcConnection();\n          },\n          onChainChanged: chainId => {\n            const activeNamespace = ChainController.state.activeChain;\n            const isCurrentConnectorWalletConnect = activeNamespace && ConnectorController.state.activeConnectorIds[activeNamespace] === ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT;\n            if (activeNamespace === namespace && (ChainController.state.noAdapters || isCurrentConnectorWalletConnect)) {\n              const caipNetwork = this.getCaipNetworks().find(n => n.id.toString() === chainId.toString() || n.caipNetworkId.toString() === chainId.toString());\n              const currentCaipNetwork = this.getCaipNetwork();\n              if (!caipNetwork) {\n                this.setUnsupportedNetwork(chainId);\n                return;\n              }\n              if ((currentCaipNetwork === null || currentCaipNetwork === void 0 ? void 0 : currentCaipNetwork.id.toString()) !== (caipNetwork === null || caipNetwork === void 0 ? void 0 : caipNetwork.id.toString()) && (currentCaipNetwork === null || currentCaipNetwork === void 0 ? void 0 : currentCaipNetwork.chainNamespace) === (caipNetwork === null || caipNetwork === void 0 ? void 0 : caipNetwork.chainNamespace)) {\n                this.setCaipNetwork(caipNetwork);\n              }\n            }\n          },\n          onAccountsChanged: accounts => {\n            const activeNamespace = ChainController.state.activeChain;\n            const isCurrentConnectorWalletConnect = activeNamespace && ConnectorController.state.activeConnectorIds[activeNamespace] === ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT;\n            if (activeNamespace === namespace && (ChainController.state.noAdapters || isCurrentConnectorWalletConnect)) {\n              const account = accounts === null || accounts === void 0 ? void 0 : accounts[0];\n              if (account) {\n                this.syncAccount({\n                  address: account.address,\n                  chainId: account.chainId,\n                  chainNamespace: account.chainNamespace\n                });\n              }\n            }\n          }\n        });\n      });\n    }\n  }\n  createUniversalProvider() {\n    var _this$options10;\n    if (!this.universalProviderInitPromise && CoreHelperUtil.isClient() && (_this$options10 = this.options) !== null && _this$options10 !== void 0 && _this$options10.projectId) {\n      this.universalProviderInitPromise = this.initializeUniversalAdapter();\n    }\n    return this.universalProviderInitPromise;\n  }\n  async getUniversalProvider() {\n    if (!this.universalProvider) {\n      try {\n        await this.createUniversalProvider();\n      } catch (err) {\n        EventsController.sendEvent({\n          type: 'error',\n          event: 'INTERNAL_SDK_ERROR',\n          properties: {\n            errorType: 'UniversalProviderInitError',\n            errorMessage: err instanceof Error ? err.message : 'Unknown',\n            uncaught: false\n          }\n        });\n        // eslint-disable-next-line no-console\n        console.error('AppKit:getUniversalProvider - Cannot create provider', err);\n      }\n    }\n    return this.universalProvider;\n  }\n  getDisabledCaipNetworks() {\n    const approvedCaipNetworkIds = ChainController.getAllApprovedCaipNetworkIds();\n    const requestedCaipNetworks = ChainController.getAllRequestedCaipNetworks();\n    const sortedNetworks = CoreHelperUtil.sortRequestedNetworks(approvedCaipNetworkIds, requestedCaipNetworks);\n    return sortedNetworks.filter(network => ChainController.isCaipNetworkDisabled(network));\n  }\n  // - Utils -------------------------------------------------------------------\n  handleAlertError(error) {\n    const matchedUniversalProviderError = Object.entries(ErrorUtil.UniversalProviderErrors).find(_ref6 => {\n      let [, {\n        message\n      }] = _ref6;\n      return error.message.includes(message);\n    });\n    const [errorKey, errorValue] = matchedUniversalProviderError !== null && matchedUniversalProviderError !== void 0 ? matchedUniversalProviderError : [];\n    const {\n      message,\n      alertErrorKey\n    } = errorValue !== null && errorValue !== void 0 ? errorValue : {};\n    if (errorKey && message && !this.reportedAlertErrors[errorKey]) {\n      const alertError = ErrorUtil.ALERT_ERRORS[alertErrorKey];\n      if (alertError) {\n        AlertController.open(alertError, 'error');\n        this.reportedAlertErrors[errorKey] = true;\n      }\n    }\n  }\n  getAdapter(namespace) {\n    var _this$chainAdapters3;\n    if (!namespace) {\n      return undefined;\n    }\n    return (_this$chainAdapters3 = this.chainAdapters) === null || _this$chainAdapters3 === void 0 ? void 0 : _this$chainAdapters3[namespace];\n  }\n  createAdapter(blueprint) {\n    var _this$options11, _this$caipNetworks2;\n    if (!blueprint) {\n      return;\n    }\n    const namespace = blueprint.namespace;\n    if (!namespace) {\n      return;\n    }\n    this.createClients();\n    const adapterBlueprint = blueprint;\n    adapterBlueprint.namespace = namespace;\n    adapterBlueprint.construct({\n      namespace,\n      projectId: (_this$options11 = this.options) === null || _this$options11 === void 0 ? void 0 : _this$options11.projectId,\n      networks: (_this$caipNetworks2 = this.caipNetworks) === null || _this$caipNetworks2 === void 0 ? void 0 : _this$caipNetworks2.filter(_ref7 => {\n        let {\n          chainNamespace\n        } = _ref7;\n        return chainNamespace === namespace;\n      })\n    });\n    if (!this.chainNamespaces.includes(namespace)) {\n      this.chainNamespaces.push(namespace);\n    }\n    if (this.chainAdapters) {\n      this.chainAdapters[namespace] = adapterBlueprint;\n    }\n  }\n  // -- Public -------------------------------------------------------------------\n  async open(options) {\n    await this.injectModalUi();\n    if (options !== null && options !== void 0 && options.uri) {\n      ConnectionController.setUri(options.uri);\n    }\n    const {\n      isSwap,\n      isSend\n    } = this.toModalOptions();\n    if (isSwap(options)) {\n      return ModalController.open(_objectSpread(_objectSpread({}, options), {}, {\n        data: {\n          swap: options.arguments\n        }\n      }));\n    } else if (isSend(options)) {\n      if (options.arguments) {\n        return this.openSend(options.arguments);\n      }\n    }\n    return ModalController.open(options);\n  }\n  async close() {\n    await this.injectModalUi();\n    ModalController.close();\n  }\n  setLoading(loading, namespace) {\n    ModalController.setLoading(loading, namespace);\n  }\n  async disconnect(chainNamespace) {\n    await ConnectionController.disconnect({\n      namespace: chainNamespace\n    });\n  }\n  getSIWX() {\n    return OptionsController.state.siwx;\n  }\n  // -- review these -------------------------------------------------------------------\n  getError() {\n    return '';\n  }\n  getChainId() {\n    var _ChainController$stat7;\n    return (_ChainController$stat7 = ChainController.state.activeCaipNetwork) === null || _ChainController$stat7 === void 0 ? void 0 : _ChainController$stat7.id;\n  }\n  async switchNetwork(appKitNetwork) {\n    let {\n      throwOnFailure = false\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const network = this.getCaipNetworks().find(n => n.id === appKitNetwork.id);\n    if (!network) {\n      AlertController.open(ErrorUtil.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND, 'error');\n      return;\n    }\n    await ChainController.switchActiveNetwork(network, {\n      throwOnFailure\n    });\n  }\n  getWalletProvider() {\n    return ChainController.state.activeChain ? ProviderController.state.providers[ChainController.state.activeChain] : null;\n  }\n  getWalletProviderType() {\n    return ProviderController.getProviderId(ChainController.state.activeChain);\n  }\n  subscribeProviders(callback) {\n    return ProviderController.subscribeProviders(callback);\n  }\n  getThemeMode() {\n    return ThemeController.state.themeMode;\n  }\n  getThemeVariables() {\n    return ThemeController.state.themeVariables;\n  }\n  setThemeMode(themeMode) {\n    ThemeController.setThemeMode(themeMode);\n    setColorTheme(ThemeController.state.themeMode);\n  }\n  setTermsConditionsUrl(termsConditionsUrl) {\n    OptionsController.setTermsConditionsUrl(termsConditionsUrl);\n  }\n  setPrivacyPolicyUrl(privacyPolicyUrl) {\n    OptionsController.setPrivacyPolicyUrl(privacyPolicyUrl);\n  }\n  setThemeVariables(themeVariables) {\n    ThemeController.setThemeVariables(themeVariables);\n    setThemeVariables(ThemeController.state.themeVariables);\n  }\n  subscribeTheme(callback) {\n    return ThemeController.subscribe(callback);\n  }\n  subscribeConnections(callback) {\n    if (!this.remoteFeatures.multiWallet) {\n      AlertController.open(ConstantsUtil.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT, 'info');\n      return () => undefined;\n    }\n    return ConnectionController.subscribe(callback);\n  }\n  getWalletInfo(namespace) {\n    if (namespace) {\n      var _ChainController$stat8;\n      return (_ChainController$stat8 = ChainController.state.chains.get(namespace)) === null || _ChainController$stat8 === void 0 || (_ChainController$stat8 = _ChainController$stat8.accountState) === null || _ChainController$stat8 === void 0 ? void 0 : _ChainController$stat8.connectedWalletInfo;\n    }\n    const accountData = ChainController.getAccountData();\n    return accountData === null || accountData === void 0 ? void 0 : accountData.connectedWalletInfo;\n  }\n  getAccount(_namespace) {\n    const namespace = _namespace || ChainController.state.activeChain;\n    const authConnector = ConnectorController.getAuthConnector(namespace);\n    const accountState = ChainController.getAccountData(namespace);\n    const activeConnectorId = StorageUtil.getConnectedConnectorId(ChainController.state.activeChain);\n    const connections = ConnectionController.getConnections(namespace);\n    if (!namespace) {\n      throw new Error('AppKit:getAccount - namespace is required');\n    }\n    const allAccounts = connections.flatMap(connection => connection.accounts.map(_ref8 => {\n      let {\n        address,\n        type,\n        publicKey\n      } = _ref8;\n      return CoreHelperUtil.createAccount(namespace, address, type || 'eoa', publicKey);\n    }));\n    if (!accountState) {\n      return undefined;\n    }\n    return {\n      allAccounts,\n      caipAddress: accountState.caipAddress,\n      address: CoreHelperUtil.getPlainAddress(accountState.caipAddress),\n      isConnected: Boolean(accountState.caipAddress),\n      status: accountState.status,\n      embeddedWalletInfo: authConnector && activeConnectorId === ConstantsUtil.CONNECTOR_ID.AUTH ? {\n        user: accountState.user ? _objectSpread(_objectSpread({}, accountState.user), {}, {\n          /*\n           * Getting the username from the chain controller works well for social logins,\n           * but Farcaster uses a different connection flow and doesn't emit the username via events.\n           * Since the username is stored in local storage before the chain controller updates,\n           * it's safe to use the local storage value here.\n           */\n          username: StorageUtil.getConnectedSocialUsername()\n        }) : undefined,\n        authProvider: accountState.socialProvider || 'email',\n        accountType: getPreferredAccountType(namespace),\n        isSmartAccountDeployed: Boolean(accountState.smartAccountDeployed)\n      } : undefined\n    };\n  }\n  subscribeAccount(callback, namespace) {\n    const updateVal = () => {\n      const account = this.getAccount(namespace);\n      if (!account) {\n        return;\n      }\n      callback(account);\n    };\n    if (namespace) {\n      ChainController.subscribeChainProp('accountState', updateVal, namespace);\n    } else {\n      ChainController.subscribe(updateVal);\n    }\n    ConnectorController.subscribe(updateVal);\n  }\n  subscribeNetwork(callback) {\n    return ChainController.subscribe(_ref9 => {\n      let {\n        activeCaipNetwork\n      } = _ref9;\n      callback({\n        caipNetwork: activeCaipNetwork,\n        chainId: activeCaipNetwork === null || activeCaipNetwork === void 0 ? void 0 : activeCaipNetwork.id,\n        caipNetworkId: activeCaipNetwork === null || activeCaipNetwork === void 0 ? void 0 : activeCaipNetwork.caipNetworkId\n      });\n    });\n  }\n  subscribeWalletInfo(callback, namespace) {\n    if (namespace) {\n      return ChainController.subscribeChainProp('accountState', accountState => callback(accountState === null || accountState === void 0 ? void 0 : accountState.connectedWalletInfo), namespace);\n    }\n    return ChainController.subscribeChainProp('accountState', accountState => callback(accountState === null || accountState === void 0 ? void 0 : accountState.connectedWalletInfo));\n  }\n  subscribeShouldUpdateToAddress(callback) {\n    ChainController.subscribeChainProp('accountState', accountState => callback(accountState === null || accountState === void 0 ? void 0 : accountState.shouldUpdateToAddress));\n  }\n  subscribeCaipNetworkChange(callback) {\n    ChainController.subscribeKey('activeCaipNetwork', callback);\n  }\n  getState() {\n    return PublicStateController.state;\n  }\n  getRemoteFeatures() {\n    return OptionsController.state.remoteFeatures;\n  }\n  subscribeState(callback) {\n    return PublicStateController.subscribe(callback);\n  }\n  subscribeRemoteFeatures(callback) {\n    return OptionsController.subscribeKey('remoteFeatures', callback);\n  }\n  showErrorMessage(message) {\n    SnackController.showError(message);\n  }\n  showSuccessMessage(message) {\n    SnackController.showSuccess(message);\n  }\n  getEvent() {\n    return _objectSpread({}, EventsController.state);\n  }\n  subscribeEvents(callback) {\n    return EventsController.subscribe(callback);\n  }\n  replace(route) {\n    RouterController.replace(route);\n  }\n  redirect(route) {\n    RouterController.push(route);\n  }\n  popTransactionStack(status) {\n    RouterController.popTransactionStack(status);\n  }\n  isOpen() {\n    return ModalController.state.open;\n  }\n  isTransactionStackEmpty() {\n    return RouterController.state.transactionStack.length === 0;\n  }\n  static getInstance() {\n    return this.instance;\n  }\n  updateFeatures(newFeatures) {\n    OptionsController.setFeatures(newFeatures);\n  }\n  updateRemoteFeatures(newRemoteFeatures) {\n    OptionsController.setRemoteFeatures(newRemoteFeatures);\n  }\n  updateOptions(newOptions) {\n    const currentOptions = OptionsController.state || {};\n    const updatedOptions = _objectSpread(_objectSpread({}, currentOptions), newOptions);\n    OptionsController.setOptions(updatedOptions);\n  }\n  setConnectMethodsOrder(connectMethodsOrder) {\n    OptionsController.setConnectMethodsOrder(connectMethodsOrder);\n  }\n  setWalletFeaturesOrder(walletFeaturesOrder) {\n    OptionsController.setWalletFeaturesOrder(walletFeaturesOrder);\n  }\n  setCollapseWallets(collapseWallets) {\n    OptionsController.setCollapseWallets(collapseWallets);\n  }\n  setSocialsOrder(socialsOrder) {\n    OptionsController.setSocialsOrder(socialsOrder);\n  }\n  getConnectMethodsOrder() {\n    return WalletUtil.getConnectOrderMethod(OptionsController.state.features, ConnectorController.getConnectors());\n  }\n  /**\n   * Adds a network to an existing adapter in AppKit.\n   * @param namespace - The chain namespace to add the network to (e.g. 'eip155', 'solana')\n   * @param network - The network configuration to add\n   * @throws Error if adapter for namespace doesn't exist\n   */\n  addNetwork(namespace, network) {\n    if (this.chainAdapters && !this.chainAdapters[namespace]) {\n      throw new Error(\"Adapter for namespace \".concat(namespace, \" doesn't exist\"));\n    }\n    const extendedNetwork = this.extendCaipNetwork(network, this.options);\n    if (!this.getCaipNetworks().find(n => n.id === extendedNetwork.id)) {\n      ChainController.addNetwork(extendedNetwork);\n    }\n  }\n  /**\n   * Removes a network from an existing adapter in AppKit.\n   * @param namespace - The chain namespace the network belongs to\n   * @param networkId - The network ID to remove\n   * @throws Error if adapter for namespace doesn't exist or if removing last network\n   */\n  removeNetwork(namespace, networkId) {\n    if (this.chainAdapters && !this.chainAdapters[namespace]) {\n      throw new Error(\"Adapter for namespace \".concat(namespace, \" doesn't exist\"));\n    }\n    const networkToRemove = this.getCaipNetworks().find(n => n.id === networkId);\n    if (!networkToRemove) {\n      return;\n    }\n    ChainController.removeNetwork(namespace, networkId);\n  }\n}","map":{"version":3,"names":["UniversalProvider","ConstantsUtil","NetworkUtil","ParseUtil","AlertController","ApiController","AssetUtil","BlockchainApiController","ChainController","ConnectionController","ConnectionControllerUtil","ConnectorController","CoreConstantsUtil","CoreHelperUtil","EnsController","EventsController","ModalController","OnRampController","OptionsController","ProviderController","PublicStateController","RouterController","SIWXUtil","SendController","SnackController","StorageUtil","ThemeController","getPreferredAccountType","WalletUtil","setColorTheme","setThemeVariables","CaipNetworksUtil","ErrorUtil","HelpersUtil","LoggerUtil","SemVerUtils","TokenUtil","UtilConstantsUtil","UniversalAdapter","ConfigUtil","WcConstantsUtil","WcHelpersUtil","AppKitBaseClient","constructor","options","chainNamespaces","features","remoteFeatures","reportedAlertErrors","getCaipNetwork","chainNamespace","id","_ChainController$getC","_ChainController$getN","_requestedCaipNetwork","caipNetworkWithId","getCaipNetworks","find","c","namespaceCaipNetwork","getNetworkData","caipNetwork","requestedCaipNetworks","getRequestedCaipNetworks","filter","state","activeCaipNetwork","defaultCaipNetwork","getCaipNetworkId","network","undefined","namespace","getActiveChainNamespace","activeChain","setRequestedCaipNetworks","chain","getApprovedCaipNetworkIds","getAllApprovedCaipNetworkIds","getCaipAddress","_ChainController$stat","activeCaipAddress","chains","get","accountState","caipAddress","setClientId","clientId","getProvider","getProviderType","getProviderId","setCaipAddress","shouldRefresh","arguments","length","setAccountProp","getPlainAddress","setBalance","balance","balanceSymbol","setProfileName","profileName","setProfileImage","profileImage","setUser","user","resetAccount","setCaipNetwork","setActiveCaipNetwork","setCaipNetworkOfNamespace","setChainNetworkData","setStatus","status","isConnected","setConnectionStatus","getAddressByChainNamespace","_ChainController$getA","getAccountData","address","setConnectors","connectors","allConnectors","setConnections","connections","fetchIdentity","request","getReownName","getNamesForAddress","getConnectors","getConnectorImage","connector","getConnections","multiWallet","open","REMOTE_FEATURES_ALERTS","MULTI_WALLET_NOT_ENABLED","DEFAULT","getConnectionsData","getRecentConnections","recentConnections","switchConnection","params","deleteConnection","deleteAddressFromConnection","syncStorageConnections","setConnectedWalletInfo","connectedWalletInfo","type","walletInfo","_objectSpread","getIsConnectedState","Boolean","addAddressLabel","label","_ChainController$getA2","addressLabels","removeAddressLabel","_ChainController$getA3","getAddress","_ChainController$getA4","setApprovedCaipNetworksData","resetNetwork","addConnector","resetWcConnection","setAddressExplorerUrl","addressExplorerUrl","setSmartAccountDeployed","isDeployed","setPreferredAccountType","preferredAccountType","setEIP6963Enabled","enabled","handleUnsafeRPCRequest","isOpen","isTransactionStackEmpty","redirect","view","version","sdkVersion","caipNetworks","extendCaipNetworks","getChainNamespacesSet","adapters","extendDefaultCaipNetwork","chainAdapters","createAdapters","readyPromise","initialize","checkSDKVersion","adapterNamespaces","map","adapter","Set","networkNamespaces","_OptionsController$st","_OptionsController$st2","_OptionsController$st3","_OptionsController$st4","_OptionsController$st5","initializeProjectSettings","initControllers","initChainAdapters","sendInitializeEvent","enableReconnect","syncExistingConnection","syncAdapterConnections","unSyncExistingConnection","fetchRemoteFeatures","setRemoteFeatures","onramp","setOnrampProviders","email","Array","isArray","socials","checkAllowedOrigins","reownAuthentication","ReownAuthentication","currentSIWX","siwx","console","warn","setSIWX","openSend","args","_this$getCaipNetwork","namespaceToUse","chainId","Error","toString","getCaipNetworkById","concat","switchNetwork","throwOnFailure","symbol","getTokenSymbolByAddress","assetAddress","fetchTokenImages","_unused","data","send","Promise","resolve","reject","unsubscribe","subscribeKey","hash","cleanup","unsubscribeModal","subscribe","modal","createCleanupHandler","toModalOptions","isSwap","isSend","allowedOrigins","fetchAllowedOrigins","isClient","currentOrigin","window","location","origin","isOriginAllowed","DEFAULT_ALLOWED_ANCESTORS","ALERT_ERRORS","ORIGIN_NOT_ALLOWED","error","message","RATE_LIMITED_APP_CONFIGURATION","originalError","cause","displayMessage","SERVER_ERROR_APP_CONFIGURATION","debugMessage","unsubscribeFunctions","forEach","_unused2","_options$siweConfig","optionsCopy","Object","assign","_objectDestructuringEmpty","universalProvider","sendEvent","event","properties","networks","n","siweConfig","initializeOptionsController","initializeChainController","initializeThemeController","initializeConnectionController","initializeConnectorController","themeMode","setThemeMode","themeVariables","_options$adapters","connectionControllerClient","networkControllerClient","getDefaultNetwork","_options$adapters2","_options$basic","setWcBasic","basic","setProjectId","projectId","setSdkVersion","_OptionsController$st6","_options$adapters3","setDebug","debug","setEnableWalletGuide","enableWalletGuide","setEnableWallets","enableWallets","enableEIP6963","setEnableNetworkSwitch","enableNetworkSwitch","setEnableReconnect","setEnableMobileFullScreen","enableMobileFullScreen","setEnableAuthLogger","enableAuthLogger","setCustomRpcUrls","customRpcUrls","setEnableEmbedded","enableEmbedded","setAllWallets","allWallets","setIncludeWalletIds","includeWalletIds","setExcludeWalletIds","excludeWalletIds","setFeaturedWalletIds","featuredWalletIds","setTokens","tokens","setTermsConditionsUrl","termsConditionsUrl","setPrivacyPolicyUrl","privacyPolicyUrl","setCustomWallets","customWallets","setFeatures","setAllowUnsupportedChain","allowUnsupportedChain","setUniversalProviderConfigOverride","universalProviderConfigOverride","setPreferUniversalLinks","experimental_preferUniversalLinks","setDefaultAccountTypes","defaultAccountTypes","defaultMetaData","getDefaultMetaData","metadata","setMetadata","setDisableAppend","disableAppend","PROJECT_ID_NOT_CONFIGURED","evmAdapter","CHAIN","EVM","mapToSIWX","_document$getElements","_document$querySelect","_document$querySelect2","name","document","getElementsByTagName","textContent","description","querySelector","content","url","icons","href","setUnsupportedNetwork","unsupportedNetwork","getUnsupportedNetwork","getCaipNetworkFromStorage","extendCaipNetwork","extendedNetwork","customNetworkImageUrls","chainImages","extendedNetworks","defaultNetwork","_options$defaultNetwo","disconnectConnector","_ChainController$stat2","setLoading","disconnectResult","getAdapter","disconnect","createClients","connectWalletConnect","_this$getCaipNetwork2","isMultiWallet","hasConnections","result","shouldClose","close","setConnectedNamespaces","keys","syncWalletConnectAccount","initializeIfEnabled","connectExternal","connectResult","onConnectExternal","connectInactiveNamespaces","reconnectExternal","_ref","info","provider","reconnect","_this$getCaipNetwork3","addConnectedNamespace","syncConnectedWalletInfo","connectorIdParam","initialDisconnect","namespaceConnectorId","getConnectorId","isAuth","CONNECTOR_ID","AUTH","isWalletConnect","WALLET_CONNECT","_SIWXUtil$getSIWX","namespaces","from","namespacesToDisconnect","disconnectPromises","ns","currentConnectorId","connectorIdToDisconnect","disconnectData","deleteConnectedSocialProvider","connection","addDisconnectedConnectorId","connectorId","onDisconnectNamespace","closeModal","disconnectResults","allSettled","resetSend","getSIWX","signOutOnDisconnect","clearSessions","setFilterByNamespace","failures","f","reason","join","checkInstalled","ids","ethereum","some","_window$ethereum","String","signMessage","signature","sendTransaction","SEND_SUPPORTED_NAMESPACES","includes","estimateGas","gas","getEnsAvatar","_this$getCaipNetwork4","syncIdentity","Number","accountData","getEnsAddress","resolveReownName","writeContract","parseUnits","value","decimals","_adapter$parseUnits","formatUnits","_adapter$formatUnits","getCapabilities","grantPermissions","revokePermissions","walletGetAssets","_await$adapter$wallet","updateBalance","updateNativeBalance","switchCaipNetwork","getApprovedCaipNetworksData","setClient","_params$caipNetwork","_params$caipNetwork2","_fallbackCaipNetwork$","shouldUpdateNetwork","CONNECTOR_TYPE_AUTH","authNamespaces","AUTH_CONNECTOR_SUPPORTED_CHAINS","hasConnectedAuthNamespace","toConnectNetwork","fallbackCaipNetwork","caipNetworkToUse","res","connect","socialUri","rpcUrl","rpcUrls","default","http","syncProvider","removeDisconnectedConnectorId","connectedCaipNetwork","_connectResult$connec","isConnectingToAuth","otherAuthNamespaces","getOtherAuthNamespaces","activeAdapter","activeProvider","all","_caipNetworkToUse$rpc","ALERT_WARNINGS","INACTIVE_NAMESPACE_NOT_CONNECTED","code","providerType","CONNECTOR_TYPE_WALLET_CONNECT","_this$universalProvid","_this$universalProvid2","session","supportsAllNetworks","peer","approvedCaipNetworkIds","getChainsFromNamespaces","networkNamespace","namespaceAddress","syncAccount","values","flatMap","accountsChains","accounts","account","parseCaipAddress","blueprints","reduce","blueprint","b","_this$options","_this$caipNetworks","construct","_ref2","initChainAdapter","_this$chainAdapters","onConnectors","listenAdapter","syncConnectors","createUniversalProviderForAdapter","on","bind","connectionStatus","getConnectionStatus","clearAddressCache","_ref3","_ChainController$stat3","caipNetworkId","isSameNamespace","accountAddress","allConnections","flat","_ref4","_ChainController$getN2","handlePreviousConnectorConnection","isActiveChain","namespaceNetworkId","syncAccountChainId","syncAccountInfo","syncBalance","_OptionsController$st7","newConnectorId","isMultiWalletEnabled","hasNewConnectorConnected","shouldDisconnectPreviousConnector","getUniversalProvider","_this$chainAdapters2","_this$chainAdapters2$","setUniversalProvider","call","syncNamespaceConnection","reconnectWalletConnect","deleteRecentWallet","recentWallet","getRecentWallet","method","isMobile","walletRank","order","isSafeApp","setConnectorId","SAFE","syncAdapterConnection","err","removeConnectedNamespace","removeConnectorId","resetChain","syncConnections","connectToFirstConnector","_caipNetwork$rpcUrls","syncConnection","_connector$info","e","_this$universalProvid3","sessionNamespaces","syncTasks","_this$universalProvid4","_ChainController$stat4","namespaceAccounts","activeChainId","sessionAddress","validateCaipAddress","setProviderId","getWalletConnectProvider","setProvider","_ref5","_ChainController$stat5","isActiveNamespace","networkOfChain","getCaipNetworkByNamespace","getActiveNetworkProps","chainIdToUse","isUnsupportedNetwork","UNSUPPORTED_NETWORK_NAME","shouldSupportAllNetworks","getNetworkProp","caipNetworkIds","_ParseUtil$parseCaipN","parseCaipNetworkId","fallBackCaipNetworkId","_ParseUtil$parseCaipN2","deprecatedCaipNetworkId","_ChainController$stat6","showUnsupportedChainUI","currentAddress","isLowerCaseMatch","newChainId","split","newCaipAddress","syncReownName","registeredWcNames","wcName","_unused3","CONNECTOR_TYPE_ANNOUNCED","CONNECTOR_TYPE_INJECTED","_c$info","_c$connectors","isConnectorId","isRdns","rdns","hasMultiChainConnector","_c","_c$info2","imageUrl","icon","_provider$session$pee","COINBASE_SDK","COINBASE","getNetworksByNamespace","_params$chainId","ready","getBalance","initializeUniversalAdapter","_this","_this$options2","_this$options3","_this$options4","_this$options5","_this$options6","_this$options7","_this$options8","_this$options9","_this$options0","_this$options1","_this$options$univers","logger","createLogger","handleAlertError","_len","_key","universalProviderOptions","setManualWCControl","manualWCControl","init","listenWalletConnect","listenWcProvider","onDisplayUri","uri","setUri","onConnect","getAccount","finalizeWcConnection","onDisconnect","noAdapters","onChainChanged","activeNamespace","isCurrentConnectorWalletConnect","activeConnectorIds","currentCaipNetwork","onAccountsChanged","createUniversalProvider","_this$options10","universalProviderInitPromise","errorType","errorMessage","uncaught","getDisabledCaipNetworks","getAllRequestedCaipNetworks","sortedNetworks","sortRequestedNetworks","isCaipNetworkDisabled","matchedUniversalProviderError","entries","UniversalProviderErrors","_ref6","errorKey","errorValue","alertErrorKey","alertError","_this$chainAdapters3","createAdapter","_this$options11","_this$caipNetworks2","adapterBlueprint","_ref7","push","injectModalUi","swap","loading","getError","getChainId","_ChainController$stat7","appKitNetwork","SWITCH_NETWORK_NOT_FOUND","switchActiveNetwork","getWalletProvider","providers","getWalletProviderType","subscribeProviders","callback","getThemeMode","getThemeVariables","subscribeTheme","subscribeConnections","getWalletInfo","_ChainController$stat8","_namespace","authConnector","getAuthConnector","activeConnectorId","getConnectedConnectorId","allAccounts","_ref8","publicKey","createAccount","embeddedWalletInfo","username","getConnectedSocialUsername","authProvider","socialProvider","accountType","isSmartAccountDeployed","smartAccountDeployed","subscribeAccount","updateVal","subscribeChainProp","subscribeNetwork","_ref9","subscribeWalletInfo","subscribeShouldUpdateToAddress","shouldUpdateToAddress","subscribeCaipNetworkChange","getState","getRemoteFeatures","subscribeState","subscribeRemoteFeatures","showErrorMessage","showError","showSuccessMessage","showSuccess","getEvent","subscribeEvents","replace","route","popTransactionStack","transactionStack","getInstance","instance","updateFeatures","newFeatures","updateRemoteFeatures","newRemoteFeatures","updateOptions","newOptions","currentOptions","updatedOptions","setOptions","setConnectMethodsOrder","connectMethodsOrder","setWalletFeaturesOrder","walletFeaturesOrder","setCollapseWallets","collapseWallets","setSocialsOrder","socialsOrder","getConnectMethodsOrder","getConnectOrderMethod","addNetwork","removeNetwork","networkId","networkToRemove"],"sources":["../../../../src/client/appkit-base-client.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}