{"ast":null,"code":"import { DateUtil } from '@reown/appkit-common';\nimport { UiHelperUtil } from './UiHelperUtil.js';\nconst FLOAT_FIXED_VALUE = 3;\nconst GAS_FEE_THRESHOLD = 0.1;\nconst plusTypes = ['receive', 'deposit', 'borrow', 'claim'];\nconst minusTypes = ['withdraw', 'repay', 'burn'];\nexport const TransactionUtil = {\n  getTransactionGroupTitle(year, month) {\n    const currentYear = DateUtil.getYear();\n    const monthName = DateUtil.getMonthNameByIndex(month);\n    const isCurrentYear = year === currentYear;\n    const groupTitle = isCurrentYear ? monthName : `${monthName} ${year}`;\n    return groupTitle;\n  },\n  getTransactionImages(transfers) {\n    const [transfer] = transfers;\n    const hasMultipleTransfers = transfers?.length > 1;\n    if (hasMultipleTransfers) {\n      return transfers.map(item => this.getTransactionImage(item));\n    }\n    return [this.getTransactionImage(transfer)];\n  },\n  getTransactionImage(transfer) {\n    return {\n      type: TransactionUtil.getTransactionTransferTokenType(transfer),\n      url: TransactionUtil.getTransactionImageURL(transfer)\n    };\n  },\n  getTransactionImageURL(transfer) {\n    let imageURL = undefined;\n    const isNFT = Boolean(transfer?.nft_info);\n    const isFungible = Boolean(transfer?.fungible_info);\n    if (transfer && isNFT) {\n      imageURL = transfer?.nft_info?.content?.preview?.url;\n    } else if (transfer && isFungible) {\n      imageURL = transfer?.fungible_info?.icon?.url;\n    }\n    return imageURL;\n  },\n  getTransactionTransferTokenType(transfer) {\n    if (transfer?.fungible_info) {\n      return 'FUNGIBLE';\n    } else if (transfer?.nft_info) {\n      return 'NFT';\n    }\n    return undefined;\n  },\n  getTransactionDescriptions(transaction, mergedTransfers) {\n    const type = transaction?.metadata?.operationType;\n    const transfers = mergedTransfers || transaction?.transfers;\n    const hasTransfer = transfers?.length > 0;\n    const hasMultipleTransfers = transfers?.length > 1;\n    const isFungible = hasTransfer && transfers?.every(transfer => Boolean(transfer?.fungible_info));\n    const [firstTransfer, secondTransfer] = transfers;\n    let firstDescription = this.getTransferDescription(firstTransfer);\n    let secondDescription = this.getTransferDescription(secondTransfer);\n    if (!hasTransfer) {\n      const isSendOrReceive = type === 'send' || type === 'receive';\n      if (isSendOrReceive && isFungible) {\n        firstDescription = UiHelperUtil.getTruncateString({\n          string: transaction?.metadata.sentFrom,\n          charsStart: 4,\n          charsEnd: 6,\n          truncate: 'middle'\n        });\n        secondDescription = UiHelperUtil.getTruncateString({\n          string: transaction?.metadata.sentTo,\n          charsStart: 4,\n          charsEnd: 6,\n          truncate: 'middle'\n        });\n        return [firstDescription, secondDescription];\n      }\n      return [transaction.metadata.status];\n    }\n    if (hasMultipleTransfers) {\n      return transfers.map(item => this.getTransferDescription(item));\n    }\n    let prefix = '';\n    if (plusTypes.includes(type)) {\n      prefix = '+';\n    } else if (minusTypes.includes(type)) {\n      prefix = '-';\n    }\n    firstDescription = prefix.concat(firstDescription);\n    return [firstDescription];\n  },\n  getTransferDescription(transfer) {\n    let description = '';\n    if (!transfer) {\n      return description;\n    }\n    if (transfer?.nft_info) {\n      description = transfer?.nft_info?.name || '-';\n    } else if (transfer?.fungible_info) {\n      description = this.getFungibleTransferDescription(transfer) || '-';\n    }\n    return description;\n  },\n  getFungibleTransferDescription(transfer) {\n    if (!transfer) {\n      return null;\n    }\n    const quantity = this.getQuantityFixedValue(transfer?.quantity.numeric);\n    const description = [quantity, transfer?.fungible_info?.symbol].join(' ').trim();\n    return description;\n  },\n  mergeTransfers(transfers) {\n    if (transfers?.length <= 1) {\n      return transfers;\n    }\n    const filteredTransfers = this.filterGasFeeTransfers(transfers);\n    const mergedTransfers = filteredTransfers.reduce((acc, t) => {\n      const name = t?.fungible_info?.name;\n      const existingTransfer = acc.find(({\n        fungible_info,\n        direction\n      }) => name && name === fungible_info?.name && direction === t.direction);\n      if (existingTransfer) {\n        const quantity = Number(existingTransfer.quantity.numeric) + Number(t.quantity.numeric);\n        existingTransfer.quantity.numeric = quantity.toString();\n        existingTransfer.value = (existingTransfer.value || 0) + (t.value || 0);\n      } else {\n        acc.push(t);\n      }\n      return acc;\n    }, []);\n    let finalTransfers = mergedTransfers;\n    if (mergedTransfers.length > 2) {\n      finalTransfers = mergedTransfers.sort((a, b) => (b.value || 0) - (a.value || 0)).slice(0, 2);\n    }\n    finalTransfers = finalTransfers.sort((a, b) => {\n      if (a.direction === 'out' && b.direction === 'in') {\n        return -1;\n      }\n      if (a.direction === 'in' && b.direction === 'out') {\n        return 1;\n      }\n      return 0;\n    });\n    return finalTransfers;\n  },\n  filterGasFeeTransfers(transfers) {\n    const tokenGroups = transfers.reduce((groups, transfer) => {\n      const tokenName = transfer?.fungible_info?.name;\n      if (tokenName) {\n        if (!groups[tokenName]) {\n          groups[tokenName] = [];\n        }\n        groups[tokenName].push(transfer);\n      }\n      return groups;\n    }, {});\n    const filteredTransfers = [];\n    Object.values(tokenGroups).forEach(tokenTransfers => {\n      if (tokenTransfers.length === 1) {\n        const firstTransfer = tokenTransfers[0];\n        if (firstTransfer) {\n          filteredTransfers.push(firstTransfer);\n        }\n      } else {\n        const inTransfers = tokenTransfers.filter(t => t.direction === 'in');\n        const outTransfers = tokenTransfers.filter(t => t.direction === 'out');\n        if (inTransfers.length === 1 && outTransfers.length === 1) {\n          const inTransfer = inTransfers[0];\n          const outTransfer = outTransfers[0];\n          let didApplyGasFeeFilter = false;\n          if (inTransfer && outTransfer) {\n            const inAmount = Number(inTransfer.quantity.numeric);\n            const outAmount = Number(outTransfer.quantity.numeric);\n            if (outAmount < inAmount * GAS_FEE_THRESHOLD) {\n              filteredTransfers.push(inTransfer);\n              didApplyGasFeeFilter = true;\n            } else if (inAmount < outAmount * GAS_FEE_THRESHOLD) {\n              filteredTransfers.push(outTransfer);\n              didApplyGasFeeFilter = true;\n            }\n          }\n          if (!didApplyGasFeeFilter) {\n            filteredTransfers.push(...tokenTransfers);\n          }\n        } else {\n          const significantTransfers = this.filterGasFeesFromTokenGroup(tokenTransfers);\n          filteredTransfers.push(...significantTransfers);\n        }\n      }\n    });\n    transfers.forEach(transfer => {\n      if (!transfer?.fungible_info?.name) {\n        filteredTransfers.push(transfer);\n      }\n    });\n    return filteredTransfers;\n  },\n  filterGasFeesFromTokenGroup(tokenTransfers) {\n    if (tokenTransfers.length <= 1) {\n      return tokenTransfers;\n    }\n    const amounts = tokenTransfers.map(t => Number(t.quantity.numeric));\n    const maxAmount = Math.max(...amounts);\n    const minAmount = Math.min(...amounts);\n    const extremeGasThreshold = 0.01;\n    if (minAmount < maxAmount * extremeGasThreshold) {\n      const filtered = tokenTransfers.filter(t => {\n        const amount = Number(t.quantity.numeric);\n        return amount >= maxAmount * extremeGasThreshold;\n      });\n      return filtered;\n    }\n    const inTransfers = tokenTransfers.filter(t => t.direction === 'in');\n    const outTransfers = tokenTransfers.filter(t => t.direction === 'out');\n    if (inTransfers.length === 1 && outTransfers.length === 1) {\n      const inTransfer = inTransfers[0];\n      const outTransfer = outTransfers[0];\n      if (inTransfer && outTransfer) {\n        const inAmount = Number(inTransfer.quantity.numeric);\n        const outAmount = Number(outTransfer.quantity.numeric);\n        if (outAmount < inAmount * GAS_FEE_THRESHOLD) {\n          return [inTransfer];\n        } else if (inAmount < outAmount * GAS_FEE_THRESHOLD) {\n          return [outTransfer];\n        }\n      }\n    }\n    return tokenTransfers;\n  },\n  getQuantityFixedValue(value) {\n    if (!value) {\n      return null;\n    }\n    const parsedValue = parseFloat(value);\n    return parsedValue.toFixed(FLOAT_FIXED_VALUE);\n  }\n};","map":{"version":3,"names":["DateUtil","UiHelperUtil","FLOAT_FIXED_VALUE","GAS_FEE_THRESHOLD","plusTypes","minusTypes","TransactionUtil","getTransactionGroupTitle","year","month","currentYear","getYear","monthName","getMonthNameByIndex","isCurrentYear","groupTitle","getTransactionImages","transfers","transfer","hasMultipleTransfers","length","map","item","getTransactionImage","type","getTransactionTransferTokenType","url","getTransactionImageURL","imageURL","undefined","isNFT","Boolean","nft_info","isFungible","fungible_info","content","preview","icon","getTransactionDescriptions","transaction","mergedTransfers","metadata","operationType","hasTransfer","every","firstTransfer","secondTransfer","firstDescription","getTransferDescription","secondDescription","isSendOrReceive","getTruncateString","string","sentFrom","charsStart","charsEnd","truncate","sentTo","status","prefix","includes","concat","description","name","getFungibleTransferDescription","quantity","getQuantityFixedValue","numeric","symbol","join","trim","mergeTransfers","filteredTransfers","filterGasFeeTransfers","reduce","acc","t","existingTransfer","find","direction","Number","toString","value","push","finalTransfers","sort","a","b","slice","tokenGroups","groups","tokenName","Object","values","forEach","tokenTransfers","inTransfers","filter","outTransfers","inTransfer","outTransfer","didApplyGasFeeFilter","inAmount","outAmount","significantTransfers","filterGasFeesFromTokenGroup","amounts","maxAmount","Math","max","minAmount","min","extremeGasThreshold","filtered","amount","parsedValue","parseFloat","toFixed"],"sources":["../../../../src/utils/TransactionUtil.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}