{"ast":null,"code":"import { proxy } from 'valtio/vanilla';\nimport { ConstantsUtil } from '../utils/ConstantsUtil.js';\nimport { CoreHelperUtil } from '../utils/CoreHelperUtil.js';\nimport { FetchUtil } from '../utils/FetchUtil.js';\nimport { StorageUtil } from '../utils/StorageUtil.js';\nimport { ChainController } from './ChainController.js';\nimport { OptionsController } from './OptionsController.js';\nimport { SnackController } from './SnackController.js';\nconst DEFAULT_OPTIONS = {\n  purchaseCurrencies: [{\n    id: '2b92315d-eab7-5bef-84fa-089a131333f5',\n    name: 'USD Coin',\n    symbol: 'USDC',\n    networks: [{\n      name: 'ethereum-mainnet',\n      display_name: 'Ethereum',\n      chain_id: '1',\n      contract_address: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48'\n    }, {\n      name: 'polygon-mainnet',\n      display_name: 'Polygon',\n      chain_id: '137',\n      contract_address: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174'\n    }]\n  }, {\n    id: '2b92315d-eab7-5bef-84fa-089a131333f5',\n    name: 'Ether',\n    symbol: 'ETH',\n    networks: [{\n      name: 'ethereum-mainnet',\n      display_name: 'Ethereum',\n      chain_id: '1',\n      contract_address: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48'\n    }, {\n      name: 'polygon-mainnet',\n      display_name: 'Polygon',\n      chain_id: '137',\n      contract_address: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174'\n    }]\n  }],\n  paymentCurrencies: [{\n    id: 'USD',\n    payment_method_limits: [{\n      id: 'card',\n      min: '10.00',\n      max: '7500.00'\n    }, {\n      id: 'ach_bank_account',\n      min: '10.00',\n      max: '25000.00'\n    }]\n  }, {\n    id: 'EUR',\n    payment_method_limits: [{\n      id: 'card',\n      min: '10.00',\n      max: '7500.00'\n    }, {\n      id: 'ach_bank_account',\n      min: '10.00',\n      max: '25000.00'\n    }]\n  }]\n};\n// -- Helpers ------------------------------------------- //\nconst baseUrl = CoreHelperUtil.getBlockchainApiUrl();\n// -- State --------------------------------------------- //\nconst state = proxy({\n  clientId: null,\n  api: new FetchUtil({\n    baseUrl,\n    clientId: null\n  }),\n  supportedChains: {\n    http: [],\n    ws: []\n  }\n});\n// -- Controller ---------------------------------------- //\nexport const BlockchainApiController = {\n  state,\n  async get(request) {\n    const {\n      st,\n      sv\n    } = BlockchainApiController.getSdkProperties();\n    const projectId = OptionsController.state.projectId;\n    const params = {\n      ...(request.params || {}),\n      st,\n      sv,\n      projectId\n    };\n    return state.api.get({\n      ...request,\n      params\n    });\n  },\n  getSdkProperties() {\n    const {\n      sdkType,\n      sdkVersion\n    } = OptionsController.state;\n    return {\n      st: sdkType || 'unknown',\n      sv: sdkVersion || 'unknown'\n    };\n  },\n  async isNetworkSupported(networkId) {\n    if (!networkId) {\n      return false;\n    }\n    try {\n      if (!state.supportedChains.http.length) {\n        await BlockchainApiController.getSupportedNetworks();\n      }\n    } catch (e) {\n      return false;\n    }\n    return state.supportedChains.http.includes(networkId);\n  },\n  async getSupportedNetworks() {\n    try {\n      const supportedChains = await BlockchainApiController.get({\n        path: 'v1/supported-chains'\n      });\n      state.supportedChains = supportedChains;\n      return supportedChains;\n    } catch {\n      return state.supportedChains;\n    }\n  },\n  async fetchIdentity({\n    address\n  }) {\n    const identityCache = StorageUtil.getIdentityFromCacheForAddress(address);\n    if (identityCache) {\n      return identityCache;\n    }\n    const result = await BlockchainApiController.get({\n      path: `/v1/identity/${address}`,\n      params: {\n        sender: ChainController.state.activeCaipAddress ? CoreHelperUtil.getPlainAddress(ChainController.state.activeCaipAddress) : undefined\n      }\n    });\n    StorageUtil.updateIdentityCache({\n      address,\n      identity: result,\n      timestamp: Date.now()\n    });\n    return result;\n  },\n  async fetchTransactions({\n    account,\n    cursor,\n    signal,\n    cache,\n    chainId\n  }) {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        data: [],\n        next: undefined\n      };\n    }\n    const transactionsCache = StorageUtil.getTransactionsCacheForAddress({\n      address: account,\n      chainId\n    });\n    if (transactionsCache) {\n      return transactionsCache;\n    }\n    const result = await BlockchainApiController.get({\n      path: `/v1/account/${account}/history`,\n      params: {\n        cursor,\n        chainId\n      },\n      signal,\n      cache\n    });\n    StorageUtil.updateTransactionsCache({\n      address: account,\n      chainId,\n      timestamp: Date.now(),\n      transactions: result\n    });\n    return result;\n  },\n  async fetchSwapQuote({\n    amount,\n    userAddress,\n    from,\n    to,\n    gasPrice\n  }) {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        quotes: []\n      };\n    }\n    return BlockchainApiController.get({\n      path: `/v1/convert/quotes`,\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      params: {\n        amount,\n        userAddress,\n        from,\n        to,\n        gasPrice\n      }\n    });\n  },\n  async fetchSwapTokens({\n    chainId\n  }) {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        tokens: []\n      };\n    }\n    return BlockchainApiController.get({\n      path: `/v1/convert/tokens`,\n      params: {\n        chainId\n      }\n    });\n  },\n  async fetchTokenPrice({\n    addresses\n  }) {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        fungibles: []\n      };\n    }\n    const tokenPriceCache = StorageUtil.getTokenPriceCacheForAddresses(addresses);\n    if (tokenPriceCache) {\n      return tokenPriceCache;\n    }\n    const result = await state.api.post({\n      path: '/v1/fungible/price',\n      body: {\n        currency: 'usd',\n        addresses,\n        projectId: OptionsController.state.projectId\n      },\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    StorageUtil.updateTokenPriceCache({\n      addresses,\n      timestamp: Date.now(),\n      tokenPrice: result\n    });\n    return result;\n  },\n  async fetchSwapAllowance({\n    tokenAddress,\n    userAddress\n  }) {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        allowance: '0'\n      };\n    }\n    return BlockchainApiController.get({\n      path: `/v1/convert/allowance`,\n      params: {\n        tokenAddress,\n        userAddress\n      },\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n  },\n  async fetchGasPrice({\n    chainId\n  }) {\n    const {\n      st,\n      sv\n    } = BlockchainApiController.getSdkProperties();\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      throw new Error('Network not supported for Gas Price');\n    }\n    return BlockchainApiController.get({\n      path: `/v1/convert/gas-price`,\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      params: {\n        chainId,\n        st,\n        sv\n      }\n    });\n  },\n  async generateSwapCalldata({\n    amount,\n    from,\n    to,\n    userAddress,\n    disableEstimate\n  }) {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      throw new Error('Network not supported for Swaps');\n    }\n    return state.api.post({\n      path: '/v1/convert/build-transaction',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: {\n        amount,\n        eip155: {\n          slippage: ConstantsUtil.CONVERT_SLIPPAGE_TOLERANCE\n        },\n        projectId: OptionsController.state.projectId,\n        from,\n        to,\n        userAddress,\n        disableEstimate\n      }\n    });\n  },\n  async generateApproveCalldata({\n    from,\n    to,\n    userAddress\n  }) {\n    const {\n      st,\n      sv\n    } = BlockchainApiController.getSdkProperties();\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      throw new Error('Network not supported for Swaps');\n    }\n    return BlockchainApiController.get({\n      path: `/v1/convert/build-approve`,\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      params: {\n        userAddress,\n        from,\n        to,\n        st,\n        sv\n      }\n    });\n  },\n  async getBalance(address, chainId, forceUpdate) {\n    const {\n      st,\n      sv\n    } = BlockchainApiController.getSdkProperties();\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      SnackController.showError('Token Balance Unavailable');\n      return {\n        balances: []\n      };\n    }\n    const caipAddress = `${chainId}:${address}`;\n    const cachedBalance = StorageUtil.getBalanceCacheForCaipAddress(caipAddress);\n    if (cachedBalance) {\n      return cachedBalance;\n    }\n    const balance = await BlockchainApiController.get({\n      path: `/v1/account/${address}/balance`,\n      params: {\n        currency: 'usd',\n        chainId,\n        forceUpdate,\n        st,\n        sv\n      }\n    });\n    StorageUtil.updateBalanceCache({\n      caipAddress,\n      balance,\n      timestamp: Date.now()\n    });\n    return balance;\n  },\n  async lookupEnsName(name) {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        addresses: {},\n        attributes: []\n      };\n    }\n    return BlockchainApiController.get({\n      path: `/v1/profile/account/${name}`,\n      params: {\n        apiVersion: '2'\n      }\n    });\n  },\n  async reverseLookupEnsName({\n    address\n  }) {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return [];\n    }\n    const sender = ChainController.getAccountData()?.address;\n    return BlockchainApiController.get({\n      path: `/v1/profile/reverse/${address}`,\n      params: {\n        sender,\n        apiVersion: '2'\n      }\n    });\n  },\n  async getEnsNameSuggestions(name) {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        suggestions: []\n      };\n    }\n    return BlockchainApiController.get({\n      path: `/v1/profile/suggestions/${name}`,\n      params: {\n        zone: 'reown.id'\n      }\n    });\n  },\n  async registerEnsName({\n    coinType,\n    address,\n    message,\n    signature\n  }) {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        success: false\n      };\n    }\n    return state.api.post({\n      path: `/v1/profile/account`,\n      body: {\n        coin_type: coinType,\n        address,\n        message,\n        signature\n      },\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n  },\n  async generateOnRampURL({\n    destinationWallets,\n    partnerUserId,\n    defaultNetwork,\n    purchaseAmount,\n    paymentAmount\n  }) {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return '';\n    }\n    const response = await state.api.post({\n      path: `/v1/generators/onrampurl`,\n      params: {\n        projectId: OptionsController.state.projectId\n      },\n      body: {\n        destinationWallets,\n        defaultNetwork,\n        partnerUserId,\n        defaultExperience: 'buy',\n        presetCryptoAmount: purchaseAmount,\n        presetFiatAmount: paymentAmount\n      }\n    });\n    return response.url;\n  },\n  async getOnrampOptions() {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        paymentCurrencies: [],\n        purchaseCurrencies: []\n      };\n    }\n    try {\n      const response = await BlockchainApiController.get({\n        path: `/v1/onramp/options`\n      });\n      return response;\n    } catch (e) {\n      return DEFAULT_OPTIONS;\n    }\n  },\n  async getOnrampQuote({\n    purchaseCurrency,\n    paymentCurrency,\n    amount,\n    network\n  }) {\n    try {\n      const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n      if (!isSupported) {\n        return null;\n      }\n      const response = await state.api.post({\n        path: `/v1/onramp/quote`,\n        params: {\n          projectId: OptionsController.state.projectId\n        },\n        body: {\n          purchaseCurrency,\n          paymentCurrency,\n          amount,\n          network\n        }\n      });\n      return response;\n    } catch (e) {\n      // Mocking response as 1:1 until endpoint is ready\n      return {\n        networkFee: {\n          amount,\n          currency: paymentCurrency.id\n        },\n        paymentSubtotal: {\n          amount,\n          currency: paymentCurrency.id\n        },\n        paymentTotal: {\n          amount,\n          currency: paymentCurrency.id\n        },\n        purchaseAmount: {\n          amount,\n          currency: paymentCurrency.id\n        },\n        quoteId: 'mocked-quote-id'\n      };\n    }\n  },\n  async getSmartSessions(caipAddress) {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return [];\n    }\n    return BlockchainApiController.get({\n      path: `/v1/sessions/${caipAddress}`\n    });\n  },\n  async revokeSmartSession(address, pci, signature) {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        success: false\n      };\n    }\n    return state.api.post({\n      path: `/v1/sessions/${address}/revoke`,\n      params: {\n        projectId: OptionsController.state.projectId\n      },\n      body: {\n        pci,\n        signature\n      }\n    });\n  },\n  setClientId(clientId) {\n    state.clientId = clientId;\n    state.api = new FetchUtil({\n      baseUrl,\n      clientId\n    });\n  }\n};","map":{"version":3,"names":["proxy","ConstantsUtil","CoreHelperUtil","FetchUtil","StorageUtil","ChainController","OptionsController","SnackController","DEFAULT_OPTIONS","purchaseCurrencies","id","name","symbol","networks","display_name","chain_id","contract_address","paymentCurrencies","payment_method_limits","min","max","baseUrl","getBlockchainApiUrl","state","clientId","api","supportedChains","http","ws","BlockchainApiController","get","request","st","sv","getSdkProperties","projectId","params","sdkType","sdkVersion","isNetworkSupported","networkId","length","getSupportedNetworks","e","includes","path","fetchIdentity","address","identityCache","getIdentityFromCacheForAddress","result","sender","activeCaipAddress","getPlainAddress","undefined","updateIdentityCache","identity","timestamp","Date","now","fetchTransactions","account","cursor","signal","cache","chainId","isSupported","activeCaipNetwork","caipNetworkId","data","next","transactionsCache","getTransactionsCacheForAddress","updateTransactionsCache","transactions","fetchSwapQuote","amount","userAddress","from","to","gasPrice","quotes","headers","fetchSwapTokens","tokens","fetchTokenPrice","addresses","fungibles","tokenPriceCache","getTokenPriceCacheForAddresses","post","body","currency","updateTokenPriceCache","tokenPrice","fetchSwapAllowance","tokenAddress","allowance","fetchGasPrice","Error","generateSwapCalldata","disableEstimate","eip155","slippage","CONVERT_SLIPPAGE_TOLERANCE","generateApproveCalldata","getBalance","forceUpdate","showError","balances","caipAddress","cachedBalance","getBalanceCacheForCaipAddress","balance","updateBalanceCache","lookupEnsName","attributes","apiVersion","reverseLookupEnsName","getAccountData","getEnsNameSuggestions","suggestions","zone","registerEnsName","coinType","message","signature","success","coin_type","generateOnRampURL","destinationWallets","partnerUserId","defaultNetwork","purchaseAmount","paymentAmount","response","defaultExperience","presetCryptoAmount","presetFiatAmount","url","getOnrampOptions","getOnrampQuote","purchaseCurrency","paymentCurrency","network","networkFee","paymentSubtotal","paymentTotal","quoteId","getSmartSessions","revokeSmartSession","pci","setClientId"],"sources":["../../../../src/controllers/BlockchainApiController.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}