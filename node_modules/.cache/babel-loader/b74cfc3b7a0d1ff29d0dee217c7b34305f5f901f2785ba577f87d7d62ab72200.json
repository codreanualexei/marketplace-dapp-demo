{"ast":null,"code":"import { proxy, ref, snapshot, subscribe as sub } from 'valtio/vanilla';\nimport { subscribeKey as subKey } from 'valtio/vanilla/utils';\nimport { AVAILABLE_NAMESPACES, ConstantsUtil, getW3mThemeVariables } from '@reown/appkit-common';\nimport { W3mFrameRpcConstants } from '@reown/appkit-wallet/utils';\nimport { getPreferredAccountType } from '../utils/ChainControllerUtil.js';\nimport { MobileWalletUtil } from '../utils/MobileWallet.js';\nimport { StorageUtil } from '../utils/StorageUtil.js';\nimport { withErrorBoundary } from '../utils/withErrorBoundary.js';\nimport { ApiController } from './ApiController.js';\nimport { ChainController } from './ChainController.js';\nimport { OptionsController } from './OptionsController.js';\nimport { RouterController } from './RouterController.js';\nimport { ThemeController } from './ThemeController.js';\nconst defaultActiveConnectors = Object.fromEntries(AVAILABLE_NAMESPACES.map(namespace => [namespace, undefined]));\nconst defaultFilterByNamespaceMap = Object.fromEntries(AVAILABLE_NAMESPACES.map(namespace => [namespace, true]));\n// -- State --------------------------------------------- //\nconst state = proxy({\n  allConnectors: [],\n  connectors: [],\n  activeConnector: undefined,\n  filterByNamespace: undefined,\n  activeConnectorIds: defaultActiveConnectors,\n  filterByNamespaceMap: defaultFilterByNamespaceMap\n});\n// -- Controller ---------------------------------------- //\nconst controller = {\n  state,\n  subscribe(callback) {\n    return sub(state, () => {\n      callback(state);\n    });\n  },\n  subscribeKey(key, callback) {\n    return subKey(state, key, callback);\n  },\n  initialize(namespaces) {\n    namespaces.forEach(namespace => {\n      const connectorId = StorageUtil.getConnectedConnectorId(namespace);\n      if (connectorId) {\n        ConnectorController.setConnectorId(connectorId, namespace);\n      }\n    });\n  },\n  setActiveConnector(connector) {\n    if (connector) {\n      state.activeConnector = ref(connector);\n    }\n  },\n  setConnectors(connectors) {\n    const newConnectors = connectors.filter(newConnector => !state.allConnectors.some(existingConnector => existingConnector.id === newConnector.id && ConnectorController.getConnectorName(existingConnector.name) === ConnectorController.getConnectorName(newConnector.name) && existingConnector.chain === newConnector.chain));\n    /**\n     * We are reassigning the state of the proxy to a new array of new objects, ConnectorController can cause issues. So it is better to use ref in ConnectorController case.\n     * Check more about proxy on https://valtio.dev/docs/api/basic/proxy#Gotchas\n     * Check more about ref on https://valtio.dev/docs/api/basic/ref\n     */\n    newConnectors.forEach(connector => {\n      if (connector.type !== 'MULTI_CHAIN') {\n        state.allConnectors.push(ref(connector));\n      }\n    });\n    const enabledNamespaces = ConnectorController.getEnabledNamespaces();\n    const connectorsFilteredByNamespaces = ConnectorController.getEnabledConnectors(enabledNamespaces);\n    state.connectors = ConnectorController.mergeMultiChainConnectors(connectorsFilteredByNamespaces);\n  },\n  filterByNamespaces(enabledNamespaces) {\n    Object.keys(state.filterByNamespaceMap).forEach(namespace => {\n      state.filterByNamespaceMap[namespace] = false;\n    });\n    enabledNamespaces.forEach(namespace => {\n      state.filterByNamespaceMap[namespace] = true;\n    });\n    ConnectorController.updateConnectorsForEnabledNamespaces();\n  },\n  filterByNamespace(namespace, enabled) {\n    state.filterByNamespaceMap[namespace] = enabled;\n    ConnectorController.updateConnectorsForEnabledNamespaces();\n  },\n  updateConnectorsForEnabledNamespaces() {\n    const enabledNamespaces = ConnectorController.getEnabledNamespaces();\n    const enabledConnectors = ConnectorController.getEnabledConnectors(enabledNamespaces);\n    const areAllNamespacesEnabled = ConnectorController.areAllNamespacesEnabled();\n    state.connectors = ConnectorController.mergeMultiChainConnectors(enabledConnectors);\n    if (areAllNamespacesEnabled) {\n      ApiController.clearFilterByNamespaces();\n    } else {\n      ApiController.filterByNamespaces(enabledNamespaces);\n    }\n  },\n  getEnabledNamespaces() {\n    return Object.entries(state.filterByNamespaceMap).filter(([_, enabled]) => enabled).map(([namespace]) => namespace);\n  },\n  getEnabledConnectors(enabledNamespaces) {\n    return state.allConnectors.filter(connector => enabledNamespaces.includes(connector.chain));\n  },\n  areAllNamespacesEnabled() {\n    return Object.values(state.filterByNamespaceMap).every(enabled => enabled);\n  },\n  mergeMultiChainConnectors(connectors) {\n    const connectorsByNameMap = ConnectorController.generateConnectorMapByName(connectors);\n    const mergedConnectors = [];\n    connectorsByNameMap.forEach(keyConnectors => {\n      const firstItem = keyConnectors[0];\n      const isAuthConnector = firstItem?.id === ConstantsUtil.CONNECTOR_ID.AUTH;\n      if (keyConnectors.length > 1 && firstItem) {\n        mergedConnectors.push({\n          name: firstItem.name,\n          imageUrl: firstItem.imageUrl,\n          imageId: firstItem.imageId,\n          connectors: [...keyConnectors],\n          type: isAuthConnector ? 'AUTH' : 'MULTI_CHAIN',\n          // These values are just placeholders, we don't use them in multi-chain connector select screen\n          chain: 'eip155',\n          id: firstItem?.id || ''\n        });\n      } else if (firstItem) {\n        mergedConnectors.push(firstItem);\n      }\n    });\n    return mergedConnectors;\n  },\n  generateConnectorMapByName(connectors) {\n    const connectorsByNameMap = new Map();\n    connectors.forEach(connector => {\n      const {\n        name\n      } = connector;\n      const connectorName = ConnectorController.getConnectorName(name);\n      if (!connectorName) {\n        return;\n      }\n      const connectorsByName = connectorsByNameMap.get(connectorName) || [];\n      const haveSameConnector = connectorsByName.find(c => c.chain === connector.chain);\n      if (!haveSameConnector) {\n        connectorsByName.push(connector);\n      }\n      connectorsByNameMap.set(connectorName, connectorsByName);\n    });\n    return connectorsByNameMap;\n  },\n  getConnectorName(name) {\n    if (!name) {\n      return name;\n    }\n    const nameOverrideMap = {\n      'Trust Wallet': 'Trust'\n    };\n    return nameOverrideMap[name] || name;\n  },\n  getUniqueConnectorsByName(connectors) {\n    const uniqueConnectors = [];\n    connectors.forEach(c => {\n      if (!uniqueConnectors.find(uc => uc.chain === c.chain)) {\n        uniqueConnectors.push(c);\n      }\n    });\n    return uniqueConnectors;\n  },\n  addConnector(connector) {\n    if (connector.id === ConstantsUtil.CONNECTOR_ID.AUTH) {\n      const authConnector = connector;\n      const optionsState = snapshot(OptionsController.state);\n      const themeMode = ThemeController.getSnapshot().themeMode;\n      const themeVariables = ThemeController.getSnapshot().themeVariables;\n      authConnector?.provider?.syncDappData?.({\n        metadata: optionsState.metadata,\n        sdkVersion: optionsState.sdkVersion,\n        projectId: optionsState.projectId,\n        sdkType: optionsState.sdkType\n      });\n      authConnector?.provider?.syncTheme({\n        themeMode,\n        themeVariables,\n        w3mThemeVariables: getW3mThemeVariables(themeVariables, themeMode)\n      });\n      ConnectorController.setConnectors([connector]);\n    } else {\n      ConnectorController.setConnectors([connector]);\n    }\n  },\n  getAuthConnector(chainNamespace) {\n    const activeNamespace = chainNamespace || ChainController.state.activeChain;\n    const authConnector = state.connectors.find(c => c.id === ConstantsUtil.CONNECTOR_ID.AUTH);\n    if (!authConnector) {\n      return undefined;\n    }\n    if (authConnector?.connectors?.length) {\n      const connector = authConnector.connectors.find(c => c.chain === activeNamespace);\n      return connector;\n    }\n    return authConnector;\n  },\n  getAnnouncedConnectorRdns() {\n    return state.connectors.filter(c => c.type === 'ANNOUNCED').map(c => c.info?.rdns);\n  },\n  getConnectorById(id) {\n    return state.allConnectors.find(c => c.id === id);\n  },\n  getConnector({\n    id,\n    rdns,\n    namespace\n  }) {\n    const namespaceToUse = namespace || ChainController.state.activeChain;\n    const connectorsByNamespace = state.allConnectors.filter(c => c.chain === namespaceToUse);\n    return connectorsByNamespace.find(c => c.explorerId === id || c.info?.rdns === rdns);\n  },\n  syncIfAuthConnector(connector) {\n    if (connector.id !== 'ID_AUTH') {\n      return;\n    }\n    const authConnector = connector;\n    const optionsState = snapshot(OptionsController.state);\n    const themeMode = ThemeController.getSnapshot().themeMode;\n    const themeVariables = ThemeController.getSnapshot().themeVariables;\n    authConnector?.provider?.syncDappData?.({\n      metadata: optionsState.metadata,\n      sdkVersion: optionsState.sdkVersion,\n      sdkType: optionsState.sdkType,\n      projectId: optionsState.projectId\n    });\n    authConnector.provider.syncTheme({\n      themeMode,\n      themeVariables,\n      w3mThemeVariables: getW3mThemeVariables(themeVariables, themeMode)\n    });\n  },\n  /**\n   * Returns the connectors filtered by namespace.\n   * @param namespace - The namespace to filter the connectors by.\n   * @returns ConnectorWithProviders[].\n   */\n  getConnectorsByNamespace(namespace) {\n    const namespaceConnectors = state.allConnectors.filter(connector => connector.chain === namespace);\n    return ConnectorController.mergeMultiChainConnectors(namespaceConnectors);\n  },\n  canSwitchToSmartAccount(namespace) {\n    const isSmartAccountEnabled = ChainController.checkIfSmartAccountEnabled();\n    return isSmartAccountEnabled && getPreferredAccountType(namespace) === W3mFrameRpcConstants.ACCOUNT_TYPES.EOA;\n  },\n  selectWalletConnector(wallet) {\n    const redirectView = RouterController.state.data?.redirectView;\n    const connector = ConnectorController.getConnector({\n      id: wallet.id,\n      rdns: wallet.rdns\n    });\n    MobileWalletUtil.handleMobileDeeplinkRedirect(connector?.explorerId || wallet.id, ChainController.state.activeChain);\n    if (connector) {\n      RouterController.push('ConnectingExternal', {\n        connector,\n        wallet,\n        redirectView\n      });\n    } else {\n      RouterController.push('ConnectingWalletConnect', {\n        wallet,\n        redirectView\n      });\n    }\n  },\n  /**\n   * Returns the connectors. If a namespace is provided, the connectors are filtered by namespace.\n   * @param namespace - The namespace to filter the connectors by. If not provided, all connectors are returned.\n   * @returns ConnectorWithProviders[].\n   */\n  getConnectors(namespace) {\n    if (namespace) {\n      return ConnectorController.getConnectorsByNamespace(namespace);\n    }\n    return ConnectorController.mergeMultiChainConnectors(state.allConnectors);\n  },\n  /**\n   * Sets the filter by namespace and updates the connectors.\n   * @param namespace - The namespace to filter the connectors by.\n   */\n  setFilterByNamespace(namespace) {\n    state.filterByNamespace = namespace;\n    state.connectors = ConnectorController.getConnectors(namespace);\n    ApiController.setFilterByNamespace(namespace);\n  },\n  setConnectorId(connectorId, namespace) {\n    if (connectorId) {\n      state.activeConnectorIds = {\n        ...state.activeConnectorIds,\n        [namespace]: connectorId\n      };\n      StorageUtil.setConnectedConnectorId(namespace, connectorId);\n    }\n  },\n  removeConnectorId(namespace) {\n    state.activeConnectorIds = {\n      ...state.activeConnectorIds,\n      [namespace]: undefined\n    };\n    StorageUtil.deleteConnectedConnectorId(namespace);\n  },\n  getConnectorId(namespace) {\n    if (!namespace) {\n      return undefined;\n    }\n    return state.activeConnectorIds[namespace];\n  },\n  isConnected(namespace) {\n    if (!namespace) {\n      return Object.values(state.activeConnectorIds).some(id => Boolean(id));\n    }\n    return Boolean(state.activeConnectorIds[namespace]);\n  },\n  resetConnectorIds() {\n    state.activeConnectorIds = {\n      ...defaultActiveConnectors\n    };\n  }\n};\n// Export the controller wrapped with our error boundary\nexport const ConnectorController = withErrorBoundary(controller);","map":{"version":3,"names":["proxy","ref","snapshot","subscribe","sub","subscribeKey","subKey","AVAILABLE_NAMESPACES","ConstantsUtil","getW3mThemeVariables","W3mFrameRpcConstants","getPreferredAccountType","MobileWalletUtil","StorageUtil","withErrorBoundary","ApiController","ChainController","OptionsController","RouterController","ThemeController","defaultActiveConnectors","Object","fromEntries","map","namespace","undefined","defaultFilterByNamespaceMap","state","allConnectors","connectors","activeConnector","filterByNamespace","activeConnectorIds","filterByNamespaceMap","controller","callback","key","initialize","namespaces","forEach","connectorId","getConnectedConnectorId","ConnectorController","setConnectorId","setActiveConnector","connector","setConnectors","newConnectors","filter","newConnector","some","existingConnector","id","getConnectorName","name","chain","type","push","enabledNamespaces","getEnabledNamespaces","connectorsFilteredByNamespaces","getEnabledConnectors","mergeMultiChainConnectors","filterByNamespaces","keys","updateConnectorsForEnabledNamespaces","enabled","enabledConnectors","areAllNamespacesEnabled","clearFilterByNamespaces","entries","_","includes","values","every","connectorsByNameMap","generateConnectorMapByName","mergedConnectors","keyConnectors","firstItem","isAuthConnector","CONNECTOR_ID","AUTH","length","imageUrl","imageId","Map","connectorName","connectorsByName","get","haveSameConnector","find","c","set","nameOverrideMap","getUniqueConnectorsByName","uniqueConnectors","uc","addConnector","authConnector","optionsState","themeMode","getSnapshot","themeVariables","provider","syncDappData","metadata","sdkVersion","projectId","sdkType","syncTheme","w3mThemeVariables","getAuthConnector","chainNamespace","activeNamespace","activeChain","getAnnouncedConnectorRdns","info","rdns","getConnectorById","getConnector","namespaceToUse","connectorsByNamespace","explorerId","syncIfAuthConnector","getConnectorsByNamespace","namespaceConnectors","canSwitchToSmartAccount","isSmartAccountEnabled","checkIfSmartAccountEnabled","ACCOUNT_TYPES","EOA","selectWalletConnector","wallet","redirectView","data","handleMobileDeeplinkRedirect","getConnectors","setFilterByNamespace","setConnectedConnectorId","removeConnectorId","deleteConnectedConnectorId","getConnectorId","isConnected","Boolean","resetConnectorIds"],"sources":["../../../../src/controllers/ConnectorController.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}