{"ast":null,"code":"function e(s, r) {\n  let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"string\";\n  if (!s[r] || typeof s[r] !== i) throw new Error(\"Missing or invalid \\\"\".concat(r, \"\\\" param\"));\n}\nfunction l(s, r) {\n  let i = !0;\n  return r.forEach(t => {\n    t in s || (i = !1);\n  }), i;\n}\nfunction f(s, r) {\n  return Array.isArray(s) ? s.length === r : Object.keys(s).length === r;\n}\nfunction w(s, r) {\n  return Array.isArray(s) ? s.length >= r : Object.keys(s).length >= r;\n}\nfunction u(s, r, i) {\n  return (i.length ? w(s, r.length) : f(s, r.length)) ? l(s, r) : !1;\n}\nfunction n(s, r) {\n  let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"_\";\n  const t = s.split(i);\n  return t[t.length - 1].trim().toLowerCase() === r.trim().toLowerCase();\n}\nfunction R(s) {\n  return b(s.method) && a(s.params);\n}\nfunction b(s) {\n  return n(s, \"subscribe\");\n}\nfunction a(s) {\n  return u(s, [\"topic\"], []);\n}\nfunction P(s) {\n  return c(s.method) && h(s.params);\n}\nfunction c(s) {\n  return n(s, \"publish\");\n}\nfunction h(s) {\n  return u(s, [\"message\", \"topic\", \"ttl\"], [\"prompt\", \"tag\"]);\n}\nfunction _(s) {\n  return o(s.method) && p(s.params);\n}\nfunction o(s) {\n  return n(s, \"unsubscribe\");\n}\nfunction p(s) {\n  return u(s, [\"id\", \"topic\"], []);\n}\nfunction S(s) {\n  return m(s.method) && d(s.params);\n}\nfunction m(s) {\n  return n(s, \"subscription\");\n}\nfunction d(s) {\n  return u(s, [\"id\", \"data\"], []);\n}\nfunction g(s) {\n  if (!b(s.method)) throw new Error(\"JSON-RPC Request has invalid subscribe method\");\n  if (!a(s.params)) throw new Error(\"JSON-RPC Request has invalid subscribe params\");\n  const r = s.params;\n  return e(r, \"topic\"), r;\n}\nfunction q(s) {\n  if (!c(s.method)) throw new Error(\"JSON-RPC Request has invalid publish method\");\n  if (!h(s.params)) throw new Error(\"JSON-RPC Request has invalid publish params\");\n  const r = s.params;\n  return e(r, \"topic\"), e(r, \"message\"), e(r, \"ttl\", \"number\"), r;\n}\nfunction E(s) {\n  if (!o(s.method)) throw new Error(\"JSON-RPC Request has invalid unsubscribe method\");\n  if (!p(s.params)) throw new Error(\"JSON-RPC Request has invalid unsubscribe params\");\n  const r = s.params;\n  return e(r, \"id\"), r;\n}\nfunction k(s) {\n  if (!m(s.method)) throw new Error(\"JSON-RPC Request has invalid subscription method\");\n  if (!d(s.params)) throw new Error(\"JSON-RPC Request has invalid subscription params\");\n  const r = s.params;\n  return e(r, \"id\"), e(r, \"data\"), r;\n}\nconst C = {\n  waku: {\n    publish: \"waku_publish\",\n    batchPublish: \"waku_batchPublish\",\n    subscribe: \"waku_subscribe\",\n    batchSubscribe: \"waku_batchSubscribe\",\n    subscription: \"waku_subscription\",\n    unsubscribe: \"waku_unsubscribe\",\n    batchUnsubscribe: \"waku_batchUnsubscribe\",\n    batchFetchMessages: \"waku_batchFetchMessages\"\n  },\n  irn: {\n    publish: \"irn_publish\",\n    batchPublish: \"irn_batchPublish\",\n    subscribe: \"irn_subscribe\",\n    batchSubscribe: \"irn_batchSubscribe\",\n    subscription: \"irn_subscription\",\n    unsubscribe: \"irn_unsubscribe\",\n    batchUnsubscribe: \"irn_batchUnsubscribe\",\n    batchFetchMessages: \"irn_batchFetchMessages\"\n  },\n  iridium: {\n    publish: \"iridium_publish\",\n    batchPublish: \"iridium_batchPublish\",\n    subscribe: \"iridium_subscribe\",\n    batchSubscribe: \"iridium_batchSubscribe\",\n    subscription: \"iridium_subscription\",\n    unsubscribe: \"iridium_unsubscribe\",\n    batchUnsubscribe: \"iridium_batchUnsubscribe\",\n    batchFetchMessages: \"iridium_batchFetchMessages\"\n  }\n};\nexport { C as RELAY_JSONRPC, c as isPublishMethod, h as isPublishParams, P as isPublishRequest, b as isSubscribeMethod, a as isSubscribeParams, R as isSubscribeRequest, m as isSubscriptionMethod, d as isSubscriptionParams, S as isSubscriptionRequest, o as isUnsubscribeMethod, p as isUnsubscribeParams, _ as isUnsubscribeRequest, q as parsePublishRequest, g as parseSubscribeRequest, k as parseSubscriptionRequest, E as parseUnsubscribeRequest };","map":{"version":3,"names":["e","s","r","i","arguments","length","undefined","Error","concat","l","forEach","t","f","Array","isArray","Object","keys","w","u","n","split","trim","toLowerCase","R","b","method","a","params","P","c","h","_","o","p","S","m","d","g","q","E","k","C","waku","publish","batchPublish","subscribe","batchSubscribe","subscription","unsubscribe","batchUnsubscribe","batchFetchMessages","irn","iridium","RELAY_JSONRPC","isPublishMethod","isPublishParams","isPublishRequest","isSubscribeMethod","isSubscribeParams","isSubscribeRequest","isSubscriptionMethod","isSubscriptionParams","isSubscriptionRequest","isUnsubscribeMethod","isUnsubscribeParams","isUnsubscribeRequest","parsePublishRequest","parseSubscribeRequest","parseSubscriptionRequest","parseUnsubscribeRequest"],"sources":["/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@walletconnect/relay-api/src/misc.ts","/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@walletconnect/relay-api/src/validators.ts","/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@walletconnect/relay-api/src/parsers.ts","/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@walletconnect/relay-api/src/jsonrpc.ts"],"sourcesContent":["export function assertType(obj: any, key: string, type = \"string\") {\n  if (!obj[key] || typeof obj[key] !== type) {\n    throw new Error(`Missing or invalid \"${key}\" param`);\n  }\n}\n\nexport function hasRequiredParams(params: any, required: string[]) {\n  let matches = true;\n  required.forEach((key) => {\n    const exists = key in params;\n    if (!exists) {\n      matches = false;\n    }\n  });\n  return matches;\n}\n\nexport function hasExactParamsLength(params: any, length: number): boolean {\n  return Array.isArray(params) ? params.length === length : Object.keys(params).length === length;\n}\n\nexport function hasRequiredParamsLength(params: any, minLength: number): boolean {\n  return Array.isArray(params)\n    ? params.length >= minLength\n    : Object.keys(params).length >= minLength;\n}\n\nexport function checkParams(params: any, required: string[], optional: string[]) {\n  const exact = !optional.length;\n  const matchesLength = exact\n    ? hasExactParamsLength(params, required.length)\n    : hasRequiredParamsLength(params, required.length);\n  if (!matchesLength) return false;\n  return hasRequiredParams(params, required);\n}\n\nexport function methodEndsWith(method: string, expected: string, separator = \"_\") {\n  const split = method.split(separator);\n  return split[split.length - 1].trim().toLowerCase() === expected.trim().toLowerCase();\n}\n","import { JsonRpcRequest } from \"@walletconnect/jsonrpc-types\";\n\nimport { checkParams, methodEndsWith } from \"./misc\";\nimport { RelayJsonRpc } from \"./types\";\n\n// ---------- Subscribe ----------------------------------------------- //\n\nexport function isSubscribeRequest(\n  request: JsonRpcRequest,\n): request is JsonRpcRequest<RelayJsonRpc.SubscribeParams> {\n  return isSubscribeMethod(request.method) && isSubscribeParams(request.params);\n}\n\nexport function isSubscribeMethod(method: string): boolean {\n  return methodEndsWith(method, \"subscribe\");\n}\n\nexport function isSubscribeParams(params: any): params is RelayJsonRpc.SubscribeParams {\n  const required = [\"topic\"];\n  const optional: string[] = [];\n  return checkParams(params, required, optional);\n}\n\n// ---------- Publish ----------------------------------------------- //\n\nexport function isPublishRequest(\n  request: JsonRpcRequest,\n): request is JsonRpcRequest<RelayJsonRpc.PublishParams> {\n  return isPublishMethod(request.method) && isPublishParams(request.params);\n}\n\nexport function isPublishMethod(method: string): boolean {\n  return methodEndsWith(method, \"publish\");\n}\n\nexport function isPublishParams(params: any): params is RelayJsonRpc.PublishParams {\n  const required = [\"message\", \"topic\", \"ttl\"];\n  const optional = [\"prompt\", \"tag\"];\n  return checkParams(params, required, optional);\n}\n\n// ---------- Unsubscribe ----------------------------------------------- //\n\nexport function isUnsubscribeRequest(\n  request: JsonRpcRequest,\n): request is JsonRpcRequest<RelayJsonRpc.UnsubscribeParams> {\n  return isUnsubscribeMethod(request.method) && isUnsubscribeParams(request.params);\n}\n\nexport function isUnsubscribeMethod(method: string): boolean {\n  return methodEndsWith(method, \"unsubscribe\");\n}\n\nexport function isUnsubscribeParams(params: any): params is RelayJsonRpc.UnsubscribeParams {\n  const required = [\"id\", \"topic\"];\n  const optional: string[] = [];\n  return checkParams(params, required, optional);\n}\n\n// ---------- Subscription ----------------------------------------------- //\n\nexport function isSubscriptionRequest(\n  request: JsonRpcRequest,\n): request is JsonRpcRequest<RelayJsonRpc.SubscriptionParams> {\n  return isSubscriptionMethod(request.method) && isSubscriptionParams(request.params);\n}\n\nexport function isSubscriptionMethod(method: string): boolean {\n  return methodEndsWith(method, \"subscription\");\n}\n\nexport function isSubscriptionParams(params: any): params is RelayJsonRpc.SubscriptionParams {\n  const required = [\"id\", \"data\"];\n  const optional: string[] = [];\n  return checkParams(params, required, optional);\n}\n","import { JsonRpcRequest } from \"@walletconnect/jsonrpc-types\";\n\nimport { RelayJsonRpc } from \"./types\";\nimport { assertType } from \"./misc\";\nimport {\n  isPublishMethod,\n  isPublishParams,\n  isSubscribeMethod,\n  isSubscribeParams,\n  isSubscriptionMethod,\n  isSubscriptionParams,\n  isUnsubscribeMethod,\n  isUnsubscribeParams,\n} from \"./validators\";\n\nexport function parseSubscribeRequest(request: JsonRpcRequest): RelayJsonRpc.SubscribeParams {\n  if (!isSubscribeMethod(request.method)) {\n    throw new Error(\"JSON-RPC Request has invalid subscribe method\");\n  }\n  if (!isSubscribeParams(request.params)) {\n    throw new Error(\"JSON-RPC Request has invalid subscribe params\");\n  }\n  const params = request.params as RelayJsonRpc.SubscribeParams;\n\n  assertType(params, \"topic\");\n\n  return params;\n}\n\nexport function parsePublishRequest(request: JsonRpcRequest): RelayJsonRpc.PublishParams {\n  if (!isPublishMethod(request.method)) {\n    throw new Error(\"JSON-RPC Request has invalid publish method\");\n  }\n  if (!isPublishParams(request.params)) {\n    throw new Error(\"JSON-RPC Request has invalid publish params\");\n  }\n  const params = request.params as RelayJsonRpc.PublishParams;\n\n  assertType(params, \"topic\");\n  assertType(params, \"message\");\n  assertType(params, \"ttl\", \"number\");\n\n  return params;\n}\n\nexport function parseUnsubscribeRequest(request: JsonRpcRequest): RelayJsonRpc.UnsubscribeParams {\n  if (!isUnsubscribeMethod(request.method)) {\n    throw new Error(\"JSON-RPC Request has invalid unsubscribe method\");\n  }\n  if (!isUnsubscribeParams(request.params)) {\n    throw new Error(\"JSON-RPC Request has invalid unsubscribe params\");\n  }\n  const params = request.params as RelayJsonRpc.UnsubscribeParams;\n\n  assertType(params, \"id\");\n\n  return params;\n}\n\nexport function parseSubscriptionRequest(request: JsonRpcRequest): RelayJsonRpc.SubscriptionParams {\n  if (!isSubscriptionMethod(request.method)) {\n    throw new Error(\"JSON-RPC Request has invalid subscription method\");\n  }\n  if (!isSubscriptionParams(request.params)) {\n    throw new Error(\"JSON-RPC Request has invalid subscription params\");\n  }\n  const params = request.params as RelayJsonRpc.SubscriptionParams;\n\n  assertType(params, \"id\");\n  assertType(params, \"data\");\n\n  return params;\n}\n","import { RelayJsonRpc } from \"./types\";\n\nexport const RELAY_JSONRPC: { [protocol: string]: RelayJsonRpc.Methods } = {\n  waku: {\n    publish: \"waku_publish\",\n    batchPublish: \"waku_batchPublish\",\n    subscribe: \"waku_subscribe\",\n    batchSubscribe: \"waku_batchSubscribe\",\n    subscription: \"waku_subscription\",\n    unsubscribe: \"waku_unsubscribe\",\n    batchUnsubscribe: \"waku_batchUnsubscribe\",\n    batchFetchMessages: \"waku_batchFetchMessages\",\n  },\n  irn: {\n    publish: \"irn_publish\",\n    batchPublish: \"irn_batchPublish\",\n    subscribe: \"irn_subscribe\",\n    batchSubscribe: \"irn_batchSubscribe\",\n    subscription: \"irn_subscription\",\n    unsubscribe: \"irn_unsubscribe\",\n    batchUnsubscribe: \"irn_batchUnsubscribe\",\n    batchFetchMessages: \"irn_batchFetchMessages\",\n  },\n  iridium: {\n    publish: \"iridium_publish\",\n    batchPublish: \"iridium_batchPublish\",\n    subscribe: \"iridium_subscribe\",\n    batchSubscribe: \"iridium_batchSubscribe\",\n    subscription: \"iridium_subscription\",\n    unsubscribe: \"iridium_unsubscribe\",\n    batchUnsubscribe: \"iridium_batchUnsubscribe\",\n    batchFetchMessages: \"iridium_batchFetchMessages\",\n  },\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}