{"ast":null,"code":"import _objectSpread from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport '@reown/appkit-common';\nimport { ConnectionController } from '../controllers/ConnectionController.js';\nimport { ConnectorController } from '../controllers/ConnectorController.js';\nimport { OptionsController } from '../controllers/OptionsController.js';\n// -- Utils ------------------------------------------ //\nexport const ConnectionControllerUtil = {\n  getConnectionStatus(connection, namespace) {\n    const connectedConnectorId = ConnectorController.state.activeConnectorIds[namespace];\n    const connections = ConnectionController.getConnections(namespace);\n    const isConnectorConnected = Boolean(connectedConnectorId) && connection.connectorId === connectedConnectorId;\n    if (isConnectorConnected) {\n      return 'connected';\n    }\n    const isConnectionConnected = connections.some(c => c.connectorId.toLowerCase() === connection.connectorId.toLowerCase());\n    if (isConnectionConnected) {\n      return 'active';\n    }\n    return 'disconnected';\n  },\n  excludeConnectorAddressFromConnections(_ref) {\n    let {\n      connections,\n      connectorId,\n      addresses\n    } = _ref;\n    return connections.map(connection => {\n      const isConnectorMatch = connectorId ? connection.connectorId.toLowerCase() === connectorId.toLowerCase() : false;\n      if (isConnectorMatch && addresses) {\n        const filteredAccounts = connection.accounts.filter(account => {\n          const isAddressIncluded = addresses.some(address => address.toLowerCase() === account.address.toLowerCase());\n          return !isAddressIncluded;\n        });\n        return _objectSpread(_objectSpread({}, connection), {}, {\n          accounts: filteredAccounts\n        });\n      }\n      return connection;\n    });\n  },\n  excludeExistingConnections(connectorIds, newConnections) {\n    const existingConnectorIds = new Set(connectorIds);\n    return newConnections.filter(c => !existingConnectorIds.has(c.connectorId));\n  },\n  getConnectionsByConnectorId(connections, connectorId) {\n    return connections.filter(c => c.connectorId.toLowerCase() === connectorId.toLowerCase());\n  },\n  getConnectionsData(namespace) {\n    var _OptionsController$st, _ConnectionController;\n    const isMultiWalletEnabled = Boolean((_OptionsController$st = OptionsController.state.remoteFeatures) === null || _OptionsController$st === void 0 ? void 0 : _OptionsController$st.multiWallet);\n    const activeConnectorId = ConnectorController.state.activeConnectorIds[namespace];\n    const connections = ConnectionController.getConnections(namespace);\n    const recentConnections = (_ConnectionController = ConnectionController.state.recentConnections.get(namespace)) !== null && _ConnectionController !== void 0 ? _ConnectionController : [];\n    const recentConnectionsWithCurrentActiveConnectors = recentConnections.filter(connection => ConnectorController.getConnectorById(connection.connectorId));\n    const dedupedRecentConnections = ConnectionControllerUtil.excludeExistingConnections([...connections.map(c => c.connectorId), ...(activeConnectorId ? [activeConnectorId] : [])], recentConnectionsWithCurrentActiveConnectors);\n    if (!isMultiWalletEnabled) {\n      return {\n        connections: connections.filter(c => c.connectorId.toLowerCase() === (activeConnectorId === null || activeConnectorId === void 0 ? void 0 : activeConnectorId.toLowerCase())),\n        recentConnections: []\n      };\n    }\n    return {\n      connections,\n      recentConnections: dedupedRecentConnections\n    };\n  }\n};","map":{"version":3,"names":["ConnectionController","ConnectorController","OptionsController","ConnectionControllerUtil","getConnectionStatus","connection","namespace","connectedConnectorId","state","activeConnectorIds","connections","getConnections","isConnectorConnected","Boolean","connectorId","isConnectionConnected","some","c","toLowerCase","excludeConnectorAddressFromConnections","_ref","addresses","map","isConnectorMatch","filteredAccounts","accounts","filter","account","isAddressIncluded","address","_objectSpread","excludeExistingConnections","connectorIds","newConnections","existingConnectorIds","Set","has","getConnectionsByConnectorId","getConnectionsData","_OptionsController$st","_ConnectionController","isMultiWalletEnabled","remoteFeatures","multiWallet","activeConnectorId","recentConnections","get","recentConnectionsWithCurrentActiveConnectors","getConnectorById","dedupedRecentConnections"],"sources":["../../../../src/utils/ConnectionControllerUtil.ts"],"sourcesContent":[null],"mappings":";AAAA,OAAoC,sBAAsB;AAG1D,SAASA,oBAAoB,QAAQ,wCAAwC;AAC7E,SAASC,mBAAmB,QAAQ,uCAAuC;AAC3E,SAASC,iBAAiB,QAAQ,qCAAqC;AASvE;AACA,OAAO,MAAMC,wBAAwB,GAAG;EACtCC,mBAAmBA,CAACC,UAAsB,EAAEC,SAAyB;IACnE,MAAMC,oBAAoB,GAAGN,mBAAmB,CAACO,KAAK,CAACC,kBAAkB,CAACH,SAAS,CAAC;IACpF,MAAMI,WAAW,GAAGV,oBAAoB,CAACW,cAAc,CAACL,SAAS,CAAC;IAElE,MAAMM,oBAAoB,GACxBC,OAAO,CAACN,oBAAoB,CAAC,IAAIF,UAAU,CAACS,WAAW,KAAKP,oBAAoB;IAElF,IAAIK,oBAAoB,EAAE;MACxB,OAAO,WAAW;IACpB;IAEA,MAAMG,qBAAqB,GAAGL,WAAW,CAACM,IAAI,CAC5CC,CAAC,IAAIA,CAAC,CAACH,WAAW,CAACI,WAAW,EAAE,KAAKb,UAAU,CAACS,WAAW,CAACI,WAAW,EAAE,CAC1E;IAED,IAAIH,qBAAqB,EAAE;MACzB,OAAO,QAAQ;IACjB;IAEA,OAAO,cAAc;EACvB,CAAC;EACDI,sCAAsCA,CAAAC,IAAA,EAIY;IAAA,IAJX;MACrCV,WAAW;MACXI,WAAW;MACXO;IAAS,CACuC,GAAAD,IAAA;IAChD,OAAOV,WAAW,CAACY,GAAG,CAACjB,UAAU,IAAG;MAClC,MAAMkB,gBAAgB,GAAGT,WAAW,GAChCT,UAAU,CAACS,WAAW,CAACI,WAAW,EAAE,KAAKJ,WAAW,CAACI,WAAW,EAAE,GAClE,KAAK;MAET,IAAIK,gBAAgB,IAAIF,SAAS,EAAE;QACjC,MAAMG,gBAAgB,GAAGnB,UAAU,CAACoB,QAAQ,CAACC,MAAM,CAACC,OAAO,IAAG;UAC5D,MAAMC,iBAAiB,GAAGP,SAAS,CAACL,IAAI,CACtCa,OAAO,IAAIA,OAAO,CAACX,WAAW,EAAE,KAAKS,OAAO,CAACE,OAAO,CAACX,WAAW,EAAE,CACnE;UAED,OAAO,CAACU,iBAAiB;QAC3B,CAAC,CAAC;QAEF,OAAAE,aAAA,CAAAA,aAAA,KAAYzB,UAAU;UAAEoB,QAAQ,EAAED;QAAgB;MACpD;MAEA,OAAOnB,UAAU;IACnB,CAAC,CAAC;EACJ,CAAC;EACD0B,0BAA0BA,CAACC,YAAsB,EAAEC,cAA4B;IAC7E,MAAMC,oBAAoB,GAAG,IAAIC,GAAG,CAACH,YAAY,CAAC;IAElD,OAAOC,cAAc,CAACP,MAAM,CAACT,CAAC,IAAI,CAACiB,oBAAoB,CAACE,GAAG,CAACnB,CAAC,CAACH,WAAW,CAAC,CAAC;EAC7E,CAAC;EACDuB,2BAA2BA,CAAC3B,WAAyB,EAAEI,WAAmB;IACxE,OAAOJ,WAAW,CAACgB,MAAM,CAACT,CAAC,IAAIA,CAAC,CAACH,WAAW,CAACI,WAAW,EAAE,KAAKJ,WAAW,CAACI,WAAW,EAAE,CAAC;EAC3F,CAAC;EACDoB,kBAAkBA,CAAChC,SAAyB;IAAA,IAAAiC,qBAAA,EAAAC,qBAAA;IAC1C,MAAMC,oBAAoB,GAAG5B,OAAO,EAAA0B,qBAAA,GAACrC,iBAAiB,CAACM,KAAK,CAACkC,cAAc,cAAAH,qBAAA,uBAAtCA,qBAAA,CAAwCI,WAAW,CAAC;IAEzF,MAAMC,iBAAiB,GAAG3C,mBAAmB,CAACO,KAAK,CAACC,kBAAkB,CAACH,SAAS,CAAC;IAEjF,MAAMI,WAAW,GAAGV,oBAAoB,CAACW,cAAc,CAACL,SAAS,CAAC;IAClE,MAAMuC,iBAAiB,IAAAL,qBAAA,GAAGxC,oBAAoB,CAACQ,KAAK,CAACqC,iBAAiB,CAACC,GAAG,CAACxC,SAAS,CAAC,cAAAkC,qBAAA,cAAAA,qBAAA,GAAI,EAAE;IAC3F,MAAMO,4CAA4C,GAAGF,iBAAiB,CAACnB,MAAM,CAACrB,UAAU,IACtFJ,mBAAmB,CAAC+C,gBAAgB,CAAC3C,UAAU,CAACS,WAAW,CAAC,CAC7D;IACD,MAAMmC,wBAAwB,GAAG9C,wBAAwB,CAAC4B,0BAA0B,CAClF,CAAC,GAAGrB,WAAW,CAACY,GAAG,CAACL,CAAC,IAAIA,CAAC,CAACH,WAAW,CAAC,EAAE,IAAI8B,iBAAiB,GAAG,CAACA,iBAAiB,CAAC,GAAG,EAAE,CAAC,CAAC,EAC3FG,4CAA4C,CAC7C;IAED,IAAI,CAACN,oBAAoB,EAAE;MACzB,OAAO;QACL/B,WAAW,EAAEA,WAAW,CAACgB,MAAM,CAC7BT,CAAC,IAAIA,CAAC,CAACH,WAAW,CAACI,WAAW,EAAE,MAAK0B,iBAAiB,aAAjBA,iBAAiB,uBAAjBA,iBAAiB,CAAE1B,WAAW,EAAE,EACtE;QACD2B,iBAAiB,EAAE;OACpB;IACH;IAEA,OAAO;MACLnC,WAAW;MACXmC,iBAAiB,EAAEI;KACpB;EACH;CACD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}