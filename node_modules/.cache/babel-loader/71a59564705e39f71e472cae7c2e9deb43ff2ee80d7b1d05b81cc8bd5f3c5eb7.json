{"ast":null,"code":"import { NetworkUtil } from '@reown/appkit-common';\nimport { ChainController } from '../../controllers/ChainController.js';\nexport class ReownAuthenticationMessenger {\n  constructor(params) {\n    this.getNonce = params.getNonce;\n  }\n  async createMessage(input) {\n    const params = {\n      accountAddress: input.accountAddress,\n      chainId: input.chainId,\n      version: '1',\n      domain: typeof document === 'undefined' ? 'Unknown Domain' : document.location.host,\n      uri: typeof document === 'undefined' ? 'Unknown URI' : document.location.href,\n      resources: this.resources,\n      nonce: await this.getNonce(input),\n      issuedAt: this.stringifyDate(new Date()),\n      statement: undefined,\n      expirationTime: undefined,\n      notBefore: undefined\n    };\n    const methods = {\n      toString: () => this.stringify(params)\n    };\n    return Object.assign(params, methods);\n  }\n  stringify(params) {\n    const networkName = this.getNetworkName(params.chainId);\n    return [`${params.domain} wants you to sign in with your ${networkName} account:`, params.accountAddress, params.statement ? `\\n${params.statement}\\n` : '', `URI: ${params.uri}`, `Version: ${params.version}`, `Chain ID: ${params.chainId}`, `Nonce: ${params.nonce}`, params.issuedAt && `Issued At: ${params.issuedAt}`, params.expirationTime && `Expiration Time: ${params.expirationTime}`, params.notBefore && `Not Before: ${params.notBefore}`, params.requestId && `Request ID: ${params.requestId}`, params.resources?.length && params.resources.reduce((acc, resource) => `${acc}\\n- ${resource}`, 'Resources:')].filter(line => typeof line === 'string').join('\\n').trim();\n  }\n  getNetworkName(chainId) {\n    const requestedNetworks = ChainController.getAllRequestedCaipNetworks();\n    return NetworkUtil.getNetworkNameByCaipNetworkId(requestedNetworks, chainId);\n  }\n  stringifyDate(date) {\n    return date.toISOString();\n  }\n}","map":{"version":3,"names":["NetworkUtil","ChainController","ReownAuthenticationMessenger","constructor","params","getNonce","createMessage","input","accountAddress","chainId","version","domain","document","location","host","uri","href","resources","nonce","issuedAt","stringifyDate","Date","statement","undefined","expirationTime","notBefore","methods","toString","stringify","Object","assign","networkName","getNetworkName","requestId","length","reduce","acc","resource","filter","line","join","trim","requestedNetworks","getAllRequestedCaipNetworks","getNetworkNameByCaipNetworkId","date","toISOString"],"sources":["../../../../../src/features/reown-authentication/ReownAuthenticationMessenger.ts"],"sourcesContent":[null],"mappings":"AAAA,SAA6BA,WAAW,QAAQ,sBAAsB;AAEtE,SAASC,eAAe,QAAQ,sCAAsC;AAGtE,OAAM,MAAOC,4BAA4B;EAKvCC,YAAYC,MAAsD;IAChE,IAAI,CAACC,QAAQ,GAAGD,MAAM,CAACC,QAAQ;EACjC;EAEA,MAAMC,aAAaA,CAACC,KAAwB;IAC1C,MAAMH,MAAM,GAAG;MACbI,cAAc,EAAED,KAAK,CAACC,cAAc;MACpCC,OAAO,EAAEF,KAAK,CAACE,OAAO;MACtBC,OAAO,EAAE,GAAG;MACZC,MAAM,EAAE,OAAOC,QAAQ,KAAK,WAAW,GAAG,gBAAgB,GAAGA,QAAQ,CAACC,QAAQ,CAACC,IAAI;MACnFC,GAAG,EAAE,OAAOH,QAAQ,KAAK,WAAW,GAAG,aAAa,GAAGA,QAAQ,CAACC,QAAQ,CAACG,IAAI;MAC7EC,SAAS,EAAE,IAAI,CAACA,SAAS;MACzBC,KAAK,EAAE,MAAM,IAAI,CAACb,QAAQ,CAACE,KAAK,CAAC;MACjCY,QAAQ,EAAE,IAAI,CAACC,aAAa,CAAC,IAAIC,IAAI,EAAE,CAAC;MACxCC,SAAS,EAAEC,SAAS;MACpBC,cAAc,EAAED,SAAS;MACzBE,SAAS,EAAEF;KACZ;IAED,MAAMG,OAAO,GAAG;MACdC,QAAQ,EAAEA,CAAA,KAAM,IAAI,CAACC,SAAS,CAACxB,MAAM;KACR;IAE/B,OAAOyB,MAAM,CAACC,MAAM,CAAC1B,MAAM,EAAEsB,OAAO,CAAC;EACvC;EAEQE,SAASA,CAACxB,MAAwB;IACxC,MAAM2B,WAAW,GAAG,IAAI,CAACC,cAAc,CAAC5B,MAAM,CAACK,OAAO,CAAC;IAEvD,OAAO,CACL,GAAGL,MAAM,CAACO,MAAM,mCAAmCoB,WAAW,WAAW,EACzE3B,MAAM,CAACI,cAAc,EACrBJ,MAAM,CAACkB,SAAS,GAAG,KAAKlB,MAAM,CAACkB,SAAS,IAAI,GAAG,EAAE,EACjD,QAAQlB,MAAM,CAACW,GAAG,EAAE,EACpB,YAAYX,MAAM,CAACM,OAAO,EAAE,EAC5B,aAAaN,MAAM,CAACK,OAAO,EAAE,EAC7B,UAAUL,MAAM,CAACc,KAAK,EAAE,EACxBd,MAAM,CAACe,QAAQ,IAAI,cAAcf,MAAM,CAACe,QAAQ,EAAE,EAClDf,MAAM,CAACoB,cAAc,IAAI,oBAAoBpB,MAAM,CAACoB,cAAc,EAAE,EACpEpB,MAAM,CAACqB,SAAS,IAAI,eAAerB,MAAM,CAACqB,SAAS,EAAE,EACrDrB,MAAM,CAAC6B,SAAS,IAAI,eAAe7B,MAAM,CAAC6B,SAAS,EAAE,EACrD7B,MAAM,CAACa,SAAS,EAAEiB,MAAM,IACtB9B,MAAM,CAACa,SAAS,CAACkB,MAAM,CAAC,CAACC,GAAG,EAAEC,QAAQ,KAAK,GAAGD,GAAG,OAAOC,QAAQ,EAAE,EAAE,YAAY,CAAC,CACpF,CACEC,MAAM,CAACC,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ,CAAC,CACxCC,IAAI,CAAC,IAAI,CAAC,CACVC,IAAI,EAAE;EACX;EAEQT,cAAcA,CAACvB,OAAsB;IAC3C,MAAMiC,iBAAiB,GAAGzC,eAAe,CAAC0C,2BAA2B,EAAE;IAEvE,OAAO3C,WAAW,CAAC4C,6BAA6B,CAACF,iBAAiB,EAAEjC,OAAO,CAAC;EAC9E;EAEQW,aAAaA,CAACyB,IAAU;IAC9B,OAAOA,IAAI,CAACC,WAAW,EAAE;EAC3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}