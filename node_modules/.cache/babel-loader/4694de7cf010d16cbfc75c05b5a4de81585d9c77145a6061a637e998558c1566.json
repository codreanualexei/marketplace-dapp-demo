{"ast":null,"code":"import _objectSpread from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { hexToBigInt, hexToNumber } from '../utils/encoding/fromHex.js';\nimport { hexToBytes } from '../utils/encoding/toBytes.js';\nimport { toHex } from '../utils/encoding/toHex.js';\nimport { defineBlock } from '../utils/formatters/block.js';\nimport { formatLog } from '../utils/formatters/log.js';\nimport { defineTransaction } from '../utils/formatters/transaction.js';\nimport { defineTransactionReceipt } from '../utils/formatters/transactionReceipt.js';\nimport { defineTransactionRequest } from '../utils/formatters/transactionRequest.js';\nimport { gasPerPubdataDefault } from './constants/number.js';\nexport const formatters = {\n  block: /*#__PURE__*/defineBlock({\n    format(args) {\n      var _args$transactions;\n      const transactions = (_args$transactions = args.transactions) === null || _args$transactions === void 0 ? void 0 : _args$transactions.map(transaction => {\n        var _formatters$transacti;\n        if (typeof transaction === 'string') return transaction;\n        const formatted = (_formatters$transacti = formatters.transaction) === null || _formatters$transacti === void 0 ? void 0 : _formatters$transacti.format(transaction);\n        if (formatted.typeHex === '0x71') formatted.type = 'eip712';else if (formatted.typeHex === '0xff') formatted.type = 'priority';\n        return formatted;\n      });\n      return {\n        l1BatchNumber: args.l1BatchNumber ? hexToBigInt(args.l1BatchNumber) : null,\n        l1BatchTimestamp: args.l1BatchTimestamp ? hexToBigInt(args.l1BatchTimestamp) : null,\n        transactions\n      };\n    }\n  }),\n  transaction: /*#__PURE__*/defineTransaction({\n    format(args) {\n      const transaction = {};\n      if (args.type === '0x71') transaction.type = 'eip712';else if (args.type === '0xff') transaction.type = 'priority';\n      return _objectSpread(_objectSpread({}, transaction), {}, {\n        l1BatchNumber: args.l1BatchNumber ? hexToBigInt(args.l1BatchNumber) : null,\n        l1BatchTxIndex: args.l1BatchTxIndex ? hexToBigInt(args.l1BatchTxIndex) : null\n      });\n    }\n  }),\n  transactionReceipt: /*#__PURE__*/defineTransactionReceipt({\n    format(args) {\n      return {\n        l1BatchNumber: args.l1BatchNumber ? hexToBigInt(args.l1BatchNumber) : null,\n        l1BatchTxIndex: args.l1BatchTxIndex ? hexToBigInt(args.l1BatchTxIndex) : null,\n        logs: args.logs.map(log => {\n          return _objectSpread(_objectSpread({}, formatLog(log)), {}, {\n            l1BatchNumber: log.l1BatchNumber ? hexToBigInt(log.l1BatchNumber) : null,\n            transactionLogIndex: hexToNumber(log.transactionLogIndex),\n            logType: log.logType\n          });\n        }),\n        l2ToL1Logs: args.l2ToL1Logs.map(l2ToL1Log => {\n          return {\n            blockNumber: hexToBigInt(l2ToL1Log.blockHash),\n            blockHash: l2ToL1Log.blockHash,\n            l1BatchNumber: l2ToL1Log.l1BatchNumber ? hexToBigInt(l2ToL1Log.l1BatchNumber) : null,\n            transactionIndex: hexToBigInt(l2ToL1Log.transactionIndex),\n            shardId: hexToBigInt(l2ToL1Log.shardId),\n            isService: l2ToL1Log.isService,\n            sender: l2ToL1Log.sender,\n            key: l2ToL1Log.key,\n            value: l2ToL1Log.value,\n            transactionHash: l2ToL1Log.transactionHash,\n            logIndex: hexToBigInt(l2ToL1Log.logIndex)\n          };\n        })\n      };\n    }\n  }),\n  transactionRequest: /*#__PURE__*/defineTransactionRequest({\n    exclude: ['customSignature', 'factoryDeps', 'gasPerPubdata', 'paymaster', 'paymasterInput'],\n    format(args) {\n      if (args.gasPerPubdata || args.paymaster && args.paymasterInput || args.factoryDeps || args.customSignature) return {\n        eip712Meta: _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, args.gasPerPubdata ? {\n          gasPerPubdata: toHex(args.gasPerPubdata)\n        } : {\n          gasPerPubdata: toHex(gasPerPubdataDefault)\n        }), args.paymaster && args.paymasterInput ? {\n          paymasterParams: {\n            paymaster: args.paymaster,\n            paymasterInput: Array.from(hexToBytes(args.paymasterInput))\n          }\n        } : {}), args.factoryDeps ? {\n          factoryDeps: args.factoryDeps.map(dep => Array.from(hexToBytes(dep)))\n        } : {}), args.customSignature ? {\n          customSignature: Array.from(hexToBytes(args.customSignature))\n        } : {}),\n        type: '0x71'\n      };\n      return {};\n    }\n  })\n};","map":{"version":3,"names":["hexToBigInt","hexToNumber","hexToBytes","toHex","defineBlock","formatLog","defineTransaction","defineTransactionReceipt","defineTransactionRequest","gasPerPubdataDefault","formatters","block","format","args","_args$transactions","transactions","map","transaction","_formatters$transacti","formatted","typeHex","type","l1BatchNumber","l1BatchTimestamp","_objectSpread","l1BatchTxIndex","transactionReceipt","logs","log","transactionLogIndex","logType","l2ToL1Logs","l2ToL1Log","blockNumber","blockHash","transactionIndex","shardId","isService","sender","key","value","transactionHash","logIndex","transactionRequest","exclude","gasPerPubdata","paymaster","paymasterInput","factoryDeps","customSignature","eip712Meta","paymasterParams","Array","from","dep"],"sources":["/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/viem/zksync/formatters.ts"],"sourcesContent":["import type { ChainFormatters } from '../types/chain.js'\nimport { hexToBigInt, hexToNumber } from '../utils/encoding/fromHex.js'\nimport { hexToBytes } from '../utils/encoding/toBytes.js'\nimport { toHex } from '../utils/encoding/toHex.js'\nimport { defineBlock } from '../utils/formatters/block.js'\nimport { formatLog } from '../utils/formatters/log.js'\nimport { defineTransaction } from '../utils/formatters/transaction.js'\nimport { defineTransactionReceipt } from '../utils/formatters/transactionReceipt.js'\nimport { defineTransactionRequest } from '../utils/formatters/transactionRequest.js'\nimport { gasPerPubdataDefault } from './constants/number.js'\nimport type { ZksyncBlock, ZksyncRpcBlock } from './types/block.js'\nimport type { ZksyncL2ToL1Log, ZksyncLog } from './types/log.js'\nimport type {\n  ZksyncRpcTransaction,\n  ZksyncRpcTransactionReceipt,\n  ZksyncRpcTransactionRequest,\n  ZksyncTransaction,\n  ZksyncTransactionReceipt,\n  ZksyncTransactionRequest,\n} from './types/transaction.js'\n\nexport const formatters = {\n  block: /*#__PURE__*/ defineBlock({\n    format(args: ZksyncRpcBlock): ZksyncBlock {\n      const transactions = args.transactions?.map((transaction) => {\n        if (typeof transaction === 'string') return transaction\n        const formatted = formatters.transaction?.format(\n          transaction as ZksyncRpcTransaction,\n        ) as ZksyncTransaction\n        if (formatted.typeHex === '0x71') formatted.type = 'eip712'\n        else if (formatted.typeHex === '0xff') formatted.type = 'priority'\n        return formatted\n      })\n      return {\n        l1BatchNumber: args.l1BatchNumber\n          ? hexToBigInt(args.l1BatchNumber)\n          : null,\n        l1BatchTimestamp: args.l1BatchTimestamp\n          ? hexToBigInt(args.l1BatchTimestamp)\n          : null,\n        transactions,\n      } as ZksyncBlock\n    },\n  }),\n  transaction: /*#__PURE__*/ defineTransaction({\n    format(args: ZksyncRpcTransaction): ZksyncTransaction {\n      const transaction = {} as ZksyncTransaction\n      if (args.type === '0x71') transaction.type = 'eip712'\n      else if (args.type === '0xff') transaction.type = 'priority'\n      return {\n        ...transaction,\n        l1BatchNumber: args.l1BatchNumber\n          ? hexToBigInt(args.l1BatchNumber)\n          : null,\n        l1BatchTxIndex: args.l1BatchTxIndex\n          ? hexToBigInt(args.l1BatchTxIndex)\n          : null,\n      } as ZksyncTransaction\n    },\n  }),\n  transactionReceipt: /*#__PURE__*/ defineTransactionReceipt({\n    format(args: ZksyncRpcTransactionReceipt): ZksyncTransactionReceipt {\n      return {\n        l1BatchNumber: args.l1BatchNumber\n          ? hexToBigInt(args.l1BatchNumber)\n          : null,\n        l1BatchTxIndex: args.l1BatchTxIndex\n          ? hexToBigInt(args.l1BatchTxIndex)\n          : null,\n        logs: args.logs.map((log) => {\n          return {\n            ...formatLog(log),\n            l1BatchNumber: log.l1BatchNumber\n              ? hexToBigInt(log.l1BatchNumber)\n              : null,\n            transactionLogIndex: hexToNumber(log.transactionLogIndex),\n            logType: log.logType,\n          }\n        }) as ZksyncLog[],\n        l2ToL1Logs: args.l2ToL1Logs.map((l2ToL1Log) => {\n          return {\n            blockNumber: hexToBigInt(l2ToL1Log.blockHash),\n            blockHash: l2ToL1Log.blockHash,\n            l1BatchNumber: l2ToL1Log.l1BatchNumber\n              ? hexToBigInt(l2ToL1Log.l1BatchNumber)\n              : null,\n            transactionIndex: hexToBigInt(l2ToL1Log.transactionIndex),\n            shardId: hexToBigInt(l2ToL1Log.shardId),\n            isService: l2ToL1Log.isService,\n            sender: l2ToL1Log.sender,\n            key: l2ToL1Log.key,\n            value: l2ToL1Log.value,\n            transactionHash: l2ToL1Log.transactionHash,\n            logIndex: hexToBigInt(l2ToL1Log.logIndex),\n          }\n        }) as ZksyncL2ToL1Log[],\n      } as ZksyncTransactionReceipt\n    },\n  }),\n  transactionRequest: /*#__PURE__*/ defineTransactionRequest({\n    exclude: [\n      'customSignature',\n      'factoryDeps',\n      'gasPerPubdata',\n      'paymaster',\n      'paymasterInput',\n    ],\n    format(args: ZksyncTransactionRequest): ZksyncRpcTransactionRequest {\n      if (\n        args.gasPerPubdata ||\n        (args.paymaster && args.paymasterInput) ||\n        args.factoryDeps ||\n        args.customSignature\n      )\n        return {\n          eip712Meta: {\n            ...(args.gasPerPubdata\n              ? { gasPerPubdata: toHex(args.gasPerPubdata) }\n              : { gasPerPubdata: toHex(gasPerPubdataDefault) }),\n            ...(args.paymaster && args.paymasterInput\n              ? {\n                  paymasterParams: {\n                    paymaster: args.paymaster,\n                    paymasterInput: Array.from(hexToBytes(args.paymasterInput)),\n                  },\n                }\n              : {}),\n            ...(args.factoryDeps\n              ? {\n                  factoryDeps: args.factoryDeps.map((dep) =>\n                    Array.from(hexToBytes(dep)),\n                  ),\n                }\n              : {}),\n            ...(args.customSignature\n              ? {\n                  customSignature: Array.from(hexToBytes(args.customSignature)),\n                }\n              : {}),\n          },\n          type: '0x71',\n        } as unknown as ZksyncRpcTransactionRequest\n      return {} as ZksyncRpcTransactionRequest\n    },\n  }),\n} as const satisfies ChainFormatters\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}