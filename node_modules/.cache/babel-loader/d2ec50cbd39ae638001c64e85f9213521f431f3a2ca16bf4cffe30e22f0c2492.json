{"ast":null,"code":"import _objectSpread from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { ConstantsUtil } from '@reown/appkit-common';\nimport { ChainController } from '../controllers/ChainController.js';\nimport { ConnectorController } from '../controllers/ConnectorController.js';\nimport { RouterController } from '../controllers/RouterController.js';\nexport const NetworkUtil = {\n  /**\n   * Function to handle the network switch.\n   * This function has variety of conditions to handle the network switch depending on the connectors or namespace's connection states.\n   * @param args.network - The network to switch to.\n   * @param args.shouldConfirmSwitch - Whether to confirm the switch. If true, the user will be asked to confirm the switch if necessary.\n   * @returns void\n   */\n  onSwitchNetwork(_ref) {\n    var _ChainController$getA, _ChainController$getA2;\n    let {\n      network,\n      ignoreSwitchConfirmation = false\n    } = _ref;\n    const currentNetwork = ChainController.state.activeCaipNetwork;\n    const currentNamespace = ChainController.state.activeChain;\n    const routerData = RouterController.state.data;\n    const isSameNetwork = network.id === (currentNetwork === null || currentNetwork === void 0 ? void 0 : currentNetwork.id);\n    if (isSameNetwork) {\n      return;\n    }\n    const isCurrentNamespaceConnected = Boolean((_ChainController$getA = ChainController.getAccountData(currentNamespace)) === null || _ChainController$getA === void 0 ? void 0 : _ChainController$getA.address);\n    const isNextNamespaceConnected = Boolean((_ChainController$getA2 = ChainController.getAccountData(network.chainNamespace)) === null || _ChainController$getA2 === void 0 ? void 0 : _ChainController$getA2.address);\n    const isDifferentNamespace = network.chainNamespace !== currentNamespace;\n    const connectorId = ConnectorController.getConnectorId(currentNamespace);\n    /**\n     * If the network is supported by the auth connector, we don't need to show switch active chain view.\n     * But there are some cases like switching from Ethereum to Bitcoin where Bitcoin is not supported by the auth connector and users should connect with another connector.\n     */\n    const isConnectedWithAuth = connectorId === ConstantsUtil.CONNECTOR_ID.AUTH;\n    const isSupportedForAuthConnector = ConstantsUtil.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(c => c === network.chainNamespace);\n    /**\n     * 1. If the ignoreSwitchConfirmation is set to true, we should switch to the network,\n     * 2. If user connected with auth connector and the next network is supported by the auth connector,\n     * we should switch to the network without confirmation screen.\n     */\n    if (ignoreSwitchConfirmation || isConnectedWithAuth && isSupportedForAuthConnector) {\n      RouterController.push('SwitchNetwork', _objectSpread(_objectSpread({}, routerData), {}, {\n        network\n      }));\n    } else if (\n    /**\n     * If user switching to a different namespace and next namespace is not connected, we need to show switch active chain view for confirmation first.\n     */\n    isCurrentNamespaceConnected && isDifferentNamespace && !isNextNamespaceConnected) {\n      RouterController.push('SwitchActiveChain', {\n        switchToChain: network.chainNamespace,\n        navigateTo: 'Connect',\n        navigateWithReplace: true,\n        network\n      });\n    } else {\n      RouterController.push('SwitchNetwork', _objectSpread(_objectSpread({}, routerData), {}, {\n        network\n      }));\n    }\n  }\n};","map":{"version":3,"names":["ConstantsUtil","ChainController","ConnectorController","RouterController","NetworkUtil","onSwitchNetwork","_ref","_ChainController$getA","_ChainController$getA2","network","ignoreSwitchConfirmation","currentNetwork","state","activeCaipNetwork","currentNamespace","activeChain","routerData","data","isSameNetwork","id","isCurrentNamespaceConnected","Boolean","getAccountData","address","isNextNamespaceConnected","chainNamespace","isDifferentNamespace","connectorId","getConnectorId","isConnectedWithAuth","CONNECTOR_ID","AUTH","isSupportedForAuthConnector","AUTH_CONNECTOR_SUPPORTED_CHAINS","find","c","push","_objectSpread","switchToChain","navigateTo","navigateWithReplace"],"sources":["../../../../src/utils/NetworkUtil.ts"],"sourcesContent":[null],"mappings":";AAAA,SAA2BA,aAAa,QAAQ,sBAAsB;AAEtE,SAASC,eAAe,QAAQ,mCAAmC;AACnE,SAASC,mBAAmB,QAAQ,uCAAuC;AAC3E,SAASC,gBAAgB,QAAQ,oCAAoC;AAErE,OAAO,MAAMC,WAAW,GAAG;EACzB;;;;;;;EAOAC,eAAeA,CAAAC,IAAA,EAMd;IAAA,IAAAC,qBAAA,EAAAC,sBAAA;IAAA,IANe;MACdC,OAAO;MACPC,wBAAwB,GAAG;IAAK,CAIjC,GAAAJ,IAAA;IACC,MAAMK,cAAc,GAAGV,eAAe,CAACW,KAAK,CAACC,iBAAiB;IAC9D,MAAMC,gBAAgB,GAAGb,eAAe,CAACW,KAAK,CAACG,WAAW;IAC1D,MAAMC,UAAU,GAAGb,gBAAgB,CAACS,KAAK,CAACK,IAAI;IAC9C,MAAMC,aAAa,GAAGT,OAAO,CAACU,EAAE,MAAKR,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEQ,EAAE;IAEvD,IAAID,aAAa,EAAE;MACjB;IACF;IAEA,MAAME,2BAA2B,GAAGC,OAAO,EAAAd,qBAAA,GACzCN,eAAe,CAACqB,cAAc,CAACR,gBAAgB,CAAC,cAAAP,qBAAA,uBAAhDA,qBAAA,CAAkDgB,OAAO,CAC1D;IACD,MAAMC,wBAAwB,GAAGH,OAAO,EAAAb,sBAAA,GACtCP,eAAe,CAACqB,cAAc,CAACb,OAAO,CAACgB,cAAc,CAAC,cAAAjB,sBAAA,uBAAtDA,sBAAA,CAAwDe,OAAO,CAChE;IAED,MAAMG,oBAAoB,GAAGjB,OAAO,CAACgB,cAAc,KAAKX,gBAAgB;IACxE,MAAMa,WAAW,GAAGzB,mBAAmB,CAAC0B,cAAc,CAACd,gBAAgB,CAAC;IAExE;;;;IAIA,MAAMe,mBAAmB,GAAGF,WAAW,KAAK3B,aAAa,CAAC8B,YAAY,CAACC,IAAI;IAC3E,MAAMC,2BAA2B,GAAGhC,aAAa,CAACiC,+BAA+B,CAACC,IAAI,CACpFC,CAAC,IAAIA,CAAC,KAAK1B,OAAO,CAACgB,cAAc,CAClC;IAED;;;;;IAMA,IAAIf,wBAAwB,IAAKmB,mBAAmB,IAAIG,2BAA4B,EAAE;MACpF7B,gBAAgB,CAACiC,IAAI,CAAC,eAAe,EAAAC,aAAA,CAAAA,aAAA,KAAOrB,UAAU;QAAEP;MAAO,EAAE,CAAC;IACpE,CAAC,MAAM;IACL;;;IAGAW,2BAA2B,IAC3BM,oBAAoB,IACpB,CAACF,wBAAwB,EACzB;MACArB,gBAAgB,CAACiC,IAAI,CAAC,mBAAmB,EAAE;QACzCE,aAAa,EAAE7B,OAAO,CAACgB,cAAc;QACrCc,UAAU,EAAE,SAAS;QACrBC,mBAAmB,EAAE,IAAI;QACzB/B;OACD,CAAC;IACJ,CAAC,MAAM;MACLN,gBAAgB,CAACiC,IAAI,CAAC,eAAe,EAAAC,aAAA,CAAAA,aAAA,KAAOrB,UAAU;QAAEP;MAAO,EAAE,CAAC;IACpE;EACF;CACD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}