{"ast":null,"code":"// -- Types --------------------------------------------- //\nimport { NumberUtil } from '@reown/appkit-common';\n// -- Util ---------------------------------------- //\nexport const SwapCalculationUtil = {\n  getGasPriceInEther(gas, gasPrice) {\n    const totalGasCostInWei = gasPrice * gas;\n    const totalGasCostInEther = Number(totalGasCostInWei) / 1e18;\n    return totalGasCostInEther;\n  },\n  getGasPriceInUSD(networkPrice, gas, gasPrice) {\n    const totalGasCostInEther = SwapCalculationUtil.getGasPriceInEther(gas, gasPrice);\n    const networkPriceInUSD = NumberUtil.bigNumber(networkPrice);\n    const gasCostInUSD = networkPriceInUSD.times(totalGasCostInEther);\n    return gasCostInUSD.toNumber();\n  },\n  getPriceImpact(_ref) {\n    let {\n      sourceTokenAmount,\n      sourceTokenPriceInUSD,\n      toTokenPriceInUSD,\n      toTokenAmount\n    } = _ref;\n    const inputValue = NumberUtil.bigNumber(sourceTokenAmount).times(sourceTokenPriceInUSD);\n    const outputValue = NumberUtil.bigNumber(toTokenAmount).times(toTokenPriceInUSD);\n    const priceImpact = inputValue.minus(outputValue).div(inputValue).times(100);\n    return priceImpact.toNumber();\n  },\n  getMaxSlippage(slippage, toTokenAmount) {\n    const slippageToleranceDecimal = NumberUtil.bigNumber(slippage).div(100);\n    const maxSlippageAmount = NumberUtil.multiply(toTokenAmount, slippageToleranceDecimal);\n    return maxSlippageAmount.toNumber();\n  },\n  getProviderFee(sourceTokenAmount) {\n    let feePercentage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.0085;\n    const providerFee = NumberUtil.bigNumber(sourceTokenAmount).times(feePercentage);\n    return providerFee.toString();\n  },\n  isInsufficientNetworkTokenForGas(networkBalanceInUSD, gasPriceInUSD) {\n    const gasPrice = gasPriceInUSD || '0';\n    if (NumberUtil.bigNumber(networkBalanceInUSD).eq(0)) {\n      return true;\n    }\n    return NumberUtil.bigNumber(NumberUtil.bigNumber(gasPrice)).gt(networkBalanceInUSD);\n  },\n  isInsufficientSourceTokenForSwap(sourceTokenAmount, sourceTokenAddress, balance) {\n    var _balance$find;\n    const sourceTokenBalance = balance === null || balance === void 0 || (_balance$find = balance.find(token => token.address === sourceTokenAddress)) === null || _balance$find === void 0 || (_balance$find = _balance$find.quantity) === null || _balance$find === void 0 ? void 0 : _balance$find.numeric;\n    const isInSufficientBalance = NumberUtil.bigNumber(sourceTokenBalance || '0').lt(sourceTokenAmount);\n    return isInSufficientBalance;\n  }\n};","map":{"version":3,"names":["NumberUtil","SwapCalculationUtil","getGasPriceInEther","gas","gasPrice","totalGasCostInWei","totalGasCostInEther","Number","getGasPriceInUSD","networkPrice","networkPriceInUSD","bigNumber","gasCostInUSD","times","toNumber","getPriceImpact","_ref","sourceTokenAmount","sourceTokenPriceInUSD","toTokenPriceInUSD","toTokenAmount","inputValue","outputValue","priceImpact","minus","div","getMaxSlippage","slippage","slippageToleranceDecimal","maxSlippageAmount","multiply","getProviderFee","feePercentage","arguments","length","undefined","providerFee","toString","isInsufficientNetworkTokenForGas","networkBalanceInUSD","gasPriceInUSD","eq","gt","isInsufficientSourceTokenForSwap","sourceTokenAddress","balance","_balance$find","sourceTokenBalance","find","token","address","quantity","numeric","isInSufficientBalance","lt"],"sources":["../../../../src/utils/SwapCalculationUtil.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}