{"ast":null,"code":"// -- Types --------------------------------------------- //\nimport { NumberUtil } from '@reown/appkit-common';\n// -- Util ---------------------------------------- //\nexport const SwapCalculationUtil = {\n  getGasPriceInEther(gas, gasPrice) {\n    const totalGasCostInWei = gasPrice * gas;\n    const totalGasCostInEther = Number(totalGasCostInWei) / 1e18;\n    return totalGasCostInEther;\n  },\n  getGasPriceInUSD(networkPrice, gas, gasPrice) {\n    const totalGasCostInEther = SwapCalculationUtil.getGasPriceInEther(gas, gasPrice);\n    const networkPriceInUSD = NumberUtil.bigNumber(networkPrice);\n    const gasCostInUSD = networkPriceInUSD.times(totalGasCostInEther);\n    return gasCostInUSD.toNumber();\n  },\n  getPriceImpact({\n    sourceTokenAmount,\n    sourceTokenPriceInUSD,\n    toTokenPriceInUSD,\n    toTokenAmount\n  }) {\n    const inputValue = NumberUtil.bigNumber(sourceTokenAmount).times(sourceTokenPriceInUSD);\n    const outputValue = NumberUtil.bigNumber(toTokenAmount).times(toTokenPriceInUSD);\n    const priceImpact = inputValue.minus(outputValue).div(inputValue).times(100);\n    return priceImpact.toNumber();\n  },\n  getMaxSlippage(slippage, toTokenAmount) {\n    const slippageToleranceDecimal = NumberUtil.bigNumber(slippage).div(100);\n    const maxSlippageAmount = NumberUtil.multiply(toTokenAmount, slippageToleranceDecimal);\n    return maxSlippageAmount.toNumber();\n  },\n  getProviderFee(sourceTokenAmount, feePercentage = 0.0085) {\n    const providerFee = NumberUtil.bigNumber(sourceTokenAmount).times(feePercentage);\n    return providerFee.toString();\n  },\n  isInsufficientNetworkTokenForGas(networkBalanceInUSD, gasPriceInUSD) {\n    const gasPrice = gasPriceInUSD || '0';\n    if (NumberUtil.bigNumber(networkBalanceInUSD).eq(0)) {\n      return true;\n    }\n    return NumberUtil.bigNumber(NumberUtil.bigNumber(gasPrice)).gt(networkBalanceInUSD);\n  },\n  isInsufficientSourceTokenForSwap(sourceTokenAmount, sourceTokenAddress, balance) {\n    const sourceTokenBalance = balance?.find(token => token.address === sourceTokenAddress)?.quantity?.numeric;\n    const isInSufficientBalance = NumberUtil.bigNumber(sourceTokenBalance || '0').lt(sourceTokenAmount);\n    return isInSufficientBalance;\n  }\n};","map":{"version":3,"names":["NumberUtil","SwapCalculationUtil","getGasPriceInEther","gas","gasPrice","totalGasCostInWei","totalGasCostInEther","Number","getGasPriceInUSD","networkPrice","networkPriceInUSD","bigNumber","gasCostInUSD","times","toNumber","getPriceImpact","sourceTokenAmount","sourceTokenPriceInUSD","toTokenPriceInUSD","toTokenAmount","inputValue","outputValue","priceImpact","minus","div","getMaxSlippage","slippage","slippageToleranceDecimal","maxSlippageAmount","multiply","getProviderFee","feePercentage","providerFee","toString","isInsufficientNetworkTokenForGas","networkBalanceInUSD","gasPriceInUSD","eq","gt","isInsufficientSourceTokenForSwap","sourceTokenAddress","balance","sourceTokenBalance","find","token","address","quantity","numeric","isInSufficientBalance","lt"],"sources":["../../../../src/utils/SwapCalculationUtil.ts"],"sourcesContent":[null],"mappings":"AAAA;AACA,SAASA,UAAU,QAAQ,sBAAsB;AAIjD;AACA,OAAO,MAAMC,mBAAmB,GAAG;EACjCC,kBAAkBA,CAACC,GAAW,EAAEC,QAAgB;IAC9C,MAAMC,iBAAiB,GAAGD,QAAQ,GAAGD,GAAG;IACxC,MAAMG,mBAAmB,GAAGC,MAAM,CAACF,iBAAiB,CAAC,GAAG,IAAI;IAE5D,OAAOC,mBAAmB;EAC5B,CAAC;EAEDE,gBAAgBA,CAACC,YAAoB,EAAEN,GAAW,EAAEC,QAAgB;IAClE,MAAME,mBAAmB,GAAGL,mBAAmB,CAACC,kBAAkB,CAACC,GAAG,EAAEC,QAAQ,CAAC;IACjF,MAAMM,iBAAiB,GAAGV,UAAU,CAACW,SAAS,CAACF,YAAY,CAAC;IAC5D,MAAMG,YAAY,GAAGF,iBAAiB,CAACG,KAAK,CAACP,mBAAmB,CAAC;IAEjE,OAAOM,YAAY,CAACE,QAAQ,EAAE;EAChC,CAAC;EAEDC,cAAcA,CAAC;IACbC,iBAAiB;IACjBC,qBAAqB;IACrBC,iBAAiB;IACjBC;EAAa,CAMd;IACC,MAAMC,UAAU,GAAGpB,UAAU,CAACW,SAAS,CAACK,iBAAiB,CAAC,CAACH,KAAK,CAACI,qBAAqB,CAAC;IACvF,MAAMI,WAAW,GAAGrB,UAAU,CAACW,SAAS,CAACQ,aAAa,CAAC,CAACN,KAAK,CAACK,iBAAiB,CAAC;IAChF,MAAMI,WAAW,GAAGF,UAAU,CAACG,KAAK,CAACF,WAAW,CAAC,CAACG,GAAG,CAACJ,UAAU,CAAC,CAACP,KAAK,CAAC,GAAG,CAAC;IAE5E,OAAOS,WAAW,CAACR,QAAQ,EAAE;EAC/B,CAAC;EAEDW,cAAcA,CAACC,QAAgB,EAAEP,aAAqB;IACpD,MAAMQ,wBAAwB,GAAG3B,UAAU,CAACW,SAAS,CAACe,QAAQ,CAAC,CAACF,GAAG,CAAC,GAAG,CAAC;IACxE,MAAMI,iBAAiB,GAAG5B,UAAU,CAAC6B,QAAQ,CAACV,aAAa,EAAEQ,wBAAwB,CAAC;IAEtF,OAAOC,iBAAiB,CAACd,QAAQ,EAAE;EACrC,CAAC;EAEDgB,cAAcA,CAACd,iBAAyB,EAAEe,aAAa,GAAG,MAAM;IAC9D,MAAMC,WAAW,GAAGhC,UAAU,CAACW,SAAS,CAACK,iBAAiB,CAAC,CAACH,KAAK,CAACkB,aAAa,CAAC;IAEhF,OAAOC,WAAW,CAACC,QAAQ,EAAE;EAC/B,CAAC;EAEDC,gCAAgCA,CAACC,mBAA2B,EAAEC,aAAiC;IAC7F,MAAMhC,QAAQ,GAAGgC,aAAa,IAAI,GAAG;IAErC,IAAIpC,UAAU,CAACW,SAAS,CAACwB,mBAAmB,CAAC,CAACE,EAAE,CAAC,CAAC,CAAC,EAAE;MACnD,OAAO,IAAI;IACb;IAEA,OAAOrC,UAAU,CAACW,SAAS,CAACX,UAAU,CAACW,SAAS,CAACP,QAAQ,CAAC,CAAC,CAACkC,EAAE,CAACH,mBAAmB,CAAC;EACrF,CAAC;EAEDI,gCAAgCA,CAC9BvB,iBAAyB,EACzBwB,kBAA0B,EAC1BC,OAA2C;IAE3C,MAAMC,kBAAkB,GAAGD,OAAO,EAAEE,IAAI,CAACC,KAAK,IAAIA,KAAK,CAACC,OAAO,KAAKL,kBAAkB,CAAC,EACnFM,QAAQ,EAAEC,OAAO;IAErB,MAAMC,qBAAqB,GAAGhD,UAAU,CAACW,SAAS,CAAC+B,kBAAkB,IAAI,GAAG,CAAC,CAACO,EAAE,CAC9EjC,iBAAiB,CAClB;IAED,OAAOgC,qBAAqB;EAC9B;CACD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}