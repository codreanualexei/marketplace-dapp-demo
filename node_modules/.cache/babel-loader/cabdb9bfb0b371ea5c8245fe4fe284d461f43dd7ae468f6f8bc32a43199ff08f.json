{"ast":null,"code":"import{useMemo}from'react';import{ethers}from'ethers';import{useWallet}from'../contexts/WalletContext';import{MarketplaceSDK}from'../sdk/MarketplaceSDK';// CRA exposes only env vars prefixed with REACT_APP_\nconst MARKETPLACE_ADDRESS=process.env.REACT_APP_MARKETPLACE_ADDRESS||'';// Support both naming variants found in env/example\nconst NFT_ADDRESS=process.env.REACT_APP_STR_DOMAIN_NFT_COLLECTION||process.env.REACT_APP_NFT_COLLECTION_ADDRESS||'';const IS_DEV=process.env.NODE_ENV==='development';/**\n * Custom hook to access the Marketplace SDK\n * Returns null if wallet is not connected\n */export const useMarketplaceSDK=()=>{const{signer}=useWallet();const sdk=useMemo(()=>{if(!MARKETPLACE_ADDRESS||!NFT_ADDRESS){if(process.env.NODE_ENV==='development'){console.warn('Missing marketplace/NFT env addresses',{REACT_APP_MARKETPLACE_ADDRESS:process.env.REACT_APP_MARKETPLACE_ADDRESS,REACT_APP_STR_DOMAIN_NFT_COLLECTION:process.env.REACT_APP_STR_DOMAIN_NFT_COLLECTION,REACT_APP_NFT_COLLECTION_ADDRESS:process.env.REACT_APP_NFT_COLLECTION_ADDRESS});}return null;}try{if(signer){return new MarketplaceSDK(signer,MARKETPLACE_ADDRESS,NFT_ADDRESS,IS_DEV);}// Read-only fallback using RPC URL if available\nconst rpcUrl=process.env.REACT_APP_RPC_URL;if(rpcUrl){const provider=new ethers.JsonRpcProvider(rpcUrl);// Create a dummy wallet connected to provider; avoids provider.getSigner() which throws on public RPC\nconst readOnlySigner=ethers.Wallet.createRandom().connect(provider);return new MarketplaceSDK(readOnlySigner,MARKETPLACE_ADDRESS,NFT_ADDRESS,IS_DEV);}return null;}catch(error){console.error('Error creating Marketplace SDK:',error);return null;}},[signer]);return sdk;};export default useMarketplaceSDK;","map":{"version":3,"names":["useMemo","ethers","useWallet","MarketplaceSDK","MARKETPLACE_ADDRESS","process","env","REACT_APP_MARKETPLACE_ADDRESS","NFT_ADDRESS","REACT_APP_STR_DOMAIN_NFT_COLLECTION","REACT_APP_NFT_COLLECTION_ADDRESS","IS_DEV","NODE_ENV","useMarketplaceSDK","signer","sdk","console","warn","rpcUrl","REACT_APP_RPC_URL","provider","JsonRpcProvider","readOnlySigner","Wallet","createRandom","connect","error"],"sources":["/Users/alex.codreanu/Desktop/marketplace-dapp/src/hooks/useMarketplaceSDK.ts"],"sourcesContent":["import { useMemo } from 'react';\nimport { ethers } from 'ethers';\nimport { useWallet } from '../contexts/WalletContext';\nimport { MarketplaceSDK } from '../sdk/MarketplaceSDK';\n\n// CRA exposes only env vars prefixed with REACT_APP_\nconst MARKETPLACE_ADDRESS = process.env.REACT_APP_MARKETPLACE_ADDRESS || '';\n// Support both naming variants found in env/example\nconst NFT_ADDRESS =\n  process.env.REACT_APP_STR_DOMAIN_NFT_COLLECTION ||\n  process.env.REACT_APP_NFT_COLLECTION_ADDRESS ||\n  '';\nconst IS_DEV = process.env.NODE_ENV === 'development';\n\n\n\n/**\n * Custom hook to access the Marketplace SDK\n * Returns null if wallet is not connected\n */\nexport const useMarketplaceSDK = (): MarketplaceSDK | null => {\n  const { signer } = useWallet();\n\n  const sdk = useMemo(() => {\n    if (!MARKETPLACE_ADDRESS || !NFT_ADDRESS) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(\n          'Missing marketplace/NFT env addresses',\n          {\n            REACT_APP_MARKETPLACE_ADDRESS: process.env.REACT_APP_MARKETPLACE_ADDRESS,\n            REACT_APP_STR_DOMAIN_NFT_COLLECTION: process.env.REACT_APP_STR_DOMAIN_NFT_COLLECTION,\n            REACT_APP_NFT_COLLECTION_ADDRESS: process.env.REACT_APP_NFT_COLLECTION_ADDRESS,\n          }\n        );\n      }\n      return null;\n    }\n\n    try {\n      if (signer) {\n        return new MarketplaceSDK(signer, MARKETPLACE_ADDRESS, NFT_ADDRESS, IS_DEV);\n      }\n\n      // Read-only fallback using RPC URL if available\n      const rpcUrl = process.env.REACT_APP_RPC_URL;\n      if (rpcUrl) {\n        const provider = new ethers.JsonRpcProvider(rpcUrl);\n        // Create a dummy wallet connected to provider; avoids provider.getSigner() which throws on public RPC\n        const readOnlySigner = ethers.Wallet.createRandom().connect(provider);\n        return new MarketplaceSDK(readOnlySigner, MARKETPLACE_ADDRESS, NFT_ADDRESS, IS_DEV);\n      }\n\n      return null;\n    } catch (error) {\n      console.error('Error creating Marketplace SDK:', error);\n      return null;\n    }\n  }, [signer]);\n\n  return sdk;\n};\n\nexport default useMarketplaceSDK;\n\n"],"mappings":"AAAA,OAASA,OAAO,KAAQ,OAAO,CAC/B,OAASC,MAAM,KAAQ,QAAQ,CAC/B,OAASC,SAAS,KAAQ,2BAA2B,CACrD,OAASC,cAAc,KAAQ,uBAAuB,CAEtD;AACA,KAAM,CAAAC,mBAAmB,CAAGC,OAAO,CAACC,GAAG,CAACC,6BAA6B,EAAI,EAAE,CAC3E;AACA,KAAM,CAAAC,WAAW,CACfH,OAAO,CAACC,GAAG,CAACG,mCAAmC,EAC/CJ,OAAO,CAACC,GAAG,CAACI,gCAAgC,EAC5C,EAAE,CACJ,KAAM,CAAAC,MAAM,CAAGN,OAAO,CAACC,GAAG,CAACM,QAAQ,GAAK,aAAa,CAIrD;AACA;AACA;AACA,GACA,MAAO,MAAM,CAAAC,iBAAiB,CAAGA,CAAA,GAA6B,CAC5D,KAAM,CAAEC,MAAO,CAAC,CAAGZ,SAAS,CAAC,CAAC,CAE9B,KAAM,CAAAa,GAAG,CAAGf,OAAO,CAAC,IAAM,CACxB,GAAI,CAACI,mBAAmB,EAAI,CAACI,WAAW,CAAE,CACxC,GAAIH,OAAO,CAACC,GAAG,CAACM,QAAQ,GAAK,aAAa,CAAE,CAC1CI,OAAO,CAACC,IAAI,CACV,uCAAuC,CACvC,CACEV,6BAA6B,CAAEF,OAAO,CAACC,GAAG,CAACC,6BAA6B,CACxEE,mCAAmC,CAAEJ,OAAO,CAACC,GAAG,CAACG,mCAAmC,CACpFC,gCAAgC,CAAEL,OAAO,CAACC,GAAG,CAACI,gCAChD,CACF,CAAC,CACH,CACA,MAAO,KAAI,CACb,CAEA,GAAI,CACF,GAAII,MAAM,CAAE,CACV,MAAO,IAAI,CAAAX,cAAc,CAACW,MAAM,CAAEV,mBAAmB,CAAEI,WAAW,CAAEG,MAAM,CAAC,CAC7E,CAEA;AACA,KAAM,CAAAO,MAAM,CAAGb,OAAO,CAACC,GAAG,CAACa,iBAAiB,CAC5C,GAAID,MAAM,CAAE,CACV,KAAM,CAAAE,QAAQ,CAAG,GAAI,CAAAnB,MAAM,CAACoB,eAAe,CAACH,MAAM,CAAC,CACnD;AACA,KAAM,CAAAI,cAAc,CAAGrB,MAAM,CAACsB,MAAM,CAACC,YAAY,CAAC,CAAC,CAACC,OAAO,CAACL,QAAQ,CAAC,CACrE,MAAO,IAAI,CAAAjB,cAAc,CAACmB,cAAc,CAAElB,mBAAmB,CAAEI,WAAW,CAAEG,MAAM,CAAC,CACrF,CAEA,MAAO,KAAI,CACb,CAAE,MAAOe,KAAK,CAAE,CACdV,OAAO,CAACU,KAAK,CAAC,iCAAiC,CAAEA,KAAK,CAAC,CACvD,MAAO,KAAI,CACb,CACF,CAAC,CAAE,CAACZ,MAAM,CAAC,CAAC,CAEZ,MAAO,CAAAC,GAAG,CACZ,CAAC,CAED,cAAe,CAAAF,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}