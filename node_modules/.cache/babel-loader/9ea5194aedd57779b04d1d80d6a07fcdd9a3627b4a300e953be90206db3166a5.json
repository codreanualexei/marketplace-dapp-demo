{"ast":null,"code":"import _objectSpread from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport 'viem';\nimport { ParseUtil } from '@reown/appkit-common';\nimport { OptionsController } from '../controllers/OptionsController.js';\n// -- Constants ----------------------------------------------------------------\nlet cachedViemUtils = undefined;\n// -- Helpers ------------------------------------------------------------------\nasync function loadViemUtils() {\n  if (!cachedViemUtils) {\n    const {\n      createPublicClient,\n      http,\n      defineChain\n    } = await import('viem');\n    cachedViemUtils = {\n      createPublicClient,\n      http,\n      defineChain\n    };\n  }\n  return cachedViemUtils;\n}\n// -- Utils --------------------------------------------------------------------\nexport const ViemUtil = {\n  getBlockchainApiRpcUrl(caipNetworkId, projectId) {\n    const url = new URL('https://rpc.walletconnect.org/v1/');\n    url.searchParams.set('chainId', caipNetworkId);\n    url.searchParams.set('projectId', projectId);\n    return url.toString();\n  },\n  async getViemChain(caipNetwork) {\n    const {\n      defineChain\n    } = await loadViemUtils();\n    const {\n      chainId\n    } = ParseUtil.parseCaipNetworkId(caipNetwork.caipNetworkId);\n    return defineChain(_objectSpread(_objectSpread({}, caipNetwork), {}, {\n      id: Number(chainId)\n    }));\n  },\n  async createViemPublicClient(caipNetwork) {\n    const {\n      createPublicClient,\n      http\n    } = await loadViemUtils();\n    const projectId = OptionsController.state.projectId;\n    const viemChain = await ViemUtil.getViemChain(caipNetwork);\n    if (!viemChain) {\n      throw new Error(\"Chain \".concat(caipNetwork.caipNetworkId, \" not found in viem/chains\"));\n    }\n    return createPublicClient({\n      chain: viemChain,\n      transport: http(ViemUtil.getBlockchainApiRpcUrl(caipNetwork.caipNetworkId, projectId))\n    });\n  }\n};","map":{"version":3,"names":["ParseUtil","OptionsController","cachedViemUtils","undefined","loadViemUtils","createPublicClient","http","defineChain","ViemUtil","getBlockchainApiRpcUrl","caipNetworkId","projectId","url","URL","searchParams","set","toString","getViemChain","caipNetwork","chainId","parseCaipNetworkId","_objectSpread","id","Number","createViemPublicClient","state","viemChain","Error","concat","chain","transport"],"sources":["../../../../src/utils/ViemUtil.ts"],"sourcesContent":[null],"mappings":";AAAA,OAAqE,MAAM;AAE3E,SAA+CA,SAAS,QAAQ,sBAAsB;AAEtF,SAASC,iBAAiB,QAAQ,qCAAqC;AAWvE;AACA,IAAIC,eAAe,GAA0BC,SAAS;AAEtD;AACA,eAAeC,aAAaA,CAAA;EAC1B,IAAI,CAACF,eAAe,EAAE;IACpB,MAAM;MAAEG,kBAAkB;MAAEC,IAAI;MAAEC;IAAW,CAAE,GAAG,MAAM,MAAM,CAAC,MAAM,CAAC;IAEtEL,eAAe,GAAG;MAChBG,kBAAkB;MAClBC,IAAI;MACJC;KACD;EACH;EAEA,OAAOL,eAAe;AACxB;AAEA;AACA,OAAO,MAAMM,QAAQ,GAAG;EACtBC,sBAAsBA,CAACC,aAA4B,EAAEC,SAAiB;IACpE,MAAMC,GAAG,GAAG,IAAIC,GAAG,CAAC,mCAAmC,CAAC;IACxDD,GAAG,CAACE,YAAY,CAACC,GAAG,CAAC,SAAS,EAAEL,aAAa,CAAC;IAC9CE,GAAG,CAACE,YAAY,CAACC,GAAG,CAAC,WAAW,EAAEJ,SAAS,CAAC;IAE5C,OAAOC,GAAG,CAACI,QAAQ,EAAE;EACvB,CAAC;EACD,MAAMC,YAAYA,CAACC,WAAwB;IACzC,MAAM;MAAEX;IAAW,CAAE,GAAG,MAAMH,aAAa,EAAE;IAE7C,MAAM;MAAEe;IAAO,CAAE,GAAGnB,SAAS,CAACoB,kBAAkB,CAACF,WAAW,CAACR,aAAa,CAAC;IAE3E,OAAOH,WAAW,CAAAc,aAAA,CAAAA,aAAA,KAAMH,WAAW;MAAEI,EAAE,EAAEC,MAAM,CAACJ,OAAO;IAAC,EAAE,CAAC;EAC7D,CAAC;EACD,MAAMK,sBAAsBA,CAACN,WAAwB;IACnD,MAAM;MAAEb,kBAAkB;MAAEC;IAAI,CAAE,GAAG,MAAMF,aAAa,EAAE;IAE1D,MAAMO,SAAS,GAAGV,iBAAiB,CAACwB,KAAK,CAACd,SAAS;IAEnD,MAAMe,SAAS,GAAG,MAAMlB,QAAQ,CAACS,YAAY,CAACC,WAAW,CAAC;IAE1D,IAAI,CAACQ,SAAS,EAAE;MACd,MAAM,IAAIC,KAAK,UAAAC,MAAA,CAAUV,WAAW,CAACR,aAAa,8BAA2B,CAAC;IAChF;IAEA,OAAOL,kBAAkB,CAAC;MACxBwB,KAAK,EAAEH,SAAS;MAChBI,SAAS,EAAExB,IAAI,CAACE,QAAQ,CAACC,sBAAsB,CAACS,WAAW,CAACR,aAAa,EAAEC,SAAS,CAAC;KACtF,CAAC;EACJ;CACD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}