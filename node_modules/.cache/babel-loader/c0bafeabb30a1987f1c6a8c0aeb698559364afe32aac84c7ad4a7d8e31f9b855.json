{"ast":null,"code":"import _objectSpread from \"/Users/alex.codreanu/Desktop/marketplace-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { proxy } from 'valtio/vanilla';\nimport { subscribeKey as subKey } from 'valtio/vanilla/utils';\nimport { ConstantsUtil } from '@reown/appkit-common';\nimport { AssetUtil } from '../utils/AssetUtil.js';\nimport { CoreHelperUtil } from '../utils/CoreHelperUtil.js';\nimport { FetchUtil } from '../utils/FetchUtil.js';\nimport { CUSTOM_DEEPLINK_WALLETS } from '../utils/MobileWallet.js';\nimport { StorageUtil } from '../utils/StorageUtil.js';\nimport { AssetController } from './AssetController.js';\nimport { ChainController } from './ChainController.js';\nimport { ConnectorController } from './ConnectorController.js';\nimport { EventsController } from './EventsController.js';\nimport { OptionsController } from './OptionsController.js';\n// -- Helpers ------------------------------------------- //\nconst baseUrl = CoreHelperUtil.getApiUrl();\nexport const api = new FetchUtil({\n  baseUrl,\n  clientId: null\n});\nconst entries = 40;\nconst recommendedEntries = 4;\nconst imageCountToFetch = 20;\n// -- State --------------------------------------------- //\nconst state = proxy({\n  promises: {},\n  page: 1,\n  count: 0,\n  featured: [],\n  allFeatured: [],\n  recommended: [],\n  allRecommended: [],\n  wallets: [],\n  filteredWallets: [],\n  search: [],\n  isAnalyticsEnabled: false,\n  excludedWallets: [],\n  isFetchingRecommendedWallets: false,\n  explorerWallets: [],\n  explorerFilteredWallets: []\n});\n// -- Controller ---------------------------------------- //\nexport const ApiController = {\n  state,\n  subscribeKey(key, callback) {\n    return subKey(state, key, callback);\n  },\n  _getSdkProperties() {\n    const {\n      projectId,\n      sdkType,\n      sdkVersion\n    } = OptionsController.state;\n    return {\n      projectId,\n      st: sdkType || 'appkit',\n      sv: sdkVersion || 'html-wagmi-4.2.2'\n    };\n  },\n  _filterOutExtensions(wallets) {\n    if (OptionsController.state.isUniversalProvider) {\n      return wallets.filter(w => Boolean(w.mobile_link || w.desktop_link || w.webapp_link));\n    }\n    return wallets;\n  },\n  async _fetchWalletImage(imageId) {\n    const imageUrl = \"\".concat(api.baseUrl, \"/getWalletImage/\").concat(imageId);\n    const blob = await api.getBlob({\n      path: imageUrl,\n      params: ApiController._getSdkProperties()\n    });\n    AssetController.setWalletImage(imageId, URL.createObjectURL(blob));\n  },\n  async _fetchNetworkImage(imageId) {\n    const imageUrl = \"\".concat(api.baseUrl, \"/public/getAssetImage/\").concat(imageId);\n    const blob = await api.getBlob({\n      path: imageUrl,\n      params: ApiController._getSdkProperties()\n    });\n    AssetController.setNetworkImage(imageId, URL.createObjectURL(blob));\n  },\n  async _fetchConnectorImage(imageId) {\n    const imageUrl = \"\".concat(api.baseUrl, \"/public/getAssetImage/\").concat(imageId);\n    const blob = await api.getBlob({\n      path: imageUrl,\n      params: ApiController._getSdkProperties()\n    });\n    AssetController.setConnectorImage(imageId, URL.createObjectURL(blob));\n  },\n  async _fetchCurrencyImage(countryCode) {\n    const imageUrl = \"\".concat(api.baseUrl, \"/public/getCurrencyImage/\").concat(countryCode);\n    const blob = await api.getBlob({\n      path: imageUrl,\n      params: ApiController._getSdkProperties()\n    });\n    AssetController.setCurrencyImage(countryCode, URL.createObjectURL(blob));\n  },\n  async _fetchTokenImage(symbol) {\n    const imageUrl = \"\".concat(api.baseUrl, \"/public/getTokenImage/\").concat(symbol);\n    const blob = await api.getBlob({\n      path: imageUrl,\n      params: ApiController._getSdkProperties()\n    });\n    AssetController.setTokenImage(symbol, URL.createObjectURL(blob));\n  },\n  _filterWalletsByPlatform(wallets) {\n    const walletsLength = wallets.length;\n    const filteredWallets = CoreHelperUtil.isMobile() ? wallets === null || wallets === void 0 ? void 0 : wallets.filter(w => {\n      if (w.mobile_link || w.webapp_link) {\n        return true;\n      }\n      const customDeeplinkWalletIds = Object.values(CUSTOM_DEEPLINK_WALLETS).map(wallet => wallet.id);\n      return customDeeplinkWalletIds.includes(w.id);\n    }) : wallets;\n    const mobileFilteredOutWalletsLength = walletsLength - filteredWallets.length;\n    return {\n      filteredWallets,\n      mobileFilteredOutWalletsLength\n    };\n  },\n  async fetchProjectConfig() {\n    const response = await api.get({\n      path: '/appkit/v1/config',\n      params: ApiController._getSdkProperties()\n    });\n    return response.features;\n  },\n  async fetchAllowedOrigins() {\n    try {\n      const {\n        allowedOrigins\n      } = await api.get({\n        path: '/projects/v1/origins',\n        params: ApiController._getSdkProperties()\n      });\n      return allowedOrigins;\n    } catch (error) {\n      if (error instanceof Error && error.cause instanceof Response) {\n        const status = error.cause.status;\n        if (status === ConstantsUtil.HTTP_STATUS_CODES.TOO_MANY_REQUESTS) {\n          throw new Error('RATE_LIMITED', {\n            cause: error\n          });\n        }\n        if (status >= ConstantsUtil.HTTP_STATUS_CODES.SERVER_ERROR && status < 600) {\n          throw new Error('SERVER_ERROR', {\n            cause: error\n          });\n        }\n        return [];\n      }\n      return [];\n    }\n  },\n  async fetchNetworkImages() {\n    const requestedCaipNetworks = ChainController.getAllRequestedCaipNetworks();\n    const ids = requestedCaipNetworks === null || requestedCaipNetworks === void 0 ? void 0 : requestedCaipNetworks.map(_ref => {\n      let {\n        assets\n      } = _ref;\n      return assets === null || assets === void 0 ? void 0 : assets.imageId;\n    }).filter(Boolean).filter(imageId => !AssetUtil.getNetworkImageById(imageId));\n    if (ids) {\n      await Promise.allSettled(ids.map(id => ApiController._fetchNetworkImage(id)));\n    }\n  },\n  async fetchConnectorImages() {\n    const {\n      connectors\n    } = ConnectorController.state;\n    const ids = connectors.map(_ref2 => {\n      let {\n        imageId\n      } = _ref2;\n      return imageId;\n    }).filter(Boolean);\n    await Promise.allSettled(ids.map(id => ApiController._fetchConnectorImage(id)));\n  },\n  async fetchCurrencyImages() {\n    let currencies = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    await Promise.allSettled(currencies.map(currency => ApiController._fetchCurrencyImage(currency)));\n  },\n  async fetchTokenImages() {\n    let tokens = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    await Promise.allSettled(tokens.map(token => ApiController._fetchTokenImage(token)));\n  },\n  async fetchWallets(params) {\n    var _params$exclude, _params$include;\n    const exclude = (_params$exclude = params.exclude) !== null && _params$exclude !== void 0 ? _params$exclude : [];\n    const sdkProperties = ApiController._getSdkProperties();\n    if (sdkProperties.sv.startsWith('html-core-')) {\n      exclude.push(...Object.values(CUSTOM_DEEPLINK_WALLETS).map(w => w.id));\n    }\n    const wallets = await api.get({\n      path: '/getWallets',\n      params: _objectSpread(_objectSpread(_objectSpread({}, ApiController._getSdkProperties()), params), {}, {\n        page: String(params.page),\n        entries: String(params.entries),\n        include: (_params$include = params.include) === null || _params$include === void 0 ? void 0 : _params$include.join(','),\n        exclude: exclude.join(',')\n      })\n    });\n    const {\n      filteredWallets,\n      mobileFilteredOutWalletsLength\n    } = ApiController._filterWalletsByPlatform(wallets === null || wallets === void 0 ? void 0 : wallets.data);\n    return {\n      data: filteredWallets || [],\n      // Keep original count for display on main page\n      count: wallets === null || wallets === void 0 ? void 0 : wallets.count,\n      mobileFilteredOutWalletsLength\n    };\n  },\n  async prefetchWalletRanks() {\n    const connectors = ConnectorController.state.connectors;\n    if (!(connectors !== null && connectors !== void 0 && connectors.length)) {\n      return;\n    }\n    const params = {\n      page: 1,\n      entries: 20,\n      badge: 'certified'\n    };\n    params.names = connectors.map(c => c.name).join(',');\n    if (ChainController.state.activeChain === ConstantsUtil.CHAIN.EVM) {\n      const rdnsCandidates = [...connectors.flatMap(c => {\n        var _c$connectors;\n        return ((_c$connectors = c.connectors) === null || _c$connectors === void 0 ? void 0 : _c$connectors.map(sc => {\n          var _sc$info;\n          return (_sc$info = sc.info) === null || _sc$info === void 0 ? void 0 : _sc$info.rdns;\n        })) || [];\n      }), ...connectors.map(c => {\n        var _c$info;\n        return (_c$info = c.info) === null || _c$info === void 0 ? void 0 : _c$info.rdns;\n      })].filter(val => typeof val === 'string' && val.length > 0);\n      if (rdnsCandidates.length) {\n        params.rdns = rdnsCandidates.join(',');\n      }\n    }\n    const {\n      data\n    } = await ApiController.fetchWallets(params);\n    state.explorerWallets = data;\n    const caipNetworkIds = ChainController.getRequestedCaipNetworkIds().join(',');\n    state.explorerFilteredWallets = data.filter(wallet => {\n      var _wallet$chains;\n      return (_wallet$chains = wallet.chains) === null || _wallet$chains === void 0 ? void 0 : _wallet$chains.some(chain => caipNetworkIds.includes(chain));\n    });\n  },\n  async fetchFeaturedWallets() {\n    const {\n      featuredWalletIds\n    } = OptionsController.state;\n    if (featuredWalletIds !== null && featuredWalletIds !== void 0 && featuredWalletIds.length) {\n      var _featuredWalletIds$le;\n      const params = _objectSpread(_objectSpread({}, ApiController._getSdkProperties()), {}, {\n        page: 1,\n        entries: (_featuredWalletIds$le = featuredWalletIds === null || featuredWalletIds === void 0 ? void 0 : featuredWalletIds.length) !== null && _featuredWalletIds$le !== void 0 ? _featuredWalletIds$le : recommendedEntries,\n        include: featuredWalletIds\n      });\n      const {\n        data\n      } = await ApiController.fetchWallets(params);\n      const sortedData = [...data].sort((a, b) => featuredWalletIds.indexOf(a.id) - featuredWalletIds.indexOf(b.id));\n      const images = sortedData.map(d => d.image_id).filter(Boolean);\n      await Promise.allSettled(images.map(id => ApiController._fetchWalletImage(id)));\n      state.featured = sortedData;\n      state.allFeatured = sortedData;\n    }\n  },\n  async fetchRecommendedWallets() {\n    try {\n      state.isFetchingRecommendedWallets = true;\n      const {\n        includeWalletIds,\n        excludeWalletIds,\n        featuredWalletIds\n      } = OptionsController.state;\n      const exclude = [...(excludeWalletIds !== null && excludeWalletIds !== void 0 ? excludeWalletIds : []), ...(featuredWalletIds !== null && featuredWalletIds !== void 0 ? featuredWalletIds : [])].filter(Boolean);\n      const chains = ChainController.getRequestedCaipNetworkIds().join(',');\n      const params = {\n        page: 1,\n        entries: recommendedEntries,\n        include: includeWalletIds,\n        exclude,\n        chains\n      };\n      const {\n        data,\n        count\n      } = await ApiController.fetchWallets(params);\n      const recent = StorageUtil.getRecentWallets();\n      const recommendedImages = data.map(d => d.image_id).filter(Boolean);\n      const recentImages = recent.map(r => r.image_id).filter(Boolean);\n      await Promise.allSettled([...recommendedImages, ...recentImages].map(id => ApiController._fetchWalletImage(id)));\n      state.recommended = data;\n      state.allRecommended = data;\n      state.count = count !== null && count !== void 0 ? count : 0;\n    } catch (_unused) {\n      // Catch silently\n    } finally {\n      state.isFetchingRecommendedWallets = false;\n    }\n  },\n  async fetchWalletsByPage(_ref3) {\n    var _state$mobileFiltered;\n    let {\n      page\n    } = _ref3;\n    const {\n      includeWalletIds,\n      excludeWalletIds,\n      featuredWalletIds\n    } = OptionsController.state;\n    const chains = ChainController.getRequestedCaipNetworkIds().join(',');\n    const exclude = [...state.recommended.map(_ref4 => {\n      let {\n        id\n      } = _ref4;\n      return id;\n    }), ...(excludeWalletIds !== null && excludeWalletIds !== void 0 ? excludeWalletIds : []), ...(featuredWalletIds !== null && featuredWalletIds !== void 0 ? featuredWalletIds : [])].filter(Boolean);\n    const params = {\n      page,\n      entries,\n      include: includeWalletIds,\n      exclude,\n      chains\n    };\n    const {\n      data,\n      count,\n      mobileFilteredOutWalletsLength\n    } = await ApiController.fetchWallets(params);\n    state.mobileFilteredOutWalletsLength = mobileFilteredOutWalletsLength + ((_state$mobileFiltered = state.mobileFilteredOutWalletsLength) !== null && _state$mobileFiltered !== void 0 ? _state$mobileFiltered : 0);\n    const images = data.slice(0, imageCountToFetch).map(w => w.image_id).filter(Boolean);\n    await Promise.allSettled(images.map(id => ApiController._fetchWalletImage(id)));\n    state.wallets = CoreHelperUtil.uniqueBy([...state.wallets, ...ApiController._filterOutExtensions(data)], 'id').filter(w => {\n      var _w$chains;\n      return (_w$chains = w.chains) === null || _w$chains === void 0 ? void 0 : _w$chains.some(chain => chains.includes(chain));\n    });\n    state.count = count > state.count ? count : state.count;\n    state.page = page;\n  },\n  async initializeExcludedWallets(_ref5) {\n    let {\n      ids\n    } = _ref5;\n    const params = {\n      page: 1,\n      entries: ids.length,\n      include: ids\n    };\n    const {\n      data\n    } = await ApiController.fetchWallets(params);\n    if (data) {\n      data.forEach(wallet => {\n        state.excludedWallets.push({\n          rdns: wallet.rdns,\n          name: wallet.name\n        });\n      });\n    }\n  },\n  async searchWallet(_ref6) {\n    let {\n      search,\n      badge\n    } = _ref6;\n    const {\n      includeWalletIds,\n      excludeWalletIds\n    } = OptionsController.state;\n    const chains = ChainController.getRequestedCaipNetworkIds().join(',');\n    state.search = [];\n    const params = {\n      page: 1,\n      entries: 100,\n      search: search === null || search === void 0 ? void 0 : search.trim(),\n      badge_type: badge,\n      include: includeWalletIds,\n      exclude: excludeWalletIds,\n      chains\n    };\n    const {\n      data\n    } = await ApiController.fetchWallets(params);\n    EventsController.sendEvent({\n      type: 'track',\n      event: 'SEARCH_WALLET',\n      properties: {\n        badge: badge !== null && badge !== void 0 ? badge : '',\n        search: search !== null && search !== void 0 ? search : ''\n      }\n    });\n    const images = data.map(w => w.image_id).filter(Boolean);\n    await Promise.allSettled([...images.map(id => ApiController._fetchWalletImage(id)), CoreHelperUtil.wait(300)]);\n    state.search = ApiController._filterOutExtensions(data);\n  },\n  initPromise(key, fetchFn) {\n    const existingPromise = state.promises[key];\n    if (existingPromise) {\n      return existingPromise;\n    }\n    return state.promises[key] = fetchFn();\n  },\n  prefetch() {\n    let {\n      fetchConnectorImages = true,\n      fetchFeaturedWallets = true,\n      fetchRecommendedWallets = true,\n      fetchNetworkImages = true,\n      fetchWalletRanks = true\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const promises = [fetchConnectorImages && ApiController.initPromise('connectorImages', ApiController.fetchConnectorImages), fetchFeaturedWallets && ApiController.initPromise('featuredWallets', ApiController.fetchFeaturedWallets), fetchRecommendedWallets && ApiController.initPromise('recommendedWallets', ApiController.fetchRecommendedWallets), fetchNetworkImages && ApiController.initPromise('networkImages', ApiController.fetchNetworkImages), fetchWalletRanks && ApiController.initPromise('walletRanks', ApiController.prefetchWalletRanks)].filter(Boolean);\n    return Promise.allSettled(promises);\n  },\n  prefetchAnalyticsConfig() {\n    var _OptionsController$st;\n    if ((_OptionsController$st = OptionsController.state.features) !== null && _OptionsController$st !== void 0 && _OptionsController$st.analytics) {\n      ApiController.fetchAnalyticsConfig();\n    }\n  },\n  async fetchAnalyticsConfig() {\n    try {\n      const {\n        isAnalyticsEnabled\n      } = await api.get({\n        path: '/getAnalyticsConfig',\n        params: ApiController._getSdkProperties()\n      });\n      OptionsController.setFeatures({\n        analytics: isAnalyticsEnabled\n      });\n    } catch (error) {\n      OptionsController.setFeatures({\n        analytics: false\n      });\n    }\n  },\n  filterByNamespaces(namespaces) {\n    if (!(namespaces !== null && namespaces !== void 0 && namespaces.length)) {\n      state.featured = state.allFeatured;\n      state.recommended = state.allRecommended;\n      return;\n    }\n    const caipNetworkIds = ChainController.getRequestedCaipNetworkIds().join(',');\n    state.featured = state.allFeatured.filter(wallet => {\n      var _wallet$chains2;\n      return (_wallet$chains2 = wallet.chains) === null || _wallet$chains2 === void 0 ? void 0 : _wallet$chains2.some(chain => caipNetworkIds.includes(chain));\n    });\n    state.recommended = state.allRecommended.filter(wallet => {\n      var _wallet$chains3;\n      return (_wallet$chains3 = wallet.chains) === null || _wallet$chains3 === void 0 ? void 0 : _wallet$chains3.some(chain => caipNetworkIds.includes(chain));\n    });\n    state.filteredWallets = state.wallets.filter(wallet => {\n      var _wallet$chains4;\n      return (_wallet$chains4 = wallet.chains) === null || _wallet$chains4 === void 0 ? void 0 : _wallet$chains4.some(chain => caipNetworkIds.includes(chain));\n    });\n  },\n  clearFilterByNamespaces() {\n    state.filteredWallets = [];\n  },\n  setFilterByNamespace(namespace) {\n    if (!namespace) {\n      state.featured = state.allFeatured;\n      state.recommended = state.allRecommended;\n      return;\n    }\n    const caipNetworkIds = ChainController.getRequestedCaipNetworkIds().join(',');\n    state.featured = state.allFeatured.filter(wallet => {\n      var _wallet$chains5;\n      return (_wallet$chains5 = wallet.chains) === null || _wallet$chains5 === void 0 ? void 0 : _wallet$chains5.some(chain => caipNetworkIds.includes(chain));\n    });\n    state.recommended = state.allRecommended.filter(wallet => {\n      var _wallet$chains6;\n      return (_wallet$chains6 = wallet.chains) === null || _wallet$chains6 === void 0 ? void 0 : _wallet$chains6.some(chain => caipNetworkIds.includes(chain));\n    });\n    state.filteredWallets = state.wallets.filter(wallet => {\n      var _wallet$chains7;\n      return (_wallet$chains7 = wallet.chains) === null || _wallet$chains7 === void 0 ? void 0 : _wallet$chains7.some(chain => caipNetworkIds.includes(chain));\n    });\n  }\n};","map":{"version":3,"names":["proxy","subscribeKey","subKey","ConstantsUtil","AssetUtil","CoreHelperUtil","FetchUtil","CUSTOM_DEEPLINK_WALLETS","StorageUtil","AssetController","ChainController","ConnectorController","EventsController","OptionsController","baseUrl","getApiUrl","api","clientId","entries","recommendedEntries","imageCountToFetch","state","promises","page","count","featured","allFeatured","recommended","allRecommended","wallets","filteredWallets","search","isAnalyticsEnabled","excludedWallets","isFetchingRecommendedWallets","explorerWallets","explorerFilteredWallets","ApiController","key","callback","_getSdkProperties","projectId","sdkType","sdkVersion","st","sv","_filterOutExtensions","isUniversalProvider","filter","w","Boolean","mobile_link","desktop_link","webapp_link","_fetchWalletImage","imageId","imageUrl","concat","blob","getBlob","path","params","setWalletImage","URL","createObjectURL","_fetchNetworkImage","setNetworkImage","_fetchConnectorImage","setConnectorImage","_fetchCurrencyImage","countryCode","setCurrencyImage","_fetchTokenImage","symbol","setTokenImage","_filterWalletsByPlatform","walletsLength","length","isMobile","customDeeplinkWalletIds","Object","values","map","wallet","id","includes","mobileFilteredOutWalletsLength","fetchProjectConfig","response","get","features","fetchAllowedOrigins","allowedOrigins","error","Error","cause","Response","status","HTTP_STATUS_CODES","TOO_MANY_REQUESTS","SERVER_ERROR","fetchNetworkImages","requestedCaipNetworks","getAllRequestedCaipNetworks","ids","_ref","assets","getNetworkImageById","Promise","allSettled","fetchConnectorImages","connectors","_ref2","fetchCurrencyImages","currencies","arguments","undefined","currency","fetchTokenImages","tokens","token","fetchWallets","_params$exclude","_params$include","exclude","sdkProperties","startsWith","push","_objectSpread","String","include","join","data","prefetchWalletRanks","badge","names","c","name","activeChain","CHAIN","EVM","rdnsCandidates","flatMap","_c$connectors","sc","_sc$info","info","rdns","_c$info","val","caipNetworkIds","getRequestedCaipNetworkIds","_wallet$chains","chains","some","chain","fetchFeaturedWallets","featuredWalletIds","_featuredWalletIds$le","sortedData","sort","a","b","indexOf","images","d","image_id","fetchRecommendedWallets","includeWalletIds","excludeWalletIds","recent","getRecentWallets","recommendedImages","recentImages","r","_unused","fetchWalletsByPage","_ref3","_state$mobileFiltered","_ref4","slice","uniqueBy","_w$chains","initializeExcludedWallets","_ref5","forEach","searchWallet","_ref6","trim","badge_type","sendEvent","type","event","properties","wait","initPromise","fetchFn","existingPromise","prefetch","fetchWalletRanks","prefetchAnalyticsConfig","_OptionsController$st","analytics","fetchAnalyticsConfig","setFeatures","filterByNamespaces","namespaces","_wallet$chains2","_wallet$chains3","_wallet$chains4","clearFilterByNamespaces","setFilterByNamespace","namespace","_wallet$chains5","_wallet$chains6","_wallet$chains7"],"sources":["../../../../src/controllers/ApiController.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}