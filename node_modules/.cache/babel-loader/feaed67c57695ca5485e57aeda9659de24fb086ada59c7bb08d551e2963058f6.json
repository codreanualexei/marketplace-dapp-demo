{"ast":null,"code":"import { ConstantsUtil } from '@reown/appkit-common';\nimport { ChainController } from '../controllers/ChainController.js';\nimport { ConnectorController } from '../controllers/ConnectorController.js';\nimport { RouterController } from '../controllers/RouterController.js';\nexport const NetworkUtil = {\n  /**\n   * Function to handle the network switch.\n   * This function has variety of conditions to handle the network switch depending on the connectors or namespace's connection states.\n   * @param args.network - The network to switch to.\n   * @param args.shouldConfirmSwitch - Whether to confirm the switch. If true, the user will be asked to confirm the switch if necessary.\n   * @returns void\n   */\n  onSwitchNetwork({\n    network,\n    ignoreSwitchConfirmation = false\n  }) {\n    const currentNetwork = ChainController.state.activeCaipNetwork;\n    const currentNamespace = ChainController.state.activeChain;\n    const routerData = RouterController.state.data;\n    const isSameNetwork = network.id === currentNetwork?.id;\n    if (isSameNetwork) {\n      return;\n    }\n    const isCurrentNamespaceConnected = Boolean(ChainController.getAccountData(currentNamespace)?.address);\n    const isNextNamespaceConnected = Boolean(ChainController.getAccountData(network.chainNamespace)?.address);\n    const isDifferentNamespace = network.chainNamespace !== currentNamespace;\n    const connectorId = ConnectorController.getConnectorId(currentNamespace);\n    /**\n     * If the network is supported by the auth connector, we don't need to show switch active chain view.\n     * But there are some cases like switching from Ethereum to Bitcoin where Bitcoin is not supported by the auth connector and users should connect with another connector.\n     */\n    const isConnectedWithAuth = connectorId === ConstantsUtil.CONNECTOR_ID.AUTH;\n    const isSupportedForAuthConnector = ConstantsUtil.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(c => c === network.chainNamespace);\n    /**\n     * 1. If the ignoreSwitchConfirmation is set to true, we should switch to the network,\n     * 2. If user connected with auth connector and the next network is supported by the auth connector,\n     * we should switch to the network without confirmation screen.\n     */\n    if (ignoreSwitchConfirmation || isConnectedWithAuth && isSupportedForAuthConnector) {\n      RouterController.push('SwitchNetwork', {\n        ...routerData,\n        network\n      });\n    } else if (\n    /**\n     * If user switching to a different namespace and next namespace is not connected, we need to show switch active chain view for confirmation first.\n     */\n    isCurrentNamespaceConnected && isDifferentNamespace && !isNextNamespaceConnected) {\n      RouterController.push('SwitchActiveChain', {\n        switchToChain: network.chainNamespace,\n        navigateTo: 'Connect',\n        navigateWithReplace: true,\n        network\n      });\n    } else {\n      RouterController.push('SwitchNetwork', {\n        ...routerData,\n        network\n      });\n    }\n  }\n};","map":{"version":3,"names":["ConstantsUtil","ChainController","ConnectorController","RouterController","NetworkUtil","onSwitchNetwork","network","ignoreSwitchConfirmation","currentNetwork","state","activeCaipNetwork","currentNamespace","activeChain","routerData","data","isSameNetwork","id","isCurrentNamespaceConnected","Boolean","getAccountData","address","isNextNamespaceConnected","chainNamespace","isDifferentNamespace","connectorId","getConnectorId","isConnectedWithAuth","CONNECTOR_ID","AUTH","isSupportedForAuthConnector","AUTH_CONNECTOR_SUPPORTED_CHAINS","find","c","push","switchToChain","navigateTo","navigateWithReplace"],"sources":["../../../../src/utils/NetworkUtil.ts"],"sourcesContent":[null],"mappings":"AAAA,SAA2BA,aAAa,QAAQ,sBAAsB;AAEtE,SAASC,eAAe,QAAQ,mCAAmC;AACnE,SAASC,mBAAmB,QAAQ,uCAAuC;AAC3E,SAASC,gBAAgB,QAAQ,oCAAoC;AAErE,OAAO,MAAMC,WAAW,GAAG;EACzB;;;;;;;EAOAC,eAAeA,CAAC;IACdC,OAAO;IACPC,wBAAwB,GAAG;EAAK,CAIjC;IACC,MAAMC,cAAc,GAAGP,eAAe,CAACQ,KAAK,CAACC,iBAAiB;IAC9D,MAAMC,gBAAgB,GAAGV,eAAe,CAACQ,KAAK,CAACG,WAAW;IAC1D,MAAMC,UAAU,GAAGV,gBAAgB,CAACM,KAAK,CAACK,IAAI;IAC9C,MAAMC,aAAa,GAAGT,OAAO,CAACU,EAAE,KAAKR,cAAc,EAAEQ,EAAE;IAEvD,IAAID,aAAa,EAAE;MACjB;IACF;IAEA,MAAME,2BAA2B,GAAGC,OAAO,CACzCjB,eAAe,CAACkB,cAAc,CAACR,gBAAgB,CAAC,EAAES,OAAO,CAC1D;IACD,MAAMC,wBAAwB,GAAGH,OAAO,CACtCjB,eAAe,CAACkB,cAAc,CAACb,OAAO,CAACgB,cAAc,CAAC,EAAEF,OAAO,CAChE;IAED,MAAMG,oBAAoB,GAAGjB,OAAO,CAACgB,cAAc,KAAKX,gBAAgB;IACxE,MAAMa,WAAW,GAAGtB,mBAAmB,CAACuB,cAAc,CAACd,gBAAgB,CAAC;IAExE;;;;IAIA,MAAMe,mBAAmB,GAAGF,WAAW,KAAKxB,aAAa,CAAC2B,YAAY,CAACC,IAAI;IAC3E,MAAMC,2BAA2B,GAAG7B,aAAa,CAAC8B,+BAA+B,CAACC,IAAI,CACpFC,CAAC,IAAIA,CAAC,KAAK1B,OAAO,CAACgB,cAAc,CAClC;IAED;;;;;IAMA,IAAIf,wBAAwB,IAAKmB,mBAAmB,IAAIG,2BAA4B,EAAE;MACpF1B,gBAAgB,CAAC8B,IAAI,CAAC,eAAe,EAAE;QAAE,GAAGpB,UAAU;QAAEP;MAAO,CAAE,CAAC;IACpE,CAAC,MAAM;IACL;;;IAGAW,2BAA2B,IAC3BM,oBAAoB,IACpB,CAACF,wBAAwB,EACzB;MACAlB,gBAAgB,CAAC8B,IAAI,CAAC,mBAAmB,EAAE;QACzCC,aAAa,EAAE5B,OAAO,CAACgB,cAAc;QACrCa,UAAU,EAAE,SAAS;QACrBC,mBAAmB,EAAE,IAAI;QACzB9B;OACD,CAAC;IACJ,CAAC,MAAM;MACLH,gBAAgB,CAAC8B,IAAI,CAAC,eAAe,EAAE;QAAE,GAAGpB,UAAU;QAAEP;MAAO,CAAE,CAAC;IACpE;EACF;CACD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}