{"ast":null,"code":"import { ConstantsUtil as CommonConstantsUtil } from '@reown/appkit-common';\nimport { ApiController, ChainController, ConnectionController, ConnectorController, CoreHelperUtil, OptionsController, OptionsUtil, StorageUtil } from '@reown/appkit-controllers';\nimport { HelpersUtil } from '@reown/appkit-utils';\nimport { WalletUtil } from './WalletUtil.js';\nexport const ConnectorUtil = {\n  getConnectorsByType(connectors, recommended, featured) {\n    const {\n      customWallets\n    } = OptionsController.state;\n    const recent = StorageUtil.getRecentWallets();\n    const filteredRecommended = WalletUtil.filterOutDuplicateWallets(recommended);\n    const filteredFeatured = WalletUtil.filterOutDuplicateWallets(featured);\n    const multiChain = connectors.filter(connector => connector.type === 'MULTI_CHAIN');\n    const announced = connectors.filter(connector => connector.type === 'ANNOUNCED');\n    const injected = connectors.filter(connector => connector.type === 'INJECTED');\n    const external = connectors.filter(connector => connector.type === 'EXTERNAL');\n    return {\n      custom: customWallets,\n      recent,\n      external,\n      multiChain,\n      announced,\n      injected,\n      recommended: filteredRecommended,\n      featured: filteredFeatured\n    };\n  },\n  showConnector(connector) {\n    var _connector$info;\n    const rdns = (_connector$info = connector.info) === null || _connector$info === void 0 ? void 0 : _connector$info.rdns;\n    const isRDNSExcluded = Boolean(rdns) && ApiController.state.excludedWallets.some(wallet => Boolean(wallet.rdns) && wallet.rdns === rdns);\n    const isNameExcluded = Boolean(connector.name) && ApiController.state.excludedWallets.some(wallet => HelpersUtil.isLowerCaseMatch(wallet.name, connector.name));\n    if (connector.type === 'INJECTED') {\n      const isBrowserWallet = connector.name === 'Browser Wallet';\n      if (isBrowserWallet) {\n        if (!CoreHelperUtil.isMobile()) {\n          return false;\n        }\n        if (CoreHelperUtil.isMobile() && !rdns && !ConnectionController.checkInstalled()) {\n          return false;\n        }\n      }\n      if (isRDNSExcluded || isNameExcluded) {\n        return false;\n      }\n    }\n    if ((connector.type === 'ANNOUNCED' || connector.type === 'EXTERNAL') && (isRDNSExcluded || isNameExcluded)) {\n      return false;\n    }\n    return true;\n  },\n  getIsConnectedWithWC() {\n    const chains = Array.from(ChainController.state.chains.values());\n    const isConnectedWithWC = chains.some(chain => {\n      const connectorId = ConnectorController.getConnectorId(chain.namespace);\n      return connectorId === CommonConstantsUtil.CONNECTOR_ID.WALLET_CONNECT;\n    });\n    return isConnectedWithWC;\n  },\n  getConnectorTypeOrder(_ref) {\n    var _OptionsController$st, _OptionsController$st2;\n    let {\n      recommended,\n      featured,\n      custom,\n      recent,\n      announced,\n      injected,\n      multiChain,\n      external,\n      overriddenConnectors = (_OptionsController$st = (_OptionsController$st2 = OptionsController.state.features) === null || _OptionsController$st2 === void 0 ? void 0 : _OptionsController$st2.connectorTypeOrder) !== null && _OptionsController$st !== void 0 ? _OptionsController$st : []\n    } = _ref;\n    const allConnectors = [{\n      type: 'walletConnect',\n      isEnabled: true\n    }, {\n      type: 'recent',\n      isEnabled: recent.length > 0\n    }, {\n      type: 'injected',\n      isEnabled: [...injected, ...announced, ...multiChain].length > 0\n    }, {\n      type: 'featured',\n      isEnabled: featured.length > 0\n    }, {\n      type: 'custom',\n      isEnabled: custom && custom.length > 0\n    }, {\n      type: 'external',\n      isEnabled: external.length > 0\n    }, {\n      type: 'recommended',\n      isEnabled: recommended.length > 0\n    }];\n    const enabledConnectors = allConnectors.filter(option => option.isEnabled);\n    const enabledConnectorTypes = new Set(enabledConnectors.map(option => option.type));\n    const prioritizedConnectors = overriddenConnectors.filter(type => enabledConnectorTypes.has(type)).map(type => ({\n      type,\n      isEnabled: true\n    }));\n    const remainingConnectors = enabledConnectors.filter(_ref2 => {\n      let {\n        type: enabledConnectorType\n      } = _ref2;\n      const hasPrioritizedConnector = prioritizedConnectors.some(_ref3 => {\n        let {\n          type: prioritizedConnectorType\n        } = _ref3;\n        return prioritizedConnectorType === enabledConnectorType;\n      });\n      return !hasPrioritizedConnector;\n    });\n    return Array.from(new Set([...prioritizedConnectors, ...remainingConnectors].map(_ref4 => {\n      let {\n        type\n      } = _ref4;\n      return type;\n    })));\n  },\n  sortConnectorsByExplorerWallet(connectors) {\n    return [...connectors].sort((a, b) => {\n      if (a.explorerWallet && b.explorerWallet) {\n        var _a$explorerWallet$ord, _b$explorerWallet$ord;\n        return ((_a$explorerWallet$ord = a.explorerWallet.order) !== null && _a$explorerWallet$ord !== void 0 ? _a$explorerWallet$ord : 0) - ((_b$explorerWallet$ord = b.explorerWallet.order) !== null && _b$explorerWallet$ord !== void 0 ? _b$explorerWallet$ord : 0);\n      }\n      if (a.explorerWallet) {\n        return -1;\n      }\n      if (b.explorerWallet) {\n        return 1;\n      }\n      return 0;\n    });\n  },\n  getAuthName(_ref5) {\n    let {\n      email,\n      socialUsername,\n      socialProvider\n    } = _ref5;\n    if (socialUsername) {\n      if (socialProvider && socialProvider === 'discord' && socialUsername.endsWith('0')) {\n        return socialUsername.slice(0, -1);\n      }\n      return socialUsername;\n    }\n    return email.length > 30 ? \"\".concat(email.slice(0, -3), \"...\") : email;\n  },\n  async fetchProviderData(connector) {\n    try {\n      var _connector$provider, _connector$provider2;\n      if (connector.name === 'Browser Wallet' && !CoreHelperUtil.isMobile()) {\n        return {\n          accounts: [],\n          chainId: undefined\n        };\n      }\n      if (connector.id === CommonConstantsUtil.CONNECTOR_ID.AUTH) {\n        return {\n          accounts: [],\n          chainId: undefined\n        };\n      }\n      const [accounts, chainId] = await Promise.all([(_connector$provider = connector.provider) === null || _connector$provider === void 0 ? void 0 : _connector$provider.request({\n        method: 'eth_accounts'\n      }), (_connector$provider2 = connector.provider) === null || _connector$provider2 === void 0 ? void 0 : _connector$provider2.request({\n        method: 'eth_chainId'\n      }).then(hexChainId => Number(hexChainId))]);\n      return {\n        accounts,\n        chainId\n      };\n    } catch (err) {\n      console.warn(\"Failed to fetch provider data for \".concat(connector.name), err);\n      return {\n        accounts: [],\n        chainId: undefined\n      };\n    }\n  },\n  getFilteredCustomWallets(wallets) {\n    const recent = StorageUtil.getRecentWallets();\n    const connectorRDNSs = ConnectorController.state.connectors.map(connector => {\n      var _connector$info2;\n      return (_connector$info2 = connector.info) === null || _connector$info2 === void 0 ? void 0 : _connector$info2.rdns;\n    }).filter(Boolean);\n    const recentRDNSs = recent.map(wallet => wallet.rdns).filter(Boolean);\n    const allRDNSs = connectorRDNSs.concat(recentRDNSs);\n    if (allRDNSs.includes('io.metamask.mobile') && CoreHelperUtil.isMobile()) {\n      const index = allRDNSs.indexOf('io.metamask.mobile');\n      allRDNSs[index] = 'io.metamask';\n    }\n    const filtered = wallets.filter(wallet => !allRDNSs.includes(String(wallet === null || wallet === void 0 ? void 0 : wallet.rdns)));\n    return filtered;\n  },\n  hasWalletConnector(wallet) {\n    return ConnectorController.state.connectors.some(connector => connector.id === wallet.id || connector.name === wallet.name);\n  },\n  isWalletCompatibleWithCurrentChain(wallet) {\n    const currentNamespace = ChainController.state.activeChain;\n    if (currentNamespace && wallet.chains) {\n      return wallet.chains.some(c => {\n        const chainNamespace = c.split(':')[0];\n        return currentNamespace === chainNamespace;\n      });\n    }\n    return true;\n  },\n  getFilteredRecentWallets() {\n    const recentWallets = StorageUtil.getRecentWallets();\n    const filteredRecentWallets = recentWallets.filter(wallet => !WalletUtil.isExcluded(wallet)).filter(wallet => !this.hasWalletConnector(wallet)).filter(wallet => this.isWalletCompatibleWithCurrentChain(wallet));\n    return filteredRecentWallets;\n  },\n  getCappedRecommendedWallets(wallets) {\n    const {\n      connectors\n    } = ConnectorController.state;\n    const {\n      customWallets,\n      featuredWalletIds\n    } = OptionsController.state;\n    const wcConnector = connectors.find(c => c.id === 'walletConnect');\n    const injectedConnectors = connectors.filter(c => c.type === 'INJECTED' || c.type === 'ANNOUNCED' || c.type === 'MULTI_CHAIN');\n    if (!wcConnector && !injectedConnectors.length && !(customWallets !== null && customWallets !== void 0 && customWallets.length)) {\n      return [];\n    }\n    const isEmailEnabled = OptionsUtil.isEmailEnabled();\n    const isSocialsEnabled = OptionsUtil.isSocialsEnabled();\n    const injectedWallets = injectedConnectors.filter(i => i.name !== 'Browser Wallet');\n    const featuredWalletAmount = (featuredWalletIds === null || featuredWalletIds === void 0 ? void 0 : featuredWalletIds.length) || 0;\n    const customWalletAmount = (customWallets === null || customWallets === void 0 ? void 0 : customWallets.length) || 0;\n    const injectedWalletAmount = injectedWallets.length || 0;\n    const emailWalletAmount = isEmailEnabled ? 1 : 0;\n    const socialWalletAmount = isSocialsEnabled ? 1 : 0;\n    const walletsDisplayed = featuredWalletAmount + customWalletAmount + injectedWalletAmount + emailWalletAmount + socialWalletAmount;\n    const DISPLAYED_WALLETS_AMOUNT = 4;\n    const sliceAmount = Math.max(0, DISPLAYED_WALLETS_AMOUNT - walletsDisplayed);\n    if (sliceAmount <= 0) {\n      return [];\n    }\n    const filtered = WalletUtil.filterOutDuplicateWallets(wallets);\n    return filtered.slice(0, sliceAmount);\n  }\n};","map":{"version":3,"names":["ConstantsUtil","CommonConstantsUtil","ApiController","ChainController","ConnectionController","ConnectorController","CoreHelperUtil","OptionsController","OptionsUtil","StorageUtil","HelpersUtil","WalletUtil","ConnectorUtil","getConnectorsByType","connectors","recommended","featured","customWallets","state","recent","getRecentWallets","filteredRecommended","filterOutDuplicateWallets","filteredFeatured","multiChain","filter","connector","type","announced","injected","external","custom","showConnector","_connector$info","rdns","info","isRDNSExcluded","Boolean","excludedWallets","some","wallet","isNameExcluded","name","isLowerCaseMatch","isBrowserWallet","isMobile","checkInstalled","getIsConnectedWithWC","chains","Array","from","values","isConnectedWithWC","chain","connectorId","getConnectorId","namespace","CONNECTOR_ID","WALLET_CONNECT","getConnectorTypeOrder","_ref","_OptionsController$st","_OptionsController$st2","overriddenConnectors","features","connectorTypeOrder","allConnectors","isEnabled","length","enabledConnectors","option","enabledConnectorTypes","Set","map","prioritizedConnectors","has","remainingConnectors","_ref2","enabledConnectorType","hasPrioritizedConnector","_ref3","prioritizedConnectorType","_ref4","sortConnectorsByExplorerWallet","sort","a","b","explorerWallet","_a$explorerWallet$ord","_b$explorerWallet$ord","order","getAuthName","_ref5","email","socialUsername","socialProvider","endsWith","slice","concat","fetchProviderData","_connector$provider","_connector$provider2","accounts","chainId","undefined","id","AUTH","Promise","all","provider","request","method","then","hexChainId","Number","err","console","warn","getFilteredCustomWallets","wallets","connectorRDNSs","_connector$info2","recentRDNSs","allRDNSs","includes","index","indexOf","filtered","String","hasWalletConnector","isWalletCompatibleWithCurrentChain","currentNamespace","activeChain","c","chainNamespace","split","getFilteredRecentWallets","recentWallets","filteredRecentWallets","isExcluded","getCappedRecommendedWallets","featuredWalletIds","wcConnector","find","injectedConnectors","isEmailEnabled","isSocialsEnabled","injectedWallets","i","featuredWalletAmount","customWalletAmount","injectedWalletAmount","emailWalletAmount","socialWalletAmount","walletsDisplayed","DISPLAYED_WALLETS_AMOUNT","sliceAmount","Math","max"],"sources":["../../../../src/utils/ConnectorUtil.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}