{"ast":null,"code":"var _jsxFileName = \"/Users/alex.codreanu/Desktop/marketplace-dapp/src/Pages/Royalties.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useWallet } from '../contexts/WalletContext';\nimport { useMarketplaceSDK } from '../hooks/useMarketplaceSDK';\nimport { ethers } from 'ethers';\nimport './Royalties.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Royalties = () => {\n  _s();\n  const {\n    account\n  } = useWallet();\n  const sdk = useMarketplaceSDK();\n  const [splitterBalances, setSplitterBalances] = useState([]);\n  const [marketplaceFees, setMarketplaceFees] = useState('0');\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [withdrawing, setWithdrawing] = useState(null);\n  useEffect(() => {\n    if (sdk && account) {\n      loadBalances();\n      checkAdmin();\n    }\n  }, [sdk, account]);\n  const loadBalances = async () => {\n    if (!sdk || !account) return;\n    setIsLoading(true);\n    setError(null);\n    try {\n      // Load marketplace fees first (quick)\n      try {\n        const fees = await sdk.getMarketplaceFees();\n        if (fees) {\n          setMarketplaceFees(ethers.formatEther(fees));\n        }\n      } catch (feeError) {\n        console.warn('Could not fetch marketplace fees:', feeError);\n        setMarketplaceFees('0');\n      }\n\n      // Skip splitter balances for now to avoid RPC rate limiting\n      // User can manually check if needed\n      console.log('Skipping automatic splitter balance check (can cause RPC errors)');\n      setSplitterBalances([]);\n    } catch (err) {\n      console.error('Error loading balances:', err);\n      setSplitterBalances([]);\n      setMarketplaceFees('0');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const checkAdmin = async () => {\n    if (!sdk) return;\n    try {\n      const admin = await sdk.isAdmin();\n      setIsAdmin(admin);\n    } catch (err) {\n      console.error('Error checking admin status:', err);\n    }\n  };\n  const handleWithdrawFromSplitter = async splitterAddress => {\n    if (!sdk) return;\n    const confirmed = window.confirm(`Withdraw your royalties from this splitter?`);\n    if (!confirmed) return;\n    setWithdrawing(splitterAddress);\n    try {\n      const result = await sdk.withdrawRoyaltyFromSplitter(splitterAddress);\n      if (result) {\n        alert(`Withdrawal successful! Transaction: ${result.transactionHash}\\nAmount: ${result.withdrawn} MATIC`);\n        await loadBalances();\n      } else {\n        alert('Withdrawal failed. Please try again.');\n      }\n    } catch (err) {\n      console.error('Error withdrawing:', err);\n      alert(`Error: ${err.message || 'Failed to withdraw'}`);\n    } finally {\n      setWithdrawing(null);\n    }\n  };\n  const handleWithdrawAll = async () => {\n    if (!sdk) return;\n    const totalAmount = splitterBalances.reduce((sum, b) => sum + parseFloat(b.balance), 0);\n    const confirmed = window.confirm(`Withdraw all royalties from ${splitterBalances.length} splitter(s)?\\nTotal: ${totalAmount.toFixed(4)} MATIC`);\n    if (!confirmed) return;\n    setWithdrawing('all');\n    try {\n      const results = await sdk.withdrawAllRoyaltyFees();\n      if (results && results.length > 0) {\n        const totalWithdrawn = results.reduce((sum, r) => sum + parseFloat(r.withdrawn), 0);\n        alert(`Successfully withdrew from ${results.length} splitter(s)!\\nTotal: ${totalWithdrawn.toFixed(4)} MATIC`);\n        await loadBalances();\n      } else {\n        alert('No funds to withdraw or withdrawal failed.');\n      }\n    } catch (err) {\n      console.error('Error withdrawing all:', err);\n      alert(`Error: ${err.message || 'Failed to withdraw'}`);\n    } finally {\n      setWithdrawing(null);\n    }\n  };\n  const handleWithdrawMarketplaceFees = async () => {\n    if (!sdk) return;\n    const confirmed = window.confirm(`Withdraw marketplace fees?\\nAmount: ${marketplaceFees} MATIC`);\n    if (!confirmed) return;\n    setWithdrawing('marketplace');\n    try {\n      const txHash = await sdk.withdrawMarketPlaceFees();\n      if (txHash) {\n        alert(`Marketplace fees withdrawn successfully! Transaction: ${txHash}`);\n        await loadBalances();\n      } else {\n        alert('Withdrawal failed. Make sure you are an admin and there are fees to withdraw.');\n      }\n    } catch (err) {\n      console.error('Error withdrawing marketplace fees:', err);\n      alert(`Error: ${err.message || 'Failed to withdraw marketplace fees'}`);\n    } finally {\n      setWithdrawing(null);\n    }\n  };\n  const formatAddress = address => {\n    return `${address.slice(0, 6)}...${address.slice(-4)}`;\n  };\n  const getTotalRoyalties = () => {\n    return splitterBalances.reduce((sum, b) => sum + parseFloat(b.balance), 0);\n  };\n  if (!account) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"royalties\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"connect-prompt\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Connect Your Wallet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please connect your wallet to view your royalties\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this);\n  }\n  if (isLoading && splitterBalances.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"royalties\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading balances...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"royalties\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"royalties-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Royalties & Fees\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Manage your earnings from the marketplace\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-banner\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"summary-cards\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-icon\",\n            children: \"\\uD83D\\uDCB0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"card-label\",\n              children: \"Total Royalties\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"card-value\",\n              children: [getTotalRoyalties().toFixed(4), \" MATIC\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-icon\",\n            children: \"\\uD83D\\uDCCA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"card-label\",\n              children: \"Splitter Contracts\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"card-value\",\n              children: splitterBalances.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), isAdmin && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-card admin\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-icon\",\n            children: \"\\u2699\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"card-label\",\n              children: \"Marketplace Fees\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"card-value\",\n              children: [parseFloat(marketplaceFees).toFixed(4), \" MATIC\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"royalties-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"section-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"section-title\",\n            children: \"Your Royalties (Creator/Minter)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"action-button secondary\",\n            onClick: async () => {\n              if (!sdk || !account) return;\n              setIsLoading(true);\n              try {\n                const balances = await sdk.getSplitterBalanceOfWallet(account);\n                setSplitterBalances(balances || []);\n              } catch (err) {\n                console.error('Error loading splitters:', err);\n                alert('Error loading royalties. The collection might be empty or RPC is rate limiting.');\n              } finally {\n                setIsLoading(false);\n              }\n            },\n            disabled: isLoading,\n            children: isLoading ? 'Loading...' : 'Check Royalty Balances'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this), splitterBalances.length > 0 && getTotalRoyalties() > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"action-button primary\",\n            onClick: handleWithdrawAll,\n            disabled: withdrawing !== null,\n            children: withdrawing === 'all' ? 'Withdrawing All...' : 'Withdraw All'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this), splitterBalances.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Click \\\"Check Royalty Balances\\\" to scan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"This will scan the collection for your royalty earnings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            style: {\n              color: '#999',\n              marginTop: '8px',\n              display: 'block'\n            },\n            children: \"Note: May take time if collection is large\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"royalty-list\",\n          children: splitterBalances.map((balance, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"royalty-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"royalty-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"label\",\n                  children: \"Splitter Contract:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"value\",\n                  children: formatAddress(balance.splitter)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"label\",\n                  children: \"Available Balance:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"value price\",\n                  children: [balance.balance, \" MATIC\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"action-button secondary\",\n              onClick: () => handleWithdrawFromSplitter(balance.splitter),\n              disabled: withdrawing === balance.splitter,\n              children: withdrawing === balance.splitter ? 'Withdrawing...' : 'Withdraw'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 19\n            }, this)]\n          }, balance.splitter, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), isAdmin && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"royalties-section admin-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"section-header\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"section-title\",\n            children: \"Marketplace Fees (Admin Only)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"admin-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"info-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"label\",\n                children: \"Accumulated Fees:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"value price\",\n                children: [parseFloat(marketplaceFees).toFixed(4), \" MATIC\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"info-text\",\n              children: \"As the marketplace owner, you can withdraw accumulated platform fees.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"action-button primary large\",\n            onClick: handleWithdrawMarketplaceFees,\n            disabled: withdrawing === 'marketplace' || parseFloat(marketplaceFees) === 0,\n            children: withdrawing === 'marketplace' ? 'Withdrawing...' : 'Withdraw Marketplace Fees'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u2139\\uFE0F About Royalties\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Creator Royalties:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 17\n            }, this), \" Earned when domains you created are resold\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Minter Royalties:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 17\n            }, this), \" Earned from NFTs you minted\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Splitter Contracts:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 17\n            }, this), \" Automatically distribute royalties to creators and minters\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this), isAdmin && /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Marketplace Fees:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 29\n            }, this), \" Platform fees from all sales (admin only)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 191,\n    columnNumber: 5\n  }, this);\n};\n_s(Royalties, \"ZKUrTlHLz7yqMlD6hAkYbWy6odU=\", false, function () {\n  return [useWallet, useMarketplaceSDK];\n});\n_c = Royalties;\nexport default Royalties;\nvar _c;\n$RefreshReg$(_c, \"Royalties\");","map":{"version":3,"names":["React","useState","useEffect","useWallet","useMarketplaceSDK","ethers","jsxDEV","_jsxDEV","Royalties","_s","account","sdk","splitterBalances","setSplitterBalances","marketplaceFees","setMarketplaceFees","isAdmin","setIsAdmin","isLoading","setIsLoading","error","setError","withdrawing","setWithdrawing","loadBalances","checkAdmin","fees","getMarketplaceFees","formatEther","feeError","console","warn","log","err","admin","handleWithdrawFromSplitter","splitterAddress","confirmed","window","confirm","result","withdrawRoyaltyFromSplitter","alert","transactionHash","withdrawn","message","handleWithdrawAll","totalAmount","reduce","sum","b","parseFloat","balance","length","toFixed","results","withdrawAllRoyaltyFees","totalWithdrawn","r","handleWithdrawMarketplaceFees","txHash","withdrawMarketPlaceFees","formatAddress","address","slice","getTotalRoyalties","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","balances","getSplitterBalanceOfWallet","disabled","style","color","marginTop","display","map","index","splitter","_c","$RefreshReg$"],"sources":["/Users/alex.codreanu/Desktop/marketplace-dapp/src/Pages/Royalties.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useWallet } from '../contexts/WalletContext';\nimport { useMarketplaceSDK } from '../hooks/useMarketplaceSDK';\nimport { SplitterBalance } from '../sdk/MarketplaceSDK';\nimport { ethers } from 'ethers';\nimport './Royalties.css';\n\nconst Royalties: React.FC = () => {\n  const { account } = useWallet();\n  const sdk = useMarketplaceSDK();\n  const [splitterBalances, setSplitterBalances] = useState<SplitterBalance[]>([]);\n  const [marketplaceFees, setMarketplaceFees] = useState<string>('0');\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [withdrawing, setWithdrawing] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (sdk && account) {\n      loadBalances();\n      checkAdmin();\n    }\n  }, [sdk, account]);\n\n  const loadBalances = async () => {\n    if (!sdk || !account) return;\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      // Load marketplace fees first (quick)\n      try {\n        const fees = await sdk.getMarketplaceFees();\n        if (fees) {\n          setMarketplaceFees(ethers.formatEther(fees));\n        }\n      } catch (feeError) {\n        console.warn('Could not fetch marketplace fees:', feeError);\n        setMarketplaceFees('0');\n      }\n\n      // Skip splitter balances for now to avoid RPC rate limiting\n      // User can manually check if needed\n      console.log('Skipping automatic splitter balance check (can cause RPC errors)');\n      setSplitterBalances([]);\n      \n    } catch (err: any) {\n      console.error('Error loading balances:', err);\n      setSplitterBalances([]);\n      setMarketplaceFees('0');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const checkAdmin = async () => {\n    if (!sdk) return;\n    try {\n      const admin = await sdk.isAdmin();\n      setIsAdmin(admin);\n    } catch (err) {\n      console.error('Error checking admin status:', err);\n    }\n  };\n\n  const handleWithdrawFromSplitter = async (splitterAddress: string) => {\n    if (!sdk) return;\n\n    const confirmed = window.confirm(\n      `Withdraw your royalties from this splitter?`\n    );\n    \n    if (!confirmed) return;\n\n    setWithdrawing(splitterAddress);\n\n    try {\n      const result = await sdk.withdrawRoyaltyFromSplitter(splitterAddress);\n      \n      if (result) {\n        alert(`Withdrawal successful! Transaction: ${result.transactionHash}\\nAmount: ${result.withdrawn} MATIC`);\n        await loadBalances();\n      } else {\n        alert('Withdrawal failed. Please try again.');\n      }\n    } catch (err: any) {\n      console.error('Error withdrawing:', err);\n      alert(`Error: ${err.message || 'Failed to withdraw'}`);\n    } finally {\n      setWithdrawing(null);\n    }\n  };\n\n  const handleWithdrawAll = async () => {\n    if (!sdk) return;\n\n    const totalAmount = splitterBalances.reduce(\n      (sum, b) => sum + parseFloat(b.balance),\n      0\n    );\n\n    const confirmed = window.confirm(\n      `Withdraw all royalties from ${splitterBalances.length} splitter(s)?\\nTotal: ${totalAmount.toFixed(4)} MATIC`\n    );\n    \n    if (!confirmed) return;\n\n    setWithdrawing('all');\n\n    try {\n      const results = await sdk.withdrawAllRoyaltyFees();\n      \n      if (results && results.length > 0) {\n        const totalWithdrawn = results.reduce(\n          (sum, r) => sum + parseFloat(r.withdrawn),\n          0\n        );\n        alert(`Successfully withdrew from ${results.length} splitter(s)!\\nTotal: ${totalWithdrawn.toFixed(4)} MATIC`);\n        await loadBalances();\n      } else {\n        alert('No funds to withdraw or withdrawal failed.');\n      }\n    } catch (err: any) {\n      console.error('Error withdrawing all:', err);\n      alert(`Error: ${err.message || 'Failed to withdraw'}`);\n    } finally {\n      setWithdrawing(null);\n    }\n  };\n\n  const handleWithdrawMarketplaceFees = async () => {\n    if (!sdk) return;\n\n    const confirmed = window.confirm(\n      `Withdraw marketplace fees?\\nAmount: ${marketplaceFees} MATIC`\n    );\n    \n    if (!confirmed) return;\n\n    setWithdrawing('marketplace');\n\n    try {\n      const txHash = await sdk.withdrawMarketPlaceFees();\n      \n      if (txHash) {\n        alert(`Marketplace fees withdrawn successfully! Transaction: ${txHash}`);\n        await loadBalances();\n      } else {\n        alert('Withdrawal failed. Make sure you are an admin and there are fees to withdraw.');\n      }\n    } catch (err: any) {\n      console.error('Error withdrawing marketplace fees:', err);\n      alert(`Error: ${err.message || 'Failed to withdraw marketplace fees'}`);\n    } finally {\n      setWithdrawing(null);\n    }\n  };\n\n  const formatAddress = (address: string) => {\n    return `${address.slice(0, 6)}...${address.slice(-4)}`;\n  };\n\n  const getTotalRoyalties = () => {\n    return splitterBalances.reduce((sum, b) => sum + parseFloat(b.balance), 0);\n  };\n\n  if (!account) {\n    return (\n      <div className=\"royalties\">\n        <div className=\"connect-prompt\">\n          <h2>Connect Your Wallet</h2>\n          <p>Please connect your wallet to view your royalties</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (isLoading && splitterBalances.length === 0) {\n    return (\n      <div className=\"royalties\">\n        <div className=\"loading\">\n          <div className=\"spinner\"></div>\n          <p>Loading balances...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"royalties\">\n      <div className=\"royalties-container\">\n        <div className=\"page-header\">\n          <h1>Royalties & Fees</h1>\n          <p>Manage your earnings from the marketplace</p>\n        </div>\n\n        {error && (\n          <div className=\"error-banner\">\n            {error}\n          </div>\n        )}\n\n        {/* Summary Cards */}\n        <div className=\"summary-cards\">\n          <div className=\"summary-card\">\n            <div className=\"card-icon\">üí∞</div>\n            <div className=\"card-content\">\n              <span className=\"card-label\">Total Royalties</span>\n              <span className=\"card-value\">{getTotalRoyalties().toFixed(4)} MATIC</span>\n            </div>\n          </div>\n\n          <div className=\"summary-card\">\n            <div className=\"card-icon\">üìä</div>\n            <div className=\"card-content\">\n              <span className=\"card-label\">Splitter Contracts</span>\n              <span className=\"card-value\">{splitterBalances.length}</span>\n            </div>\n          </div>\n\n          {isAdmin && (\n            <div className=\"summary-card admin\">\n              <div className=\"card-icon\">‚öôÔ∏è</div>\n              <div className=\"card-content\">\n                <span className=\"card-label\">Marketplace Fees</span>\n                <span className=\"card-value\">{parseFloat(marketplaceFees).toFixed(4)} MATIC</span>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Creator/Minter Royalties */}\n        <section className=\"royalties-section\">\n          <div className=\"section-header\">\n            <h2 className=\"section-title\">Your Royalties (Creator/Minter)</h2>\n            <button \n              className=\"action-button secondary\"\n              onClick={async () => {\n                if (!sdk || !account) return;\n                setIsLoading(true);\n                try {\n                  const balances = await sdk.getSplitterBalanceOfWallet(account);\n                  setSplitterBalances(balances || []);\n                } catch (err) {\n                  console.error('Error loading splitters:', err);\n                  alert('Error loading royalties. The collection might be empty or RPC is rate limiting.');\n                } finally {\n                  setIsLoading(false);\n                }\n              }}\n              disabled={isLoading}\n            >\n              {isLoading ? 'Loading...' : 'Check Royalty Balances'}\n            </button>\n            {splitterBalances.length > 0 && getTotalRoyalties() > 0 && (\n              <button \n                className=\"action-button primary\"\n                onClick={handleWithdrawAll}\n                disabled={withdrawing !== null}\n              >\n                {withdrawing === 'all' ? 'Withdrawing All...' : 'Withdraw All'}\n              </button>\n            )}\n          </div>\n\n          {splitterBalances.length === 0 ? (\n            <div className=\"empty-state\">\n              <h3>Click \"Check Royalty Balances\" to scan</h3>\n              <p>This will scan the collection for your royalty earnings</p>\n              <small style={{ color: '#999', marginTop: '8px', display: 'block' }}>\n                Note: May take time if collection is large\n              </small>\n            </div>\n          ) : (\n            <div className=\"royalty-list\">\n              {splitterBalances.map((balance, index) => (\n                <div key={balance.splitter} className=\"royalty-item\">\n                  <div className=\"royalty-info\">\n                    <div className=\"info-row\">\n                      <span className=\"label\">Splitter Contract:</span>\n                      <span className=\"value\">{formatAddress(balance.splitter)}</span>\n                    </div>\n                    <div className=\"info-row\">\n                      <span className=\"label\">Available Balance:</span>\n                      <span className=\"value price\">{balance.balance} MATIC</span>\n                    </div>\n                  </div>\n                  <button \n                    className=\"action-button secondary\"\n                    onClick={() => handleWithdrawFromSplitter(balance.splitter)}\n                    disabled={withdrawing === balance.splitter}\n                  >\n                    {withdrawing === balance.splitter ? 'Withdrawing...' : 'Withdraw'}\n                  </button>\n                </div>\n              ))}\n            </div>\n          )}\n        </section>\n\n        {/* Marketplace Owner Section */}\n        {isAdmin && (\n          <section className=\"royalties-section admin-section\">\n            <div className=\"section-header\">\n              <h2 className=\"section-title\">Marketplace Fees (Admin Only)</h2>\n            </div>\n\n            <div className=\"admin-card\">\n              <div className=\"admin-info\">\n                <div className=\"info-item\">\n                  <span className=\"label\">Accumulated Fees:</span>\n                  <span className=\"value price\">{parseFloat(marketplaceFees).toFixed(4)} MATIC</span>\n                </div>\n                <p className=\"info-text\">\n                  As the marketplace owner, you can withdraw accumulated platform fees.\n                </p>\n              </div>\n              <button \n                className=\"action-button primary large\"\n                onClick={handleWithdrawMarketplaceFees}\n                disabled={withdrawing === 'marketplace' || parseFloat(marketplaceFees) === 0}\n              >\n                {withdrawing === 'marketplace' ? 'Withdrawing...' : 'Withdraw Marketplace Fees'}\n              </button>\n            </div>\n          </section>\n        )}\n\n        <div className=\"info-box\">\n          <h3>‚ÑπÔ∏è About Royalties</h3>\n          <ul>\n            <li><strong>Creator Royalties:</strong> Earned when domains you created are resold</li>\n            <li><strong>Minter Royalties:</strong> Earned from NFTs you minted</li>\n            <li><strong>Splitter Contracts:</strong> Automatically distribute royalties to creators and minters</li>\n            {isAdmin && <li><strong>Marketplace Fees:</strong> Platform fees from all sales (admin only)</li>}\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Royalties;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}